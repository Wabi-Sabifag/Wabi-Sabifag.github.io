<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"><title>MybatisPlus | 当你抬头仰望星辰时，月辉亲昵双颊</title><meta name="author" content="Wabi-Sabifag"><meta name="copyright" content="Wabi-Sabifag"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="ffffff"><meta name="description" content="1、了解Mybatis-Plus1.1、Mybatis-Plus介绍MyBatis-Plus（简称 MP）是一个 MyBatis 的增强工具，在 MyBatis 的基础上只做增强不做改变，为简化开发、提高效率而生。官网：https:&#x2F;&#x2F;mybatis.plus&#x2F; 或 https:&#x2F;&#x2F;mp.baomidou.com&#x2F; 1.2、代码以及文档文档地址：https:&#x2F;&#x2F;mybatis.plus&#x2F;guide">
<meta property="og:type" content="article">
<meta property="og:title" content="MybatisPlus">
<meta property="og:url" content="https://github.com/Wabi-Sabifag/Wabi-Sabifag.github.io/2023/08/22/MybatisPlus/index.html">
<meta property="og:site_name" content="当你抬头仰望星辰时，月辉亲昵双颊">
<meta property="og:description" content="1、了解Mybatis-Plus1.1、Mybatis-Plus介绍MyBatis-Plus（简称 MP）是一个 MyBatis 的增强工具，在 MyBatis 的基础上只做增强不做改变，为简化开发、提高效率而生。官网：https:&#x2F;&#x2F;mybatis.plus&#x2F; 或 https:&#x2F;&#x2F;mp.baomidou.com&#x2F; 1.2、代码以及文档文档地址：https:&#x2F;&#x2F;mybatis.plus&#x2F;guide">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://github.com/Wabi-Sabifag/Wabi-Sabifag.github.io/img/23.png">
<meta property="article:published_time" content="2023-08-22T13:35:35.000Z">
<meta property="article:modified_time" content="2023-10-15T11:59:17.465Z">
<meta property="article:author" content="Wabi-Sabifag">
<meta property="article:tag" content="Java">
<meta property="article:tag" content="MybatisPlus">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://github.com/Wabi-Sabifag/Wabi-Sabifag.github.io/img/23.png"><link rel="shortcut icon" href="https://safebooru.org//samples/3404/sample_2d70be5f0453c31b5e9ad641db7cf3fb90ba2c23.jpg?3541071"><link rel="canonical" href="https://github.com/Wabi-Sabifag/Wabi-Sabifag.github.io/2023/08/22/MybatisPlus/"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox.min.css" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: {"path":"/search.xml","preload":false,"languages":{"hits_empty":"找不到您查询的内容：${query}"}},
  translate: undefined,
  noticeOutdate: {"limitDay":730,"position":"top","messagePrev":"该版本已经是","messageNext":"天前的内容，请你仔细辨别版本和其他问题😉"},
  highlight: {"plugin":"highlighjs","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":false},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '天',
  date_suffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: undefined,
  lightbox: 'fancybox',
  Snackbar: undefined,
  source: {
    justifiedGallery: {
      js: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery/dist/fjGallery.min.js',
      css: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery/dist/fjGallery.min.css'
    }
  },
  isPhotoFigcaption: true,
  islazyload: false,
  isAnchor: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: 'MybatisPlus',
  isPost: true,
  isHome: false,
  isHighlightShrink: true,
  isToc: true,
  postUpdate: '2023-10-15 19:59:17'
}</script><noscript><style type="text/css">
  #nav {
    opacity: 1
  }
  .justified-gallery img {
    opacity: 1
  }

  #recent-posts time,
  #post-meta time {
    display: inline !important
  }
</style></noscript><script>(win=>{
    win.saveToLocal = {
      set: function setWithExpiry(key, value, ttl) {
        if (ttl === 0) return
        const now = new Date()
        const expiryDay = ttl * 86400000
        const item = {
          value: value,
          expiry: now.getTime() + expiryDay,
        }
        localStorage.setItem(key, JSON.stringify(item))
      },

      get: function getWithExpiry(key) {
        const itemStr = localStorage.getItem(key)

        if (!itemStr) {
          return undefined
        }
        const item = JSON.parse(itemStr)
        const now = new Date()

        if (now.getTime() > item.expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return item.value
      }
    }
  
    win.getScript = url => new Promise((resolve, reject) => {
      const script = document.createElement('script')
      script.src = url
      script.async = true
      script.onerror = reject
      script.onload = script.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        script.onload = script.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(script)
    })
  
      win.activateDarkMode = function () {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      win.activateLightMode = function () {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', 'ffffff')
        }
      }
      const t = saveToLocal.get('theme')
    
          if (t === 'dark') activateDarkMode()
          else if (t === 'light') activateLightMode()
        
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
    const detectApple = () => {
      if(/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
    })(window)</script><link rel="stylesheet" href="/css/style.css"><link rel="preconnect" href="https://fonts.gstatic.com"><link href="https://fonts.googleapis.com/css2?family=IBM+Plex+Mono:ital,wght@1,300&display=swap" rel="stylesheet"><meta name="generator" content="Hexo 5.4.2">
<style>.github-emoji { position: relative; display: inline-block; width: 1.2em; min-height: 1.2em; overflow: hidden; vertical-align: top; color: transparent; }  .github-emoji > span { position: relative; z-index: 10; }  .github-emoji img, .github-emoji .fancybox { margin: 0 !important; padding: 0 !important; border: none !important; outline: none !important; text-decoration: none !important; user-select: none !important; cursor: auto !important; }  .github-emoji img { height: 1.2em !important; width: 1.2em !important; position: absolute !important; left: 50% !important; top: 50% !important; transform: translate(-50%, -50%) !important; user-select: none !important; cursor: auto !important; } .github-emoji-fallback { color: inherit; } .github-emoji-fallback img { opacity: 0 !important; }</style>
<link rel="alternate" href="/atom.xml" title="当你抬头仰望星辰时，月辉亲昵双颊" type="application/atom+xml">
<link rel="stylesheet" href="/css/prism.css" type="text/css">
<link rel="stylesheet" href="/css/prism-line-numbers.css" type="text/css"></head><body><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img is-center"><img src="https://safebooru.org//samples/3404/sample_2d70be5f0453c31b5e9ad641db7cf3fb90ba2c23.jpg?3541071" onerror="onerror=null;src='https://safebooru.org//samples/3404/sample_2d70be5f0453c31b5e9ad641db7cf3fb90ba2c23.jpg?3541071'" alt="avatar"/></div><div class="sidebar-site-data site-data is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">18</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">23</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">27</div></a></div><hr/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 殿首</span></a></div><div class="menus_item"><a class="site-page group hide" href="javascript:void(0);" rel="external nofollow noreferrer"><i class="fa-fw fas fa-moon"></i><span> 吾の博客</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/archives/"><i class="fa-fw fas fa-clock"></i><span> 故往尘飞、吾心犹然</span></a></li><li><a class="site-page child" href="/categories/"><i class="fa-fw fas fa-archive"></i><span> 分类</span></a></li><li><a class="site-page child" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></li></ul></div><div class="menus_item"><a class="site-page group hide" href="javascript:void(0);" rel="external nofollow noreferrer"><i class="fa-fw fas fa-earth"></i><span> 自然科学</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/nature/"><i class="fa-fw fas fa-sun"></i><span> 舒适の自然</span></a></li><li><a class="site-page child" href="/animal/"><i class="fa-fw fas fa-dog"></i><span> 可爱の动物</span></a></li></ul></div><div class="menus_item"><a class="site-page group hide" href="javascript:void(0);" rel="external nofollow noreferrer"><i class="fa-fw fas fa-computer"></i><span> 社会科学</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/science/"><i class="fa-fw fas fa-ruler"></i><span> 理性科学</span></a></li><li><a class="site-page child" href="/history/"><i class="fa-fw fas fa-history"></i><span> 历史</span></a></li><li><a class="site-page child" href="/philosophy/"><i class="fa-fw fas fa-brain"></i><span> 哲学</span></a></li><li><a class="site-page child" href="/psychology/"><i class="fa-fw fas fa-heartbeat"></i><span> 心理</span></a></li></ul></div><div class="menus_item"><a class="site-page group hide" href="javascript:void(0);" rel="external nofollow noreferrer"><i class="fa-fw fas fa-coffee"></i><span> 生活</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/book/"><i class="fa-fw fas fa-book"></i><span> 文学</span></a></li><li><a class="site-page child" href="/music/"><i class="fa-fw fas fa-music"></i><span> 音乐</span></a></li><li><a class="site-page child" href="/images/"><i class="fa-fw fas fa-images"></i><span> 绘画</span></a></li><li><a class="site-page child" href="/hand/"><i class="fa-fw fas fa-hand"></i><span> 雕塑</span></a></li><li><a class="site-page child" href="/mask/"><i class="fa-fw fas fa-balance-scale"></i><span> 戏剧</span></a></li><li><a class="site-page child" href="/city/"><i class="fa-fw fas fa-city"></i><span> 建筑</span></a></li><li><a class="site-page child" href="/movies/"><i class="fa-fw fas fa-film"></i><span> 电影</span></a></li><li><a class="site-page child" href="/sport/"><i class="fa-fw fas fa-basketball"></i><span> 体育</span></a></li><li><a class="site-page child" href="/hospital/"><i class="fa-fw fa fa-star"></i><span> 动漫</span></a></li><li><a class="site-page child" href="/game/"><i class="fa-fw fa fa-game"></i><span> 游戏</span></a></li></ul></div><div class="menus_item"><a class="site-page group hide" href="javascript:void(0);" rel="external nofollow noreferrer"><i class="fa-fw fas fa-list"></i><span> 其他</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/link/"><i class="fa-fw fas fa-compass"></i><span> 其他信息</span></a></li><li><a class="site-page child" href="/about/"><i class="fa-fw fas fa-paper-plane"></i><span> --关于--</span></a></li></ul></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header" style="background-image: url('/img/23.png')"><nav id="nav"><span id="blog_name"><a id="site-name" href="/">当你抬头仰望星辰时，月辉亲昵双颊</a></span><div id="menus"><div id="search-button"><a class="site-page social-icon search"><i class="fas fa-search fa-fw"></i><span> 搜索</span></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 殿首</span></a></div><div class="menus_item"><a class="site-page group hide" href="javascript:void(0);" rel="external nofollow noreferrer"><i class="fa-fw fas fa-moon"></i><span> 吾の博客</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/archives/"><i class="fa-fw fas fa-clock"></i><span> 故往尘飞、吾心犹然</span></a></li><li><a class="site-page child" href="/categories/"><i class="fa-fw fas fa-archive"></i><span> 分类</span></a></li><li><a class="site-page child" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></li></ul></div><div class="menus_item"><a class="site-page group hide" href="javascript:void(0);" rel="external nofollow noreferrer"><i class="fa-fw fas fa-earth"></i><span> 自然科学</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/nature/"><i class="fa-fw fas fa-sun"></i><span> 舒适の自然</span></a></li><li><a class="site-page child" href="/animal/"><i class="fa-fw fas fa-dog"></i><span> 可爱の动物</span></a></li></ul></div><div class="menus_item"><a class="site-page group hide" href="javascript:void(0);" rel="external nofollow noreferrer"><i class="fa-fw fas fa-computer"></i><span> 社会科学</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/science/"><i class="fa-fw fas fa-ruler"></i><span> 理性科学</span></a></li><li><a class="site-page child" href="/history/"><i class="fa-fw fas fa-history"></i><span> 历史</span></a></li><li><a class="site-page child" href="/philosophy/"><i class="fa-fw fas fa-brain"></i><span> 哲学</span></a></li><li><a class="site-page child" href="/psychology/"><i class="fa-fw fas fa-heartbeat"></i><span> 心理</span></a></li></ul></div><div class="menus_item"><a class="site-page group hide" href="javascript:void(0);" rel="external nofollow noreferrer"><i class="fa-fw fas fa-coffee"></i><span> 生活</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/book/"><i class="fa-fw fas fa-book"></i><span> 文学</span></a></li><li><a class="site-page child" href="/music/"><i class="fa-fw fas fa-music"></i><span> 音乐</span></a></li><li><a class="site-page child" href="/images/"><i class="fa-fw fas fa-images"></i><span> 绘画</span></a></li><li><a class="site-page child" href="/hand/"><i class="fa-fw fas fa-hand"></i><span> 雕塑</span></a></li><li><a class="site-page child" href="/mask/"><i class="fa-fw fas fa-balance-scale"></i><span> 戏剧</span></a></li><li><a class="site-page child" href="/city/"><i class="fa-fw fas fa-city"></i><span> 建筑</span></a></li><li><a class="site-page child" href="/movies/"><i class="fa-fw fas fa-film"></i><span> 电影</span></a></li><li><a class="site-page child" href="/sport/"><i class="fa-fw fas fa-basketball"></i><span> 体育</span></a></li><li><a class="site-page child" href="/hospital/"><i class="fa-fw fa fa-star"></i><span> 动漫</span></a></li><li><a class="site-page child" href="/game/"><i class="fa-fw fa fa-game"></i><span> 游戏</span></a></li></ul></div><div class="menus_item"><a class="site-page group hide" href="javascript:void(0);" rel="external nofollow noreferrer"><i class="fa-fw fas fa-list"></i><span> 其他</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/link/"><i class="fa-fw fas fa-compass"></i><span> 其他信息</span></a></li><li><a class="site-page child" href="/about/"><i class="fa-fw fas fa-paper-plane"></i><span> --关于--</span></a></li></ul></div></div><div id="toggle-menu"><a class="site-page"><i class="fas fa-bars fa-fw"></i></a></div></div></nav><div id="post-info"><h1 class="post-title">MybatisPlus</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" datetime="2023-08-22T13:35:35.000Z" title="发表于 2023-08-22 21:35:35">2023-08-22</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2023-10-15T11:59:17.465Z" title="更新于 2023-10-15 19:59:17">2023-10-15</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/Java/">Java</a><i class="fas fa-angle-right post-meta-separator"></i><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/Java/MybatisPlus/">MybatisPlus</a></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-wordcount"><i class="far fa-file-word fa-fw post-meta-icon"></i><span class="post-meta-label">字数总计:</span><span class="word-count">16.3k</span><span class="post-meta-separator">|</span><i class="far fa-clock fa-fw post-meta-icon"></i><span class="post-meta-label">阅读时长:</span><span>83分钟</span></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container"><h1 id="1、了解Mybatis-Plus"><a href="#1、了解Mybatis-Plus" class="headerlink" title="1、了解Mybatis-Plus"></a>1、了解Mybatis-Plus</h1><h2 id="1-1、Mybatis-Plus介绍"><a href="#1-1、Mybatis-Plus介绍" class="headerlink" title="1.1、Mybatis-Plus介绍"></a>1.1、Mybatis-Plus介绍</h2><p>MyBatis-Plus（简称 MP）是一个 MyBatis 的增强工具，在 MyBatis 的基础上只做增强不做改变，为简化开发、提高<br>效率而生。<br>官网：<a target="_blank" rel="noopener external nofollow noreferrer" href="https://mybatis.plus/">https://mybatis.plus/</a> 或 <a target="_blank" rel="noopener external nofollow noreferrer" href="https://mp.baomidou.com/">https://mp.baomidou.com/</a></p>
<h2 id="1-2、代码以及文档"><a href="#1-2、代码以及文档" class="headerlink" title="1.2、代码以及文档"></a>1.2、代码以及文档</h2><p>文档地址：<a target="_blank" rel="noopener external nofollow noreferrer" href="https://mybatis.plus/guide/">https://mybatis.plus/guide/</a><br>源码地址：<a href="https://github.com/baomidou/mybatis-plus">https://github.com/baomidou/mybatis-plus</a></p>
<h2 id="1-3、特性"><a href="#1-3、特性" class="headerlink" title="1.3、特性"></a>1.3、特性</h2><ul>
<li>无侵入：只做增强不做改变，引入它不会对现有工程产生影响，如丝般顺滑</li>
<li>损耗小：启动即会自动注入基本 CURD，性能基本无损耗，直接面向对象操作</li>
<li>强大的 CRUD 操作：内置通用 Mapper、通用 Service，仅仅通过少量配置即可实现单表大部分 CRUD 操作，<br> 更有强大的条件构造器，满足各类使用需求</li>
<li>支持 Lambda 形式调用：通过 Lambda 表达式，方便的编写各类查询条件，无需再担心字段写错</li>
<li>支持多种数据库：支持 MySQL、MariaDB、Oracle、DB2、H2、HSQL、SQLite、Postgre、<br>SQLServer2005、SQLServer 等多种数据库</li>
<li>支持主键自动生成：支持多达 4 种主键策略（内含分布式唯一 ID 生成器 - Sequence），可自由配置，完美解<br>决主键问题</li>
<li>支持 XML 热加载：Mapper 对应的 XML 支持热加载，对于简单的 CRUD 操作，甚至可以无 XML 启动</li>
<li>支持 ActiveRecord 模式：支持 ActiveRecord 形式调用，实体类只需继承 Model 类即可进行强大的 CRUD 操<br>作</li>
<li>支持自定义全局通用操作：支持全局通用方法注入（ Write once, use anywhere ）</li>
<li>支持关键词自动转义：支持数据库关键词（order、key……）自动转义，还可自定义关键词</li>
<li>内置代码生成器：采用代码或者 Maven 插件可快速生成 Mapper 、 Model 、 Service 、 Controller 层代码，<br> 支持模板引擎，更有超多自定义配置等您来使用</li>
<li>内置分页插件：基于 MyBatis 物理分页，开发者无需关心具体操作，配置好插件之后，写分页等同于普通 List<br>查询</li>
<li>内置性能分析插件：可输出 Sql 语句以及其执行时间，建议开发测试时启用该功能，能快速揪出慢查询</li>
<li>内置全局拦截插件：提供全表 delete 、 update 操作智能分析阻断，也可自定义拦截规则，预防误操作</li>
<li>内置 Sql 注入剥离器：支持 Sql 注入剥离，有效预防 Sql 注入攻击</li>
</ul>
<h2 id="1-4、架构"><a href="#1-4、架构" class="headerlink" title="1.4、架构"></a>1.4、架构</h2><p><img src="/../MybatisPlus/1.png" alt="MybatisPlus架构分析图"></p>
<h2 id="1-5、作者"><a href="#1-5、作者" class="headerlink" title="1.5、作者"></a>1.5、作者</h2><p>Mybatis-Plus是由baomidou（苞米豆）组织开发并且开源的，目前该组织大概有30人左右。<br>码云地址：<a target="_blank" rel="noopener external nofollow noreferrer" href="https://gitee.com/organizations/baomidou">https://gitee.com/organizations/baomidou</a><br><img src="/../MybatisPlus/2.png" alt="MybatisPlus团队"></p>
<h1 id="2、快速开始"><a href="#2、快速开始" class="headerlink" title="2、快速开始"></a>2、快速开始</h1><p>对于Mybatis整合MP有常常有三种用法，分别是Mybatis+MP、Spring+Mybatis+MP、Spring Boot+Mybatis+MP。</p>
<h2 id="2-1、创建数据库以及表"><a href="#2-1、创建数据库以及表" class="headerlink" title="2.1、创建数据库以及表"></a>2.1、创建数据库以及表</h2><p><img src="/../MybatisPlus/3.png" alt="数据库的创建"></p>
<pre class="line-numbers language-none"><code class="language-none">-- 创建测试表
CREATE TABLE `tb_user` (
`id` bigint(20) NOT NULL AUTO_INCREMENT COMMENT '主键ID',
`user_name` varchar(20) NOT NULL COMMENT '用户名',
`password` varchar(20) NOT NULL COMMENT '密码',
`name` varchar(30) DEFAULT NULL COMMENT '姓名',
`age` int(11) DEFAULT NULL COMMENT '年龄',
`email` varchar(50) DEFAULT NULL COMMENT '邮箱',
PRIMARY KEY (`id`)
) ENGINE=InnoDB AUTO_INCREMENT=1 DEFAULT CHARSET=utf8;
-- 插入测试数据
INSERT INTO `tb_user` (`id`, `user_name`, `password`, `name`, `age`, `email`) VALUES
('1', 'zhangsan', '123456', '张三', '18', 'test1@itcast.cn');
INSERT INTO `tb_user` (`id`, `user_name`, `password`, `name`, `age`, `email`) VALUES
('2', 'lisi', '123456', '李四', '20', 'test2@itcast.cn');
INSERT INTO `tb_user` (`id`, `user_name`, `password`, `name`, `age`, `email`) VALUES
('3', 'wangwu', '123456', '王五', '28', 'test3@itcast.cn');
INSERT INTO `tb_user` (`id`, `user_name`, `password`, `name`, `age`, `email`) VALUES
('4', 'zhaoliu', '123456', '赵六', '21', 'test4@itcast.cn');
INSERT INTO `tb_user` (`id`, `user_name`, `password`, `name`, `age`, `email`) VALUES
('5', 'sunqi', '123456', '孙七', '24', 'test5@itcast.cn');<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<h2 id="2-2、创建工程"><a href="#2-2、创建工程" class="headerlink" title="2.2、创建工程"></a>2.2、创建工程</h2><pre class="line-numbers language-none"><code class="language-none">导入依赖：
&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;project xmlns="http://maven.apache.org/POM/4.0.0"
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xsi:schemaLocation="http://maven.apache.org/POM/4.0.0
http://maven.apache.org/xsd/maven-4.0.0.xsd"&gt;
&lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;

&lt;groupId&gt;cn.itcast.mp&lt;/groupId&gt;
&lt;artifactId&gt;itcast-mybatis-plus&lt;/artifactId&gt;
&lt;version&gt;1.0-SNAPSHOT&lt;/version&gt;

&lt;modules&gt;
&lt;module&gt;itcast-mybatis-plus-simple&lt;/module&gt;
&lt;/modules&gt;

&lt;packaging&gt;pom&lt;/packaging&gt;

&lt;dependencies&gt;
&lt;!-- mybatis-plus插件依赖 --&gt;
&lt;dependency&gt;
&lt;groupId&gt;com.baomidou&lt;/groupId&gt;
&lt;artifactId&gt;mybatis-plus&lt;/artifactId&gt;
&lt;version&gt;3.1.1&lt;/version&gt;
&lt;/dependency&gt;

&lt;!-- MySql --&gt;
&lt;dependency&gt;
&lt;groupId&gt;mysql&lt;/groupId&gt;
&lt;artifactId&gt;mysql-connector-java&lt;/artifactId&gt;
&lt;version&gt;5.1.47&lt;/version&gt;
&lt;/dependency&gt;

&lt;!-- 连接池 --&gt;
&lt;dependency&gt;
&lt;groupId&gt;com.alibaba&lt;/groupId&gt;
&lt;artifactId&gt;druid&lt;/artifactId&gt;
&lt;version&gt;1.0.11&lt;/version&gt;
&lt;/dependency&gt;

&lt;!--简化bean代码的工具包--&gt;
&lt;dependency&gt;
&lt;groupId&gt;org.projectlombok&lt;/groupId&gt;
&lt;artifactId&gt;lombok&lt;/artifactId&gt;
&lt;optional&gt;true&lt;/optional&gt;
&lt;version&gt;1.18.4&lt;/version&gt;
&lt;/dependency&gt;

&lt;dependency&gt;
&lt;groupId&gt;junit&lt;/groupId&gt;
&lt;artifactId&gt;junit&lt;/artifactId&gt;
&lt;version&gt;4.12&lt;/version&gt;
&lt;/dependency&gt;

&lt;dependency&gt;
&lt;groupId&gt;org.slf4j&lt;/groupId&gt;
&lt;artifactId&gt;slf4j-log4j12&lt;/artifactId&gt;
&lt;version&gt;1.6.4&lt;/version&gt;
&lt;/dependency&gt;

&lt;/dependencies&gt;

&lt;build&gt;
&lt;plugins&gt;
&lt;plugin&gt;
&lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;
&lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;
&lt;configuration&gt;
&lt;source&gt;1.8&lt;/source&gt;
&lt;target&gt;1.8&lt;/target&gt;
&lt;/configuration&gt;
&lt;/plugin&gt;
&lt;/plugins&gt;
&lt;/build&gt;

&lt;/project&gt;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<h2 id="2-3、Mybatis-MP"><a href="#2-3、Mybatis-MP" class="headerlink" title="2.3、Mybatis + MP"></a>2.3、Mybatis + MP</h2><p>下面演示，通过纯Mybatis与Mybatis-Plus整合。</p>
<h3 id="2-3-1、创建子Module"><a href="#2-3-1、创建子Module" class="headerlink" title="2.3.1、创建子Module"></a>2.3.1、创建子Module</h3><pre class="line-numbers language-none"><code class="language-none">&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;project xmlns="http://maven.apache.org/POM/4.0.0"
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xsi:schemaLocation="http://maven.apache.org/POM/4.0.0
http://maven.apache.org/xsd/maven-4.0.0.xsd"&gt;

&lt;parent&gt;
&lt;artifactId&gt;itcast-mybatis-plus&lt;/artifactId&gt;
&lt;groupId&gt;cn.itcast.mp&lt;/groupId&gt;
&lt;version&gt;1.0-SNAPSHOT&lt;/version&gt;
&lt;/parent&gt;

&lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;
&lt;packaging&gt;jar&lt;/packaging&gt;

&lt;artifactId&gt;itcast-mybatis-plus-simple&lt;/artifactId&gt;

&lt;/project&gt;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>log4j.properties：</p>
<pre class="line-numbers language-none"><code class="language-none">log4j.rootLogger=DEBUG,A1
log4j.appender.A1=org.apache.log4j.ConsoleAppender
log4j.appender.A1.layout=org.apache.log4j.PatternLayout
log4j.appender.A1.layout.ConversionPattern=[%t] [%c]-[%p] %m%n<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>

<h3 id="2-3-2、Mybatis实现查询User"><a href="#2-3-2、Mybatis实现查询User" class="headerlink" title="2.3.2、Mybatis实现查询User"></a>2.3.2、Mybatis实现查询User</h3><p>第一步，编写mybatis-config.xml文件：</p>
<pre class="line-numbers language-none"><code class="language-none">&lt;?xml version="1.0" encoding="UTF-8" ?&gt;
&lt;!DOCTYPE configuration
PUBLIC "-//mybatis.org//DTD Config 3.0//EN"
"http://mybatis.org/dtd/mybatis-3-config.dtd"&gt;

&lt;configuration&gt;

&lt;environments default="development"&gt;
&lt;environment id="development"&gt;
&lt;transactionManager type="JDBC"/&gt;
&lt;dataSource type="POOLED"&gt;
&lt;property name="driver" value="com.mysql.jdbc.Driver"/&gt;
&lt;property name="url" value="jdbc:mysql://127.0.0.1:3306/mp?
useUnicode=true&amp;characterEncoding=utf8&amp;autoReconnect=true&amp;allowMultiQuerie
s=true&amp;useSSL=false"/&gt;

&lt;property name="username" value="root"/&gt;
&lt;property name="password" value="root"/&gt;
&lt;/dataSource&gt;
&lt;/environment&gt;

&lt;/environments&gt;

&lt;mappers&gt;
&lt;mapper resource="UserMapper.xml"/&gt;
&lt;/mappers&gt;

&lt;/configuration&gt;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>第二步，编写User实体对象：（这里使用lombok进行了进化bean操作）</p>
<pre class="line-numbers language-none"><code class="language-none">package cn.itcast.mp.simple.pojo;

import lombok.AllArgsConstructor;
import lombok.Data;
import lombok.NoArgsConstructor;

@Data
@NoArgsConstructor
@AllArgsConstructor
public class User {

private Long id;
private String userName;
private String password;
private String name;
private Integer age;
private String email;

}<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>第三步，编写UserMapper接口：</p>
<pre class="line-numbers language-none"><code class="language-none">package cn.itcast.mp.simple.mapper;

import cn.itcast.mp.simple.pojo.User;
import java.util.List;

public interface UserMapper {
List&lt;User&gt; findAll();
}<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>第四步，编写UserMapper.xml文件：</p>
<pre class="line-numbers language-none"><code class="language-none">&lt;?xml version="1.0" encoding="UTF-8" ?&gt;
&lt;!DOCTYPE mapper
PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
"http://mybatis.org/dtd/mybatis-3-mapper.dtd"&gt;

&lt;mapper namespace="cn.itcast.mp.simple.mapper.UserMapper"&gt;

&lt;select id="findAll" resultType="cn.itcast.mp.simple.pojo.User"&gt;
select * from tb_user
&lt;/select&gt;

&lt;/mapper&gt;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>第五步，编写TestMybatis测试用例：</p>
<pre class="line-numbers language-none"><code class="language-none">package cn.itcast.mp.simple;

import cn.itcast.mp.simple.mapper.UserMapper;
import cn.itcast.mp.simple.pojo.User;

import org.apache.ibatis.io.Resources;
import org.apache.ibatis.session.SqlSession;
import org.apache.ibatis.session.SqlSessionFactory;
import org.apache.ibatis.session.SqlSessionFactoryBuilder;
import org.junit.Test;
import java.io.InputStream;
import java.util.List;

public class TestMybatis{
@Test
public void testUserList() throws Exception{
String resource = "mybatis-config.xml";
InputStream inputStream = Resources.getResourceAsStream(resource);
SqlSessionFactory sqlSessionFactory = new
SqlSessionFactoryBuilder().build(inputStream);
SqlSession sqlSession = sqlSessionFactory.openSession();

UserMapper userMapper = sqlSession.getMapper(UserMapper.class);

List&lt;User&gt; list = userMapper.findAll();
for (User user : list) {
    System.out.println(user);
        }
    }
}<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>测试结果：</p>
<pre class="line-numbers language-none"><code class="language-none">[main] [cn.itcast.mp.simple.mapper.UserMapper.findAll]-[DEBUG] ==&gt; Parameters:
[main] [cn.itcast.mp.simple.mapper.UserMapper.findAll]-[DEBUG] &lt;== Total: 5
User(id=1, userName=null, password=123456, name=张三, age=18, email=test1@itcast.cn)
User(id=2, userName=null, password=123456, name=李四, age=20, email=test2@itcast.cn)
User(id=3, userName=null, password=123456, name=王五, age=28, email=test3@itcast.cn)
User(id=4, userName=null, password=123456, name=赵六, age=21, email=test4@itcast.cn)
User(id=5, userName=null, password=123456, name=孙七, age=24, email=test5@itcast.cn)<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h3 id="2-3-3、Mybatis-MP实现查询User"><a href="#2-3-3、Mybatis-MP实现查询User" class="headerlink" title="2.3.3、Mybatis+MP实现查询User"></a>2.3.3、Mybatis+MP实现查询User</h3><p>第一步，将UserMapper继承BaseMapper，将拥有了BaseMapper中的所有方法：</p>
<pre class="line-numbers language-none"><code class="language-none">package cn.itcast.mp.simple.mapper;

import cn.itcast.mp.simple.pojo.User;
import com.baomidou.mybatisplus.core.mapper.BaseMapper;
import java.util.List;

public interface UserMapper extends BaseMapper&lt;User&gt; {
List&lt;User&gt; findAll();
}<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>第二步，使用MP中的MybatisSqlSessionFactoryBuilder进程构建：</p>
<pre class="line-numbers language-none"><code class="language-none">package cn.itcast.mp.simple;

import cn.itcast.mp.simple.mapper.UserMapper;
import cn.itcast.mp.simple.pojo.User;

import com.baomidou.mybatisplus.core.MybatisSqlSessionFactoryBuilder;
import org.apache.ibatis.io.Resources;
import org.apache.ibatis.session.SqlSession;
import org.apache.ibatis.session.SqlSessionFactory;
import org.apache.ibatis.session.SqlSessionFactoryBuilder;
import org.junit.Test;
import java.io.InputStream;
import java.util.List;

public class TestMybatisPlus {
@Test
public void testUserList() throws Exception{
String resource = "mybatis-config.xml";
InputStream inputStream = Resources.getResourceAsStream(resource);
//这里使用的是MP中的MybatisSqlSessionFactoryBuilder
SqlSessionFactory sqlSessionFactory = new
MybatisSqlSessionFactoryBuilder().build(inputStream);
SqlSession sqlSession = sqlSessionFactory.openSession();

UserMapper userMapper = sqlSession.getMapper(UserMapper.class);

// 可以调用BaseMapper中定义的方法
List&lt;User&gt; list = userMapper.selectList(null);
for (User user : list) {
System.out.println(user);
        }
    }
}<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>运行报错：<br><img src="/../MybatisPlus/4.png" alt="运行报错"><br>解决：在User对象中添加@TableName，指定数据库表名</p>
<p><img src="/../MybatisPlus/5.png" alt="解决方法"><br>测试：</p>
<pre class="line-numbers language-none"><code class="language-none">[main] [cn.itcast.mp.simple.mapper.UserMapper.selectList]-[DEBUG] ==&gt; Preparing:
SELECT id,user_name,password,name,age,email FROM tb_user
[main] [cn.itcast.mp.simple.mapper.UserMapper.selectList]-[DEBUG] ==&gt; Parameters:
[main] [cn.itcast.mp.simple.mapper.UserMapper.selectList]-[DEBUG] &lt;== Total: 5
User(id=1, userName=zhangsan, password=123456, name=张三, age=18, email=test1@itcast.cn)
User(id=2, userName=lisi, password=123456, name=李四, age=20, email=test2@itcast.cn)
User(id=3, userName=wangwu, password=123456, name=王五, age=28, email=test3@itcast.cn)
User(id=4, userName=zhaoliu, password=123456, name=赵六, age=21, email=test4@itcast.cn)
User(id=5, userName=sunqi, password=123456, name=孙七, age=24, email=test5@itcast.cn)<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>简单说明：</p>
<ul>
<li><p>由于使用了MybatisSqlSessionFactoryBuilder进行了构建，继承的BaseMapper中的方法就载入到了<br>SqlSession中，所以就可以直接使用相关的方法；</p>
</li>
<li><p>如图：<br><img src="/../MybatisPlus/6.png" alt="继承的BaseMapper中的方法"></p>
</li>
</ul>
<h2 id="2-4、Spring-Mybatis-MP"><a href="#2-4、Spring-Mybatis-MP" class="headerlink" title="2.4、Spring + Mybatis + MP"></a>2.4、Spring + Mybatis + MP</h2><p>引入了Spring框架，数据源、构建等工作就交给了Spring管理。</p>
<h3 id="2-4-1、创建子Module"><a href="#2-4-1、创建子Module" class="headerlink" title="2.4.1、创建子Module"></a>2.4.1、创建子Module</h3><pre class="line-numbers language-none"><code class="language-none">&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;project xmlns="http://maven.apache.org/POM/4.0.0"
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xsi:schemaLocation="http://maven.apache.org/POM/4.0.0
http://maven.apache.org/xsd/maven-4.0.0.xsd"&gt;

&lt;parent&gt;
&lt;artifactId&gt;itcast-mybatis-plus&lt;/artifactId&gt;
&lt;groupId&gt;cn.itcast.mp&lt;/groupId&gt;
&lt;version&gt;1.0-SNAPSHOT&lt;/version&gt;
&lt;/parent&gt;
&lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;

&lt;artifactId&gt;itcast-mybatis-plus-spring&lt;/artifactId&gt;

&lt;properties&gt;
&lt;spring.version&gt;5.1.6.RELEASE&lt;/spring.version&gt;
&lt;/properties&gt;

&lt;dependencies&gt;
&lt;dependency&gt;
&lt;groupId&gt;org.springframework&lt;/groupId&gt;
&lt;artifactId&gt;spring-webmvc&lt;/artifactId&gt;
&lt;version&gt;${spring.version}&lt;/version&gt;
&lt;/dependency&gt;

&lt;dependency&gt;
&lt;groupId&gt;org.springframework&lt;/groupId&gt;
&lt;artifactId&gt;spring-jdbc&lt;/artifactId&gt;
&lt;version&gt;${spring.version}&lt;/version&gt;
&lt;/dependency&gt;

&lt;dependency&gt;
&lt;groupId&gt;org.springframework&lt;/groupId&gt;
&lt;artifactId&gt;spring-test&lt;/artifactId&gt;
&lt;version&gt;${spring.version}&lt;/version&gt;
&lt;/dependency&gt;

&lt;/dependencies&gt;

&lt;/project&gt;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h3 id="2-4-2、实现查询User"><a href="#2-4-2、实现查询User" class="headerlink" title="2.4.2、实现查询User"></a>2.4.2、实现查询User</h3><p>第一步，编写jdbc.properties</p>
<pre class="line-numbers language-none"><code class="language-none">jdbc.driver=com.mysql.jdbc.Driver
jdbc.url=jdbc:mysql://127.0.0.1:3306/mp?
useUnicode=true&amp;characterEncoding=utf8&amp;autoReconnect=true&amp;allowMultiQueries=true&amp;useSSL
=false
jdbc.username=root
jdbc.password=root<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>第二步，编写applicationContext.xml</p>
<pre class="line-numbers language-none"><code class="language-none">&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;beans xmlns="http://www.springframework.org/schema/beans"
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xmlns:context="http://www.springframework.org/schema/context"
xsi:schemaLocation="http://www.springframework.org/schema/beans
http://www.springframework.org/schema/beans/spring-beans.xsd
http://www.springframework.org/schema/context
http://www.springframework.org/schema/context/spring-context.xsd"&gt;

&lt;context:property-placeholder location="classpath:*.properties"/&gt;

&lt;!-- 定义数据源 --&gt;
&lt;bean id="dataSource" class="com.alibaba.druid.pool.DruidDataSource"
destroy-method="close"&gt;

&lt;property name="url" value="${jdbc.url}"/&gt;
&lt;property name="username" value="${jdbc.username}"/&gt;
&lt;property name="password" value="${jdbc.password}"/&gt;
&lt;property name="driverClassName" value="${jdbc.driver}"/&gt;
&lt;property name="maxActive" value="10"/&gt;
&lt;property name="minIdle" value="5"/&gt;
&lt;/bean&gt;

&lt;!--这里使用MP提供的sqlSessionFactory，完成了Spring与MP的整合--&gt;
&lt;bean id="sqlSessionFactory"
class="com.baomidou.mybatisplus.extension.spring.MybatisSqlSessionFactoryBean"&gt;
&lt;property name="dataSource" ref="dataSource"/&gt;
&lt;/bean&gt;

&lt;!--扫描mapper接口，使用的依然是Mybatis原生的扫描器--&gt;
&lt;bean class="org.mybatis.spring.mapper.MapperScannerConfigurer"&gt;
&lt;property name="basePackage" value="cn.itcast.mp.simple.mapper"/&gt;
&lt;/bean&gt;

&lt;/beans&gt;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>第三步，编写User对象以及UserMapper接口：</p>
<pre class="line-numbers language-none"><code class="language-none">package cn.itcast.mp.simple.pojo;

import com.baomidou.mybatisplus.annotation.TableName;
import lombok.AllArgsConstructor;
import lombok.Data;
import lombok.NoArgsConstructor;

@Data
@NoArgsConstructor
@AllArgsConstructor
@TableName("tb_user")
public class User {

private Long id;
private String userName;
private String password;
private String name;
private Integer age;
private String email;

}



package cn.itcast.mp.simple.mapper;

import cn.itcast.mp.simple.pojo.User;
import com.baomidou.mybatisplus.core.mapper.BaseMapper;

public interface UserMapper extends BaseMapper&lt;User&gt; {

}<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>第四步，编写测试用例：</p>
<pre class="line-numbers language-none"><code class="language-none">package cn.itcast.mp.simple;

import cn.itcast.mp.simple.mapper.UserMapper;
import cn.itcast.mp.simple.pojo.User;
import org.junit.Test;
import org.junit.runner.RunWith;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.test.context.ContextConfiguration;
import org.springframework.test.context.junit4.SpringJUnit4ClassRunner;
import java.util.List;

@RunWith(SpringJUnit4ClassRunner.class)
@ContextConfiguration(locations = "classpath:applicationContext.xml")
public class TestSpringMP {

@Autowired
private UserMapper userMapper;

@Test
public void testSelectList(){
List&lt;User&gt; users = this.userMapper.selectList(null);
for (User user : users) {
System.out.println(user);
        }
    }
}<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>测试：</p>
<pre class="line-numbers language-none"><code class="language-none">[main] [cn.itcast.mp.simple.mapper.UserMapper.selectList]-[DEBUG] ==&gt; Preparing:
SELECT id,user_name,password,name,age,email FROM tb_user
[main] [cn.itcast.mp.simple.mapper.UserMapper.selectList]-[DEBUG] ==&gt; Parameters:
[main] [cn.itcast.mp.simple.mapper.UserMapper.selectList]-[DEBUG] &lt;== Total: 5
[main] [org.mybatis.spring.SqlSessionUtils]-[DEBUG] Closing non transactional
SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@74287ea3]
User(id=1, userName=zhangsan, password=123456, name=张三, age=18,
email=test1@itcast.cn)
User(id=2, userName=lisi, password=123456, name=李四, age=20, email=test2@itcast.cn)
User(id=3, userName=wangwu, password=123456, name=王五, age=28, email=test3@itcast.cn)
User(id=4, userName=zhaoliu, password=123456, name=赵六, age=21, email=test4@itcast.cn)
User(id=5, userName=sunqi, password=123456, name=孙七, age=24, email=test5@itcast.cn)
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<h2 id="2-5、SpringBoot-Mybatis-MP"><a href="#2-5、SpringBoot-Mybatis-MP" class="headerlink" title="2.5、SpringBoot + Mybatis + MP"></a>2.5、SpringBoot + Mybatis + MP</h2><p>使用SpringBoot将进一步的简化MP的整合，需要注意的是，由于使用SpringBoot需要继承parent，所以需要重新创<br>建工程，并不是创建子Module。</p>
<h3 id="2-5-1、创建工程"><a href="#2-5-1、创建工程" class="headerlink" title="2.5.1、创建工程"></a>2.5.1、创建工程</h3><h3 id="2-5-2、导入依赖"><a href="#2-5-2、导入依赖" class="headerlink" title="2.5.2、导入依赖"></a>2.5.2、导入依赖</h3><pre class="line-numbers language-none"><code class="language-none">&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;project xmlns="http://maven.apache.org/POM/4.0.0"
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xsi:schemaLocation="http://maven.apache.org/POM/4.0.0
http://maven.apache.org/xsd/maven-4.0.0.xsd"&gt;
&lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;

&lt;parent&gt;
&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
&lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;
&lt;version&gt;2.1.4.RELEASE&lt;/version&gt;
&lt;/parent&gt;

&lt;groupId&gt;cn.itcast.mp&lt;/groupId&gt;
&lt;artifactId&gt;itcast-mp-springboot&lt;/artifactId&gt;
&lt;version&gt;1.0-SNAPSHOT&lt;/version&gt;

&lt;dependencies&gt;

&lt;dependency&gt;
&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
&lt;artifactId&gt;spring-boot-starter&lt;/artifactId&gt;
&lt;exclusions&gt;
&lt;exclusion&gt;
&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
&lt;artifactId&gt;spring-boot-starter-logging&lt;/artifactId&gt;
&lt;/exclusion&gt;
&lt;/exclusions&gt;
&lt;/dependency&gt;

&lt;dependency&gt;
&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
&lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;
&lt;scope&gt;test&lt;/scope&gt;
&lt;/dependency&gt;

&lt;!--简化代码的工具包--&gt;
&lt;dependency&gt;
&lt;groupId&gt;org.projectlombok&lt;/groupId&gt;
&lt;artifactId&gt;lombok&lt;/artifactId&gt;
&lt;optional&gt;true&lt;/optional&gt;
&lt;/dependency&gt;

&lt;!--mybatis-plus的springboot支持--&gt;
&lt;dependency&gt;
&lt;groupId&gt;com.baomidou&lt;/groupId&gt;
&lt;artifactId&gt;mybatis-plus-boot-starter&lt;/artifactId&gt;
&lt;version&gt;3.1.1&lt;/version&gt;
&lt;/dependency&gt;

&lt;!--mysql驱动--&gt;
&lt;dependency&gt;
&lt;groupId&gt;mysql&lt;/groupId&gt;
&lt;artifactId&gt;mysql-connector-java&lt;/artifactId&gt;
&lt;version&gt;5.1.47&lt;/version&gt;
&lt;/dependency&gt;

&lt;dependency&gt;
&lt;groupId&gt;org.slf4j&lt;/groupId&gt;
&lt;artifactId&gt;slf4j-log4j12&lt;/artifactId&gt;
&lt;/dependency&gt;

&lt;/dependencies&gt;


&lt;build&gt;
&lt;plugins&gt;
&lt;plugin&gt;
&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
&lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;
&lt;/plugin&gt;
&lt;/plugins&gt;
&lt;/build&gt;
&lt;/project&gt;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>log4j.properties：</p>
<pre class="line-numbers language-none"><code class="language-none">log4j.rootLogger=DEBUG,A1
log4j.appender.A1=org.apache.log4j.ConsoleAppender
log4j.appender.A1.layout=org.apache.log4j.PatternLayout
log4j.appender.A1.layout.ConversionPattern=[%t] [%c]-[%p] %m%n<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>
<h3 id="2-5-3、编写application-properties"><a href="#2-5-3、编写application-properties" class="headerlink" title="2.5.3、编写application.properties"></a>2.5.3、编写application.properties</h3><pre class="line-numbers language-none"><code class="language-none">spring.application.name = itcast-mp-springboot
spring.datasource.driver-class-name=com.mysql.jdbc.Driver
spring.datasource.url=jdbc:mysql://127.0.0.1:3306/mp?
useUnicode=true&amp;characterEncoding=utf8&amp;autoReconnect=true&amp;allowMultiQueries=true&amp;useSSL
=false
spring.datasource.username=root
spring.datasource.password=root<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h3 id="2-5-4、编写pojo"><a href="#2-5-4、编写pojo" class="headerlink" title="2.5.4、编写pojo"></a>2.5.4、编写pojo</h3><pre class="line-numbers language-none"><code class="language-none">package cn.itcast.mp.pojo;

import com.baomidou.mybatisplus.annotation.TableName;
import lombok.AllArgsConstructor;
import lombok.Data;
import lombok.NoArgsConstructor;

@Data
@NoArgsConstructor
@AllArgsConstructor
@TableName("tb_user")
public class User {

private Long id;
private String userName;
private String password;
private String name;
private Integer age;
private String email;
}<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h3 id="2-5-5、编写mapper"><a href="#2-5-5、编写mapper" class="headerlink" title="2.5.5、编写mapper"></a>2.5.5、编写mapper</h3><pre class="line-numbers language-none"><code class="language-none">package cn.itcast.mp.mapper;

import cn.itcast.mp.pojo.User;
import com.baomidou.mybatisplus.core.mapper.BaseMapper;

public interface UserMapper extends BaseMapper&lt;User&gt; {
}<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h3 id="2-5-6、编写启动类"><a href="#2-5-6、编写启动类" class="headerlink" title="2.5.6、编写启动类"></a>2.5.6、编写启动类</h3><pre class="line-numbers language-none"><code class="language-none">package cn.itcast.mp;

import org.mybatis.spring.annotation.MapperScan;
import org.springframework.boot.SpringApplication;
import org.springframework.boot.WebApplicationType;
import org.springframework.boot.autoconfigure.SpringBootApplication;
import org.springframework.boot.builder.SpringApplicationBuilder;

@MapperScan("cn.itcast.mp.mapper") //设置mapper接口的扫描包
@SpringBootApplication
public class MyApplication {

public static void main(String[] args) {
SpringApplication.run(MyApplication.class, args);
}
}<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h3 id="2-5-7、编写测试用例"><a href="#2-5-7、编写测试用例" class="headerlink" title="2.5.7、编写测试用例"></a>2.5.7、编写测试用例</h3><pre class="line-numbers language-none"><code class="language-none">package cn.itcast.mp;

import cn.itcast.mp.mapper.UserMapper;
import cn.itcast.mp.pojo.User;
import org.junit.Test;
import org.junit.runner.RunWith;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.boot.test.context.SpringBootTest;
import org.springframework.test.context.junit4.SpringRunner;
import java.util.List;

@RunWith(SpringRunner.class)
@SpringBootTest
public class UserMapperTest {

@Autowired
private UserMapper userMapper;

@Test
public void testSelect() {
List&lt;User&gt; userList = userMapper.selectList(null);
for (User user : userList) {
System.out.println(user);
        }
    }
}<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>测试：</p>
<pre class="line-numbers language-none"><code class="language-none">[main] [cn.itcast.mp.mapper.UserMapper.selectList]-[DEBUG] ==&gt; Preparing: SELECT
id,user_name,password,name,age,email FROM tb_user
[main] [cn.itcast.mp.mapper.UserMapper.selectList]-[DEBUG] ==&gt; Parameters:
[main] [cn.itcast.mp.mapper.UserMapper.selectList]-[DEBUG] &lt;== Total: 5
[main] [org.mybatis.spring.SqlSessionUtils]-[DEBUG] Closing non transactional
SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@14faa38c]
User(id=1, userName=zhangsan, password=123456, name=张三, age=18, email=test1@itcast.cn)
User(id=2, userName=lisi, password=123456, name=李四, age=20, email=test2@itcast.cn)
User(id=3, userName=wangwu, password=123456, name=王五, age=28, email=test3@itcast.cn)
User(id=4, userName=zhaoliu, password=123456, name=赵六, age=21, email=test4@itcast.cn)
User(id=5, userName=sunqi, password=123456, name=孙七, age=24, email=test5@itcast.cn)<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<h1 id="3、通用CRUD"><a href="#3、通用CRUD" class="headerlink" title="3、通用CRUD"></a>3、通用CRUD</h1><p>通过前面，我们了解到通过继承BaseMapper就可以获取到各种各样的单表操作，接下来我们将详细讲解这些<br>操作。<br><img src="/../MybatisPlus/7.png" alt="BaseMapper"></p>
<h2 id="3-1、插入操作"><a href="#3-1、插入操作" class="headerlink" title="3.1、插入操作"></a>3.1、插入操作</h2><h3 id="3-1-1、方法定义"><a href="#3-1-1、方法定义" class="headerlink" title="3.1.1、方法定义"></a>3.1.1、方法定义</h3><pre class="line-numbers language-none"><code class="language-none">/**
* 插入一条记录
*
* @param entity 实体对象
*/
int insert(T entity);<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<h3 id="3-1-2、测试用例"><a href="#3-1-2、测试用例" class="headerlink" title="3.1.2、测试用例"></a>3.1.2、测试用例</h3><pre class="line-numbers language-none"><code class="language-none">package cn.itcast.mp;

import cn.itcast.mp.mapper.UserMapper;
import cn.itcast.mp.pojo.User;
import org.junit.Test;
import org.junit.runner.RunWith;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.boot.test.context.SpringBootTest;
import org.springframework.test.context.junit4.SpringRunner;
import java.util.List;

@RunWith(SpringRunner.class)
@SpringBootTest
public class UserMapperTest {

@Autowired
private UserMapper userMapper;

@Test
public void testInsert(){

User user = new User();
user.setAge(20);
user.setEmail("test@itcast.cn");
user.setName("曹操");
user.setUserName("caocao");
user.setPassword("123456");

int result = this.userMapper.insert(user); //返回的result是受影响的行数，并不是自增
后的id

System.out.println("result = " + result);
System.out.println(user.getId()); //自增后的id会回填到对象中
    }
}<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<h3 id="3-1-3、测试"><a href="#3-1-3、测试" class="headerlink" title="3.1.3、测试"></a>3.1.3、测试</h3><pre class="line-numbers language-none"><code class="language-none">[main] [cn.itcast.mp.mapper.UserMapper.insert]-[DEBUG] ==&gt; Preparing: INSERT INTO
tb_user ( id, user_name, password, name, age, email ) VALUES ( ?, ?, ?, ?, ?, ? )
[main] [cn.itcast.mp.mapper.UserMapper.insert]-[DEBUG] ==&gt; Parameters:
1122045867793072130(Long), caocao(String), 123456(String), 曹操(String), 20(Integer),
test@itcast.cn(String)
[main] [cn.itcast.mp.mapper.UserMapper.insert]-[DEBUG] &lt;== Updates: 1
[main] [org.mybatis.spring.SqlSessionUtils]-[DEBUG] Closing non transactional
SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@411291e5]
result = 1
1122045867793072130<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p><img src="/../MybatisPlus/8.png" alt="修正数据库ID，自增排序生成"><br>可以看到，数据已经写入到了数据库，但是，id的值不正确，我们期望的是数据库自增长，实际是MP生成了id的值<br>写入到了数据库。</p>
<p>如何设置id的生成策略呢？<br>MP支持的id策略：</p>
<pre class="line-numbers language-none"><code class="language-none">package com.baomidou.mybatisplus.annotation;

import lombok.Getter;

/**
* 生成ID类型枚举类
*
* @author hubin
* @since 2015-11-10
*/
@Getter
public enum IdType {

/**
* 数据库ID自增
*/
AUTO(0),

/**
* 该类型为未设置主键类型
*/
NONE(1),

/**
* 用户输入ID
* &lt;p&gt;该类型可以通过自己注册自动填充插件进行填充&lt;/p&gt;
*/
INPUT(2),

/* 以下3种类型、只有当插入对象ID 为空，才自动填充。 */
/**
* 全局唯一ID (idWorker)
*/
ID_WORKER(3),

/**
* 全局唯一ID (UUID)
*/
UUID(4),

/**
* 字符串全局唯一ID (idWorker 的字符串表示)
*/
ID_WORKER_STR(5);
private final int key;
IdType(int key) {
this.key = key;
    }
}<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>修改User对象：</p>
<pre class="line-numbers language-none"><code class="language-none">package cn.itcast.mp.pojo;

import com.baomidou.mybatisplus.annotation.IdType;
import com.baomidou.mybatisplus.annotation.TableId;
import com.baomidou.mybatisplus.annotation.TableName;
import lombok.AllArgsConstructor;
import lombok.Data;
import lombok.NoArgsConstructor;

@Data
@NoArgsConstructor
@AllArgsConstructor
@TableName("tb_user")
public class User {

@TableId(type = IdType.AUTO) //指定id类型为自增长
private Long id;

private String userName;
private String password;
private String name;
private Integer age;
private String email;
}<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<h3 id="3-1-4、-TableField"><a href="#3-1-4、-TableField" class="headerlink" title="3.1.4、@TableField"></a>3.1.4、@TableField</h3><p>在MP中通过@TableField注解可以指定字段的一些属性，常常解决的问题有2个：<br>1、对象中的属性名和字段名不一致的问题（非驼峰）<br>2、对象中的属性字段在表中不存在的问题<br>使用<br><img src="/../MybatisPlus/9.png" alt="修正POJO和数据库名称不一致问题"></p>
<p>其他用法，如大字段不加入查询字段：<br><img src="/../MybatisPlus/10.png" alt="POJO查询时不显示数据库列的数据"></p>
<p>效果：<br><img src="/../MybatisPlus/11.png" alt="不显示数据库列的数据"></p>
<h2 id="3-2、更新操作"><a href="#3-2、更新操作" class="headerlink" title="3.2、更新操作"></a>3.2、更新操作</h2><p>在MP中，更新操作有2种，一种是根据id更新，另一种是根据条件更新。</p>
<h3 id="3-2-1、根据id更新"><a href="#3-2-1、根据id更新" class="headerlink" title="3.2.1、根据id更新"></a>3.2.1、根据id更新</h3><p>方法定义：</p>
<pre class="line-numbers language-none"><code class="language-none">/**
* 根据 ID 修改
*
* @param entity 实体对象
*/
int updateById(@Param(Constants.ENTITY) T entity);<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>测试：</p>
<pre class="line-numbers language-none"><code class="language-none">@RunWith(SpringRunner.class)
@SpringBootTest
public class UserMapperTest {

@Autowired
private UserMapper userMapper;

@Test
public void testUpdateById() {

User user = new User();
user.setId(6L); //主键
user.setAge(21); //更新的字段
//根据id更新，更新不为null的字段
this.userMapper.updateById(user);
    }
}<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>结果：</p>
<pre class="line-numbers language-none"><code class="language-none">[main] [cn.itcast.mp.mapper.UserMapper.updateById]-[DEBUG] ==&gt; Preparing: UPDATE
tb_user SET age=? WHERE id=?
[main] [cn.itcast.mp.mapper.UserMapper.updateById]-[DEBUG] ==&gt; Parameters: 21(Integer),
6(Long)
[main] [cn.itcast.mp.mapper.UserMapper.updateById]-[DEBUG] &lt;== Updates: 1<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<h3 id="3-2-2、根据条件更新"><a href="#3-2-2、根据条件更新" class="headerlink" title="3.2.2、根据条件更新"></a>3.2.2、根据条件更新</h3><p>方法定义：</p>
<pre class="line-numbers language-none"><code class="language-none">/**
* 根据 whereEntity 条件，更新记录
*
* @param entity 实体对象 (set 条件值,可以为 null)
* @param updateWrapper 实体对象封装操作类（可以为 null,里面的 entity 用于生成 where 语句）
*/
int update(@Param(Constants.ENTITY) T entity, @Param(Constants.WRAPPER) Wrapper&lt;T&gt;
updateWrapper);<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>测试用例：</p>
<pre class="line-numbers language-none"><code class="language-none">package cn.itcast.mp;

import cn.itcast.mp.mapper.UserMapper;
import cn.itcast.mp.pojo.User;
import com.baomidou.mybatisplus.core.conditions.Wrapper;
import com.baomidou.mybatisplus.core.conditions.query.QueryWrapper;
import com.baomidou.mybatisplus.core.conditions.update.UpdateWrapper;
import net.minidev.json.writer.UpdaterMapper;
import org.junit.Test;
import org.junit.runner.RunWith;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.boot.test.context.SpringBootTest;
import org.springframework.test.context.junit4.SpringRunner;
import java.util.List;

@RunWith(SpringRunner.class)
@SpringBootTest
public class UserMapperTest {

@Autowired
private UserMapper userMapper;

@Test
public void testUpdate() {

User user = new User();
user.setAge(22); //更新的字段

//更新的条件
QueryWrapper&lt;User&gt; wrapper = new QueryWrapper&lt;&gt;();
wrapper.eq("id", 6);

//执行更新操作
int result = this.userMapper.update(user, wrapper);
System.out.println("result = " + result);
    }
}<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>或者，通过UpdateWrapper进行更新：</p>
<pre class="line-numbers language-none"><code class="language-none">@Test
public void testUpdate() {
//更新的条件以及字段
UpdateWrapper&lt;User&gt; wrapper = new UpdateWrapper&lt;&gt;();

wrapper.eq("id", 6).set("age", 23);

//执行更新操作
int result = this.userMapper.update(null, wrapper);

System.out.println("result = " + result);
}<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>测试结果：</p>
<pre class="line-numbers language-none"><code class="language-none">[main] [cn.itcast.mp.mapper.UserMapper.update]-[DEBUG] ==&gt; Preparing: UPDATE tb_user
SET age=? WHERE id = ?
[main] [cn.itcast.mp.mapper.UserMapper.update]-[DEBUG] ==&gt; Parameters: 23(Integer),
6(Integer)
[main] [cn.itcast.mp.mapper.UserMapper.update]-[DEBUG] &lt;== Updates: 1<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>均可达到更新的效果。<br>关于wrapper更多的用法后面会详细讲解。</p>
<h2 id="3-3、删除操作"><a href="#3-3、删除操作" class="headerlink" title="3.3、删除操作"></a>3.3、删除操作</h2><h3 id="3-3-1、deleteById"><a href="#3-3-1、deleteById" class="headerlink" title="3.3.1、deleteById"></a>3.3.1、deleteById</h3><p>方法定义：</p>
<pre class="line-numbers language-none"><code class="language-none">/**
* 根据 ID 删除
*
* @param id 主键ID
*/
int deleteById(Serializable id);<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>测试用例：</p>
<pre class="line-numbers language-none"><code class="language-none">package cn.itcast.mp;
import cn.itcast.mp.mapper.UserMapper;
import org.junit.Test;
import org.junit.runner.RunWith;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.boot.test.context.SpringBootTest;
import org.springframework.test.context.junit4.SpringRunner;

@RunWith(SpringRunner.class)
@SpringBootTest
public class UserMapperTest {

@Autowired
private UserMapper userMapper;

@Test
public void testDeleteById() {
//执行删除操作
int result = this.userMapper.deleteById(6L);
System.out.println("result = " + result);
    }
}<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>结果：</p>
<pre class="line-numbers language-none"><code class="language-none">[main] [cn.itcast.mp.mapper.UserMapper.deleteById]-[DEBUG] ==&gt; Preparing: DELETE FROM
tb_user WHERE id=?
[main] [cn.itcast.mp.mapper.UserMapper.deleteById]-[DEBUG] ==&gt; Parameters: 6(Long)
[main] [cn.itcast.mp.mapper.UserMapper.deleteById]-[DEBUG] &lt;== Updates: 1<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>


<p>3.3.2、deleteByMap<br>方法定义：</p>
<pre class="line-numbers language-none"><code class="language-none">/**
* 根据 columnMap 条件，删除记录
*
* @param columnMap 表字段 map 对象
*/
int deleteByMap(@Param(Constants.COLUMN_MAP) Map&lt;String, Object&gt; columnMap);<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>测试用例：</p>
<pre class="line-numbers language-none"><code class="language-none">package cn.itcast.mp;
import cn.itcast.mp.mapper.UserMapper;
import org.junit.Test;
import org.junit.runner.RunWith;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.boot.test.context.SpringBootTest;
import org.springframework.test.context.junit4.SpringRunner;
import java.util.HashMap;
import java.util.Map;

@RunWith(SpringRunner.class)
@SpringBootTest
public class UserMapperTest {

@Autowired
private UserMapper userMapper;

@Test
public void testDeleteByMap() {

Map&lt;String, Object&gt; columnMap = new HashMap&lt;&gt;();
columnMap.put("age",20);
columnMap.put("name","张三");

//将columnMap中的元素设置为删除的条件，多个之间为and关系
int result = this.userMapper.deleteByMap(columnMap);

System.out.println("result = " + result);
    }
}<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>结果：</p>
<pre class="line-numbers language-none"><code class="language-none">[main] [cn.itcast.mp.mapper.UserMapper.deleteByMap]-[DEBUG] ==&gt; Preparing: DELETE FROM
tb_user WHERE name = ? AND age = ?
[main] [cn.itcast.mp.mapper.UserMapper.deleteByMap]-[DEBUG] ==&gt; Parameters: 张三
(String), 20(Integer)
[main] [cn.itcast.mp.mapper.UserMapper.deleteByMap]-[DEBUG] &lt;== Updates: 0<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h3 id="3-3-3、delete"><a href="#3-3-3、delete" class="headerlink" title="3.3.3、delete"></a>3.3.3、delete</h3><p>方法定义：</p>
<pre class="line-numbers language-none"><code class="language-none">/**
* 根据 entity 条件，删除记录
*
* @param wrapper 实体对象封装操作类（可以为 null）
*/
int delete(@Param(Constants.WRAPPER) Wrapper&lt;T&gt; wrapper);<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>测试用例：</p>
<pre class="line-numbers language-none"><code class="language-none">package cn.itcast.mp;

import cn.itcast.mp.mapper.UserMapper;
import cn.itcast.mp.pojo.User;
import com.baomidou.mybatisplus.core.conditions.query.QueryWrapper;
import org.junit.Test;
import org.junit.runner.RunWith;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.boot.test.context.SpringBootTest;
import org.springframework.test.context.junit4.SpringRunner;
import java.util.HashMap;
import java.util.Map;

@RunWith(SpringRunner.class)
@SpringBootTest
public class UserMapperTest {

@Autowired
private UserMapper userMapper;

@Test
public void testDeleteByMap() {

User user = new User();
user.setAge(20);
user.setName("张三");

//将实体对象进行包装，包装为操作条件
QueryWrapper&lt;User&gt; wrapper = new QueryWrapper&lt;&gt;(user);

int result = this.userMapper.delete(wrapper);

System.out.println("result = " + result);
    }
}<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>结果：</p>
<pre class="line-numbers language-none"><code class="language-none">[main] [cn.itcast.mp.mapper.UserMapper.delete]-[DEBUG] ==&gt; Preparing: DELETE FROM
tb_user WHERE name=? AND age=?
[main] [cn.itcast.mp.mapper.UserMapper.delete]-[DEBUG] ==&gt; Parameters: 张三(String),
20(Integer)
[main] [cn.itcast.mp.mapper.UserMapper.delete]-[DEBUG] &lt;== Updates: 0<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<h3 id="3-3-4、deleteBatchIds"><a href="#3-3-4、deleteBatchIds" class="headerlink" title="3.3.4、deleteBatchIds"></a>3.3.4、deleteBatchIds</h3><p>方法定义：</p>
<pre class="line-numbers language-none"><code class="language-none">/**
* 删除（根据ID 批量删除）
*
* @param idList 主键ID列表(不能为 null 以及 empty)
*/
int deleteBatchIds(@Param(Constants.COLLECTION) Collection&lt;? extends Serializable&gt;
idList);<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>测试用例：</p>
<pre class="line-numbers language-none"><code class="language-none">package cn.itcast.mp;

import cn.itcast.mp.mapper.UserMapper;
import org.junit.Test;
import org.junit.runner.RunWith;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.boot.test.context.SpringBootTest;
import org.springframework.test.context.junit4.SpringRunner;
import java.util.Arrays;

@RunWith(SpringRunner.class)
@SpringBootTest
public class UserMapperTest {

@Autowired
private UserMapper userMapper;

@Test
public void testDeleteByMap() {
//根据id集合批量删除
int result = this.userMapper.deleteBatchIds(Arrays.asList(1L,10L,20L));

System.out.println("result = " + result);
    }
}<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>结果：</p>
<pre class="line-numbers language-none"><code class="language-none">[main] [cn.itcast.mp.mapper.UserMapper.deleteBatchIds]-[DEBUG] ==&gt; Preparing: DELETE
FROM tb_user WHERE id IN ( ? , ? , ? )
[main] [cn.itcast.mp.mapper.UserMapper.deleteBatchIds]-[DEBUG] ==&gt; Parameters: 1(Long),
10(Long), 20(Long)
[main] [cn.itcast.mp.mapper.UserMapper.deleteBatchIds]-[DEBUG] &lt;== Updates: 1<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<h2 id="3-4、查询操作"><a href="#3-4、查询操作" class="headerlink" title="3.4、查询操作"></a>3.4、查询操作</h2><p>MP提供了多种查询操作，包括根据id查询、批量查询、查询单条数据、查询列表、分页查询等操作。</p>
<h3 id="3-4-1、selectById"><a href="#3-4-1、selectById" class="headerlink" title="3.4.1、selectById"></a>3.4.1、selectById</h3><p>方法定义：</p>
<pre class="line-numbers language-none"><code class="language-none">/**
* 根据 ID 查询
*
* @param id 主键ID
*/
T selectById(Serializable id);<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>测试用例：</p>
<pre class="line-numbers language-none"><code class="language-none">package cn.itcast.mp;

import cn.itcast.mp.mapper.UserMapper;
import cn.itcast.mp.pojo.User;
import org.junit.Test;
import org.junit.runner.RunWith;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.boot.test.context.SpringBootTest;
import org.springframework.test.context.junit4.SpringRunner;

@RunWith(SpringRunner.class)
@SpringBootTest
public class UserMapperTest {

@Autowired
private UserMapper userMapper;

@Test
public void testSelectById() {
//根据id查询数据
User user = this.userMapper.selectById(2L);

System.out.println("result = " + user);
    }
}<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>结果：</p>
<pre class="line-numbers language-none"><code class="language-none">[main] [cn.itcast.mp.mapper.UserMapper.selectById]-[DEBUG] ==&gt; Preparing: SELECT
id,user_name,password,name,age,email FROM tb_user WHERE id=?
[main] [cn.itcast.mp.mapper.UserMapper.selectById]-[DEBUG] ==&gt; Parameters: 2(Long)
[main] [cn.itcast.mp.mapper.UserMapper.selectById]-[DEBUG] &lt;== Total: 1
result = User(id=2, userName=lisi, password=123456, name=李四, age=20,
email=test2@itcast.cn, address=null)<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>



<h3 id="3-4-2、selectBatchIds"><a href="#3-4-2、selectBatchIds" class="headerlink" title="3.4.2、selectBatchIds"></a>3.4.2、selectBatchIds</h3><p>方法定义：</p>
<pre class="line-numbers language-none"><code class="language-none">/**
* 查询（根据ID 批量查询）
*
* @param idList 主键ID列表(不能为 null 以及 empty)
*/
List&lt;T&gt; selectBatchIds(@Param(Constants.COLLECTION) Collection&lt;? extends Serializable&gt;
idList);<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>测试用例：</p>
<pre class="line-numbers language-none"><code class="language-none">package cn.itcast.mp;

import cn.itcast.mp.mapper.UserMapper;
import cn.itcast.mp.pojo.User;
import org.junit.Test;
import org.junit.runner.RunWith;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.boot.test.context.SpringBootTest;
import org.springframework.test.context.junit4.SpringRunner;
import java.util.Arrays;
import java.util.List;

@RunWith(SpringRunner.class)
@SpringBootTest
public class UserMapperTest {

@Autowired
private UserMapper userMapper;

@Test
public void testSelectBatchIds() {

//根据id集合批量查询
List&lt;User&gt; users = this.userMapper.selectBatchIds(Arrays.asList(2L, 3L, 10L));

for (User user : users) {
System.out.println(user);
        }
    }
}<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>结果：</p>
<pre class="line-numbers language-none"><code class="language-none">[main] [cn.itcast.mp.mapper.UserMapper.selectBatchIds]-[DEBUG] ==&gt; Preparing: SELECT
id,user_name,password,name,age,email FROM tb_user WHERE id IN ( ? , ? , ? )
[main] [cn.itcast.mp.mapper.UserMapper.selectBatchIds]-[DEBUG] ==&gt; Parameters: 2(Long),
3(Long), 10(Long)
[main] [cn.itcast.mp.mapper.UserMapper.selectBatchIds]-[DEBUG] &lt;== Total: 2
User(id=2, userName=lisi, password=123456, name=李四, age=20, email=test2@itcast.cn,
address=null)
User(id=3, userName=wangwu, password=123456, name=王五, age=28, email=test3@itcast.cn,
address=null)<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>


<h3 id="3-4-3、selectOne"><a href="#3-4-3、selectOne" class="headerlink" title="3.4.3、selectOne"></a>3.4.3、selectOne</h3><p>方法定义：</p>
<pre class="line-numbers language-none"><code class="language-none">/**
* 根据 entity 条件，查询一条记录
*
* @param queryWrapper 实体对象封装操作类（可以为 null）
*/
T selectOne(@Param(Constants.WRAPPER) Wrapper&lt;T&gt; queryWrapper);<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>测试用例：</p>
<pre class="line-numbers language-none"><code class="language-none">package cn.itcast.mp;

import cn.itcast.mp.mapper.UserMapper;
import cn.itcast.mp.pojo.User;
import com.baomidou.mybatisplus.core.conditions.query.QueryWrapper;
import org.junit.Test;
import org.junit.runner.RunWith;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.boot.test.context.SpringBootTest;
import org.springframework.test.context.junit4.SpringRunner;

@RunWith(SpringRunner.class)
@SpringBootTest
public class UserMapperTest {

@Autowired
private UserMapper userMapper;

@Test
public void testSelectOne() {

QueryWrapper&lt;User&gt; wrapper = new QueryWrapper&lt;User&gt;();
wrapper.eq("name", "李四");

//根据条件查询一条数据，如果结果超过一条会报错
User user = this.userMapper.selectOne(wrapper);

System.out.println(user);
    }
}<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>结果：</p>
<pre class="line-numbers language-none"><code class="language-none">[main] [cn.itcast.mp.mapper.UserMapper.selectOne]-[DEBUG] ==&gt; Preparing: SELECT
id,user_name,password,name,age,email FROM tb_user WHERE name = ?
[main] [cn.itcast.mp.mapper.UserMapper.selectOne]-[DEBUG] ==&gt; Parameters: 李四(String)
[main] [cn.itcast.mp.mapper.UserMapper.selectOne]-[DEBUG] &lt;== Total: 1
User(id=2, userName=lisi, password=123456, name=李四, age=20, email=test2@itcast.cn,
address=null)<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<h3 id="3-4-4、selectCount"><a href="#3-4-4、selectCount" class="headerlink" title="3.4.4、selectCount"></a>3.4.4、selectCount</h3><p>方法定义：</p>
<pre class="line-numbers language-none"><code class="language-none">/**
* 根据 Wrapper 条件，查询总记录数
*
* @param queryWrapper 实体对象封装操作类（可以为 null）
*/
Integer selectCount(@Param(Constants.WRAPPER) Wrapper&lt;T&gt; queryWrapper);<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>测试用例：</p>
<pre class="line-numbers language-none"><code class="language-none">package cn.itcast.mp;

import cn.itcast.mp.mapper.UserMapper;
import cn.itcast.mp.pojo.User;
import com.baomidou.mybatisplus.core.conditions.query.QueryWrapper;
import org.junit.Test;
import org.junit.runner.RunWith;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.boot.test.context.SpringBootTest;
import org.springframework.test.context.junit4.SpringRunner;

@RunWith(SpringRunner.class)
@SpringBootTest
public class UserMapperTest {

@Autowired
private UserMapper userMapper;

@Test
public void testSelectCount() {

QueryWrapper&lt;User&gt; wrapper = new QueryWrapper&lt;User&gt;();
wrapper.gt("age", 23); //年龄大于23岁

//根据条件查询数据条数
Integer count = this.userMapper.selectCount(wrapper);

System.out.println("count = " + count);
    }
}<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>结果：</p>
<pre class="line-numbers language-none"><code class="language-none">[main] [cn.itcast.mp.mapper.UserMapper.selectCount]-[DEBUG] ==&gt; Preparing: SELECT
COUNT( 1 ) FROM tb_user WHERE age &gt; ?
[main] [cn.itcast.mp.mapper.UserMapper.selectCount]-[DEBUG] ==&gt; Parameters: 23(Integer)
[main] [cn.itcast.mp.mapper.UserMapper.selectCount]-[DEBUG] &lt;== Total: 1
count = 2<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<h3 id="3-4-5、selectList"><a href="#3-4-5、selectList" class="headerlink" title="3.4.5、selectList"></a>3.4.5、selectList</h3><p>方法定义：</p>
<pre class="line-numbers language-none"><code class="language-none">/**
* 根据 entity 条件，查询全部记录
*
* @param queryWrapper 实体对象封装操作类（可以为 null）
*/
List&lt;T&gt; selectList(@Param(Constants.WRAPPER) Wrapper&lt;T&gt; queryWrapper);<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>测试用例：</p>
<pre class="line-numbers language-none"><code class="language-none">package cn.itcast.mp;

import cn.itcast.mp.mapper.UserMapper;
import cn.itcast.mp.pojo.User;
import com.baomidou.mybatisplus.core.conditions.query.QueryWrapper;
import org.junit.Test;
import org.junit.runner.RunWith;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.boot.test.context.SpringBootTest;
import org.springframework.test.context.junit4.SpringRunner;
import java.util.List;

@RunWith(SpringRunner.class)
@SpringBootTest
public class UserMapperTest {

@Autowired
private UserMapper userMapper;

@Test
public void testSelectList() {
QueryWrapper&lt;User&gt; wrapper = new QueryWrapper&lt;User&gt;();
wrapper.gt("age", 23); //年龄大于23岁

//根据条件查询数据
List&lt;User&gt; users = this.userMapper.selectList(wrapper);

for (User user : users) {
System.out.println("user = " + user);
        }
    }
}<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>结果：</p>
<pre class="line-numbers language-none"><code class="language-none">[main] [cn.itcast.mp.mapper.UserMapper.selectList]-[DEBUG] ==&gt; Preparing: SELECT
id,user_name,password,name,age,email FROM tb_user WHERE age &gt; ?
[main] [cn.itcast.mp.mapper.UserMapper.selectList]-[DEBUG] ==&gt; Parameters: 23(Integer)
[main] [cn.itcast.mp.mapper.UserMapper.selectList]-[DEBUG] &lt;== Total: 2
user = User(id=3, userName=wangwu, password=123456, name=王五, age=28,
email=test3@itcast.cn, address=null)
user = User(id=5, userName=sunqi, password=123456, name=孙七, age=24,
email=test5@itcast.cn, address=null)<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<h3 id="3-4-6、selectPage"><a href="#3-4-6、selectPage" class="headerlink" title="3.4.6、selectPage"></a>3.4.6、selectPage</h3><p>方法定义：</p>
<pre class="line-numbers language-none"><code class="language-none">/**
* 根据 entity 条件，查询全部记录（并翻页）
*
* @param page 分页查询条件（可以为 RowBounds.DEFAULT）
* @param queryWrapper 实体对象封装操作类（可以为 null）
*/
IPage&lt;T&gt; selectPage(IPage&lt;T&gt; page, @Param(Constants.WRAPPER) Wrapper&lt;T&gt; queryWrapper);<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>配置分页插件：</p>
<pre class="line-numbers language-none"><code class="language-none">package cn.itcast.mp;

import com.baomidou.mybatisplus.extension.plugins.PaginationInterceptor;
import org.mybatis.spring.annotation.MapperScan;
import org.springframework.context.annotation.Bean;
import org.springframework.context.annotation.Configuration;

@Configuration
@MapperScan("cn.itcast.mp.mapper") //设置mapper接口的扫描包
public class MybatisPlusConfig {

/**
* 分页插件
*/
@Bean
public PaginationInterceptor paginationInterceptor() {
    return new PaginationInterceptor();
    }
}<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>测试用例：</p>
<pre class="line-numbers language-none"><code class="language-none">package cn.itcast.mp;

import cn.itcast.mp.mapper.UserMapper;
import cn.itcast.mp.pojo.User;
import com.baomidou.mybatisplus.core.conditions.query.QueryWrapper;
import com.baomidou.mybatisplus.core.metadata.IPage;
import com.baomidou.mybatisplus.extension.plugins.pagination.Page;
import org.junit.Test;
import org.junit.runner.RunWith;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.boot.test.context.SpringBootTest;
import org.springframework.test.context.junit4.SpringRunner;
import java.util.List;

@RunWith(SpringRunner.class)
@SpringBootTest
public class UserMapperTest {

@Autowired
private UserMapper userMapper;

@Test
public void testSelectPage() {

QueryWrapper&lt;User&gt; wrapper = new QueryWrapper&lt;User&gt;();
wrapper.gt("age", 20); //年龄大于20岁
Page&lt;User&gt; page = new Page&lt;&gt;(1,1);

//根据条件查询数据
IPage&lt;User&gt; iPage = this.userMapper.selectPage(page, wrapper);

System.out.println("数据总条数：" + iPage.getTotal());
System.out.println("总页数：" + iPage.getPages());

List&lt;User&gt; users = iPage.getRecords();
for (User user : users) {
System.out.println("user = " + user);
        }
    }
}<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>结果：</p>
<pre class="line-numbers language-none"><code class="language-none">[main] [cn.itcast.mp.mapper.UserMapper.selectPage]-[DEBUG] ==&gt; Preparing: SELECT
COUNT(1) FROM tb_user WHERE age &gt; ?
[main] [cn.itcast.mp.mapper.UserMapper.selectPage]-[DEBUG] ==&gt; Parameters: 20(Integer)
[main] [cn.itcast.mp.mapper.UserMapper.selectPage]-[DEBUG] ==&gt; Preparing: SELECT
id,user_name,password,name,age,email FROM tb_user WHERE age &gt; ? LIMIT ?,?
[main] [cn.itcast.mp.mapper.UserMapper.selectPage]-[DEBUG] ==&gt; Parameters: 20(Integer),
0(Long), 1(Long)
[main] [cn.itcast.mp.mapper.UserMapper.selectPage]-[DEBUG] &lt;== Total: 1
[main] [org.mybatis.spring.SqlSessionUtils]-[DEBUG] Closing non transactional
SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6ecd665]
数据总条数：3
总页数：3
user = User(id=3, userName=wangwu, password=123456, name=王五, age=28,
email=test3@itcast.cn, address=null)<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<h2 id="3-5、SQL注入的原理"><a href="#3-5、SQL注入的原理" class="headerlink" title="3.5、SQL注入的原理"></a>3.5、SQL注入的原理</h2><p>前面我们已经知道，MP在启动后会将BaseMapper中的一系列的方法注册到meppedStatements中，那么究竟是如<br>何注入的呢？流程又是怎么样的？下面我们将一起来分析下。<br>在MP中，ISqlInjector负责SQL的注入工作，它是一个接口，AbstractSqlInjector是它的实现类，实现关系如下：<br><img src="/../MybatisPlus/12.png" alt="SQL注入原理"></p>
<p>在AbstractSqlInjector中，主要是由inspectInject()方法进行注入的，如下：</p>
<pre class="line-numbers language-none"><code class="language-none">@Override
public void inspectInject(MapperBuilderAssistant builderAssistant, Class&lt;?&gt;
mapperClass) {
    Class&lt;?&gt; modelClass = extractModelClass(mapperClass);
    if (modelClass != null) {
        String className = mapperClass.toString();
        Set&lt;String&gt; mapperRegistryCache =
GlobalConfigUtils.getMapperRegistryCache(builderAssistant.getConfiguration());
    if (!mapperRegistryCache.contains(className)) {
        List&lt;AbstractMethod&gt; methodList = this.getMethodList();
        if (CollectionUtils.isNotEmpty(methodList)) {
            TableInfo tableInfo = TableInfoHelper.initTableInfo(builderAssistant,
modelClass);
            // 循环注入自定义方法
            methodList.forEach(m -&gt; m.inject(builderAssistant, mapperClass,
modelClass, tableInfo));
        } else {
            logger.debug(mapperClass.toString() + ", No effective injection method
was found.");
            }
            mapperRegistryCache.add(className);
        }
    }
}<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>在实现方法中， methodList.forEach(m -&gt; m.inject(builderAssistant, mapperClass, modelClass,<br>tableInfo)); 是关键，循环遍历方法，进行注入。<br>最终调用抽象方法injectMappedStatement进行真正的注入：</p>
<pre class="line-numbers language-none"><code class="language-none">/**
* 注入自定义 MappedStatement
*
* @param mapperClass mapper 接口
* @param modelClass mapper 泛型
* @param tableInfo 数据库表反射信息
* @return MappedStatement
*/
public abstract MappedStatement injectMappedStatement(Class&lt;?&gt; mapperClass, Class&lt;?
&gt; modelClass, TableInfo tableInfo);<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>查看该方法的实现：<br><img src="/../MybatisPlus/13.png" alt="Mapper的可以实现类"></p>
<p>以SelectById为例查看：</p>
<pre class="line-numbers language-none"><code class="language-none">public class SelectById extends AbstractMethod {

@Override
public MappedStatement injectMappedStatement(Class&lt;?&gt; mapperClass, Class&lt;?&gt;
modelClass, TableInfo tableInfo) {

SqlMethod sqlMethod = SqlMethod.LOGIC_SELECT_BY_ID;
SqlSource sqlSource = new RawSqlSource(configuration,

String.format(sqlMethod.getSql(),
sqlSelectColumns(tableInfo, false),

tableInfo.getTableName(), tableInfo.getKeyColumn(),
tableInfo.getKeyProperty(),

tableInfo.getLogicDeleteSql(true, false)), Object.class);

return this.addSelectMappedStatement(mapperClass, sqlMethod.getMethod(),
sqlSource, modelClass, tableInfo);
    }
}<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>可以看到，生成了SqlSource对象，再将SQL通过addSelectMappedStatement方法添加到meppedStatements中。</p>
<h1 id="4、配置"><a href="#4、配置" class="headerlink" title="4、配置"></a>4、配置</h1><p>在MP中有大量的配置，其中有一部分是Mybatis原生的配置，另一部分是MP的配置，详情：<a target="_blank" rel="noopener external nofollow noreferrer" href="https://mybatis.plus/c">https://mybatis.plus/c</a><br>onfig/<br>下面我们对常用的配置做讲解。</p>
<h2 id="4-1、基本配置"><a href="#4-1、基本配置" class="headerlink" title="4.1、基本配置"></a>4.1、基本配置</h2><h3 id="4-1-1、configLocation"><a href="#4-1-1、configLocation" class="headerlink" title="4.1.1、configLocation"></a>4.1.1、configLocation</h3><p>MyBatis 配置文件位置，如果您有单独的 MyBatis 配置，请将其路径配置到 configLocation 中。 MyBatis<br>Configuration 的具体内容请参考MyBatis 官方文档<br>Spring Boot：</p>
<pre class="line-numbers language-none"><code class="language-none">mybatis-plus.config-location = classpath:mybatis-config.xml<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<p>Spring MVC：</p>
<pre class="line-numbers language-none"><code class="language-none">&lt;bean id="sqlSessionFactory"
class="com.baomidou.mybatisplus.extension.spring.MybatisSqlSessionFactoryBean"&gt;
&lt;property name="configLocation" value="classpath:mybatis-config.xml"/&gt;
&lt;/bean&gt;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>

<h3 id="4-1-2、mapperLocations"><a href="#4-1-2、mapperLocations" class="headerlink" title="4.1.2、mapperLocations"></a>4.1.2、mapperLocations</h3><p>MyBatis Mapper 所对应的 XML 文件位置，如果您在 Mapper 中有自定义方法（XML 中有自定义实现），需要进行<br>该配置，告诉 Mapper 所对应的 XML 文件位置。<br>Spring Boot：</p>
<pre class="line-numbers language-none"><code class="language-none">mybatis-plus.mapper-locations = classpath*:mybatis/*.xml<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<p>Spring MVC:</p>
<pre class="line-numbers language-none"><code class="language-none">&lt;bean id="sqlSessionFactory"
class="com.baomidou.mybatisplus.extension.spring.MybatisSqlSessionFactoryBean"&gt;
&lt;property name="mapperLocations" value="classpath*:mybatis/*.xml"/&gt;
&lt;/bean&gt;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>
<p>Maven 多模块项目的扫描路径需以 classpath*: 开头 （即加载多个 jar 包下的 XML 文件）<br>测试：<br>UserMapper.xml：</p>
<pre class="line-numbers language-none"><code class="language-none">&lt;?xml version="1.0" encoding="UTF-8" ?&gt;
&lt;!DOCTYPE mapper
PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
"http://mybatis.org/dtd/mybatis-3-mapper.dtd"&gt;
&lt;mapper namespace="cn.itcast.mp.mapper.UserMapper"&gt;
&lt;select id="findById" resultType="cn.itcast.mp.pojo.User"&gt;
select * from tb_user where id = #{id}
&lt;/select&gt;
&lt;/mapper&gt;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>itheima.mp.mapper:</p>
<pre class="line-numbers language-none"><code class="language-none">package cn.itcast.mp.mapper;
import cn.itcast.mp.pojo.User;
import com.baomidou.mybatisplus.core.mapper.BaseMapper;
public interface UserMapper extends BaseMapper&lt;User&gt; {
User findById(Long id);
}<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>测试用例：</p>
<pre class="line-numbers language-package" data-language="package"><div class="caption"><span>cn.itcast.mp;</span></div><code class="language-package">
import cn.itcast.mp.mapper.UserMapper;
import cn.itcast.mp.pojo.User;
import org.junit.Test;
import org.junit.runner.RunWith;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.boot.test.context.SpringBootTest;
import org.springframework.test.context.junit4.SpringRunner;

@RunWith(SpringRunner.class)
@SpringBootTest
public class UserMapperTest {

@Autowired
private UserMapper userMapper;

@Test
public void testSelectPage() {

User user = this.userMapper.findById(2L);
System.out.println(user);
    }
}<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>4.1.3、typeAliasesPackage<br>MyBaits 别名包扫描路径，通过该属性可以给包中的类注册别名，注册后在 Mapper 对应的 XML 文件中可以直接使<br>用类名，而不用使用全限定的类名（即 XML 中调用的时候不用包含包名）。<br>Spring Boot：</p>
<pre class="line-numbers language-none"><code class="language-none">mybatis-plus.type-aliases-package = cn.itcast.mp.pojo<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>

<p>Spring MVC:</p>
<pre class="line-numbers language-none"><code class="language-none">&lt;bean id="sqlSessionFactory"
class="com.baomidou.mybatisplus.extension.spring.MybatisSqlSessionFactoryBean"&gt;
&lt;property name="typeAliasesPackage"
value="com.baomidou.mybatisplus.samples.quickstart.entity"/&gt;
&lt;/bean&gt;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<h2 id="4-2、进阶配置"><a href="#4-2、进阶配置" class="headerlink" title="4.2、进阶配置"></a>4.2、进阶配置</h2><p>本部分（Configuration）的配置大都为 MyBatis 原生支持的配置，这意味着您可以通过 MyBatis XML 配置文件的形<br>式进行配置。</p>
<h3 id="4-2-1、mapUnderscoreToCamelCase"><a href="#4-2-1、mapUnderscoreToCamelCase" class="headerlink" title="4.2.1、mapUnderscoreToCamelCase"></a>4.2.1、mapUnderscoreToCamelCase</h3><ul>
<li>类型： boolean</li>
<li>默认值： true</li>
</ul>
<p>是否开启自动驼峰命名规则（camel case）映射，即从经典数据库列名 A_COLUMN（下划线命名） 到经典 Java 属<br>性名 aColumn（驼峰命名） 的类似映射。</p>
<pre><code>注意：
此属性在 MyBatis 中原默认值为 false，在 MyBatis-Plus 中，此属性也将用于生成最终的 SQL 的 select body
如果您的数据库命名符合规则无需使用 @TableField 注解指定数据库字段名
</code></pre>
<p>示例（SpringBoot）：</p>
<pre class="line-numbers language-none"><code class="language-none">#关闭自动驼峰映射，该参数不能和mybatis-plus.config-location同时存在
mybatis-plus.configuration.map-underscore-to-camel-case=false<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>

<h3 id="4-2-2、cacheEnabled"><a href="#4-2-2、cacheEnabled" class="headerlink" title="4.2.2、cacheEnabled"></a>4.2.2、cacheEnabled</h3><ul>
<li>类型： boolean</li>
<li>默认值： true<br>全局地开启或关闭配置文件中的所有映射器已经配置的任何缓存，默认为 true。</li>
</ul>
<p>示例：</p>
<pre class="line-numbers language-none"><code class="language-none">mybatis-plus.configuration.cache-enabled=false<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>

<h2 id="4-3、DB-策略配置"><a href="#4-3、DB-策略配置" class="headerlink" title="4.3、DB 策略配置"></a>4.3、DB 策略配置</h2><h3 id="4-3-1、idType"><a href="#4-3-1、idType" class="headerlink" title="4.3.1、idType"></a>4.3.1、idType</h3><ul>
<li>类型： com.baomidou.mybatisplus.annotation.IdType</li>
<li>默认值： ID_WORKER<br>全局默认主键类型，设置后，即可省略实体对象中的@TableId(type = IdType.AUTO)配置。<br>示例：</li>
</ul>
<p>SpringBoot：</p>
<pre class="line-numbers language-none"><code class="language-none">mybatis-plus.global-config.db-config.id-type=auto<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<p>Spring MVC:</p>
<pre class="line-numbers language-none"><code class="language-none">&lt;!--这里使用MP提供的sqlSessionFactory，完成了Spring与MP的整合--&gt;
&lt;bean id="sqlSessionFactory"
class="com.baomidou.mybatisplus.extension.spring.MybatisSqlSessionFactoryBean"&gt;
    &lt;property name="dataSource" ref="dataSource"/&gt;

    &lt;property name="globalConfig"&gt;
        &lt;bean class="com.baomidou.mybatisplus.core.config.GlobalConfig"&gt;
            &lt;property name="dbConfig"&gt;
                &lt;bean 
                    class="com.baomidou.mybatisplus.core.config.GlobalConfig$DbConfig"&gt;
                        &lt;property name="idType" value="AUTO"/&gt;
                &lt;/bean&gt;
            &lt;/property&gt;
        &lt;/bean&gt;
    &lt;/property&gt;
&lt;/bean&gt;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<h3 id="4-3-2、tablePrefix"><a href="#4-3-2、tablePrefix" class="headerlink" title="4.3.2、tablePrefix"></a>4.3.2、tablePrefix</h3><ul>
<li>类型： String</li>
<li>默认值： null<br>SpringBoot：<pre class="line-numbers language-none"><code class="language-none">mybatis-plus.global-config.db-config.table-prefix=tb_<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></li>
</ul>
<p>SpringMVC：</p>
<pre class="line-numbers language-none"><code class="language-none">&lt;bean id="sqlSessionFactory"
    class="com.baomidou.mybatisplus.extension.spring.MybatisSqlSessionFactoryBean"&gt;
        &lt;property name="dataSource" ref="dataSource"/&gt;
        &lt;property name="globalConfig"&gt;
            &lt;bean class="com.baomidou.mybatisplus.core.config.GlobalConfig"&gt;
                &lt;property name="dbConfig"&gt;
                    &lt;bean
                        class="com.baomidou.mybatisplus.core.config.GlobalConfig$DbConfig"&gt;
                            &lt;property name="idType" value="AUTO"/&gt;
                            &lt;property name="tablePrefix" value="tb_"/&gt;
                    &lt;/bean&gt;
                &lt;/property&gt;
            &lt;/bean&gt;
        &lt;/property&gt;
    &lt;/bean&gt;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>


<h1 id="5、条件构造器"><a href="#5、条件构造器" class="headerlink" title="5、条件构造器"></a>5、条件构造器</h1><p>在MP中，Wrapper接口的实现类关系如下：<br><img src="/../MybatisPlus/14.png" alt="Arapper接口实现类关系"><br>可以看到，AbstractWrapper和AbstractChainWrapper是重点实现，接下来我们重点学习AbstractWrapper以及其<br>子类。</p>
<pre class="line-numbers language-none"><code class="language-none">说明:

QueryWrapper(LambdaQueryWrapper) 和 UpdateWrapper(LambdaUpdateWrapper) 的父类 用于生成 sql
的 where 条件, entity 属性也用于生成 sql 的 where 条件 注意: entity 生成的 where 条件与 使用各个 api 生成的 where 条件没有任何关联行为<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>
<p>官网文档地址：<a target="_blank" rel="noopener external nofollow noreferrer" href="https://mybatis.plus/guide/wrapper.html">https://mybatis.plus/guide/wrapper.html</a></p>
<h2 id="5-1、allEq"><a href="#5-1、allEq" class="headerlink" title="5.1、allEq"></a>5.1、allEq</h2><h3 id="5-1-1、说明"><a href="#5-1-1、说明" class="headerlink" title="5.1.1、说明"></a>5.1.1、说明</h3><pre class="line-numbers language-none"><code class="language-none">allEq(Map&lt;R, V&gt; params)
allEq(Map&lt;R, V&gt; params, boolean null2IsNull)
allEq(boolean condition, Map&lt;R, V&gt; params, boolean null2IsNull)<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>


<ul>
<li>全部eq(或个别isNull)</li>
</ul>
<pre class="line-numbers language-none"><code class="language-none">个别参数说明: params : key 为数据库字段名, value 为字段值 null2IsNull : 为 true 则在 map 的 value 为
null 时调用 isNull 方法,为 false 时则忽略 value 为 null 的
    + 例1: allEq({id:1,name:"老王",age:null}) ---&gt; id = 1 and name = '老王' and age is null
    + 例2: allEq({id:1,name:"老王",age:null}, false) ---&gt; id = 1 and name = '老王


    allEq(BiPredicate&lt;R, V&gt; filter, Map&lt;R, V&gt; params)
    allEq(BiPredicate&lt;R, V&gt; filter, Map&lt;R, V&gt; params, boolean null2IsNull)
    allEq(boolean condition, BiPredicate&lt;R, V&gt; filter, Map&lt;R, V&gt; params, boolean null2IsNull)



    个别参数说明: filter : 过滤函数,是否允许字段传入比对条件中 params 与 null2IsNull : 同上
        + 例1: allEq((k,v) -&gt; k.indexOf("a") &gt; 0, {id:1,name:"老王",age:null}) ---&gt; name = '老王' and age is null
        + 例2: allEq((k,v) -&gt; k.indexOf("a") &gt; 0, {id:1,name:"老王",age:null}, false) ---&gt; name = '老王'<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<h3 id="5-1-2、测试用例"><a href="#5-1-2、测试用例" class="headerlink" title="5.1.2、测试用例"></a>5.1.2、测试用例</h3><pre class="line-numbers language-none"><code class="language-none">package cn.itcast.mp;

import cn.itcast.mp.mapper.UserMapper;
import cn.itcast.mp.pojo.User;
import com.baomidou.mybatisplus.core.conditions.query.QueryWrapper;
import org.junit.Test;
import org.junit.runner.RunWith;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.boot.test.context.SpringBootTest;
import org.springframework.test.context.junit4.SpringRunner;
import java.util.HashMap;
import java.util.List;
import java.util.Map;

@RunWith(SpringRunner.class)
@SpringBootTest
public class UserMapperTest {

@Autowired
private UserMapper userMapper;

@Test
public void testWrapper() {
QueryWrapper&lt;User&gt; wrapper = new QueryWrapper&lt;&gt;();

//设置条件
Map&lt;String,Object&gt; params = new HashMap&lt;&gt;();
params.put("name", "曹操");
params.put("age", "20");
params.put("password", null);

// wrapper.allEq(params);

//SELECT * FROM tb_user WHERE password IS NULL AND name = ? AND age = ?
// wrapper.allEq(params,false); 

//SELECT * FROM tb_user WHERE name = ? AND age= ?
// wrapper.allEq((k, v) -&gt; (k.equals("name") || k.equals("age")),params);

List&lt;User&gt; users = this.userMapper.selectList(wrapper);
    for (User user : users) {
            System.out.println(user);
            }
        }
}<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>


<h2 id="5-2、基本比较操作"><a href="#5-2、基本比较操作" class="headerlink" title="5.2、基本比较操作"></a>5.2、基本比较操作</h2><ul>
<li><p>eq</p>
<ul>
<li>等于 =</li>
</ul>
</li>
<li><p>ne</p>
<ul>
<li>不等于 &lt;&gt;</li>
</ul>
</li>
<li><p>gt</p>
<ul>
<li>大于 &gt;</li>
</ul>
</li>
<li><p>ge</p>
<ul>
<li>大于等于 &gt;=</li>
</ul>
</li>
<li><p>lt</p>
<ul>
<li>小于 &lt;</li>
</ul>
</li>
<li><p>le</p>
<ul>
<li>小于等于 &lt;=</li>
</ul>
</li>
<li><p>between</p>
<ul>
<li>BETWEEN 值1 AND 值2</li>
</ul>
</li>
<li><p>notBetween</p>
<ul>
<li>NOT BETWEEN 值1 AND 值2</li>
</ul>
</li>
<li><p>in</p>
<ul>
<li>字段 IN (value.get(0), value.get(1), …)</li>
</ul>
</li>
<li><p>notIn</p>
<ul>
<li>字段 NOT IN (v0, v1, …)</li>
</ul>
</li>
</ul>
<p>测试用例：</p>
<pre class="line-numbers language-none"><code class="language-none">package cn.itcast.mp;

import cn.itcast.mp.mapper.UserMapper;
import cn.itcast.mp.pojo.User;
import com.baomidou.mybatisplus.core.conditions.query.QueryWrapper;
import org.junit.Test;
import org.junit.runner.RunWith;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.boot.test.context.SpringBootTest;
import org.springframework.test.context.junit4.SpringRunner;
import java.util.List;

@RunWith(SpringRunner.class)
@SpringBootTest
public class UserMapperTest {

@Autowired
private UserMapper userMapper;

@Test
public void testEq() {
QueryWrapper&lt;User&gt; wrapper = new QueryWrapper&lt;&gt;();

//SELECT id,user_name,password,name,age,email FROM tb_user WHERE password = ?
AND age &gt;= ? AND name IN (?,?,?)

wrapper.eq("password", "123456")
    .ge("age", 20)
    .in("name", "李四", "王五", "赵六");

List&lt;User&gt; users = this.userMapper.selectList(wrapper);
for (User user : users) {
System.out.println(user);
        }
    }
}<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<h2 id="5-3、模糊查询"><a href="#5-3、模糊查询" class="headerlink" title="5.3、模糊查询"></a>5.3、模糊查询</h2><ul>
<li><p>like</p>
<ul>
<li>LIKE ‘%值%’<br>  例: like(“name”, “王”) —&gt; name like ‘%王%’</li>
</ul>
</li>
<li><p>notLike</p>
<ul>
<li>NOT LIKE ‘%值%’<br>  例: notLike(“name”, “王”) —&gt; name not like ‘%王%’</li>
</ul>
</li>
<li><p>likeLeft</p>
<ul>
<li>LIKE ‘%值’<br>  例: likeLeft(“name”, “王”) —&gt; name like ‘%王’</li>
</ul>
</li>
<li><p>likeRight</p>
<ul>
<li>LIKE ‘值%’<br>  例: likeRight(“name”, “王”) —&gt; name like ‘王%’</li>
</ul>
</li>
</ul>
<p>测试用例：</p>
<pre class="line-numbers language-none"><code class="language-none">package cn.itcast.mp;

import cn.itcast.mp.mapper.UserMapper;
import cn.itcast.mp.pojo.User;
import com.baomidou.mybatisplus.core.conditions.query.QueryWrapper;
import org.junit.Test;
import org.junit.runner.RunWith;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.boot.test.context.SpringBootTest;
import org.springframework.test.context.junit4.SpringRunner;
import java.util.List;

@RunWith(SpringRunner.class)
@SpringBootTest
public class UserMapperTest {

@Autowired
private UserMapper userMapper;

@Test
public void testWrapper() {
QueryWrapper&lt;User&gt; wrapper = new QueryWrapper&lt;&gt;();

//SELECT id,user_name,password,name,age,email FROM tb_user WHERE name LIKE ?
//Parameters: %曹%(String)
wrapper.like("name", "曹");

List&lt;User&gt; users = this.userMapper.selectList(wrapper);
for (User user : users) {
System.out.println(user);
        }
    }
}<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h2 id="5-4、排序"><a href="#5-4、排序" class="headerlink" title="5.4、排序"></a>5.4、排序</h2><ul>
<li><p>orderBy</p>
<ul>
<li>排序：ORDER BY 字段,…<br>  例: orderBy(true, true, “id”, “name”) —&gt; order by id ASC,name ASC</li>
</ul>
</li>
<li><p>orderByAsc</p>
<ul>
<li>排序：ORDER BY 字段, … ASC<br>  例: orderByAsc(“id”, “name”) —&gt; order by id ASC,name ASC</li>
</ul>
</li>
<li><p>orderByDesc</p>
<ul>
<li>排序：ORDER BY 字段, … DESC<br>  例: orderByDesc(“id”, “name”) —&gt; order by id DESC,name DESC</li>
</ul>
</li>
</ul>
<p>测试用例：       </p>
<pre class="line-numbers language-none"><code class="language-none">package cn.itcast.mp;

import cn.itcast.mp.mapper.UserMapper;
import cn.itcast.mp.pojo.User;
import com.baomidou.mybatisplus.core.conditions.query.QueryWrapper;
import org.junit.Test;
import org.junit.runner.RunWith;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.boot.test.context.SpringBootTest;
import org.springframework.test.context.junit4.SpringRunner;
import java.util.List;

@RunWith(SpringRunner.class)
@SpringBootTest
public class UserMapperTest {

@Autowired
private UserMapper userMapper;

@Test
public void testWrapper() {

QueryWrapper&lt;User&gt; wrapper = new QueryWrapper&lt;&gt;();

//SELECT id,user_name,password,name,age,email FROM tb_user ORDER BY age DESC
wrapper.orderByDesc("age");

List&lt;User&gt; users = this.userMapper.selectList(wrapper);
for (User user : users) {
System.out.println(user);
        }
    }
}<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h2 id="5-5、逻辑查询"><a href="#5-5、逻辑查询" class="headerlink" title="5.5、逻辑查询"></a>5.5、逻辑查询</h2><ul>
<li><p>or</p>
<ul>
<li>拼接 OR<br>  主动调用 or 表示紧接着下一个方法不是用 and 连接!(不调用 or 则默认为使用 and 连接)</li>
</ul>
</li>
<li><p>and</p>
<ul>
<li>AND 嵌套<br>  例: and(i -&gt; i.eq(“name”, “李白”).ne(“status”, “活着”)) —&gt; and (name = ‘李白’ and status &lt;&gt; ‘活着’)</li>
</ul>
</li>
</ul>
<p>测试用例：</p>
<pre class="line-numbers language-none"><code class="language-none">package cn.itcast.mp;

import cn.itcast.mp.mapper.UserMapper;
import cn.itcast.mp.pojo.User;
import com.baomidou.mybatisplus.core.conditions.query.QueryWrapper;
import org.junit.Test;
import org.junit.runner.RunWith;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.boot.test.context.SpringBootTest;
import org.springframework.test.context.junit4.SpringRunner;
import java.util.List;

@RunWith(SpringRunner.class)
@SpringBootTest
public class UserMapperTest {

@Autowired
private UserMapper userMapper;

@Test
public void testWrapper() {

QueryWrapper&lt;User&gt; wrapper = new QueryWrapper&lt;&gt;();

//SELECT id,user_name,password,name,age,email FROM tb_user WHERE name = ? OR age = ?
wrapper.eq("name","李四").or().eq("age", 24);

List&lt;User&gt; users = this.userMapper.selectList(wrapper);
for (User user : users) {
System.out.println(user);
        }
    }
}<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<h2 id="5-6、select"><a href="#5-6、select" class="headerlink" title="5.6、select"></a>5.6、select</h2><p>在MP查询中，默认查询所有的字段，如果有需要也可以通过select方法进行指定字段。</p>
<pre class="line-numbers language-none"><code class="language-none">package cn.itcast.mp;

import cn.itcast.mp.mapper.UserMapper;
import cn.itcast.mp.pojo.User;
import com.baomidou.mybatisplus.core.conditions.query.QueryWrapper;
import org.junit.Test;
import org.junit.runner.RunWith;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.boot.test.context.SpringBootTest;
import org.springframework.test.context.junit4.SpringRunner;
import java.util.List;

@RunWith(SpringRunner.class)
@SpringBootTest
public class UserMapperTest {

@Autowired
private UserMapper userMapper;

@Test
public void testWrapper() {
QueryWrapper&lt;User&gt; wrapper = new QueryWrapper&lt;&gt;();
//SELECT id,name,age FROM tb_user WHERE name = ? OR age = ?
wrapper.eq("name", "李四")
.or()
.eq("age", 24)
.select("id", "name", "age");

List&lt;User&gt; users = this.userMapper.selectList(wrapper);

for (User user : users) {
System.out.println(user);
        }
    }
}<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>


<h1 id="6、ActiveRecord"><a href="#6、ActiveRecord" class="headerlink" title="6、ActiveRecord"></a>6、ActiveRecord</h1><p>ActiveRecord（简称AR）一直广受动态语言（ PHP 、 Ruby 等）的喜爱，而 Java 作为准静态语言，对于ActiveRecord 往往只能感叹其优雅，所以我们也在 AR 道路上进行了一定的探索，喜欢大家能够喜欢。</p>
<pre class="line-numbers language-none"><code class="language-none">什么是ActiveRecord？
ActiveRecord也属于ORM（对象关系映射）层，由Rails最早提出，遵循标准的ORM模型：表映射到记录，记
录映射到对象，字段映射到对象属性。配合遵循的命名和配置惯例，能够很大程度的快速实现模型的操作，而且简洁易懂。

ActiveRecord的主要思想是：
    + 每一个数据库表对应创建一个类，类的每一个对象实例对应于数据库中表的一行记录；通常表的每个字段在类中都有相应的Field；
    + ActiveRecord同时负责把自己持久化，在ActiveRecord中封装了对数据库的访问，即CURD;；
    + ActiveRecord是一种领域模型(Domain Model)，封装了部分业务逻辑；<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<h2 id="6-1、开启AR之旅"><a href="#6-1、开启AR之旅" class="headerlink" title="6.1、开启AR之旅"></a>6.1、开启AR之旅</h2><p>在MP中，开启AR非常简单，只需要将实体对象继承Model即可。</p>
<pre class="line-numbers language-none"><code class="language-none">package cn.itcast.mp.pojo;

import com.baomidou.mybatisplus.annotation.IdType;
import com.baomidou.mybatisplus.annotation.TableField;
import com.baomidou.mybatisplus.annotation.TableId;
import com.baomidou.mybatisplus.annotation.TableName;
import com.baomidou.mybatisplus.extension.activerecord.Model;
import lombok.AllArgsConstructor;
import lombok.Data;
import lombok.NoArgsConstructor;

@Data
@NoArgsConstructor
@AllArgsConstructor
public class User extends Model&lt;User&gt; {
private Long id;
private String userName;
private String password;
private String name;
private Integer age;
private String email;
}<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h1 id="6-2、根据主键查询"><a href="#6-2、根据主键查询" class="headerlink" title="6.2、根据主键查询"></a>6.2、根据主键查询</h1><pre class="line-numbers language-none"><code class="language-none">@RunWith(SpringRunner.class)
@SpringBootTest
public class UserMapperTest {

@Autowired
private UserMapper userMapper;

@Test
public void testAR() {
User user = new User();
user.setId(2L);
User user2 = user.selectById();

System.out.println(user2);
    }
}<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<h2 id="6-3、新增数据"><a href="#6-3、新增数据" class="headerlink" title="6.3、新增数据"></a>6.3、新增数据</h2><pre class="line-numbers language-none"><code class="language-none">@RunWith(SpringRunner.class)
@SpringBootTest
public class UserMapperTest {

@Autowired
private UserMapper userMapper;

@Test
public void testAR() {
User user = new User();
user.setName("刘备");
user.setAge(30);
user.setPassword("123456");
user.setUserName("liubei");
user.setEmail("liubei@itcast.cn");

boolean insert = user.insert();

System.out.println(insert);
    }
}<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>结果：</p>
<pre class="line-numbers language-none"><code class="language-none">[main] [cn.itcast.mp.mapper.UserMapper.insert]-[DEBUG] ==&gt; Preparing: INSERT INTO
tb_user ( user_name, password, name, age, email ) VALUES ( ?, ?, ?, ?, ? )
[main] [cn.itcast.mp.mapper.UserMapper.insert]-[DEBUG] ==&gt; Parameters: liubei(String),
123456(String), 刘备(String), 30(Integer), liubei@itcast.cn(String)
[main] [cn.itcast.mp.mapper.UserMapper.insert]-[DEBUG] &lt;== Updates: 1<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p><img src="/../MybatisPlus/15.png" alt="ActiveRecord对POJO处理实现"></p>
<h2 id="6-2、根据主键查询-1"><a href="#6-2、根据主键查询-1" class="headerlink" title="6.2、根据主键查询"></a>6.2、根据主键查询</h2><pre class="line-numbers language-none"><code class="language-none">@RunWith(SpringRunner.class)
@SpringBootTest
public class UserMapperTest {

@Autowired
private UserMapper userMapper;

@Test
public void testAR() {
User user = new User();
user.setId(2L);
User user2 = user.selectById();
System.out.println(user2);
    }
}<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<h2 id="6-3、新增数据-1"><a href="#6-3、新增数据-1" class="headerlink" title="6.3、新增数据"></a>6.3、新增数据</h2><pre class="line-numbers language-none"><code class="language-none">@RunWith(SpringRunner.class)
@SpringBootTest
public class UserMapperTest {

@Autowired
private UserMapper userMapper;

@Test
public void testAR() {
User user = new User();
user.setName("刘备");
user.setAge(30);
user.setPassword("123456");
user.setUserName("liubei");
user.setEmail("liubei@itcast.cn");

boolean insert = user.insert();

System.out.println(insert);
    }
}<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>结果：</p>
<pre class="line-numbers language-none"><code class="language-none">[main] [cn.itcast.mp.mapper.UserMapper.insert]-[DEBUG] ==&gt; Preparing: INSERT INTO
tb_user ( user_name, password, name, age, email ) VALUES ( ?, ?, ?, ?, ? )
[main] [cn.itcast.mp.mapper.UserMapper.insert]-[DEBUG] ==&gt; Parameters: liubei(String),
123456(String), 刘备(String), 30(Integer), liubei@itcast.cn(String)
[main] [cn.itcast.mp.mapper.UserMapper.insert]-[DEBUG] &lt;== Updates: 1<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p><img src="/../MybatisPlus/16.png" alt="ActiveRecord对POJO新增处理实现"></p>
<h2 id="6-5、更新操作"><a href="#6-5、更新操作" class="headerlink" title="6.5、更新操作"></a>6.5、更新操作</h2><pre class="line-numbers language-none"><code class="language-none">@RunWith(SpringRunner.class)
@SpringBootTest
public class UserMapperTest {

@Autowired
private UserMapper userMapper;

@Test
public void testAR() {
User user = new User();
user.setId(8L);
user.setAge(35);

boolean update = user.updateById();

System.out.println(update);
    }
}<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>结果：</p>
<pre class="line-numbers language-none"><code class="language-none">[main] [cn.itcast.mp.mapper.UserMapper.updateById]-[DEBUG] ==&gt; Preparing: UPDATE
tb_user SET age=? WHERE id=?
[main] [cn.itcast.mp.mapper.UserMapper.updateById]-[DEBUG] ==&gt; Parameters: 35(Integer),
8(Long)
[main] [cn.itcast.mp.mapper.UserMapper.updateById]-[DEBUG] &lt;== Updates: 1<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p><img src="/../MybatisPlus/17.png" alt="ActiveRecord对POJO更新处理实现"></p>
<h2 id="6-6、删除操作"><a href="#6-6、删除操作" class="headerlink" title="6.6、删除操作"></a>6.6、删除操作</h2><pre class="line-numbers language-none"><code class="language-none">@RunWith(SpringRunner.class)
@SpringBootTest
public class UserMapperTest {

@Autowired
private UserMapper userMapper;

@Test
public void testAR() {
User user = new User();
user.setId(7L);

boolean delete = user.deleteById();

System.out.println(delete);
    }
}<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>结果：</p>
<pre class="line-numbers language-none"><code class="language-none">[main] [cn.itcast.mp.mapper.UserMapper.deleteById]-[DEBUG] ==&gt; Preparing: DELETE FROM
tb_user WHERE id=?
[main] [cn.itcast.mp.mapper.UserMapper.deleteById]-[DEBUG] ==&gt; Parameters: 7(Long)
[main] [cn.itcast.mp.mapper.UserMapper.deleteById]-[DEBUG] &lt;== Updates: 1<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>

<h2 id="6-7、根据条件查询"><a href="#6-7、根据条件查询" class="headerlink" title="6.7、根据条件查询"></a>6.7、根据条件查询</h2><pre class="line-numbers language-none"><code class="language-none">@RunWith(SpringRunner.class)
@SpringBootTest
public class UserMapperTest {

@Autowired
private UserMapper userMapper;

@Test
public void testAR() {

User user = new User();

QueryWrapper&lt;User&gt; userQueryWrapper = new QueryWrapper&lt;&gt;();

userQueryWrapper.le("age","20");

List&lt;User&gt; users = user.selectList(userQueryWrapper);

for (User user1 : users) {
    System.out.println(user1);
        }
    }
} <span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>结果：</p>
<pre class="line-numbers language-none"><code class="language-none">[main] [cn.itcast.mp.mapper.UserMapper.selectList]-[DEBUG] ==&gt; Preparing: SELECT
id,user_name,password,name,age,email FROM tb_user WHERE age &lt;= ?
[main] [cn.itcast.mp.mapper.UserMapper.selectList]-[DEBUG] ==&gt; Parameters: 20(String)
[main] [cn.itcast.mp.mapper.UserMapper.selectList]-[DEBUG] &lt;== Total: 2
User(id=2, userName=lisi, password=123456, name=李四, age=20, email=test2@itcast.cn,
address=null)
User(id=6, userName=caocao, password=123456, name=曹操, age=20, email=test@itcast.cn,
address=null)<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<h1 id="7、Oracle-主键Sequence"><a href="#7、Oracle-主键Sequence" class="headerlink" title="7、Oracle 主键Sequence"></a>7、Oracle 主键Sequence</h1><p>在mysql中，主键往往是自增长的，这样使用起来是比较方便的，如果使用的是Oracle数据库，那么就不能使用自增长了，就得使用Sequence 序列生成id值了。</p>
<h2 id="7-1、部署Oracle环境"><a href="#7-1、部署Oracle环境" class="headerlink" title="7.1、部署Oracle环境"></a>7.1、部署Oracle环境</h2><p>为了简化环境部署，这里使用Docker环境进行部署安装Oracle</p>
<pre class="line-numbers language-none"><code class="language-none">#拉取镜像
docker pull sath89/oracle-12c
#创建容器
docker create --name oracle -p 1521:1521 sath89/oracle-12c
#启动
docker start oracle &amp;&amp; docker logs -f oracle
#下面是启动过程
Database not initialized. Initializing database.
Starting tnslsnr
Copying database files
1% complete
3% complete
11% complete
18% complete
26% complete
37% complete
Creating and starting Oracle instance
40% complete
45% complete
50% complete
55% complete
56% complete
60% complete
62% complete
Completing Database Creation
66% complete
70% complete
73% complete
85% complete
96% complete
100% complete
Look at the log file "/u01/app/oracle/cfgtoollogs/dbca/xe/xe.log" for further details.
Configuring Apex console
Database initialized. Please visit http://#containeer:8080/em
http://#containeer:8080/apex for extra configuration if needed
Starting web management console
PL/SQL procedure successfully completed.
Starting import from '/docker-entrypoint-initdb.d':
ls: cannot access /docker-entrypoint-initdb.d/*: No such file or directory
Import finished
Database ready to use. Enjoy! ;
#通过用户名密码即可登录
用户名和密码为： system/oracle<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>下面使用navicat12进行连接并操作oracle，使用资料中提供的安装包，可以试用14天。<br>需要注意的是：由于安装的Oracle是64位版本，所以navicat也是需要使用64为版本，否则连接不成功。<br><img src="/../MybatisPlus/18.png" alt="数据库连接信息"></p>
<p><img src="/../MybatisPlus/19.png" alt="数据库本地库存储位置信息"></p>
<h2 id="7-2、创建表以及序列"><a href="#7-2、创建表以及序列" class="headerlink" title="7.2、创建表以及序列"></a>7.2、创建表以及序列</h2><pre class="line-numbers language-none"><code class="language-none">--创建表，表名以及字段名都要大写
CREATE TABLE "TB_USER" (
"ID" NUMBER(20) VISIBLE NOT NULL ,
"USER_NAME" VARCHAR2(255 BYTE) VISIBLE ,
"PASSWORD" VARCHAR2(255 BYTE) VISIBLE ,
"NAME" VARCHAR2(255 BYTE) VISIBLE ,
"AGE" NUMBER(10) VISIBLE ,
"EMAIL" VARCHAR2(255 BYTE) VISIBLE
)

--创建序列
CREATE SEQUENCE SEQ_USER START WITH 1 INCREMENT BY 1<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<h2 id="7-3、jdbc驱动包"><a href="#7-3、jdbc驱动包" class="headerlink" title="7.3、jdbc驱动包"></a>7.3、jdbc驱动包</h2><p>由于版权原因，我们不能直接通过maven的中央仓库下载oracle数据库的jdbc驱动包，所以我们需要将驱动包安装到<br>本地仓库。</p>
<pre class="line-numbers language-none"><code class="language-none">#ojdbc8.jar文件在资料中可以找到

mvn install:install-file -DgroupId=com.oracle -DartifactId=ojdbc8 -Dversion=12.1.0.1 -
Dpackaging=jar -Dfile=ojdbc8.jar<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>
<p>安装完成后的坐标：</p>
<pre class="line-numbers language-none"><code class="language-none">&lt;dependency&gt;
&lt;groupId&gt;com.oracle&lt;/groupId&gt;
&lt;artifactId&gt;ojdbc8&lt;/artifactId&gt;
&lt;version&gt;12.1.0.1&lt;/version&gt;
&lt;/dependency&gt;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<h2 id="7-4、修改application-properties"><a href="#7-4、修改application-properties" class="headerlink" title="7.4、修改application.properties"></a>7.4、修改application.properties</h2><p>对于application.properties的修改，需要修改2个位置，分别是：</p>
<pre class="line-numbers language-none"><code class="language-none">#数据库连接配置
spring.datasource.driver-class-name=oracle.jdbc.OracleDriver
spring.datasource.url=jdbc:oracle:thin:@192.168.31.81:1521:xe
spring.datasource.username=system
spring.datasource.password=oracle

#id生成策略
mybatis-plus.global-config.db-config.id-type=input<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<h2 id="7-5、配置序列"><a href="#7-5、配置序列" class="headerlink" title="7.5、配置序列"></a>7.5、配置序列</h2><p>使用Oracle的序列需要做2件事情：<br>第一，需要配置MP的序列生成器到Spring容器：</p>
<pre class="line-numbers language-none"><code class="language-none">package cn.itcast.mp;

import com.baomidou.mybatisplus.extension.incrementer.OracleKeyGenerator;
import com.baomidou.mybatisplus.extension.plugins.PaginationInterceptor;
import org.mybatis.spring.annotation.MapperScan;
import org.springframework.context.annotation.Bean;
import org.springframework.context.annotation.Configuration;

@Configuration
@MapperScan("cn.itcast.mp.mapper") //设置mapper接口的扫描包
public class MybatisPlusConfig {

/**
* 分页插件
*/
@Bean
public PaginationInterceptor paginationInterceptor() {
return new PaginationInterceptor();
}

/**
* 序列生成器
*/
@Bean
public OracleKeyGenerator oracleKeyGenerator(){
return new OracleKeyGenerator();
    }
}<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>第二，在实体对象中指定序列的名称：</p>
<pre class="line-numbers language-none"><code class="language-none">@KeySequence(value = "SEQ_USER", clazz = Long.class)
public class User{
......
}<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>
<h2 id="7-6、测试"><a href="#7-6、测试" class="headerlink" title="7.6、测试"></a>7.6、测试</h2><pre class="line-numbers language-none"><code class="language-none">package cn.itcast.mp;

import cn.itcast.mp.mapper.UserMapper;
import cn.itcast.mp.pojo.User;
import org.junit.Test;
import org.junit.runner.RunWith;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.boot.test.context.SpringBootTest;
import org.springframework.test.context.junit4.SpringRunner;
import java.util.List;

@RunWith(SpringRunner.class)
@SpringBootTest
public class UserMapperTest {

@Autowired
private UserMapper userMapper;

@Test
public void testInsert(){
User user = new User();
user.setAge(20);
user.setEmail("test@itcast.cn");
user.setName("曹操");
user.setUserName("caocao");
user.setPassword("123456");

int result = this.userMapper.insert(user); //返回的result是受影响的行数，并不是自增
后的id

System.out.println("result = " + result);

System.out.println(user.getId()); //自增后的id会回填到对象中
}

@Test
public void testSelectById(){

User user = this.userMapper.selectById(8L);

System.out.println(user);
    }
}<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p><img src="/../MybatisPlus/20.png" alt="数据库本地库 id 查询"></p>
<h1 id="8、插件"><a href="#8、插件" class="headerlink" title="8、插件"></a>8、插件</h1><h2 id="8-1、mybatis的插件机制"><a href="#8-1、mybatis的插件机制" class="headerlink" title="8.1、mybatis的插件机制"></a>8.1、mybatis的插件机制</h2><p>MyBatis 允许你在已映射语句执行过程中的某一点进行拦截调用。默认情况下，MyBatis 允许使用插件来拦截的方法</p>
<p>调用包括：</p>
<ol>
<li>Executor (update, query, flushStatements, commit, rollback, getTransaction, close, isClosed)</li>
<li>ParameterHandler (getParameterObject, setParameters)</li>
<li>ResultSetHandler (handleResultSets, handleOutputParameters)</li>
<li>StatementHandler (prepare, parameterize, batch, update, query)</li>
</ol>
<p>我们看到了可以拦截Executor接口的部分方法，比如update，query，commit，rollback等方法，还有其他接口的<br>一些方法等。<br>总体概括为：</p>
<ol>
<li>拦截执行器的方法</li>
<li>拦截参数的处理</li>
<li>拦截结果集的处理</li>
<li>拦截Sql语法构建的处理</li>
</ol>
<p>拦截器示例：</p>
<pre class="line-numbers language-none"><code class="language-none">package cn.itcast.mp.plugins;

import org.apache.ibatis.executor.Executor;
import org.apache.ibatis.mapping.MappedStatement;
import org.apache.ibatis.plugin.*;
import java.util.Properties;

@Intercepts({@Signature(
type= Executor.class,
method = "update",
args = {MappedStatement.class,Object.class})})
public class MyInterceptor implements Interceptor {

@Override
public Object intercept(Invocation invocation) throws Throwable {

//拦截方法，具体业务逻辑编写的位置
return invocation.proceed();
}

@Override
public Object plugin(Object target) {
//创建target对象的代理对象,目的是将当前拦截器加入到该对象中
return Plugin.wrap(target, this);
}

@Override
public void setProperties(Properties properties) {
//属性设置
    }
}<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>注入到Spring容器：</p>
<pre class="line-numbers language-none"><code class="language-none">/**
* 自定义拦截器
*/
@Bean
public MyInterceptor myInterceptor(){
return new MyInterceptor();
}<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>或者通过xml配置，mybatis-config.xml：</p>
<pre class="line-numbers language-none"><code class="language-none">&lt;?xml version="1.0" encoding="UTF-8" ?&gt;
&lt;!DOCTYPE configuration
PUBLIC "-//mybatis.org//DTD Config 3.0//EN"
"http://mybatis.org/dtd/mybatis-3-config.dtd"&gt;
&lt;configuration&gt;

&lt;plugins&gt;
&lt;plugin interceptor="cn.itcast.mp.plugins.MyInterceptor"&gt;&lt;/plugin&gt;
&lt;/plugins&gt;

&lt;/configuration&gt;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h2 id="8-2、执行分析插件"><a href="#8-2、执行分析插件" class="headerlink" title="8.2、执行分析插件"></a>8.2、执行分析插件</h2><p>在MP中提供了对SQL执行的分析的插件，可用作阻断全表更新、删除的操作，注意：该插件仅适用于开发环境，不<br>适用于生产环境。<br>SpringBoot配置：</p>
<pre class="line-numbers language-none"><code class="language-none">@Bean
public SqlExplainInterceptor sqlExplainInterceptor(){
SqlExplainInterceptor sqlExplainInterceptor = new SqlExplainInterceptor();

List&lt;ISqlParser&gt; sqlParserList = new ArrayList&lt;&gt;();
// 攻击 SQL 阻断解析器、加入解析链
sqlParserList.add(new BlockAttackSqlParser());
sqlExplainInterceptor.setSqlParserList(sqlParserList);

return sqlExplainInterceptor;
}<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>测试：</p>
<pre class="line-numbers language-none"><code class="language-none">@Test
public void testUpdate(){
User user = new User();
user.setAge(20);
int result = this.userMapper.update(user, null);
System.out.println("result = " + result);
}<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>结果：</p>
<pre class="line-numbers language-none"><code class="language-none">Caused by: com.baomidou.mybatisplus.core.exceptions.MybatisPlusException: Prohibition
of table update operation
at
com.baomidou.mybatisplus.core.toolkit.ExceptionUtils.mpe(ExceptionUtils.java:49)
at com.baomidou.mybatisplus.core.toolkit.Assert.isTrue(Assert.java:38)
at com.baomidou.mybatisplus.core.toolkit.Assert.notNull(Assert.java:72)
at
com.baomidou.mybatisplus.extension.parsers.BlockAttackSqlParser.processUpdate(BlockAtt
ackSqlParser.java:45)
at
com.baomidou.mybatisplus.core.parser.AbstractJsqlParser.processParser(AbstractJsqlPars
er.java:92)
at
com.baomidou.mybatisplus.core.parser.AbstractJsqlParser.parser(AbstractJsqlParser.java
:67)
at
com.baomidou.mybatisplus.extension.handlers.AbstractSqlParserHandler.sqlParser(Abstrac
tSqlParserHandler.java:76)
at
com.baomidou.mybatisplus.extension.plugins.SqlExplainInterceptor.intercept(SqlExplainI
nterceptor.java:63)
at org.apache.ibatis.plugin.Plugin.invoke(Plugin.java:61)
at com.sun.proxy.$Proxy70.update(Unknown Source)
at
org.apache.ibatis.session.defaults.DefaultSqlSession.update(DefaultSqlSession.java:197
)
... 41 more
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>可以看到，当执行全表更新时，会抛出异常，这样有效防止了一些误操作。</p>
<h2 id="8-3、性能分析插件"><a href="#8-3、性能分析插件" class="headerlink" title="8.3、性能分析插件"></a>8.3、性能分析插件</h2><p>性能分析拦截器，用于输出每条 SQL 语句及其执行时间，可以设置最大执行时间，超过时间会抛出异常。<br>该插件只用于开发环境，不建议生产环境使用。</p>
<p>配置:</p>
<pre class="line-numbers language-none"><code class="language-none">&lt;?xml version="1.0" encoding="UTF-8" ?&gt;
&lt;!DOCTYPE configuration
PUBLIC "-//mybatis.org//DTD Config 3.0//EN"
"http://mybatis.org/dtd/mybatis-3-config.dtd"&gt;

&lt;configuration&gt;
&lt;plugins&gt;
&lt;!-- SQL 执行性能分析，开发环境使用，线上不推荐。 maxTime 指的是 sql 最大执行时长 --&gt;
&lt;plugin
interceptor="com.baomidou.mybatisplus.extension.plugins.PerformanceInterceptor"&gt;
    &lt;property name="maxTime" value="100" /&gt;
    &lt;!--SQL是否格式化 默认false--&gt;
    &lt;property name="format" value="true" /&gt;
&lt;/plugin&gt;
&lt;/plugins&gt;
&lt;/configuration&gt;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>执行结果：</p>
<pre class="line-numbers language-none"><code class="language-none">Time：11 ms - ID：cn.itcast.mp.mapper.UserMapper.selectById
Execute SQL：
SELECT
id,
user_name,
password,
name,
age,
email
FROM
tb_user
WHERE
id=7<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>可以看到，执行时间为11ms。如果将maxTime设置为1，那么，该操作会抛出异常。</p>
<pre class="line-numbers language-none"><code class="language-none">Caused by: com.baomidou.mybatisplus.core.exceptions.MybatisPlusException: The SQL
execution time is too large, please optimize !
at com.baomidou.mybatisplus.core.toolkit.ExceptionUtils.mpe(ExceptionUtils.java:49)
at com.baomidou.mybatisplus.core.toolkit.Assert.isTrue(Assert.java:38)
................<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre>


<h2 id="8-4、乐观锁插件"><a href="#8-4、乐观锁插件" class="headerlink" title="8.4、乐观锁插件"></a>8.4、乐观锁插件</h2><h3 id="8-4-1、主要适用场景"><a href="#8-4-1、主要适用场景" class="headerlink" title="8.4.1、主要适用场景"></a>8.4.1、主要适用场景</h3><p>意图：</p>
<p>当要更新一条记录的时候，希望这条记录没有被别人更新乐观锁实现方式：</p>
<ul>
<li>取出记录时，获取当前version</li>
<li>更新时，带上这个version</li>
<li>执行更新时， set version = newVersion where version = oldVersion</li>
<li>如果version不对，就更新失败</li>
</ul>
<h3 id="8-4-2、插件配置"><a href="#8-4-2、插件配置" class="headerlink" title="8.4.2、插件配置"></a>8.4.2、插件配置</h3><p>spring xml:</p>
<pre class="line-numbers language-none"><code class="language-none">&lt;bean class="com.baomidou.mybatisplus.extension.plugins.OptimisticLockerInterceptor"/&gt; 1<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>


<p>spring boot:</p>
<pre class="line-numbers language-none"><code class="language-none">@Bean
public OptimisticLockerInterceptor optimisticLockerInterceptor() {
    return new OptimisticLockerInterceptor();
}<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>

<h3 id="8-4-3、注解实体字段"><a href="#8-4-3、注解实体字段" class="headerlink" title="8.4.3、注解实体字段"></a>8.4.3、注解实体字段</h3><p>需要为实体字段添加@Version注解。</p>
<p>第一步，为表添加version字段，并且设置初始值为1：</p>
<pre class="line-numbers language-none"><code class="language-none">ALTER TABLE `tb_user`
ADD COLUMN `version` int(10) NULL AFTER `email`;
UPDATE `tb_user` SET `version`='1';<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>

<p>第二步，为User实体对象添加version字段，并且添加@Version注解：</p>
<pre class="line-numbers language-none"><code class="language-none">@Version
private Integer version;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>

<h3 id="8-4-4、测试"><a href="#8-4-4、测试" class="headerlink" title="8.4.4、测试"></a>8.4.4、测试</h3><p>测试用例：</p>
<pre class="line-numbers language-none"><code class="language-none">@Test
public void testUpdate(){
User user = new User();
user.setAge(30);
user.setId(2L);
user.setVersion(1); //获取到version为1

int result = this.userMapper.updateById(user);

System.out.println("result = " + result);
}<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>执行日志：</p>
<pre class="line-numbers language-none"><code class="language-none">[main] [com.baomidou.mybatisplus.extension.parsers.BlockAttackSqlParser]-[DEBUG]
Original SQL: UPDATE tb_user SET age=?,
version=? WHERE id=? AND version=?
[main] [com.baomidou.mybatisplus.extension.parsers.BlockAttackSqlParser]-[DEBUG]
parser sql: UPDATE tb_user SET age = ?, version = ? WHERE id = ? AND version = ?
[main] [org.springframework.jdbc.datasource.DataSourceUtils]-[DEBUG] Fetching JDBC
Connection from DataSource
[main] [org.mybatis.spring.transaction.SpringManagedTransaction]-[DEBUG] JDBC
Connection [HikariProxyConnection@540206885 wrapping
com.mysql.jdbc.JDBC4Connection@27e0f2f5] will not be managed by Spring
[main] [cn.itcast.mp.mapper.UserMapper.updateById]-[DEBUG] ==&gt; Preparing: UPDATE
tb_user SET age=?, version=? WHERE id=? AND version=?
[main] [cn.itcast.mp.mapper.UserMapper.updateById]-[DEBUG] ==&gt; Parameters:
30(Integer), 2(Integer), 2(Long), 1(Integer)
[main] [cn.itcast.mp.mapper.UserMapper.updateById]-[DEBUG] &lt;== Updates: 1
[main] [org.mybatis.spring.SqlSessionUtils]-[DEBUG] Closing non transactional
SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@30135202]
result = 1<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>


<p>可以看到，更新的条件中有version条件，并且更新的version为2。<br>如果再次执行，更新则不成功。这样就避免了多人同时更新时导致数据的不一致。</p>
<h3 id="8-4-5、特别说明"><a href="#8-4-5、特别说明" class="headerlink" title="8.4.5、特别说明"></a>8.4.5、特别说明</h3><ul>
<li>支持的数据类型只有:int,Integer,long,Long,Date,Timestamp,LocalDateTime</li>
<li>整数类型下 newVersion = oldVersion + 1</li>
<li>newVersion 会回写到 entity 中</li>
<li>仅支持 updateById(id) 与 update(entity, wrapper) 方法</li>
<li>在 update(entity, wrapper) 方法下, wrapper 不能复用!!!</li>
</ul>
<h1 id="9、Sql-注入器"><a href="#9、Sql-注入器" class="headerlink" title="9、Sql 注入器"></a>9、Sql 注入器</h1><p>我们已经知道，在MP中，通过AbstractSqlInjector将BaseMapper中的方法注入到了Mybatis容器，这样这些方法才<br>可以正常执行。<br>那么，如果我们需要扩充BaseMapper中的方法，又该如何实现呢？<br>下面我们以扩展findAll方法为例进行学习。</p>
<h2 id="9-1、编写MyBaseMapper"><a href="#9-1、编写MyBaseMapper" class="headerlink" title="9.1、编写MyBaseMapper"></a>9.1、编写MyBaseMapper</h2><pre class="line-numbers language-none"><code class="language-none">package cn.itcast.mp.mapper;
import com.baomidou.mybatisplus.core.mapper.BaseMapper;
import java.util.List;

public interface MyBaseMapper&lt;T&gt; extends BaseMapper&lt;T&gt; {
    List&lt;T&gt; findAll();
}<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>其他的Mapper都可以继承该Mapper，这样实现了统一的扩展。<br>如：</p>
<pre class="line-numbers language-none"><code class="language-none">package cn.itcast.mp.mapper;
import cn.itcast.mp.pojo.User;

public interface UserMapper extends MyBaseMapper&lt;User&gt; {
User findById(Long id);
}<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<h2 id="9-2、编写MySqlInjector"><a href="#9-2、编写MySqlInjector" class="headerlink" title="9.2、编写MySqlInjector"></a>9.2、编写MySqlInjector</h2><p>如果直接继承AbstractSqlInjector的话，原有的BaseMapper中的方法将失效，所以我们选择继承DefaultSqlInjector<br>进行扩展。</p>
<pre class="line-numbers language-none"><code class="language-none">package cn.itcast.mp.sqlInjector;

import com.baomidou.mybatisplus.core.injector.AbstractMethod;
import com.baomidou.mybatisplus.core.injector.DefaultSqlInjector;
import java.util.List;

public class MySqlInjector extends DefaultSqlInjector {
@Override
public List&lt;AbstractMethod&gt; getMethodList() {

List&lt;AbstractMethod&gt; methodList = super.getMethodList();

methodList.add(new FindAll());

// 再扩充自定义的方法
list.add(new FindAll());
return methodList;
    }
}<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<h2 id="9-3、编写FindAll"><a href="#9-3、编写FindAll" class="headerlink" title="9.3、编写FindAll"></a>9.3、编写FindAll</h2><pre class="line-numbers language-none"><code class="language-none">package cn.itcast.mp.sqlInjector;

import com.baomidou.mybatisplus.core.enums.SqlMethod;
import com.baomidou.mybatisplus.core.injector.AbstractMethod;
import com.baomidou.mybatisplus.core.metadata.TableInfo;
import org.apache.ibatis.mapping.MappedStatement;
import org.apache.ibatis.mapping.SqlSource;

public class FindAll extends AbstractMethod {

@Override
public MappedStatement injectMappedStatement(Class&lt;?&gt; mapperClass, Class&lt;?&gt;
modelClass, TableInfo tableInfo) {

String sqlMethod = "findAll";

String sql = "select * from " + tableInfo.getTableName();

SqlSource sqlSource = languageDriver.createSqlSource(configuration, sql,
modelClass);

return this.addSelectMappedStatement(mapperClass, sqlMethod, sqlSource,
modelClass, tableInfo);
    }
}<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<h2 id="9-4、注册到Spring容器"><a href="#9-4、注册到Spring容器" class="headerlink" title="9.4、注册到Spring容器"></a>9.4、注册到Spring容器</h2><pre class="line-numbers language-none"><code class="language-none">/**
* 自定义SQL注入器
*/
@Bean
public MySqlInjector mySqlInjector(){
    return new MySqlInjector();
}<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<h2 id="9-5、测试"><a href="#9-5、测试" class="headerlink" title="9.5、测试"></a>9.5、测试</h2><pre class="line-numbers language-none"><code class="language-none">@Test
public void testFindAll(){
    List&lt;User&gt; users = this.userMapper.findAll();
        for (User user : users) {   
            System.out.println(user);
        }
    }<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>输出的SQL：</p>
<pre class="line-numbers language-none"><code class="language-none">[main] [cn.itcast.mp.mapper.UserMapper.findAll]-[DEBUG] ==&gt; Preparing: select * from
tb_user
[main] [cn.itcast.mp.mapper.UserMapper.findAll]-[DEBUG] ==&gt; Parameters:
[main] [cn.itcast.mp.mapper.UserMapper.findAll]-[DEBUG] &lt;== Total: 10<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>

<p>至此，我们实现了全局扩展SQL注入器。</p>
<h1 id="10、自动填充功能"><a href="#10、自动填充功能" class="headerlink" title="10、自动填充功能"></a>10、自动填充功能</h1><p>有些时候我们可能会有这样的需求，插入或者更新数据时，希望有些字段可以自动填充数据，比如密码、version<br>等。在MP中提供了这样的功能，可以实现自动填充。</p>
<h2 id="10-1、添加-TableField注解"><a href="#10-1、添加-TableField注解" class="headerlink" title="10.1、添加@TableField注解"></a>10.1、添加@TableField注解</h2><pre class="line-numbers language-none"><code class="language-none">@TableField(fill = FieldFill.INSERT) //插入数据时进行填充
private String password;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>


<p>为password添加自动填充功能，在新增数据时有效。<br>FieldFill提供了多种模式选择：</p>
<pre class="line-numbers language-none"><code class="language-none">public enum FieldFill {
/**
* 默认不处理
*/
DEFAULT,
/**
* 插入时填充字段
*/
INSERT,
/**
* 更新时填充字段
*/
UPDATE,
/**
* 插入和更新时填充字段
*/
INSERT_UPDATE
}<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<h2 id="10-2、编写MyMetaObjectHandler"><a href="#10-2、编写MyMetaObjectHandler" class="headerlink" title="10.2、编写MyMetaObjectHandler"></a>10.2、编写MyMetaObjectHandler</h2><pre class="line-numbers language-none"><code class="language-none">package cn.itcast.mp.handler;

import com.baomidou.mybatisplus.core.handlers.MetaObjectHandler;
import org.apache.ibatis.reflection.MetaObject;
import org.springframework.stereotype.Component;

@Component
public class MyMetaObjectHandler implements MetaObjectHandler {

@Override
public void insertFill(MetaObject metaObject) {

Object password = getFieldValByName("password", metaObject);

if(null == password){
//字段为空，可以进行填充
setFieldValByName("password", "123456", metaObject);
    }
}

@Override
public void updateFill(MetaObject metaObject) {
    }
}<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<h2 id="10-3、测试"><a href="#10-3、测试" class="headerlink" title="10.3、测试"></a>10.3、测试</h2><pre class="line-numbers language-none"><code class="language-none">@Test
public void testInsert(){

User user = new User();
user.setName("关羽");
user.setUserName("guanyu");
user.setAge(30);
user.setEmail("guanyu@itast.cn");
user.setVersion(1);

int result = this.userMapper.insert(user);

System.out.println("result = " + result);
}<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>结果：<br><img src="/../MybatisPlus/21.png" alt="自动填充，生成密码"></p>
<h1 id="11、-逻辑删除"><a href="#11、-逻辑删除" class="headerlink" title="11、 逻辑删除"></a>11、 逻辑删除</h1><p>开发系统时，有时候在实现功能时，删除操作需要实现逻辑删除，所谓逻辑删除就是将数据标记为删除，而并非真正<br>的物理删除（非DELETE操作），查询时需要携带状态条件，确保被标记的数据不被查询到。这样做的目的就是避免<br>数据被真正的删除。<br>MP就提供了这样的功能，方便我们使用，接下来我们一起学习下。</p>
<h2 id="11-1、修改表结构"><a href="#11-1、修改表结构" class="headerlink" title="11.1、修改表结构"></a>11.1、修改表结构</h2><p>为tb_user表增加deleted字段，用于表示数据是否被删除，1代表删除，0代表未删除。</p>
<pre class="line-numbers language-none"><code class="language-none">ALTER TABLE `tb_user`
ADD COLUMN `deleted` int(1) NULL DEFAULT 0 COMMENT '1代表删除，0代表未删除' AFTER
`version`;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>

<p>同时，也修改User实体，增加deleted属性并且添加@TableLogic注解：</p>
<pre class="line-numbers language-none"><code class="language-none">@TableLogic
private Integer deleted;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>

<h2 id="11-2、-配置"><a href="#11-2、-配置" class="headerlink" title="11.2、  配置"></a>11.2、  配置</h2><p>application.properties：</p>
<pre class="line-numbers language-none"><code class="language-none"># 逻辑已删除值(默认为 1)
mybatis-plus.global-config.db-config.logic-delete-value=1

# 逻辑未删除值(默认为 0)
mybatis-plus.global-config.db-config.logic-not-delete-value=0<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<h2 id="11-3、测试"><a href="#11-3、测试" class="headerlink" title="11.3、测试"></a>11.3、测试</h2><pre class="line-numbers language-none"><code class="language-none">@Test
public void testDeleteById(){
    this.userMapper.deleteById(2L);
}<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>

<p>执行的SQL：</p>
<pre class="line-numbers language-none"><code class="language-none">[main] [cn.itcast.mp.mapper.UserMapper.deleteById]-[DEBUG] ==&gt; Preparing: UPDATE
tb_user SET deleted=1 WHERE id=? AND deleted=0
[main] [cn.itcast.mp.mapper.UserMapper.deleteById]-[DEBUG] ==&gt; Parameters: 2(Long)
[main] [cn.itcast.mp.mapper.UserMapper.deleteById]-[DEBUG] &lt;== Updates: 1<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>

<p><img src="/../MybatisPlus/22.png" alt="标记删除，防止数据被删除"></p>
<p>测试查询：</p>
<pre class="line-numbers language-none"><code class="language-none">@Test
public void testSelectById(){
User user = this.userMapper.selectById(2L);
System.out.println(user);
}<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>执行的SQL：</p>
<pre class="line-numbers language-none"><code class="language-none">[main] [cn.itcast.mp.mapper.UserMapper.selectById]-[DEBUG] ==&gt; Preparing: SELECT
id,user_name,password,name,age,email,version,deleted FROM tb_user WHERE id=? AND
deleted=0
[main] [cn.itcast.mp.mapper.UserMapper.selectById]-[DEBUG] ==&gt; Parameters: 2(Long)
[main] [cn.itcast.mp.mapper.UserMapper.selectById]-[DEBUG] &lt;== Total: 0<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>可见，已经实现了逻辑删除。</p>
<h1 id="12、-通用枚举"><a href="#12、-通用枚举" class="headerlink" title="12、 通用枚举"></a>12、 通用枚举</h1><h2 id="12-1、修改表结构"><a href="#12-1、修改表结构" class="headerlink" title="12.1、修改表结构"></a>12.1、修改表结构</h2><pre class="line-numbers language-none"><code class="language-none">ALTER TABLE `tb_user`
ADD COLUMN `sex` int(1) NULL DEFAULT 1 COMMENT '1-男，2-女' AFTER `deleted`;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>

<h2 id="12-2、定义枚举"><a href="#12-2、定义枚举" class="headerlink" title="12.2、定义枚举"></a>12.2、定义枚举</h2><pre class="line-numbers language-none"><code class="language-none">package cn.itcast.mp.enums;
import com.baomidou.mybatisplus.core.enums.IEnum;
import com.fasterxml.jackson.annotation.JsonValue;
public enum SexEnum implements IEnum&lt;Integer&gt; {

MAN(1,"男"),
WOMAN(2,"女");

private int value;
private String desc;

SexEnum(int value, String desc) {
this.value = value;
this.desc = desc;
}

@Override
public Integer getValue() {
return this.value;
}

@Override
public String toString() {
return this.desc;
    }
}<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<h2 id="12-3、配置"><a href="#12-3、配置" class="headerlink" title="12.3、配置"></a>12.3、配置</h2><pre class="line-numbers language-none"><code class="language-none"># 枚举包扫描
mybatis-plus.type-enums-package=cn.itcast.mp.enums<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>

<h2 id="12-4、修改实体"><a href="#12-4、修改实体" class="headerlink" title="12.4、修改实体"></a>12.4、修改实体</h2><pre class="line-numbers language-none"><code class="language-none">private SexEnum sex;<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>

<h2 id="12-5、测试"><a href="#12-5、测试" class="headerlink" title="12.5、测试"></a>12.5、测试</h2><p>测试插入数据:</p>
<pre class="line-numbers language-none"><code class="language-none">@Test
public void testInsert(){

User user = new User();
user.setName("貂蝉");
user.setUserName("diaochan");
user.setAge(20);
user.setEmail("diaochan@itast.cn");
user.setVersion(1);
user.setSex(SexEnum.WOMAN);

int result = this.userMapper.insert(user);

System.out.println("result = " + result);
}<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>SQL：</p>
<pre class="line-numbers language-none"><code class="language-none">[main] [cn.itcast.mp.mapper.UserMapper.insert]-[DEBUG] ==&gt; Preparing: INSERT INTO
tb_user ( user_name, password, name, age, email, version, sex ) VALUES ( ?, ?, ?, ?, ?,
?, ? )
[main] [cn.itcast.mp.mapper.UserMapper.insert]-[DEBUG] ==&gt; Parameters:
diaochan(String), 123456(String), 貂蝉(String), 20(Integer), diaochan@itast.cn(String),
1(Integer), 2(Integer)
[main] [cn.itcast.mp.mapper.UserMapper.insert]-[DEBUG] &lt;== Updates: 1<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p><img src="/../MybatisPlus/23.png" alt="通过枚举属性设置性别"></p>
<p>查询：</p>
<pre class="line-numbers language-none"><code class="language-none">@Test
public void testSelectById(){
User user = this.userMapper.selectById(2L);
System.out.println(user);
}<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>结果：</p>
<pre class="line-numbers language-none"><code class="language-none">[main] [cn.itcast.mp.mapper.UserMapper.selectById]-[DEBUG] ==&gt; Preparing: SELECT
id,user_name,password,name,age,email,version,deleted,sex FROM tb_user WHERE id=? AND
deleted=0
[main] [cn.itcast.mp.mapper.UserMapper.selectById]-[DEBUG] ==&gt; Parameters: 2(Long)
[main] [cn.itcast.mp.mapper.UserMapper.selectById]-[DEBUG] &lt;== Total: 1
User(id=2, userName=lisi, password=123456, name=李四, age=30, email=test2@itcast.cn,
address=null, version=2, deleted=0, sex=女)<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>从测试可以看出，可以很方便的使用枚举了。<br>查询条件时也是有效的：</p>
<pre class="line-numbers language-none"><code class="language-none">@Test
public void testSelectBySex() {

QueryWrapper&lt;User&gt; wrapper = new QueryWrapper&lt;&gt;();
wrapper.eq("sex", SexEnum.WOMAN);

List&lt;User&gt; users = this.userMapper.selectList(wrapper);

for (User user : users) {
System.out.println(user);
    }
}<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>SQL:</p>
<pre class="line-numbers language-none"><code class="language-none">[main] [cn.itcast.mp.mapper.UserMapper.selectList]-[DEBUG] ==&gt; Preparing: SELECT
id,user_name,password,name,age,email,version,deleted,sex FROM tb_user WHERE deleted=0
AND sex = ?
[main] [cn.itcast.mp.mapper.UserMapper.selectList]-[DEBUG] ==&gt; Parameters: 2(Integer)
[main] [cn.itcast.mp.mapper.UserMapper.selectList]-[DEBUG] &lt;== Total: 3<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<h1 id="13、代码生成器"><a href="#13、代码生成器" class="headerlink" title="13、代码生成器"></a>13、代码生成器</h1><p>AutoGenerator 是 MyBatis-Plus 的代码生成器，通过 AutoGenerator 可以快速生成 Entity、Mapper、Mapper<br>XML、Service、Controller 等各个模块的代码，极大的提升了开发效率。<br>效果：<br><img src="/../MybatisPlus/24.png" alt="通过Mybatis插件生成项目文件的子集和必要分类文件内容"></p>
<h2 id="13-1、创建工程"><a href="#13-1、创建工程" class="headerlink" title="13.1、创建工程"></a>13.1、创建工程</h2><p>pom.xml：</p>
<pre class="line-numbers language-none"><code class="language-none">&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;project xmlns="http://maven.apache.org/POM/4.0.0"
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xsi:schemaLocation="http://maven.apache.org/POM/4.0.0
http://maven.apache.org/xsd/maven-4.0.0.xsd"&gt;

&lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;

&lt;parent&gt;
&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
&lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;
&lt;version&gt;2.1.4.RELEASE&lt;/version&gt;
&lt;/parent&gt;

&lt;groupId&gt;cn.itcast.mp&lt;/groupId&gt;
&lt;artifactId&gt;itcast-mp-generator&lt;/artifactId&gt;
&lt;version&gt;1.0-SNAPSHOT&lt;/version&gt;

&lt;dependencies&gt;

&lt;dependency&gt;
&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
&lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;
&lt;scope&gt;test&lt;/scope&gt;
&lt;/dependency&gt;

&lt;!--mybatis-plus的springboot支持--&gt;
&lt;dependency&gt;
&lt;groupId&gt;com.baomidou&lt;/groupId&gt;
&lt;artifactId&gt;mybatis-plus-boot-starter&lt;/artifactId&gt;
&lt;version&gt;3.1.1&lt;/version&gt;
&lt;/dependency&gt;

&lt;dependency&gt;
&lt;groupId&gt;com.baomidou&lt;/groupId&gt;
&lt;artifactId&gt;mybatis-plus-generator&lt;/artifactId&gt;
&lt;version&gt;3.1.1&lt;/version&gt;
&lt;/dependency&gt;

&lt;dependency&gt;
&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
&lt;artifactId&gt;spring-boot-starter-freemarker&lt;/artifactId&gt;
&lt;/dependency&gt;

&lt;!--mysql驱动--&gt;
&lt;dependency&gt;
&lt;groupId&gt;mysql&lt;/groupId&gt;
&lt;artifactId&gt;mysql-connector-java&lt;/artifactId&gt;
&lt;version&gt;5.1.47&lt;/version&gt;
&lt;/dependency&gt;

&lt;dependency&gt;
&lt;groupId&gt;org.slf4j&lt;/groupId&gt;
&lt;artifactId&gt;slf4j-log4j12&lt;/artifactId&gt;
&lt;/dependency&gt;

&lt;/dependencies&gt;


&lt;build&gt;
&lt;plugins&gt;
&lt;plugin&gt;
&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
&lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;
&lt;/plugin&gt;
&lt;/plugins&gt;
&lt;/build&gt;

&lt;/project&gt;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<h2 id="13-2、代码"><a href="#13-2、代码" class="headerlink" title="13.2、代码"></a>13.2、代码</h2><pre class="line-numbers language-none"><code class="language-none">package cn.itcast.mp.generator;

import java.util.ArrayList;
import java.util.List;
import java.util.Scanner;

import com.baomidou.mybatisplus.core.exceptions.MybatisPlusException;
import com.baomidou.mybatisplus.core.toolkit.StringPool;
import com.baomidou.mybatisplus.core.toolkit.StringUtils;
import com.baomidou.mybatisplus.generator.AutoGenerator;
import com.baomidou.mybatisplus.generator.InjectionConfig;
import com.baomidou.mybatisplus.generator.config.DataSourceConfig;
import com.baomidou.mybatisplus.generator.config.FileOutConfig;
import com.baomidou.mybatisplus.generator.config.GlobalConfig;
import com.baomidou.mybatisplus.generator.config.PackageConfig;
import com.baomidou.mybatisplus.generator.config.StrategyConfig;
import com.baomidou.mybatisplus.generator.config.TemplateConfig;
import com.baomidou.mybatisplus.generator.config.po.TableInfo;
import com.baomidou.mybatisplus.generator.config.rules.NamingStrategy;
import com.baomidou.mybatisplus.generator.engine.FreemarkerTemplateEngine;

/**
* &lt;p&gt;
* mysql 代码生成器演示例子
* &lt;/p&gt;
*/
public class MysqlGenerator {
/**
* &lt;p&gt;
* 读取控制台内容
* &lt;/p&gt;
*/
public static String scanner(String tip) {
Scanner scanner = new Scanner(System.in);
StringBuilder help = new StringBuilder();
help.append("请输入" + tip + "：");
System.out.println(help.toString());
if (scanner.hasNext()) {
String ipt = scanner.next();
if (StringUtils.isNotEmpty(ipt)) {
return ipt;
}
}
throw new MybatisPlusException("请输入正确的" + tip + "！");
}
/**
* RUN THIS
*/
public static void main(String[] args) {

// 代码生成器
AutoGenerator mpg = new AutoGenerator();

// 全局配置
GlobalConfig gc = new GlobalConfig();
String projectPath = System.getProperty("user.dir");
gc.setOutputDir(projectPath + "/src/main/java");
gc.setAuthor("itcast");
gc.setOpen(false);
mpg.setGlobalConfig(gc);

// 数据源配置
DataSourceConfig dsc = new DataSourceConfig();
dsc.setUrl("jdbc:mysql://127.0.0.1:3306/mp?
useUnicode=true&amp;useSSL=false&amp;characterEncoding=utf8");
// dsc.setSchemaName("public");
dsc.setDriverName("com.mysql.jdbc.Driver");
dsc.setUsername("root");
dsc.setPassword("root");
mpg.setDataSource(dsc);

// 包配置
PackageConfig pc = new PackageConfig();
pc.setModuleName(scanner("模块名"));
pc.setParent("cn.itcast.mp.generator");
mpg.setPackageInfo(pc);

// 自定义配置
InjectionConfig cfg = new InjectionConfig() {
@Override
public void initMap() {
// to do nothing
}
};

List&lt;FileOutConfig&gt; focList = new ArrayList&lt;&gt;();
focList.add(new FileOutConfig("/templates/mapper.xml.ftl") {
@Override
public String outputFile(TableInfo tableInfo) {
// 自定义输入文件名称
return projectPath + "/itcast-mpsgenerator/src/main/resources/mapper/" + pc.getModuleName()+ "/" + tableInfo.getEntityName() + "Mapper" +
StringPool.DOT_XML;
}
});

cfg.setFileOutConfigList(focList);
mpg.setCfg(cfg);
mpg.setTemplate(new TemplateConfig().setXml(null));

// 策略配置
StrategyConfig strategy = new StrategyConfig();
strategy.setNaming(NamingStrategy.underline_to_camel);
strategy.setColumnNaming(NamingStrategy.underline_to_camel);

//strategy.setSuperEntityClass("com.baomidou.mybatisplus.samples.generator.common.BaseE
ntity");
strategy.setEntityLombokModel(true);
//strategy.setSuperControllerClass("com.baomidou.mybatisplus.samples.generator.common.B
aseController");

strategy.setInclude(scanner("表名"));
strategy.setSuperEntityColumns("id");
strategy.setControllerMappingHyphenStyle(true);
strategy.setTablePrefix(pc.getModuleName() + "_");
mpg.setStrategy(strategy);

// 选择 freemarker 引擎需要指定如下加，注意 pom 依赖必须有！
mpg.setTemplateEngine(new FreemarkerTemplateEngine());
mpg.execute();
    }
}<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<h2 id="13-3、测试"><a href="#13-3、测试" class="headerlink" title="13.3、测试"></a>13.3、测试</h2><p><img src="/../MybatisPlus/25.png" alt="文件生成设置"></p>
<p>代码已生成：<br><img src="/../MybatisPlus/26.png" alt="文件夹内容"></p>
<p>实体对象：<br><img src="/../MybatisPlus/27.png" alt="Mybatis生成的POJO信息"></p>
<h1 id="14、MybatisX-快速开发插件"><a href="#14、MybatisX-快速开发插件" class="headerlink" title="14、MybatisX 快速开发插件"></a>14、MybatisX 快速开发插件</h1><p>MybatisX 是一款基于 IDEA 的快速开发插件，为效率而生。<br>安装方法：打开 IDEA，进入 File -&gt; Settings -&gt; Plugins -&gt; Browse Repositories，输入 mybatisx 搜索并安装。</p>
<p>功能：</p>
<ul>
<li>Java 与 XML 调回跳转</li>
<li>Mapper 方法自动生成 XML</li>
</ul>
<p><img src="/../MybatisPlus/28.png" alt="MybatisX插件功能"></p>
</article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">文章作者: </span><span class="post-copyright-info"><a target="_blank" rel="noopener external nofollow noreferrer" href="https://www.bilibili.com/video/BV1rE41197jR/">黑马程序员</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">文章链接: </span><span class="post-copyright-info"><a target="_blank" rel="noopener external nofollow noreferrer" href="https://www.itheima.com">https://www.itheima.com</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">版权声明: </span><span class="post-copyright-info">此文章版权归 黑马程序员 所有。如有转载，请注明来自原作者(但万物开源)</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/Java/">Java</a><a class="post-meta__tags" href="/tags/MybatisPlus/">MybatisPlus</a></div><div class="post_share"><div class="social-share" data-image="/img/23.png" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/css/share.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/js/social-share.min.js" defer></script></div></div><div class="post-reward"><div class="reward-button"><i class="fas fa-qrcode"></i> 打赏</div><div class="reward-main"><ul class="reward-all"><li class="reward-item"><a href="/img/wechat.jpg" target="_blank"><img class="post-qr-code-img" src="/img/wechat.jpg" alt="微信"/></a><div class="post-qr-code-desc">微信</div></li><li class="reward-item"><a href="/img/alipay.jpg" target="_blank"><img class="post-qr-code-img" src="/img/alipay.jpg" alt="支付宝"/></a><div class="post-qr-code-desc">支付宝</div></li><li class="reward-item"><a href="/./img/Wabi-Sabifag.jpg" target="_blank"><img class="post-qr-code-img" src="/./img/Wabi-Sabifag.jpg" alt="BiliBili"/></a><div class="post-qr-code-desc">BiliBili</div></li></ul></div></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-left"><a href="/2023/08/23/RequirementSpecification/"><img class="prev-cover" src="/img/13.jpg" onerror="onerror=null;src='/img/404.jpg'" alt="cover of previous post"><div class="pagination-info"><div class="label">上一篇</div><div class="prev_info">RequirementSpecification</div></div></a></div><div class="next-post pull-right"><a href="/2023/08/19/Maven/"><img class="next-cover" src="/img/27.png" onerror="onerror=null;src='/img/404.jpg'" alt="cover of next post"><div class="pagination-info"><div class="label">下一篇</div><div class="next_info">Maven基础</div></div></a></div></nav><div class="relatedPosts"><div class="headline"><i class="fas fa-thumbs-up fa-fw"></i><span>相关推荐</span></div><div class="relatedPosts-list"><div><a href="/2023/02/18/JavaEE/" title="JavaEE"><img class="cover" src="/img/22.png" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2023-02-18</div><div class="title">JavaEE</div></div></a></div><div><a href="/2022/12/25/Java-the-best-langage-at-the-World/" title="Java, the world&#39;s best programming language"><img class="cover" src="/img/23.png" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2022-12-25</div><div class="title">Java, the world&#39;s best programming language</div></div></a></div><div><a href="/2023/08/19/Maven/" title="Maven基础"><img class="cover" src="/img/27.png" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2023-08-19</div><div class="title">Maven基础</div></div></a></div></div></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="is-center"><div class="avatar-img"><img src="https://safebooru.org//samples/3404/sample_2d70be5f0453c31b5e9ad641db7cf3fb90ba2c23.jpg?3541071" onerror="this.onerror=null;this.src='https://safebooru.org//samples/3404/sample_2d70be5f0453c31b5e9ad641db7cf3fb90ba2c23.jpg?3541071'" alt="avatar"/></div><div class="author-info__name">Wabi-Sabifag</div><div class="author-info__description">当残风不再，当石烂海竭，我迟迟归场</div></div><div class="card-info-data site-data is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">18</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">23</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">27</div></a></div><a id="card-info-btn" target="_blank" rel="noopener external nofollow noreferrer" href="https://space.bilibili.com/364309102"><i class="fab fa-github"></i><span>我的兴趣都在这里</span></a><div class="card-info-social-icons is-center"><a class="social-icon" href="https://github.com/Wabi-Sabifag" target="_blank" title="Github"><i class="fab fa-github"></i></a><a class="social-icon" href="https://blog.csdn.net/qq_61109834" rel="external nofollow noreferrer" target="_blank" title="CSDN"><i class="fab fa-contao"></i></a><a class="social-icon" href="https://space.bilibili.com/364309102" rel="external nofollow noreferrer" target="_blank" title="BiliBli"><i class="fa fa-bold"></i></a><a class="social-icon" href="mailto:1109388794@qq.com" rel="external nofollow noreferrer" target="_blank" title="Email"><i class="fas fa-envelope"></i></a></div></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn fa-shake"></i><span>公告</span></div><div class="announcement_content">世界上的事我不可一饮而尽，唯愿至死依然热爱而真切的活着、目睹经途的千万。</div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>目录</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#1%E3%80%81%E4%BA%86%E8%A7%A3Mybatis-Plus"><span class="toc-text">1、了解Mybatis-Plus</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#1-1%E3%80%81Mybatis-Plus%E4%BB%8B%E7%BB%8D"><span class="toc-text">1.1、Mybatis-Plus介绍</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#1-2%E3%80%81%E4%BB%A3%E7%A0%81%E4%BB%A5%E5%8F%8A%E6%96%87%E6%A1%A3"><span class="toc-text">1.2、代码以及文档</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#1-3%E3%80%81%E7%89%B9%E6%80%A7"><span class="toc-text">1.3、特性</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#1-4%E3%80%81%E6%9E%B6%E6%9E%84"><span class="toc-text">1.4、架构</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#1-5%E3%80%81%E4%BD%9C%E8%80%85"><span class="toc-text">1.5、作者</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#2%E3%80%81%E5%BF%AB%E9%80%9F%E5%BC%80%E5%A7%8B"><span class="toc-text">2、快速开始</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#2-1%E3%80%81%E5%88%9B%E5%BB%BA%E6%95%B0%E6%8D%AE%E5%BA%93%E4%BB%A5%E5%8F%8A%E8%A1%A8"><span class="toc-text">2.1、创建数据库以及表</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-2%E3%80%81%E5%88%9B%E5%BB%BA%E5%B7%A5%E7%A8%8B"><span class="toc-text">2.2、创建工程</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-3%E3%80%81Mybatis-MP"><span class="toc-text">2.3、Mybatis + MP</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#2-3-1%E3%80%81%E5%88%9B%E5%BB%BA%E5%AD%90Module"><span class="toc-text">2.3.1、创建子Module</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-3-2%E3%80%81Mybatis%E5%AE%9E%E7%8E%B0%E6%9F%A5%E8%AF%A2User"><span class="toc-text">2.3.2、Mybatis实现查询User</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-3-3%E3%80%81Mybatis-MP%E5%AE%9E%E7%8E%B0%E6%9F%A5%E8%AF%A2User"><span class="toc-text">2.3.3、Mybatis+MP实现查询User</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-4%E3%80%81Spring-Mybatis-MP"><span class="toc-text">2.4、Spring + Mybatis + MP</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#2-4-1%E3%80%81%E5%88%9B%E5%BB%BA%E5%AD%90Module"><span class="toc-text">2.4.1、创建子Module</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-4-2%E3%80%81%E5%AE%9E%E7%8E%B0%E6%9F%A5%E8%AF%A2User"><span class="toc-text">2.4.2、实现查询User</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-5%E3%80%81SpringBoot-Mybatis-MP"><span class="toc-text">2.5、SpringBoot + Mybatis + MP</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#2-5-1%E3%80%81%E5%88%9B%E5%BB%BA%E5%B7%A5%E7%A8%8B"><span class="toc-text">2.5.1、创建工程</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-5-2%E3%80%81%E5%AF%BC%E5%85%A5%E4%BE%9D%E8%B5%96"><span class="toc-text">2.5.2、导入依赖</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-5-3%E3%80%81%E7%BC%96%E5%86%99application-properties"><span class="toc-text">2.5.3、编写application.properties</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-5-4%E3%80%81%E7%BC%96%E5%86%99pojo"><span class="toc-text">2.5.4、编写pojo</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-5-5%E3%80%81%E7%BC%96%E5%86%99mapper"><span class="toc-text">2.5.5、编写mapper</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-5-6%E3%80%81%E7%BC%96%E5%86%99%E5%90%AF%E5%8A%A8%E7%B1%BB"><span class="toc-text">2.5.6、编写启动类</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-5-7%E3%80%81%E7%BC%96%E5%86%99%E6%B5%8B%E8%AF%95%E7%94%A8%E4%BE%8B"><span class="toc-text">2.5.7、编写测试用例</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#3%E3%80%81%E9%80%9A%E7%94%A8CRUD"><span class="toc-text">3、通用CRUD</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#3-1%E3%80%81%E6%8F%92%E5%85%A5%E6%93%8D%E4%BD%9C"><span class="toc-text">3.1、插入操作</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#3-1-1%E3%80%81%E6%96%B9%E6%B3%95%E5%AE%9A%E4%B9%89"><span class="toc-text">3.1.1、方法定义</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-1-2%E3%80%81%E6%B5%8B%E8%AF%95%E7%94%A8%E4%BE%8B"><span class="toc-text">3.1.2、测试用例</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-1-3%E3%80%81%E6%B5%8B%E8%AF%95"><span class="toc-text">3.1.3、测试</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-1-4%E3%80%81-TableField"><span class="toc-text">3.1.4、@TableField</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-2%E3%80%81%E6%9B%B4%E6%96%B0%E6%93%8D%E4%BD%9C"><span class="toc-text">3.2、更新操作</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#3-2-1%E3%80%81%E6%A0%B9%E6%8D%AEid%E6%9B%B4%E6%96%B0"><span class="toc-text">3.2.1、根据id更新</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-2-2%E3%80%81%E6%A0%B9%E6%8D%AE%E6%9D%A1%E4%BB%B6%E6%9B%B4%E6%96%B0"><span class="toc-text">3.2.2、根据条件更新</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-3%E3%80%81%E5%88%A0%E9%99%A4%E6%93%8D%E4%BD%9C"><span class="toc-text">3.3、删除操作</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#3-3-1%E3%80%81deleteById"><span class="toc-text">3.3.1、deleteById</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-3-3%E3%80%81delete"><span class="toc-text">3.3.3、delete</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-3-4%E3%80%81deleteBatchIds"><span class="toc-text">3.3.4、deleteBatchIds</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-4%E3%80%81%E6%9F%A5%E8%AF%A2%E6%93%8D%E4%BD%9C"><span class="toc-text">3.4、查询操作</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#3-4-1%E3%80%81selectById"><span class="toc-text">3.4.1、selectById</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-4-2%E3%80%81selectBatchIds"><span class="toc-text">3.4.2、selectBatchIds</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-4-3%E3%80%81selectOne"><span class="toc-text">3.4.3、selectOne</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-4-4%E3%80%81selectCount"><span class="toc-text">3.4.4、selectCount</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-4-5%E3%80%81selectList"><span class="toc-text">3.4.5、selectList</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-4-6%E3%80%81selectPage"><span class="toc-text">3.4.6、selectPage</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-5%E3%80%81SQL%E6%B3%A8%E5%85%A5%E7%9A%84%E5%8E%9F%E7%90%86"><span class="toc-text">3.5、SQL注入的原理</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#4%E3%80%81%E9%85%8D%E7%BD%AE"><span class="toc-text">4、配置</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#4-1%E3%80%81%E5%9F%BA%E6%9C%AC%E9%85%8D%E7%BD%AE"><span class="toc-text">4.1、基本配置</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#4-1-1%E3%80%81configLocation"><span class="toc-text">4.1.1、configLocation</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-1-2%E3%80%81mapperLocations"><span class="toc-text">4.1.2、mapperLocations</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4-2%E3%80%81%E8%BF%9B%E9%98%B6%E9%85%8D%E7%BD%AE"><span class="toc-text">4.2、进阶配置</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#4-2-1%E3%80%81mapUnderscoreToCamelCase"><span class="toc-text">4.2.1、mapUnderscoreToCamelCase</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-2-2%E3%80%81cacheEnabled"><span class="toc-text">4.2.2、cacheEnabled</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4-3%E3%80%81DB-%E7%AD%96%E7%95%A5%E9%85%8D%E7%BD%AE"><span class="toc-text">4.3、DB 策略配置</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#4-3-1%E3%80%81idType"><span class="toc-text">4.3.1、idType</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-3-2%E3%80%81tablePrefix"><span class="toc-text">4.3.2、tablePrefix</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#5%E3%80%81%E6%9D%A1%E4%BB%B6%E6%9E%84%E9%80%A0%E5%99%A8"><span class="toc-text">5、条件构造器</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#5-1%E3%80%81allEq"><span class="toc-text">5.1、allEq</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#5-1-1%E3%80%81%E8%AF%B4%E6%98%8E"><span class="toc-text">5.1.1、说明</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-1-2%E3%80%81%E6%B5%8B%E8%AF%95%E7%94%A8%E4%BE%8B"><span class="toc-text">5.1.2、测试用例</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#5-2%E3%80%81%E5%9F%BA%E6%9C%AC%E6%AF%94%E8%BE%83%E6%93%8D%E4%BD%9C"><span class="toc-text">5.2、基本比较操作</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#5-3%E3%80%81%E6%A8%A1%E7%B3%8A%E6%9F%A5%E8%AF%A2"><span class="toc-text">5.3、模糊查询</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#5-4%E3%80%81%E6%8E%92%E5%BA%8F"><span class="toc-text">5.4、排序</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#5-5%E3%80%81%E9%80%BB%E8%BE%91%E6%9F%A5%E8%AF%A2"><span class="toc-text">5.5、逻辑查询</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#5-6%E3%80%81select"><span class="toc-text">5.6、select</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#6%E3%80%81ActiveRecord"><span class="toc-text">6、ActiveRecord</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#6-1%E3%80%81%E5%BC%80%E5%90%AFAR%E4%B9%8B%E6%97%85"><span class="toc-text">6.1、开启AR之旅</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#6-2%E3%80%81%E6%A0%B9%E6%8D%AE%E4%B8%BB%E9%94%AE%E6%9F%A5%E8%AF%A2"><span class="toc-text">6.2、根据主键查询</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#6-3%E3%80%81%E6%96%B0%E5%A2%9E%E6%95%B0%E6%8D%AE"><span class="toc-text">6.3、新增数据</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#6-2%E3%80%81%E6%A0%B9%E6%8D%AE%E4%B8%BB%E9%94%AE%E6%9F%A5%E8%AF%A2-1"><span class="toc-text">6.2、根据主键查询</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#6-3%E3%80%81%E6%96%B0%E5%A2%9E%E6%95%B0%E6%8D%AE-1"><span class="toc-text">6.3、新增数据</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#6-5%E3%80%81%E6%9B%B4%E6%96%B0%E6%93%8D%E4%BD%9C"><span class="toc-text">6.5、更新操作</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#6-6%E3%80%81%E5%88%A0%E9%99%A4%E6%93%8D%E4%BD%9C"><span class="toc-text">6.6、删除操作</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#6-7%E3%80%81%E6%A0%B9%E6%8D%AE%E6%9D%A1%E4%BB%B6%E6%9F%A5%E8%AF%A2"><span class="toc-text">6.7、根据条件查询</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#7%E3%80%81Oracle-%E4%B8%BB%E9%94%AESequence"><span class="toc-text">7、Oracle 主键Sequence</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#7-1%E3%80%81%E9%83%A8%E7%BD%B2Oracle%E7%8E%AF%E5%A2%83"><span class="toc-text">7.1、部署Oracle环境</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#7-2%E3%80%81%E5%88%9B%E5%BB%BA%E8%A1%A8%E4%BB%A5%E5%8F%8A%E5%BA%8F%E5%88%97"><span class="toc-text">7.2、创建表以及序列</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#7-3%E3%80%81jdbc%E9%A9%B1%E5%8A%A8%E5%8C%85"><span class="toc-text">7.3、jdbc驱动包</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#7-4%E3%80%81%E4%BF%AE%E6%94%B9application-properties"><span class="toc-text">7.4、修改application.properties</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#7-5%E3%80%81%E9%85%8D%E7%BD%AE%E5%BA%8F%E5%88%97"><span class="toc-text">7.5、配置序列</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#7-6%E3%80%81%E6%B5%8B%E8%AF%95"><span class="toc-text">7.6、测试</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#8%E3%80%81%E6%8F%92%E4%BB%B6"><span class="toc-text">8、插件</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#8-1%E3%80%81mybatis%E7%9A%84%E6%8F%92%E4%BB%B6%E6%9C%BA%E5%88%B6"><span class="toc-text">8.1、mybatis的插件机制</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#8-2%E3%80%81%E6%89%A7%E8%A1%8C%E5%88%86%E6%9E%90%E6%8F%92%E4%BB%B6"><span class="toc-text">8.2、执行分析插件</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#8-3%E3%80%81%E6%80%A7%E8%83%BD%E5%88%86%E6%9E%90%E6%8F%92%E4%BB%B6"><span class="toc-text">8.3、性能分析插件</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#8-4%E3%80%81%E4%B9%90%E8%A7%82%E9%94%81%E6%8F%92%E4%BB%B6"><span class="toc-text">8.4、乐观锁插件</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#8-4-1%E3%80%81%E4%B8%BB%E8%A6%81%E9%80%82%E7%94%A8%E5%9C%BA%E6%99%AF"><span class="toc-text">8.4.1、主要适用场景</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#8-4-2%E3%80%81%E6%8F%92%E4%BB%B6%E9%85%8D%E7%BD%AE"><span class="toc-text">8.4.2、插件配置</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#8-4-3%E3%80%81%E6%B3%A8%E8%A7%A3%E5%AE%9E%E4%BD%93%E5%AD%97%E6%AE%B5"><span class="toc-text">8.4.3、注解实体字段</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#8-4-4%E3%80%81%E6%B5%8B%E8%AF%95"><span class="toc-text">8.4.4、测试</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#8-4-5%E3%80%81%E7%89%B9%E5%88%AB%E8%AF%B4%E6%98%8E"><span class="toc-text">8.4.5、特别说明</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#9%E3%80%81Sql-%E6%B3%A8%E5%85%A5%E5%99%A8"><span class="toc-text">9、Sql 注入器</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#9-1%E3%80%81%E7%BC%96%E5%86%99MyBaseMapper"><span class="toc-text">9.1、编写MyBaseMapper</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#9-2%E3%80%81%E7%BC%96%E5%86%99MySqlInjector"><span class="toc-text">9.2、编写MySqlInjector</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#9-3%E3%80%81%E7%BC%96%E5%86%99FindAll"><span class="toc-text">9.3、编写FindAll</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#9-4%E3%80%81%E6%B3%A8%E5%86%8C%E5%88%B0Spring%E5%AE%B9%E5%99%A8"><span class="toc-text">9.4、注册到Spring容器</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#9-5%E3%80%81%E6%B5%8B%E8%AF%95"><span class="toc-text">9.5、测试</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#10%E3%80%81%E8%87%AA%E5%8A%A8%E5%A1%AB%E5%85%85%E5%8A%9F%E8%83%BD"><span class="toc-text">10、自动填充功能</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#10-1%E3%80%81%E6%B7%BB%E5%8A%A0-TableField%E6%B3%A8%E8%A7%A3"><span class="toc-text">10.1、添加@TableField注解</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#10-2%E3%80%81%E7%BC%96%E5%86%99MyMetaObjectHandler"><span class="toc-text">10.2、编写MyMetaObjectHandler</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#10-3%E3%80%81%E6%B5%8B%E8%AF%95"><span class="toc-text">10.3、测试</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#11%E3%80%81-%E9%80%BB%E8%BE%91%E5%88%A0%E9%99%A4"><span class="toc-text">11、 逻辑删除</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#11-1%E3%80%81%E4%BF%AE%E6%94%B9%E8%A1%A8%E7%BB%93%E6%9E%84"><span class="toc-text">11.1、修改表结构</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#11-2%E3%80%81-%E9%85%8D%E7%BD%AE"><span class="toc-text">11.2、  配置</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#11-3%E3%80%81%E6%B5%8B%E8%AF%95"><span class="toc-text">11.3、测试</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#12%E3%80%81-%E9%80%9A%E7%94%A8%E6%9E%9A%E4%B8%BE"><span class="toc-text">12、 通用枚举</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#12-1%E3%80%81%E4%BF%AE%E6%94%B9%E8%A1%A8%E7%BB%93%E6%9E%84"><span class="toc-text">12.1、修改表结构</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#12-2%E3%80%81%E5%AE%9A%E4%B9%89%E6%9E%9A%E4%B8%BE"><span class="toc-text">12.2、定义枚举</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#12-3%E3%80%81%E9%85%8D%E7%BD%AE"><span class="toc-text">12.3、配置</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#12-4%E3%80%81%E4%BF%AE%E6%94%B9%E5%AE%9E%E4%BD%93"><span class="toc-text">12.4、修改实体</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#12-5%E3%80%81%E6%B5%8B%E8%AF%95"><span class="toc-text">12.5、测试</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#13%E3%80%81%E4%BB%A3%E7%A0%81%E7%94%9F%E6%88%90%E5%99%A8"><span class="toc-text">13、代码生成器</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#13-1%E3%80%81%E5%88%9B%E5%BB%BA%E5%B7%A5%E7%A8%8B"><span class="toc-text">13.1、创建工程</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#13-2%E3%80%81%E4%BB%A3%E7%A0%81"><span class="toc-text">13.2、代码</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#13-3%E3%80%81%E6%B5%8B%E8%AF%95"><span class="toc-text">13.3、测试</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#14%E3%80%81MybatisX-%E5%BF%AB%E9%80%9F%E5%BC%80%E5%8F%91%E6%8F%92%E4%BB%B6"><span class="toc-text">14、MybatisX 快速开发插件</span></a></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>最新文章</span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/2023/10/10/ErrorReport/" title="ErrorReport"><img src="/img/18.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="ErrorReport"/></a><div class="content"><a class="title" href="/2023/10/10/ErrorReport/" title="ErrorReport">ErrorReport</a><time datetime="2023-10-10T11:00:22.000Z" title="发表于 2023-10-10 19:00:22">2023-10-10</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2023/08/23/RequirementSpecification/" title="RequirementSpecification"><img src="/img/13.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="RequirementSpecification"/></a><div class="content"><a class="title" href="/2023/08/23/RequirementSpecification/" title="RequirementSpecification">RequirementSpecification</a><time datetime="2023-08-23T04:55:04.000Z" title="发表于 2023-08-23 12:55:04">2023-08-23</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2023/08/22/MybatisPlus/" title="MybatisPlus"><img src="/img/23.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="MybatisPlus"/></a><div class="content"><a class="title" href="/2023/08/22/MybatisPlus/" title="MybatisPlus">MybatisPlus</a><time datetime="2023-08-22T13:35:35.000Z" title="发表于 2023-08-22 21:35:35">2023-08-22</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2023/08/19/Maven/" title="Maven基础"><img src="/img/27.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Maven基础"/></a><div class="content"><a class="title" href="/2023/08/19/Maven/" title="Maven基础">Maven基础</a><time datetime="2023-08-19T13:49:08.000Z" title="发表于 2023-08-19 21:49:08">2023-08-19</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2023/03/01/SoftWareTest/" title="SoftWareTest"><img src="/img/15.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="SoftWareTest"/></a><div class="content"><a class="title" href="/2023/03/01/SoftWareTest/" title="SoftWareTest">SoftWareTest</a><time datetime="2023-03-01T01:40:17.000Z" title="发表于 2023-03-01 09:40:17">2023-03-01</time></div></div></div></div></div></div></main><footer id="footer"><div id="footer-wrap"><div class="copyright">&copy;2022 - 2023 By Wabi-Sabifag</div><div class="framework-info"><span>框架 </span><a target="_blank" rel="noopener external nofollow noreferrer" href="https://hexo.io">Hexo</a><span class="footer-separator">|</span><span>主题 </span><a href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a></div><div class="footer_custom_text"><div><a onclick="window.open('https://bilibili.com')"><img src=''>湖公网安备 </a></div> <div>当内心一片虚无的时刻，我将心脏埋入这无尽的土壤</div>  <div>理想主义 现实主义 实用主义</div></div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="fas fa-book-open"></i></button><button id="darkmode" type="button" title="浅色和深色模式转换"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside_config" type="button" title="设置"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="fas fa-list-ul"></i></button><button id="chat_btn" type="button" title="聊天"><i class="fas fa-sms"></i></button><button id="go-up" type="button" title="回到顶部"><i class="fas fa-arrow-up"></i></button></div></div><div id="local-search"><div class="search-dialog"><nav class="search-nav"><span class="search-dialog-title">搜索</span><span id="loading-status"></span><button class="search-close-button"><i class="fas fa-times"></i></button></nav><div class="is-center" id="loading-database"><i class="fas fa-spinner fa-pulse"></i><span>  数据库加载中</span></div><div class="search-wrap"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="搜索文章" type="text"/></div></div><hr/><div id="local-search-results"></div></div></div><div id="search-mask"></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox.umd.min.js"></script><script src="https://cdn.jsdelivr.net/npm/instant.page/instantpage.min.js" type="module"></script><script>function panguFn () {
  if (typeof pangu === 'object') pangu.autoSpacingPage()
  else {
    getScript('https://cdn.jsdelivr.net/npm/pangu/dist/browser/pangu.min.js')
      .then(() => {
        pangu.autoSpacingPage()
      })
  }
}

function panguInit () {
  if (false){
    GLOBAL_CONFIG_SITE.isPost && panguFn()
  } else {
    panguFn()
  }
}

document.addEventListener('DOMContentLoaded', panguInit)</script><script src="/js/search/local-search.js"></script><div class="js-pjax"></div><div class="aplayer no-destroy" data-id="60198" data-server="netease" date-type="playlist" data-fixed="true" data-autoplay="true"></div><link rel="stylesheet" href="css/style.css"><canvas class="fireworks" mobile="false"></canvas><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/dist/fireworks.min.js"></script><script defer="defer" id="fluttering_ribbon" mobile="true" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/dist/canvas-fluttering-ribbon.min.js"></script><script id="canvas_nest" defer="defer" color="0,0,255" opacity="0.7" zIndex="-1" count="99" mobile="false" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/dist/canvas-nest.min.js"></script><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/dist/activate-power-mode.min.js"></script><script>POWERMODE.colorful = true;
POWERMODE.shake = true;
POWERMODE.mobile = false;
document.body.addEventListener('input', POWERMODE);
</script><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/aplayer/dist/APlayer.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/aplayer/dist/APlayer.min.js"></script><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/metingjs/dist/Meting.min.js"></script><script src="https://cdn.jsdelivr.net/npm/pjax/pjax.min.js"></script><script>let pjaxSelectors = ["head > title","#config-diff","#body-wrap","#rightside-config-hide","#rightside-config-show",".js-pjax"]

var pjax = new Pjax({
  elements: 'a:not([target="_blank"])',
  selectors: pjaxSelectors,
  cacheBust: false,
  analytics: false,
  scrollRestoration: false
})

document.addEventListener('pjax:send', function () {

  // removeEventListener scroll 
  window.tocScrollFn && window.removeEventListener('scroll', window.tocScrollFn)
  window.scrollCollect && window.removeEventListener('scroll', scrollCollect)

  document.getElementById('rightside').style.cssText = "opacity: ''; transform: ''"
  
  if (window.aplayers) {
    for (let i = 0; i < window.aplayers.length; i++) {
      if (!window.aplayers[i].options.fixed) {
        window.aplayers[i].destroy()
      }
    }
  }

  typeof typed === 'object' && typed.destroy()

  //reset readmode
  const $bodyClassList = document.body.classList
  $bodyClassList.contains('read-mode') && $bodyClassList.remove('read-mode')

  typeof disqusjs === 'object' && disqusjs.destroy()
})

document.addEventListener('pjax:complete', function () {
  window.refreshFn()

  document.querySelectorAll('script[data-pjax]').forEach(item => {
    const newScript = document.createElement('script')
    const content = item.text || item.textContent || item.innerHTML || ""
    Array.from(item.attributes).forEach(attr => newScript.setAttribute(attr.name, attr.value))
    newScript.appendChild(document.createTextNode(content))
    item.parentNode.replaceChild(newScript, item)
  })

  GLOBAL_CONFIG.islazyload && window.lazyLoadInstance.update()

  typeof chatBtnFn === 'function' && chatBtnFn()
  typeof panguInit === 'function' && panguInit()

  // google analytics
  typeof gtag === 'function' && gtag('config', '', {'page_path': window.location.pathname});

  // baidu analytics
  typeof _hmt === 'object' && _hmt.push(['_trackPageview',window.location.pathname]);

  typeof loadMeting === 'function' && document.getElementsByClassName('aplayer').length && loadMeting()

  // prismjs
  typeof Prism === 'object' && Prism.highlightAll()
})

document.addEventListener('pjax:error', (e) => {
  if (e.request.status === 404) {
    pjax.loadUrl('/404.html')
  }
})</script></div></body></html>