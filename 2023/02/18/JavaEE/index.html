<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"><title>JavaEE | å½“ä½ æŠ¬å¤´ä»°æœ›æ˜Ÿè¾°æ—¶ï¼Œæœˆè¾‰äº²æ˜µåŒé¢Š</title><meta name="author" content="Wabi-Sabifag"><meta name="copyright" content="Wabi-Sabifag"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="ffffff"><meta name="description" content="1.SpringBoot1.Resté£æ ¼1.1Rest1.1.1 Restç®€ä»‹ Rest è¡¨ç°å½¢å¼çŠ¶æ€è½¬æ¢ä¼ ç»Ÿé£æ ¼   http:&#x2F;&#x2F;localhost&#x2F;user&#x2F;getById?id&#x3D;1  http:&#x2F;&#x2F;localhost&#x2F;user&#x2F;saveUser   Resté£æ ¼  http:&#x2F;&#x2F;localhost&#x2F;user&#x2F;1&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbs">
<meta property="og:type" content="article">
<meta property="og:title" content="JavaEE">
<meta property="og:url" content="https://github.com/Wabi-Sabifag/Wabi-Sabifag.github.io/2023/02/18/JavaEE/index.html">
<meta property="og:site_name" content="å½“ä½ æŠ¬å¤´ä»°æœ›æ˜Ÿè¾°æ—¶ï¼Œæœˆè¾‰äº²æ˜µåŒé¢Š">
<meta property="og:description" content="1.SpringBoot1.Resté£æ ¼1.1Rest1.1.1 Restç®€ä»‹ Rest è¡¨ç°å½¢å¼çŠ¶æ€è½¬æ¢ä¼ ç»Ÿé£æ ¼   http:&#x2F;&#x2F;localhost&#x2F;user&#x2F;getById?id&#x3D;1  http:&#x2F;&#x2F;localhost&#x2F;user&#x2F;saveUser   Resté£æ ¼  http:&#x2F;&#x2F;localhost&#x2F;user&#x2F;1&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbs">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://github.com/Wabi-Sabifag/Wabi-Sabifag.github.io/img/22.png">
<meta property="article:published_time" content="2023-02-18T05:02:38.000Z">
<meta property="article:modified_time" content="2024-03-08T21:54:16.865Z">
<meta property="article:author" content="Wabi-Sabifag">
<meta property="article:tag" content="Java">
<meta property="article:tag" content="JavaEE">
<meta property="article:tag" content="Mybatis">
<meta property="article:tag" content="MybatisPlus">
<meta property="article:tag" content="SpringBoot">
<meta property="article:tag" content="Docker">
<meta property="article:tag" content="Redis">
<meta property="article:tag" content="Swaggger">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://github.com/Wabi-Sabifag/Wabi-Sabifag.github.io/img/22.png"><link rel="shortcut icon" href="https://safebooru.org//samples/3404/sample_2d70be5f0453c31b5e9ad641db7cf3fb90ba2c23.jpg?3541071"><link rel="canonical" href="https://github.com/Wabi-Sabifag/Wabi-Sabifag.github.io/2023/02/18/JavaEE/"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox.min.css" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: {"path":"/search.xml","preload":false,"languages":{"hits_empty":"æ‰¾ä¸åˆ°æ‚¨æŸ¥è¯¢çš„å†…å®¹ï¼š${query}"}},
  translate: undefined,
  noticeOutdate: {"limitDay":730,"position":"top","messagePrev":"è¯¥ç‰ˆæœ¬å·²ç»æ˜¯","messageNext":"å¤©å‰çš„å†…å®¹ï¼Œè¯·ä½ ä»”ç»†è¾¨åˆ«ç‰ˆæœ¬å’Œå…¶ä»–é—®é¢˜ğŸ˜‰"},
  highlight: {"plugin":"highlighjs","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":false},
  copy: {
    success: 'å¤åˆ¶æˆåŠŸ',
    error: 'å¤åˆ¶é”™è¯¯',
    noSupport: 'æµè§ˆå™¨ä¸æ”¯æŒ'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: 'å¤©',
  date_suffix: {
    just: 'åˆšåˆš',
    min: 'åˆ†é’Ÿå‰',
    hour: 'å°æ—¶å‰',
    day: 'å¤©å‰',
    month: 'ä¸ªæœˆå‰'
  },
  copyright: undefined,
  lightbox: 'fancybox',
  Snackbar: undefined,
  source: {
    justifiedGallery: {
      js: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery/dist/fjGallery.min.js',
      css: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery/dist/fjGallery.min.css'
    }
  },
  isPhotoFigcaption: true,
  islazyload: false,
  isAnchor: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: 'JavaEE',
  isPost: true,
  isHome: false,
  isHighlightShrink: true,
  isToc: true,
  postUpdate: '2024-03-09 05:54:16'
}</script><noscript><style type="text/css">
  #nav {
    opacity: 1
  }
  .justified-gallery img {
    opacity: 1
  }

  #recent-posts time,
  #post-meta time {
    display: inline !important
  }
</style></noscript><script>(win=>{
    win.saveToLocal = {
      set: function setWithExpiry(key, value, ttl) {
        if (ttl === 0) return
        const now = new Date()
        const expiryDay = ttl * 86400000
        const item = {
          value: value,
          expiry: now.getTime() + expiryDay,
        }
        localStorage.setItem(key, JSON.stringify(item))
      },

      get: function getWithExpiry(key) {
        const itemStr = localStorage.getItem(key)

        if (!itemStr) {
          return undefined
        }
        const item = JSON.parse(itemStr)
        const now = new Date()

        if (now.getTime() > item.expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return item.value
      }
    }
  
    win.getScript = url => new Promise((resolve, reject) => {
      const script = document.createElement('script')
      script.src = url
      script.async = true
      script.onerror = reject
      script.onload = script.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        script.onload = script.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(script)
    })
  
      win.activateDarkMode = function () {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      win.activateLightMode = function () {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', 'ffffff')
        }
      }
      const t = saveToLocal.get('theme')
    
          if (t === 'dark') activateDarkMode()
          else if (t === 'light') activateLightMode()
        
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
    const detectApple = () => {
      if(/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
    })(window)</script><link rel="stylesheet" href="/css/style.css"><link rel="preconnect" href="https://fonts.gstatic.com"><link href="https://fonts.googleapis.com/css2?family=IBM+Plex+Mono:ital,wght@1,300&display=swap" rel="stylesheet"><meta name="generator" content="Hexo 5.4.2">
<style>.github-emoji { position: relative; display: inline-block; width: 1.2em; min-height: 1.2em; overflow: hidden; vertical-align: top; color: transparent; }  .github-emoji > span { position: relative; z-index: 10; }  .github-emoji img, .github-emoji .fancybox { margin: 0 !important; padding: 0 !important; border: none !important; outline: none !important; text-decoration: none !important; user-select: none !important; cursor: auto !important; }  .github-emoji img { height: 1.2em !important; width: 1.2em !important; position: absolute !important; left: 50% !important; top: 50% !important; transform: translate(-50%, -50%) !important; user-select: none !important; cursor: auto !important; } .github-emoji-fallback { color: inherit; } .github-emoji-fallback img { opacity: 0 !important; }</style>
<link rel="alternate" href="/atom.xml" title="å½“ä½ æŠ¬å¤´ä»°æœ›æ˜Ÿè¾°æ—¶ï¼Œæœˆè¾‰äº²æ˜µåŒé¢Š" type="application/atom+xml">
<link rel="stylesheet" href="/css/prism.css" type="text/css">
<link rel="stylesheet" href="/css/prism-line-numbers.css" type="text/css"></head><body><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img is-center"><img src="https://safebooru.org//samples/3404/sample_2d70be5f0453c31b5e9ad641db7cf3fb90ba2c23.jpg?3541071" onerror="onerror=null;src='https://safebooru.org//samples/3404/sample_2d70be5f0453c31b5e9ad641db7cf3fb90ba2c23.jpg?3541071'" alt="avatar"/></div><div class="sidebar-site-data site-data is-center"><a href="/archives/"><div class="headline">æ–‡ç« </div><div class="length-num">19</div></a><a href="/tags/"><div class="headline">æ ‡ç­¾</div><div class="length-num">25</div></a><a href="/categories/"><div class="headline">åˆ†ç±»</div><div class="length-num">28</div></a></div><hr/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> æ®¿é¦–</span></a></div><div class="menus_item"><a class="site-page group hide" href="javascript:void(0);" rel="external nofollow noreferrer"><i class="fa-fw fas fa-moon"></i><span> å¾ã®åšå®¢</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/archives/"><i class="fa-fw fas fa-clock"></i><span> æ•…å¾€å°˜é£ã€å¾å¿ƒçŠ¹ç„¶</span></a></li><li><a class="site-page child" href="/categories/"><i class="fa-fw fas fa-archive"></i><span> åˆ†ç±»</span></a></li><li><a class="site-page child" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> æ ‡ç­¾</span></a></li></ul></div><div class="menus_item"><a class="site-page group hide" href="javascript:void(0);" rel="external nofollow noreferrer"><i class="fa-fw fas fa-earth"></i><span> è‡ªç„¶ç§‘å­¦</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/nature/"><i class="fa-fw fas fa-sun"></i><span> èˆ’é€‚ã®è‡ªç„¶</span></a></li><li><a class="site-page child" href="/animal/"><i class="fa-fw fas fa-dog"></i><span> å¯çˆ±ã®åŠ¨ç‰©</span></a></li></ul></div><div class="menus_item"><a class="site-page group hide" href="javascript:void(0);" rel="external nofollow noreferrer"><i class="fa-fw fas fa-computer"></i><span> ç¤¾ä¼šç§‘å­¦</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/science/"><i class="fa-fw fas fa-ruler"></i><span> ç†æ€§ç§‘å­¦</span></a></li><li><a class="site-page child" href="/history/"><i class="fa-fw fas fa-history"></i><span> å†å²</span></a></li><li><a class="site-page child" href="/philosophy/"><i class="fa-fw fas fa-brain"></i><span> å“²å­¦</span></a></li><li><a class="site-page child" href="/psychology/"><i class="fa-fw fas fa-heartbeat"></i><span> å¿ƒç†</span></a></li></ul></div><div class="menus_item"><a class="site-page group hide" href="javascript:void(0);" rel="external nofollow noreferrer"><i class="fa-fw fas fa-coffee"></i><span> ç”Ÿæ´»</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/book/"><i class="fa-fw fas fa-book"></i><span> æ–‡å­¦</span></a></li><li><a class="site-page child" href="/music/"><i class="fa-fw fas fa-music"></i><span> éŸ³ä¹</span></a></li><li><a class="site-page child" href="/images/"><i class="fa-fw fas fa-images"></i><span> ç»˜ç”»</span></a></li><li><a class="site-page child" href="/hand/"><i class="fa-fw fas fa-hand"></i><span> é›•å¡‘</span></a></li><li><a class="site-page child" href="/mask/"><i class="fa-fw fas fa-balance-scale"></i><span> æˆå‰§</span></a></li><li><a class="site-page child" href="/city/"><i class="fa-fw fas fa-city"></i><span> å»ºç­‘</span></a></li><li><a class="site-page child" href="/movies/"><i class="fa-fw fas fa-film"></i><span> ç”µå½±</span></a></li><li><a class="site-page child" href="/sport/"><i class="fa-fw fas fa-basketball"></i><span> ä½“è‚²</span></a></li><li><a class="site-page child" href="/hospital/"><i class="fa-fw fa fa-star"></i><span> åŠ¨æ¼«</span></a></li><li><a class="site-page child" href="/game/"><i class="fa-fw fa fa-game"></i><span> æ¸¸æˆ</span></a></li></ul></div><div class="menus_item"><a class="site-page group hide" href="javascript:void(0);" rel="external nofollow noreferrer"><i class="fa-fw fas fa-list"></i><span> å…¶ä»–</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/link/"><i class="fa-fw fas fa-compass"></i><span> å…¶ä»–ä¿¡æ¯</span></a></li><li><a class="site-page child" href="/about/"><i class="fa-fw fas fa-paper-plane"></i><span> --å…³äº--</span></a></li></ul></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header" style="background-image: url('/img/22.png')"><nav id="nav"><span id="blog_name"><a id="site-name" href="/">å½“ä½ æŠ¬å¤´ä»°æœ›æ˜Ÿè¾°æ—¶ï¼Œæœˆè¾‰äº²æ˜µåŒé¢Š</a></span><div id="menus"><div id="search-button"><a class="site-page social-icon search"><i class="fas fa-search fa-fw"></i><span> æœç´¢</span></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> æ®¿é¦–</span></a></div><div class="menus_item"><a class="site-page group hide" href="javascript:void(0);" rel="external nofollow noreferrer"><i class="fa-fw fas fa-moon"></i><span> å¾ã®åšå®¢</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/archives/"><i class="fa-fw fas fa-clock"></i><span> æ•…å¾€å°˜é£ã€å¾å¿ƒçŠ¹ç„¶</span></a></li><li><a class="site-page child" href="/categories/"><i class="fa-fw fas fa-archive"></i><span> åˆ†ç±»</span></a></li><li><a class="site-page child" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> æ ‡ç­¾</span></a></li></ul></div><div class="menus_item"><a class="site-page group hide" href="javascript:void(0);" rel="external nofollow noreferrer"><i class="fa-fw fas fa-earth"></i><span> è‡ªç„¶ç§‘å­¦</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/nature/"><i class="fa-fw fas fa-sun"></i><span> èˆ’é€‚ã®è‡ªç„¶</span></a></li><li><a class="site-page child" href="/animal/"><i class="fa-fw fas fa-dog"></i><span> å¯çˆ±ã®åŠ¨ç‰©</span></a></li></ul></div><div class="menus_item"><a class="site-page group hide" href="javascript:void(0);" rel="external nofollow noreferrer"><i class="fa-fw fas fa-computer"></i><span> ç¤¾ä¼šç§‘å­¦</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/science/"><i class="fa-fw fas fa-ruler"></i><span> ç†æ€§ç§‘å­¦</span></a></li><li><a class="site-page child" href="/history/"><i class="fa-fw fas fa-history"></i><span> å†å²</span></a></li><li><a class="site-page child" href="/philosophy/"><i class="fa-fw fas fa-brain"></i><span> å“²å­¦</span></a></li><li><a class="site-page child" href="/psychology/"><i class="fa-fw fas fa-heartbeat"></i><span> å¿ƒç†</span></a></li></ul></div><div class="menus_item"><a class="site-page group hide" href="javascript:void(0);" rel="external nofollow noreferrer"><i class="fa-fw fas fa-coffee"></i><span> ç”Ÿæ´»</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/book/"><i class="fa-fw fas fa-book"></i><span> æ–‡å­¦</span></a></li><li><a class="site-page child" href="/music/"><i class="fa-fw fas fa-music"></i><span> éŸ³ä¹</span></a></li><li><a class="site-page child" href="/images/"><i class="fa-fw fas fa-images"></i><span> ç»˜ç”»</span></a></li><li><a class="site-page child" href="/hand/"><i class="fa-fw fas fa-hand"></i><span> é›•å¡‘</span></a></li><li><a class="site-page child" href="/mask/"><i class="fa-fw fas fa-balance-scale"></i><span> æˆå‰§</span></a></li><li><a class="site-page child" href="/city/"><i class="fa-fw fas fa-city"></i><span> å»ºç­‘</span></a></li><li><a class="site-page child" href="/movies/"><i class="fa-fw fas fa-film"></i><span> ç”µå½±</span></a></li><li><a class="site-page child" href="/sport/"><i class="fa-fw fas fa-basketball"></i><span> ä½“è‚²</span></a></li><li><a class="site-page child" href="/hospital/"><i class="fa-fw fa fa-star"></i><span> åŠ¨æ¼«</span></a></li><li><a class="site-page child" href="/game/"><i class="fa-fw fa fa-game"></i><span> æ¸¸æˆ</span></a></li></ul></div><div class="menus_item"><a class="site-page group hide" href="javascript:void(0);" rel="external nofollow noreferrer"><i class="fa-fw fas fa-list"></i><span> å…¶ä»–</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/link/"><i class="fa-fw fas fa-compass"></i><span> å…¶ä»–ä¿¡æ¯</span></a></li><li><a class="site-page child" href="/about/"><i class="fa-fw fas fa-paper-plane"></i><span> --å…³äº--</span></a></li></ul></div></div><div id="toggle-menu"><a class="site-page"><i class="fas fa-bars fa-fw"></i></a></div></div></nav><div id="post-info"><h1 class="post-title">JavaEE</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">å‘è¡¨äº</span><time class="post-meta-date-created" datetime="2023-02-18T05:02:38.000Z" title="å‘è¡¨äº 2023-02-18 13:02:38">2023-02-18</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">æ›´æ–°äº</span><time class="post-meta-date-updated" datetime="2024-03-08T21:54:16.865Z" title="æ›´æ–°äº 2024-03-09 05:54:16">2024-03-09</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/Java/">Java</a><i class="fas fa-angle-right post-meta-separator"></i><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/Java/JavaEE/">JavaEE</a></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-wordcount"><i class="far fa-file-word fa-fw post-meta-icon"></i><span class="post-meta-label">å­—æ•°æ€»è®¡:</span><span class="word-count">28.5k</span><span class="post-meta-separator">|</span><i class="far fa-clock fa-fw post-meta-icon"></i><span class="post-meta-label">é˜…è¯»æ—¶é•¿:</span><span>131åˆ†é’Ÿ</span></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container"><h1 id="1-SpringBoot"><a href="#1-SpringBoot" class="headerlink" title="1.SpringBoot"></a>1.SpringBoot</h1><h2 id="1-Resté£æ ¼"><a href="#1-Resté£æ ¼" class="headerlink" title="1.Resté£æ ¼"></a>1.Resté£æ ¼</h2><h3 id="1-1Rest"><a href="#1-1Rest" class="headerlink" title="1.1Rest"></a>1.1Rest</h3><h4 id="1-1-1-Restç®€ä»‹"><a href="#1-1-1-Restç®€ä»‹" class="headerlink" title="1.1.1 Restç®€ä»‹"></a>1.1.1 Restç®€ä»‹</h4><ul>
<li>Rest è¡¨ç°å½¢å¼çŠ¶æ€è½¬æ¢<br><strong>ä¼ ç»Ÿé£æ ¼</strong></li>
</ul>
<ul>
<li><p><a target="_blank" rel="noopener external nofollow noreferrer" href="http://localhost/user/getById?id=1">http://localhost/user/getById?id=1</a></p>
</li>
<li><p><a target="_blank" rel="noopener external nofollow noreferrer" href="http://localhost/user/saveUser">http://localhost/user/saveUser</a></p>
</li>
</ul>
<p><strong>Resté£æ ¼</strong></p>
<ul>
<li><p><a target="_blank" rel="noopener external nofollow noreferrer" href="http://localhost/user/1">http://localhost/user/1</a>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(æŸ¥è¯¢å•æ•°ï¼Œåˆ é™¤ç”¨æˆ·ä¿¡æ¯)</p>
</li>
<li><p><a target="_blank" rel="noopener external nofollow noreferrer" href="http://localhost/user">http://localhost/user</a>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(æŸ¥è¯¢å¤æ•°ï¼Œæ·»åŠ ï¼Œä¿®æ”¹ç”¨æˆ·ä¿¡æ¯)</p>
</li>
</ul>
<p><strong>ä¼˜ç‚¹</strong></p>
<ul>
<li><p>éšè—èµ„æºè®¿é—®è¡Œä¸º</p>
</li>
<li><p>ä¹¦å†™ç®€åŒ–</p>
</li>
</ul>
<h4 id="1-1-2-åœ°å€æ ä¼ å‚æ¨¡å¼â€”-å‚æ•°é…ç½®"><a href="#1-1-2-åœ°å€æ ä¼ å‚æ¨¡å¼â€”-å‚æ•°é…ç½®" class="headerlink" title="1.1.2 åœ°å€æ ä¼ å‚æ¨¡å¼â€”-å‚æ•°é…ç½®"></a>1.1.2 åœ°å€æ ä¼ å‚æ¨¡å¼â€”-å‚æ•°é…ç½®</h4><ul>
<li>method = RequestMethod.GET&nbsp;   æŸ¥è¯¢</li>
<li>method = RequestMethod.POST   ä¿å­˜</li>
<li>method = RequestMethod.DELETE åˆ é™¤</li>
<li>method = RequestMethod.HEAD</li>
<li>method = RequestMethod.PUT    æ›´æ–°</li>
<li>method = RequestMethod.OPTIONS</li>
<li>method = RequestMethod.PATCH</li>
<li>method = RequestMethod.TRACE</li>
</ul>
<pre class="line-numbers language-none"><code class="language-none">package top.wabisabifag.controller;

import org.springframework.web.bind.annotation.*;

@Controller
public class UserController {

    @RequestMapping(value = "/users",method = RequestMethod.POST)
    @ResponseBody
    public String save(){
        System.out.println("user save...");
        return "{'module':'user save'}";
    }

    /**
     * {id}             ä»£è¡¨è¯·æ±‚æ ¼å¼ï¼Œå¯¹åº”æ–¹æ³•çš„ä¼ å‚å€¼
     * @PathVariable    æŒ‡å®š id çš„æ‰€å–å€¼,urlåœ°å€ä¼ ç»™æ–¹æ³•
     */
    @RequestMapping(value = "/users/{id}",method = RequestMethod.DELETE)
    @ResponseBody
    public String delete(@PathVariable Integer id){
        System.out.println("user delete..."+id);
        return "{'module':'user delete'}";
    }

&nbsp;&nbsp;&nbsp;&nbsp;@RequestMapping(value = "/users",method = RequestMethod.PUT)
    @ResponseBody
    public String update(@RequestBody User user){
        System.out.println("user update..."+user);
        return "{'module':'user update'}";
    }

&nbsp;&nbsp;&nbsp;&nbsp;/*
    * @RequestMethod.GET  ä¸“é—¨æŸ¥è¯¢è¯­å¥
    */
    @RequestMapping(value = "/users/{id}",method = RequestMethod.GET)
    @ResponseBody
    public String getById(@PathVariable Integer id){
        System.out.println("user getById..."+id);
        return "{'module':'user getById'}";
    }

    @RequestMapping(value = "/users",method = RequestMethod.GET)
    @ResponseBody
    public String getAll(){
        System.out.println("user getAll...");
        return "{'module':'user getAll'}";
    }
}<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>æ€»ç»“ï¼š</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;åŒºåˆ«</p>
<ul>
<li><p>@RequestParam ç”¨äºæ¥å— url åœ°å€ä¼ å‚æˆ–è¡¨å•ä¼ å‚</p>
</li>
<li><p>@RequestBody ç”¨äºæ¥å—jsonæ•°æ®</p>
</li>
<li><p>@PathVariable ç”¨äºæ¥æ”¶è·¯å¾„å‚æ•°ï¼Œä½¿ç”¨ {name} æè¿°è·¯å¾„å‚æ•°</p>
</li>
</ul>
<p>&nbsp;&nbsp;&nbsp;&nbsp;åº”ç”¨</p>
<ul>
<li><p>åæœŸå¼€å‘ï¼Œå‘é€è¯·æ±‚è¶…è¿‡ä¸€ä¸ªå‚æ•°ï¼Œä»¥jsonæ ¼å¼ï¼Œ@RequestBody åº”ç”¨ä¸ºä¸»</p>
</li>
<li><p>å¦‚æœå‘é€éjsonæ ¼å¼æ•°æ®ï¼Œé€‰ç”¨@RequestParam æ¥æ”¶è¯·æ±‚å‚æ•°</p>
</li>
<li><p>é‡‡ç”¨RESTfulè¿›è¡Œå¼€å‘ï¼Œå½“å‚æ•°è¾ƒå°‘æ—¶ï¼Œé‡‡ç”¨@PathVariable æ¥æ”¶è¯·æ±‚è·¯å¾„å˜é‡ï¼Œä¼ é€’ id å€¼</p>
</li>
</ul>
<h4 id="1-1-3-Restå¿«é€Ÿå¼€å‘"><a href="#1-1-3-Restå¿«é€Ÿå¼€å‘" class="headerlink" title="1.1.3 Restå¿«é€Ÿå¼€å‘"></a>1.1.3 Restå¿«é€Ÿå¼€å‘</h4><pre class="line-numbers language-none"><code class="language-none">package top.wabisabifag.controller;

import org.springframework.web.bind.annotation.*;

@RestController
@ResponseBody
//@RestController
@RequestMapping("/users")
public class UserController {

    @PostMapping
    public String save(@RequestBody User user){
        System.out.println("user save...");
        return "{'module':'user save'}";
    }

    /**
     * {id}             ä»£è¡¨è¯·æ±‚æ ¼å¼ï¼Œå¯¹åº”æ–¹æ³•çš„ä¼ å‚å€¼
     * @PathVariable    æŒ‡å®š id è·¯å¾„ çš„ æ‰€å–å€¼
     */
    @DeleteMapping("/{id}")
    public String delete(@PathVariable Integer id){
        System.out.println("user delete..."+id);
        return "{'module':'user delete'}";
    }
    @PutMapping
    public String update(@RequestBody User user){
        System.out.println("user update..."+user);
        return "{'module':'user update'}";
    }

    /*
    * @RequestMethod.GET  ä¸“é—¨æŸ¥è¯¢è¯­å¥
    */
    @GetMapping("/{id}")
    public String getById(@PathVariable Integer id){
        System.out.println("user getById..."+id);
        return "{'module':'user getById'}";
    }

    @GetMapping
    public String getAll(){
        System.out.println("user getAll...");
        return "{'module':'user getAll'}";
    }
}<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>ä¸»è¦ç‚¹ï¼š</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;ç®€åŒ–</p>
<ul>
<li>@RestController&nbsp;&nbsp;ç­‰ä»· @ResponseBody &lt; &lt; ==== &gt; &gt; @RestController (ç›®çš„ï¼šçœç•¥é‡å¤)</li>
<li>value = â€œ/usersâ€ çœç•¥ï¼švalue ä½†ä¸èƒ½çœç•¥ä¼ é€’çš„ {name} å€¼</li>
<li>method = RequestMethod. { } @â€¦Mappingä»£æ›¿ å•å€¼ å’Œ POJOå€¼ çš„ä¼ å€¼æ–¹å¼</li>
<li>@PathVariable å•å€¼ä¼ è¾“</li>
<li>@RequestBody POJOå€¼ä¼ è¾“</li>
</ul>
<h2 id="2-åŸºç¡€é…ç½®"><a href="#2-åŸºç¡€é…ç½®" class="headerlink" title="2.åŸºç¡€é…ç½®"></a>2.åŸºç¡€é…ç½®</h2><p><a target="_blank" rel="noopener external nofollow noreferrer" href="https://docs.spring.io/spring-boot/docs/current/reference/html/">SpringBootæ–‡æ¡£åœ°å€</a></p>
<h3 id="2-1-å±æ€§é…ç½®"><a href="#2-1-å±æ€§é…ç½®" class="headerlink" title="2.1 å±æ€§é…ç½®"></a>2.1 å±æ€§é…ç½®</h3><p><a target="_blank" rel="noopener external nofollow noreferrer" href="https://docs.spring.io/spring-boot/docs/current/reference/html/application-properties.html#appendix.application-properties">SpringBoot Appilcation.propertiesæ–‡æ¡£åœ°å€</a></p>
<h4 id="2-1-1-Springboot-å¤šç§å±æ€§é…ç½®-æ–‡ä»¶ä¼˜å…ˆçº§é€’å‡"><a href="#2-1-1-Springboot-å¤šç§å±æ€§é…ç½®-æ–‡ä»¶ä¼˜å…ˆçº§é€’å‡" class="headerlink" title="2.1.1 Springboot å¤šç§å±æ€§é…ç½®(æ–‡ä»¶ä¼˜å…ˆçº§é€’å‡)"></a>2.1.1 Springboot å¤šç§å±æ€§é…ç½®(æ–‡ä»¶ä¼˜å…ˆçº§é€’å‡)</h4><ul>
<li>.properties<ul>
<li>server.port=80</li>
</ul>
</li>
<li>.yml<ul>
<li>server:<br>  port: 80</li>
</ul>
</li>
<li>.yaml<ul>
<li>   server:<br>   port: 80</li>
</ul>
</li>
</ul>
<h5 id="1-ymlæ ¼å¼"><a href="#1-ymlæ ¼å¼" class="headerlink" title="1.ymlæ ¼å¼"></a>1.ymlæ ¼å¼</h5><ol>
<li><p>å¤šå±‚çº§å±æ€§å</p>
<pre class="line-numbers language-none"><code class="language-none">a:
 b:
  C: 1145137<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre></li>
<li><p>æ•°ç»„å±æ€§å</p>
<pre class="line-numbers language-none"><code class="language-none">likes:
 - games
 - foods
 - books

# ç¼©ç•¥æ¨¡å¼
likes:[games,foods,books]<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
</li>
<li><p>å¯¹è±¡æ•°ç»„å±æ€§å</p>
<pre class="line-numbers language-none"><code class="language-none">users:
 - name: zhangsan
   age: 18
 - name: Jhon
   age: 16

# ç¼©ç•¥æ¨¡å¼
users:[{name:zhangsan,age:18},{name:Jhon,age:16}]<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></li>
</ol>
<h5 id="2-æ•°æ®è¯»å–"><a href="#2-æ•°æ®è¯»å–" class="headerlink" title="2.æ•°æ®è¯»å–"></a>2.æ•°æ®è¯»å–</h5><div class="tabs" id="user.java"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#user.java-1">user.java</button></li><li class="tab"><button type="button" data-href="#user.java-2">application.properties</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="user.java-1"><pre class="line-numbers language-none"><code class="language-none">@value("${users.name}")
private String name;

@value("${likes[1]}")
private String games;

@value("${users[1].name}")
private String name;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="user.java-2"><pre class="line-numbers language-none"><code class="language-none">baseDir: c:\windows

 # ä½¿ç”¨ ${value} å¼•ç”¨æ•°æ®
tempDir: ${baseDir}\temp<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div>

<p>å±æ€§å€¼(value)ç”¨ â€œ"è½¬ä¹‰å­—ç¬¦ çš„ä¼šä¸æ˜¾ç¤º<br>ä½¿ç”¨ã€€â€œspring\boot\text.txtâ€</p>
<h5 id="3-å°è£…æ•°æ®"><a href="#3-å°è£…æ•°æ®" class="headerlink" title="3.å°è£…æ•°æ®"></a>3.å°è£…æ•°æ®</h5><ol>
<li><p>å…¨é…ç½®å°è£…</p>
<pre class="line-numbers language-none"><code class="language-none">//è‡ªåŠ¨è£…é…
@Autowired
private Environment environment;

environment.getProperty("users[0].name");<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre>
</li>
<li><p>é’ˆå¯¹æ€§å°è£…</p>
<div class="tabs" id="application.yml"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#application.yml-1">application.yml</button></li><li class="tab"><button type="button" data-href="#application.yml-2">MyDataSource.java</button></li><li class="tab"><button type="button" data-href="#application.yml-3">ServerImpl.java</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="application.yml-1"><pre class="line-numbers language-none"><code class="language-none">spring:
  datasource:
    url: jdbc:mysql://localhost:3306/test?useUnicode=true&amp;characterEncoding=UTF-8&amp;useSSL=false
    username: root
    password: 123456
    driver: com.mysql.jdbc.Driver<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="application.yml-2"><pre class="line-numbers language-none"><code class="language-none"># 1.åˆ›å»ºç±»ï¼Œå°è£…æ•°æ®
package top.wabisabifag.POJO;

import org.springframework.boot.context.properties.ConfigurationProperties;
import org.springframework.stereotype.Component;

# 2.SpringåŠ è½½æ•°æ®å¯¹è±¡ï¼Œå‘Šè¯‰SpringåŠ è½½ä¿¡æ¯
@Data
@Component
@ConfigurationProperties(prefix = "spring.datasource")
public class MyDataSource {
    private String url;
    private String username;
    private String password;
    private String driver;
}<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="application.yml-3"><pre class="line-numbers language-none"><code class="language-none"># 3.ä½¿ç”¨Springè·å–çš„ä¿¡æ¯
@Autowired
private MyDataSource myDataSource;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div></li>
</ol>
<h4 id="2-1-2-ä¿®æ”¹æœåŠ¡å™¨ç«¯å£"><a href="#2-1-2-ä¿®æ”¹æœåŠ¡å™¨ç«¯å£" class="headerlink" title="2.1.2 ä¿®æ”¹æœåŠ¡å™¨ç«¯å£"></a>2.1.2 ä¿®æ”¹æœåŠ¡å™¨ç«¯å£</h4><pre class="line-numbers language-none"><code class="language-none"># 1.é…ç½®æœåŠ¡å™¨ç«¯å£
server.port=80

# 2.ä¿®æ”¹Springå¯åŠ¨çš„banner

# å…³é—­Spring Logo
spring.main.banner-mode=off
# å°†textï¼Œpngç­‰æ–‡ä»¶è½¬åŒ–ä¸ºäºŒç»´å›¾
#spring.banner.image.location=1.png

# 3.æ§åˆ¶æ—¥å¿—

# è¾“å‡ºæ—¥å¿—çº§åˆ«
#logging.level.root=debug
# åœ¨å‡ºé”™æ—¶è¾“å‡ºæ—¥å¿—
logging.level.root=error<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>


<h2 id="3-ç¬¬ä¸‰æ–¹æŠ€æœ¯æ•´åˆ"><a href="#3-ç¬¬ä¸‰æ–¹æŠ€æœ¯æ•´åˆ" class="headerlink" title="3.ç¬¬ä¸‰æ–¹æŠ€æœ¯æ•´åˆ"></a>3.ç¬¬ä¸‰æ–¹æŠ€æœ¯æ•´åˆ</h2><h3 id="1-JUnit"><a href="#1-JUnit" class="headerlink" title="1.JUnit"></a>1.JUnit</h3><div class="tabs" id="bookdaoimpl.java"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#bookdaoimpl.java-1">BookDaoImpl.java</button></li><li class="tab"><button type="button" data-href="#bookdaoimpl.java-2">æµ‹è¯•</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="bookdaoimpl.java-1"><pre class="line-numbers language-none"><code class="language-none">package top.wabisabifag.dao.Impl;

import org.springframework.stereotype.Repository;
import top.wabisabifag.dao.BookDao;

/* 3.æ¥å—Springç®¡ç† */
@Repository
public class BookDaoImpl implements BookDao {
    @Override
    public void save() {
        System.out.println("BookDao testing");
    }
}<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="bookdaoimpl.java-2"><pre class="line-numbers language-none"><code class="language-none">package top.wabisabifag.test;

import org.junit.jupiter.api.Test;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.boot.test.context.SpringBootTest;
import top.wabisabifag.dao.BookDao;

/* 4.è·å–Springç®¡ç†å£°æ˜ */
@SpringBootTest
public class SpringBootJUnitApplicationTests {
    /*1.æ³¨å…¥æµ‹è¯•å¯¹è±¡*/
    @Autowired
    private BookDao bookDao;

    /*2.æ‰§è¡Œæµ‹è¯•æ–¹æ³•*/
    @Test
    void contextLoads(){
        bookDao.save();
    }
}<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div>

<ol>
<li><p>å½“test æµ‹è¯•è·¯å¾„æ— æ³•å¯¹åº”java æºä»£ç è·¯å¾„</p>
<p> @SpringBootTest(classes = BookDaoImpl.class)æ¥ç”³æ˜æºç </p>
</li>
</ol>
<pre class="line-numbers language-none"><code class="language-none">@SpringBootTest(classes = BookDaoImpl.class)<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<pre><code>@RunWith(è®¾ç½®è¿è¡Œå™¨)
@ContextConfiguration(class = .... )		//é…ç½®å¼•å¯¼ç±»æˆ–é…ç½®ç±»
</code></pre>
<ul>
<li>ContextConfiguration ç”¨äºåœ¨å½“å‰åŒ…ä¸‹æŸ¥æ‰¾å£°æ˜ç±»</li>
</ul>
<h3 id="2-MybatisPlus"><a href="#2-MybatisPlus" class="headerlink" title="2.MybatisPlus"></a>2.MybatisPlus</h3><div class="tabs" id="pom.xml"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#pom.xml-1">pom.xml</button></li><li class="tab"><button type="button" data-href="#pom.xml-2">application.yml</button></li><li class="tab"><button type="button" data-href="#pom.xml-3">BookDao.java</button></li><li class="tab"><button type="button" data-href="#pom.xml-4">MybatisPlusConfig.java</button></li><li class="tab"><button type="button" data-href="#pom.xml-5">æµ‹è¯•</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="pom.xml-1"><pre class="line-numbers language-none"><code class="language-none">&lt;dependency&gt;
  &lt;groupId&gt;com.baomidou&lt;/groupId&gt;
  &lt;artifactId&gt;mybatis-plus-boot-starter&lt;/artifactId&gt;
  &lt;version&gt;3.4.2&lt;/version&gt;
&lt;/dependency&gt;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="pom.xml-2"><pre class="line-numbers language-none"><code class="language-none">#é…ç½®MPç›¸å…³æ•°æ®åº“åç§°
mybatis-plus:
  global-config:
    db-config:
      table-prefix: tb_<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="pom.xml-3"><pre class="line-numbers language-none"><code class="language-none">package top.wabisabifag.dao;

import com.baomidou.mybatisplus.core.mapper.BaseMapper;
import org.apache.ibatis.annotations.Mapper;
import org.apache.ibatis.annotations.Select;
import top.wabisabifag.POJO.Book;

@Mapper //  ç»§æ‰¿ BaseMapper
public interface BookDao extends BaseMapper {
    public void save();
    @Select("select * from smbms_user where userid = #{id} ")
    public Book getById(int id);
}<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="pom.xml-4"><pre class="line-numbers language-none"><code class="language-none">package top.wabisabifag.config;

import com.baomidou.mybatisplus.annotation.DbType;
import com.baomidou.mybatisplus.extension.plugins.MybatisPlusInterceptor;
import com.baomidou.mybatisplus.extension.plugins.inner.PaginationInnerInterceptor;
import org.mybatis.spring.annotation.MapperScan;
import org.springframework.context.annotation.Bean;
import org.springframework.context.annotation.Configuration;

@Configuration
@MapperScan("top.wabisabifag.dao")
public class MybatisPlusConfig {
    // é…ç½®åˆ†é¡µè®¾ç½®ç±»
    @Bean
    public MybatisPlusInterceptor mybatisPlusInterceptor() {
        MybatisPlusInterceptor interceptor = new MybatisPlusInterceptor();
        interceptor.addInnerInterceptor(new PaginationInnerInterceptor(DbType.MYSQL));
        return interceptor;
    }
}<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="pom.xml-5"><pre class="line-numbers language-none"><code class="language-none">package top.wabisabifag.test;

import org.junit.jupiter.api.Test;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.boot.test.context.SpringBootTest;
import top.wabisabifag.dao.BookDao;
import top.wabisabifag.dao.Impl.BookDaoImpl;

@SpringBootTest(classes = BookDaoImpl.class)
public class SpringBootJUnitApplicationTests {

    /*1.æ³¨å…¥æµ‹è¯•å¯¹è±¡*/
    @Autowired
    private BookDao bookDao;

    /*2.æ‰§è¡Œæµ‹è¯•æ–¹æ³•*/
    @Test
    void contextLoads(){
        bookDao.save();
        bookDao.getById(1);
    }

    @Test
    void contextLoadsPlus(){
        System.out.println(bookDao.selectById(2));
    }
}<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div>

<h3 id="4-Lombok"><a href="#4-Lombok" class="headerlink" title="4.Lombok"></a>4.Lombok</h3><div class="tabs" id="pom.xml"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#pom.xml-1">pom.xml</button></li><li class="tab"><button type="button" data-href="#pom.xml-2">å®ä½“ç±»æ³¨è§£</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="pom.xml-1"><pre class="line-numbers language-none"><code class="language-none">&lt;dependency&gt;
  &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;
  &lt;artifactId&gt;lombok&lt;/artifactId&gt;
&lt;/dependency&gt;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="pom.xml-2"><pre class="line-numbers language-none"><code class="language-none">package top.wabisabifag.domain;

import lombok.AllArgsConstructor;
import lombok.Data;
import lombok.NoArgsConstructor;
import lombok.ToString;

@Data  //  @Getter @Setter
@NoArgsConstructor  // æ— å‚æ„é€ 
@AllArgsConstructor // æœ‰å‚æ„é€ 
@ToString   
public class User {
    private int id;
    private String userCode;
}<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div>
<p>ä¸»è¦:</p>
<ul>
<li>@Getter @Setter ç­‰ä»·äº @Data</li>
</ul>
<h3 id="5-Druid"><a href="#5-Druid" class="headerlink" title="5.Druid"></a>5.Druid</h3><pre class="line-numbers language-none"><code class="language-none">------pom è·å–Druidä¾èµ–------
&lt;dependency&gt;
      &lt;groupId&gt;com.alibaba&lt;/groupId&gt;
      &lt;artifactId&gt;druid-spring-boot-starter&lt;/artifactId&gt;
      &lt;version&gt;1.1.23&lt;/version&gt;
    &lt;/dependency&gt;

-------é…ç½®--------
é€šç”¨é…ç½®:
spring:
  datasource:
    url: jdbc:mysql://localhost:3306/smbms_db?useUnicode=true&amp;characterEncoding=UTF-8&amp;useSSL=false
    username: root
    password: 123456
    driver-class-name: com.mysql.jdbc.Driver
    type: com.alibaba.druid.pool.DruidDataSource

æ•´åˆé…ç½®:
spring:
  datasource:
    druid:
      url: jdbc:mysql://localhost:3306/smbms_db?useUnicode=true&amp;characterEncoding=UTF-8&amp;useSSL=false
      username: root
      password: 123456
      driver-class-name: com.mysql.jdbc.Driver<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>





<h2 id="2-SSMPæ•´åˆæ¡ˆä¾‹"><a href="#2-SSMPæ•´åˆæ¡ˆä¾‹" class="headerlink" title="2.SSMPæ•´åˆæ¡ˆä¾‹"></a>2.SSMPæ•´åˆæ¡ˆä¾‹</h2><ul>
<li>å®ä½“ç±»å¼€å‘                ä½¿ç”¨Lombok å¿«é€Ÿåˆ¶ä½œå®ä½“ç±»</li>
<li>Dao å¼€å‘                  æ•´åˆMyBatisPlus ï¼Œåˆ¶ä½œæ•°æ®å±‚æµ‹è¯•ç±»</li>
<li>Service å¼€å‘              åŸºäºMyBatisPlus è¿›è¡Œå¢é‡å¼€å‘ï¼Œåˆ¶ä½œä¸šåŠ¡å±‚æµ‹è¯•ç±»</li>
<li>Controller å¼€å‘           åŸºäºRestful å¼€å‘ï¼Œä½¿ç”¨PostMan æµ‹è¯•æ¥å£åŠŸèƒ½</li>
<li>Controller å¼€å‘           å‰åç«¯å¼€å‘åè®®åˆ¶ä½œ</li>
<li>é¡µé¢å¼€å‘                  åŸºäºVUEï¼ŒElementåˆ¶ä½œï¼Œå‰åç«¯è”ï¼Œé¡µé¢æ•°æ®å¤„ç†<ul>
<li>CRUD åˆ†é¡µï¼ŒæŸ¥è¯¢æ“ä½œ</li>
</ul>
</li>
<li>é¡¹ç›®å¼‚å¸¸å¤„ç†</li>
<li>æŒ‰æ¡ä»¶æŸ¥è¯¢                é¡µé¢åŠŸèƒ½è°ƒæ•´ï¼ŒControllerä¿®æ­£åŠŸèƒ½ï¼ŒServiceä¿®æ­£åŠŸèƒ½</li>
</ul>
<h3 id="SMMPæºä»£ç "><a href="#SMMPæºä»£ç " class="headerlink" title="SMMPæºä»£ç "></a>SMMPæºä»£ç </h3><p><a href="">æºä»£ç </a></p>
<h2 id="3-SpringBootç»´æŠ¤"><a href="#3-SpringBootç»´æŠ¤" class="headerlink" title="3.SpringBootç»´æŠ¤"></a>3.SpringBootç»´æŠ¤</h2><h3 id="1-å·¥ç¨‹è¿è¡Œ"><a href="#1-å·¥ç¨‹è¿è¡Œ" class="headerlink" title="1.å·¥ç¨‹è¿è¡Œ"></a>1.å·¥ç¨‹è¿è¡Œ</h3><h4 id="1-Windows-jar-åŒ…æ‰§è¡Œ"><a href="#1-Windows-jar-åŒ…æ‰§è¡Œ" class="headerlink" title="1.Windows jar åŒ…æ‰§è¡Œ"></a>1.Windows jar åŒ…æ‰§è¡Œ</h4><pre class="line-numbers language-none"><code class="language-none">1. æ‰§è¡Œjar åŒ…: java -jar packageName 
2. æŸ¥è¯¢ç«¯å£: netstat -ano
3. æŸ¥è¯¢æŒ‡å®šç«¯å£: netstat -ano |findstr "ç«¯å£å·"
4. æ ¹æ®è¿›ç¨‹PID æŸ¥è¯¢è¿›ç¨‹åç§°: tasklist |findstr "è¿›ç¨‹å·PIDå·"
5. æ ¹æ®PID æ€æ­»ä»»åŠ¡: tasklist /F /PID "è¿›ç¨‹PIDå·"
6. æ ¹æ®è¿›ç¨‹åç§°æ€æ­»ä»»åŠ¡: taskkill -f -t -im "è¿›ç¨‹åç§°"     è¿›ç¨‹åç§°æœ‰å¤šä¸ªç›¸åŒçš„<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h4 id="2-Linux-jar-åŒ…æ‰§è¡Œ"><a href="#2-Linux-jar-åŒ…æ‰§è¡Œ" class="headerlink" title="2.Linux jar åŒ…æ‰§è¡Œ"></a>2.Linux jar åŒ…æ‰§è¡Œ</h4><pre class="line-numbers language-none"><code class="language-none">1. å¯åŠ¨åç«¯: nohup java -jar jarPackageName &gt; server.log 2&gt;&amp;1 &amp;<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<h4 id="3-ä¸´æ—¶å±æ€§é…ç½®"><a href="#3-ä¸´æ—¶å±æ€§é…ç½®" class="headerlink" title="3.ä¸´æ—¶å±æ€§é…ç½®"></a>3.ä¸´æ—¶å±æ€§é…ç½®</h4><ol>
<li><p>æ‰§è¡Œjar åŒ…: java -jar packageName â€“server.port=8080 â€“spring.datasouce.druid.password=root</p>
</li>
<li><pre class="line-numbers language-none"><code class="language-none">@SpringBootApplication
@MapperScan("top.wabisabifag.dao")/*ä½¿ç”¨@MapperScanå¯ä»¥æŒ‡å®šè¦æ‰«æçš„Mapperç±»çš„åŒ…çš„è·¯å¾„*/
@ComponentScan(basePackages={"top.wabisabifag"})
public class application {

    public static void main(String[] args) {

        // çº¿ç¨‹å®‰å…¨é—®é¢˜
        // SpringApplication.run(application.class,args);

        // ä¸æ¥å—å¤–éƒ¨ä¸´æ—¶å‚æ•°
        SpringApplication.run(application.class);
    }

}<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></li>
<li><p>application.yml çš„åŒé…ç½®</p>
</li>
</ol>
<p>æ–‡ä»¶ä½ç½®:  1. web/springboot.jar/resources/application.yml<br>           2. web/springboot.jar/resources/config/application.yml<br>           3. web/application.yml<br>           4. web/config/application.yml</p>
<pre><code>é‡  å¤: æ–‡ä»¶ä¼˜å…ˆçº§é…ç½®é«˜è¦†ç›–ä½çš„;
ä¸é‡å¤: äº’ä¸å¹²æ‰°;

æƒé™ç­‰çº§: é€çº§ä¸Šå‡(4 &gt; 3 &gt; 2 &gt; 1)
æ–‡ä»¶å†…config/ .yml  &gt; æ–‡ä»¶å¤– .properties
</code></pre>
<h4 id="4-å¤šç¯å¢ƒå¼€å‘"><a href="#4-å¤šç¯å¢ƒå¼€å‘" class="headerlink" title="4.å¤šç¯å¢ƒå¼€å‘"></a>4.å¤šç¯å¢ƒå¼€å‘</h4><h5 id="1-YAML"><a href="#1-YAML" class="headerlink" title="1. YAML"></a>1. YAML</h5><pre class="line-numbers language-none"><code class="language-none"># ä¸€ã€åº”ç”¨ç¯å¢ƒ
spring:
  profiles:
    active: pro
---
# äºŒã€è®¾ç½®ç¯å¢ƒ
# 1. å…¬å…±ç¯å¢ƒ


# 2. è‡ªå®šä¹‰ç¯å¢ƒ
spring:
  profiles: pro
server:
  port:80
---
spring:
  profiles: dev
server:
  port:81
---
spring:
  config:
    activate:
      on-profiles: test
server:
  port:82
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h6 id="YAML-å¼Šç«¯"><a href="#YAML-å¼Šç«¯" class="headerlink" title="YAML å¼Šç«¯"></a>YAML å¼Šç«¯</h6><p>1.â€” : åˆ†å‰²çº¿æ˜¯æ ¼å¼éœ€æ±‚<br>2.å®¹æ˜“æš´éœ²ä¿¡æ¯ï¼Œå®‰å…¨æœ‰é—®é¢˜</p>
<h6 id="YAML-ä¼˜åŒ–"><a href="#YAML-ä¼˜åŒ–" class="headerlink" title="YAML ä¼˜åŒ–"></a>YAML ä¼˜åŒ–</h6><p>ç”Ÿæˆé…ç½®æ–‡ä»¶:<br>    application-dev.yml<br>    application-pro.yml<br>    application-test.yml<br>    å¯ä»¥ç‹¬ç«‹é…ç½®æ–‡ä»¶å®šä¹‰ç¯å¢ƒ;<br>    ç‹¬ç«‹é…ç½®æ–‡ä»¶ä¾¿äºçº¿ä¸Šç³»ç»Ÿç»´æŠ¤æ›´æ–°å¹¶ä¿éšœç³»ç»Ÿå®‰å…¨æ€§;</p>
<h5 id="2-properties"><a href="#2-properties" class="headerlink" title="2. properties"></a>2. properties</h5><ul>
<li>æ–‡ä»¶å†…å®¹æ ¼å¼<pre class="line-numbers language-none"><code class="language-none">spring.profiles=pro
server.port=80
---
spring.profiles=dev
server.port=81
---
spring.profiles=test
spring.profiles=82<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></li>
<li>ç”Ÿæˆé…ç½®æ–‡ä»¶:<br>  application-dev.properties<br>  application-pro.properties<br>  application-test.properties</li>
</ul>
<h5 id="3-ç‹¬ç«‹çš„åŠŸèƒ½é…ç½®æ–‡ä»¶"><a href="#3-ç‹¬ç«‹çš„åŠŸèƒ½é…ç½®æ–‡ä»¶" class="headerlink" title="3. ç‹¬ç«‹çš„åŠŸèƒ½é…ç½®æ–‡ä»¶"></a>3. ç‹¬ç«‹çš„åŠŸèƒ½é…ç½®æ–‡ä»¶</h5><ul>
<li>æ ¹æ®åŠŸèƒ½ å¯¹é…ç½®æ–‡ä»¶çš„ä¿¡æ¯æ‹†åˆ†<ul>
<li>application-devDB.yml</li>
<li>application-devRedis.yml</li>
<li>application-devMVC.yml</li>
</ul>
</li>
<li>application.yml ä¸­ä½¿ç”¨include å±æ€§åœ¨æ¿€æ´»æŒ‡å®šç¯å¢ƒ æ¡ä»¶ä¸‹ï¼ŒåŒæ—¶å¯¹å¤šç¯å¢ƒè¿›è¡ŒåŠ è½½<ul>
<li>application.yml ååŠ è½½  <pre class="line-numbers language-none"><code class="language-none">spring:
  profiles:
    active: dev
    include: devDB,devRedis,devMVC<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre></li>
</ul>
</li>
</ul>
<h6 id="ä¼˜åŒ–-include-æ— æ³•åŠ¨æ€æ›´æ”¹é—®é¢˜"><a href="#ä¼˜åŒ–-include-æ— æ³•åŠ¨æ€æ›´æ”¹é—®é¢˜" class="headerlink" title="ä¼˜åŒ– include æ— æ³•åŠ¨æ€æ›´æ”¹é—®é¢˜"></a>ä¼˜åŒ– include æ— æ³•åŠ¨æ€æ›´æ”¹é—®é¢˜</h6><pre><code>+ application.yml å‰åŠ è½½
</code></pre>
<p>SpringBoot 2.4.X å:</p>
<pre class="line-numbers language-none"><code class="language-none">spring:
      profiles:
        active: dev
        group:
          "dev": devDB,devRedis,devMVC
          "pro": proDB,proRedis,proMVC
          "test": testDB,testRedis,testMVC<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>


<h5 id="4-å¤šç¯å¢ƒå¼€å‘æ§åˆ¶-Maven"><a href="#4-å¤šç¯å¢ƒå¼€å‘æ§åˆ¶-Maven" class="headerlink" title="4. å¤šç¯å¢ƒå¼€å‘æ§åˆ¶(Maven)"></a>4. å¤šç¯å¢ƒå¼€å‘æ§åˆ¶(Maven)</h5><div class="tabs" id="pom.xml"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#pom.xml-1">pom.xml</button></li><li class="tab"><button type="button" data-href="#pom.xml-2">application.yml</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="pom.xml-1"><pre class="line-numbers language-none"><code class="language-none">&lt;!--è®¾ç½®å¤šç¯å¢ƒ--&gt;
&lt;profiles&gt;
  &lt;profile&gt;
      &lt;id&gt;env_dev&lt;/id&gt;
      &lt;properties&gt;
        &lt;profile.active&gt;dev&lt;/profile.active&gt;
      &lt;/properties&gt;
    &lt;!--è®¾ç½®é»˜è®¤å¯åŠ¨--&gt;
      &lt;activation&gt;
        &lt;activeByDefault&gt;true&lt;/activeByDefault&gt;
      &lt;/activation&gt;
  &lt;/profile&gt;

  &lt;profile&gt;
    &lt;id&gt;env_pro&lt;/id&gt;
    &lt;properties&gt;
      &lt;profile.active&gt;pro&lt;/profile.active&gt;
    &lt;/properties&gt;
  &lt;/profile&gt;
&lt;/profiles&gt;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="pom.xml-2"><pre class="line-numbers language-none"><code class="language-none">spring:
      profiles:
        &lt;!-- ä½¿ç”¨Maven çš„ç¯å¢ƒé…ç½®çš„æ ¼å¼ "@....@" --&gt;
        active: @profile.active@
        group:
          "dev": devDB,devRedis,devMVC
          "pro": proDB,proRedis,proMVC
          "test": testDB,testRedis,testMVC<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div>

<ul>
<li>ieda å¯¹Maven ç¯å¢ƒçš„æ›´æ”¹æ— æ³•ç”Ÿæ•ˆï¼Œéœ€è¦æ‰‹åŠ¨ç¼–è¯‘compile</li>
</ul>
<h4 id="5-æ—¥å¿—"><a href="#5-æ—¥å¿—" class="headerlink" title="5. æ—¥å¿—"></a>5. æ—¥å¿—</h4><h5 id="1-æ—¥å¿—è®¾ç½®"><a href="#1-æ—¥å¿—è®¾ç½®" class="headerlink" title="1. æ—¥å¿—è®¾ç½®"></a>1. æ—¥å¿—è®¾ç½®</h5><ol>
<li>ä»£ç ä¸­ä½¿ç”¨æ—¥å¿—å·¥å…·è®°å½•æ—¥å¿—<pre class="line-numbers language-none"><code class="language-none">@RestController
@RequestMapping("/users")
@CrossOrigin
public class UserController {
    private static final Logger log = (Logger) LoggerFactory.getLogger(UserController.class);

    @GetMapping("/{id}")
    public User getById(@PathVariable Integer id){
        // application.yml   debug:true
        log.debug("debug...");
        log.info("info...");
        log.warning("warn...");
        log.error();
        log.fatal();
        return userService.getById(id);
    }
}<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></li>
<li>è®¾ç½®æ—¥å¿—çº§åˆ«<pre class="line-numbers language-none"><code class="language-none"># å¼€å¯debugæ¨¡å¼ï¼Œè¾“å‡ºè°ƒè¯•ä¿¡æ¯ï¼Œå¸¸ç”¨äºæ£€æŸ¥ç³»ç»Ÿè¿è¡ŒçŠ¶å†µ
debug: true

# è®¾ç½®æ—¥å¿—çº§åˆ« rootè¡¨ç¤ºæ ¹èŠ‚ç‚¹ï¼Œæ•´ä½“åº”ç”¨æ—¥å¿—çº§åˆ«
logging:
  level:
    root:
      error
      # è®¾ç½®æŸåŒ…çš„æ—¥å¿—çº§åˆ«
      top.wabisabifag.controller: debug
      # è®¾ç½®åˆ†ç»„ï¼Œå¯¹æŸä¸ªç¥–è®¾ç½®æ—¥å¿—çº§åˆ«
      enable:warn<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></li>
</ol>
<h5 id="2-æ—¥å¿—å·¥å…·-åŠ¨æ€å’Œç»§æ‰¿"><a href="#2-æ—¥å¿—å·¥å…·-åŠ¨æ€å’Œç»§æ‰¿" class="headerlink" title="2. æ—¥å¿—å·¥å…· (åŠ¨æ€å’Œç»§æ‰¿)"></a>2. æ—¥å¿—å·¥å…· (åŠ¨æ€å’Œç»§æ‰¿)</h5><ol>
<li><p>è®¾ç½®æ—¥å¿—å¯¹è±¡</p>
<pre class="line-numbers language-none"><code class="language-none">package top.wabisabifag.controller.Logger;

import org.slf4j.Logger;
import org.slf4j.LoggerFactory;
import top.wabisabifag.controller.UserController;

public class LoggerClass {
    private Class clazz = null;
    public static  Logger log;
    public LoggerClass(){
        clazz = this.getClass();
        log = LoggerFactory.getLogger(UserController.class);
    }
}<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
</li>
<li><p>æ—¥å¿—å·¥å…·å¼•å…¥æ§åˆ¶å±‚</p>
<pre class="line-numbers language-none"><code class="language-none">package top.wabisabifag.controller.Logger;

import lombok.extern.slf4j.Slf4j;
import org.springframework.web.bind.annotation.*;

@Slf4j      // å¼€å¯æ—¥å¿—
@RestController
@RequestMapping("/users")
@CrossOrigin
public class UserController3 extends LoggerClass {
      @GetMapping("/{id}")
    public String getById(@PathVariable Integer id){
        log.debug("debug...");
        log.info("info...");
        log.warning("warn...");
        log.error("error...");
        log.fatal();
        return "springboot is running... 2";
    }
}<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></li>
</ol>
<h5 id="3-æ—¥å¿—è¾“å‡ºæ ¼å¼"><a href="#3-æ—¥å¿—è¾“å‡ºæ ¼å¼" class="headerlink" title="3. æ—¥å¿—è¾“å‡ºæ ¼å¼"></a>3. æ—¥å¿—è¾“å‡ºæ ¼å¼</h5><ol>
<li>æ§åˆ¶å°æ—¥å¿—è¾“å‡º<pre class="line-numbers language-none"><code class="language-none"># æ—¥å¿—é…ç½®
logging:
  level:
    root:
      error
  pattern:
    console: "%d %clr(5p) --- [%16t] %clr(%-40.40c){red} :%m %n"<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></li>
</ol>
<ul>
<li>d æ—¥æœŸ </li>
<li>p ä¿¡æ¯çš„çº§åˆ« </li>
<li>%clr(%5p)  é¢œè‰²è®¾ç½®</li>
<li>%5p  å æ®çš„é•¿åº¦  </li>
<li>[%16 t] è¿è¡Œçš„æ–‡ä»¶</li>
<li>%-40 å·¦å¯¹é½</li>
<li>.40c æˆªæ–­åï¼Œå®¹çº³40é•¿åº¦</li>
<li>m æ¶ˆæ¯ </li>
<li>n æ¢è¡Œ</li>
</ul>
<ol start="2">
<li>æ—¥å¿—è®°å½•<pre class="line-numbers language-none"><code class="language-none"># æ—¥å¿—é…ç½®
logging:
  level:
    root:
      error
  # æ§åˆ¶å°æ—¥å¿—è¾“å‡º
  pattern:
    console: "%d %clr(5p) --- [%16t] %clr(%-40.40c){red} :%m %n"
  # æ—¥å¿—æ–‡ä»¶è®°å½•
  file:
    name: server.log
  # æ—¥å¿—åˆ†æœŸè®°å½•
  logback:
    rollingpolicy:
      max-file-size: 3KB
      file-name-pattern: server.%d{yyyy-MM-dd}.%i.log
      # è¾“å‡ºæ ¼å¼ï¼š server.2023-09-20.0.log<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></li>
</ol>
<h2 id="4-SpringBootåº”ç”¨å¼€å‘"><a href="#4-SpringBootåº”ç”¨å¼€å‘" class="headerlink" title="4.SpringBootåº”ç”¨å¼€å‘"></a>4.SpringBootåº”ç”¨å¼€å‘</h2><h3 id="1-çƒ­éƒ¨ç½²"><a href="#1-çƒ­éƒ¨ç½²" class="headerlink" title="1. çƒ­éƒ¨ç½²"></a>1. çƒ­éƒ¨ç½²</h3><h4 id="1-çƒ­éƒ¨ç½²ä¾èµ–"><a href="#1-çƒ­éƒ¨ç½²ä¾èµ–" class="headerlink" title="1. çƒ­éƒ¨ç½²ä¾èµ–"></a>1. çƒ­éƒ¨ç½²ä¾èµ–</h4><pre class="line-numbers language-none"><code class="language-none">&lt;dependency&gt;
      &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
      &lt;artifactId&gt;spring-boot-devtools&lt;/artifactId&gt;
    &lt;/dependency&gt;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>
<ul>
<li>æ‰‹åŠ¨é…ç½®:åœ¨IEDAæ¿€æ´»çƒ­éƒ¨ç½²: Ctrl + F9  </li>
<li>è‡ªåŠ¨é…ç½®ï¼šç”Ÿå‘½å‘¨æœŸcompile</li>
</ul>
<h4 id="2-çƒ­éƒ¨ç½²èŒƒå›´"><a href="#2-çƒ­éƒ¨ç½²èŒƒå›´" class="headerlink" title="2. çƒ­éƒ¨ç½²èŒƒå›´"></a>2. çƒ­éƒ¨ç½²èŒƒå›´</h4><pre class="line-numbers language-none"><code class="language-none">spring:
  datasource:
    druid:
      url: jdbc:mysql://localhost:3306/smbms
      username: root
      password: 123456
      driver-class-name: com.mysql.jdbc.Driver
  # è®¾ç½®ä¸å‚ä¸çƒ­éƒ¨ç½²çš„æ–‡ä»¶ä¸æ–‡ä»¶å¤¹
  # é»˜è®¤ä¸é‡å¯ï¼š
  #   /META-INF/maven  /META-INF/resources /resources  /static /public /templates
  devtools:
    restart:
      # æ’é™¤
     exclude: static/**,public/**,config/application.yml<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h4 id="3-å…³é—­çƒ­éƒ¨ç½²"><a href="#3-å…³é—­çƒ­éƒ¨ç½²" class="headerlink" title="3. å…³é—­çƒ­éƒ¨ç½²"></a>3. å…³é—­çƒ­éƒ¨ç½²</h4><p>çƒ­éƒ¨ç½²åŠŸèƒ½åªé€‚ç”¨äº å¼€å‘ç¯å¢ƒ</p>
<h5 id="1-è®¾ç½®æ–‡ä»¶å±‚çº§æ§åˆ¶"><a href="#1-è®¾ç½®æ–‡ä»¶å±‚çº§æ§åˆ¶" class="headerlink" title="1.è®¾ç½®æ–‡ä»¶å±‚çº§æ§åˆ¶"></a>1.è®¾ç½®æ–‡ä»¶å±‚çº§æ§åˆ¶</h5><pre class="line-numbers language-none"><code class="language-none">spring:
  datasource:
    druid:
      url: jdbc:mysql://localhost:3306/smbms
      username: root
      password: 123456
      driver-class-name: com.mysql.jdbc.Driver
  # è®¾ç½®ä¸å‚ä¸çƒ­éƒ¨ç½²çš„æ–‡ä»¶ä¸æ–‡ä»¶å¤¹
  # é»˜è®¤ä¸é‡å¯ï¼š
  #   /META-INF/maven  /META-INF/resources /resources  /static /public /templates
  devtools:
    restart:
      # æ’é™¤
     exclude: static/**,public/**,config/application.yml
      # å¼€å…³   å—åˆ°æƒé™å±‚çº§å½±å“
     enable: true<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h5 id="2-ç³»ç»Ÿå±‚çº§è¦†ç›–æ§åˆ¶"><a href="#2-ç³»ç»Ÿå±‚çº§è¦†ç›–æ§åˆ¶" class="headerlink" title="2. ç³»ç»Ÿå±‚çº§è¦†ç›–æ§åˆ¶"></a>2. ç³»ç»Ÿå±‚çº§è¦†ç›–æ§åˆ¶</h5><pre class="line-numbers language-none"><code class="language-none">package top.wabisabifag;

import org.springframework.boot.SpringApplication;
import org.springframework.boot.autoconfigure.SpringBootApplication;

@SpringBootApplication
public class SSMPApplication {
    public static void main(String[] args) {
        // ç³»ç»Ÿå±‚çº§è¦†ç›–çƒ­éƒ¨ç½²åŠŸèƒ½
        System.setProperty("spring.devtools.restart.enabled","false");
        SpringApplication.run(SSMPApplication.class);
    }
}<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<h3 id="2-Swaggerç”ŸæˆWebAPIæ–‡æ¡£"><a href="#2-Swaggerç”ŸæˆWebAPIæ–‡æ¡£" class="headerlink" title="2. Swaggerç”ŸæˆWebAPIæ–‡æ¡£"></a>2. Swaggerç”ŸæˆWebAPIæ–‡æ¡£</h3><p>Swaggerç±»ä¼¼Postmanï¼Œæä¾›æ–‡æ¡£ä¼ è¾“çš„å¯è§†åŒ–é¡µé¢</p>
<h4 id="1-éƒ¨ç½²åº”ç”¨Swagger"><a href="#1-éƒ¨ç½²åº”ç”¨Swagger" class="headerlink" title="1.éƒ¨ç½²åº”ç”¨Swagger"></a>1.éƒ¨ç½²åº”ç”¨Swagger</h4><p><a href="../JavaEE/javaBase-9.jpg">Swaggerçš„Controllerå±‚æ˜¾ç¤ºæ³¨è§£</a></p>
<div class="tabs" id="pox.xml"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#pox.xml-1">pom.xml</button></li><li class="tab"><button type="button" data-href="#pox.xml-2">application.yml</button></li><li class="tab"><button type="button" data-href="#pox.xml-3">Swagger2Config</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="pox.xml-1"><pre class="line-numbers language-none"><code class="language-none">&lt;!--Swaggerç”ŸæˆWeb APIæ–‡æ¡£--&gt;
    &lt;dependency&gt;
      &lt;groupId&gt;io.springfox&lt;/groupId&gt;
      &lt;artifactId&gt;springfox-swagger2&lt;/artifactId&gt;
      &lt;version&gt;3.0.0&lt;/version&gt;
    &lt;/dependency&gt;
    &lt;dependency&gt;
      &lt;groupId&gt;io.springfox&lt;/groupId&gt;
      &lt;artifactId&gt;springfox-swagger-ui&lt;/artifactId&gt;
      &lt;version&gt;3.0.0&lt;/version&gt;
    &lt;/dependency&gt;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="pox.xml-2"><pre class="line-numbers language-none"><code class="language-none">spring:
  mvc:
    pathmatch:
      matching-strategy: ant_path_matcher<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="pox.xml-3"><pre class="line-numbers language-none"><code class="language-none">package top.wabisabifag.config;

import org.springframework.context.annotation.Bean;
import org.springframework.context.annotation.Configuration;
import springfox.documentation.builders.ApiInfoBuilder;
import springfox.documentation.builders.PathSelectors;
import springfox.documentation.builders.RequestHandlerSelectors;
import springfox.documentation.service.ApiInfo;
import springfox.documentation.spi.DocumentationType;
import springfox.documentation.spring.web.plugins.Docket;
import springfox.documentation.swagger2.annotations.EnableSwagger2;

@Configuration
@EnableSwagger2
public class Swagger2Config {
    /*
    *  å¯è§†åŒ–æµ‹è¯•é¡µé¢ï¼šhttp://localhost:8080/swagger-ui.html
    */
    @Bean
    public Docket createRestApi(){
        return new Docket(DocumentationType.SWAGGER_2)
                .apiInfo(apiInfo())
                .select()
                .apis(RequestHandlerSelectors.basePackage("top.wabisabifag"))
                .paths(PathSelectors.any()).build();
    }

    // API æ–‡æ¡£é¡µé¢æ˜¾ç¤ºä¿¡æ¯
    private ApiInfo apiInfo(){
        return new ApiInfoBuilder()
                .title("æ¼”ç¤ºé¡¹ç›®API")
                .build();
    }
}
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div>

<p>Swaggerçš„æ–‡æ¡£é¡µé¢åœ°å€: <a target="_blank" rel="noopener external nofollow noreferrer" href="http://localhost:8080/swagger-ui.html">http://localhost:8080/swagger-ui.html</a></p>
<h3 id="2-ç¬¬ä¸‰æ–¹Bean-å±æ€§ç»‘å®š-configuration"><a href="#2-ç¬¬ä¸‰æ–¹Bean-å±æ€§ç»‘å®š-configuration" class="headerlink" title="2. ç¬¬ä¸‰æ–¹Bean å±æ€§ç»‘å®š(configuration)"></a>2. ç¬¬ä¸‰æ–¹Bean å±æ€§ç»‘å®š(configuration)</h3><h4 id="1-Bean-å±æ€§ç»‘å®š"><a href="#1-Bean-å±æ€§ç»‘å®š" class="headerlink" title="1. Bean å±æ€§ç»‘å®š"></a>1. Bean å±æ€§ç»‘å®š</h4><div class="tabs" id="pom.xml"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#pom.xml-1">pom.xml</button></li><li class="tab"><button type="button" data-href="#pom.xml-2">application.yml</button></li><li class="tab"><button type="button" data-href="#pom.xml-3">ServertConfig.java</button></li><li class="tab"><button type="button" data-href="#pom.xml-4">SpringBootConfigurationApplication.java</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="pom.xml-1"><pre class="line-numbers language-none"><code class="language-none">&lt;dependency&gt;
      &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;
      &lt;artifactId&gt;lombok&lt;/artifactId&gt;
&lt;/dependency&gt;

&lt;dependency&gt;
  &lt;groupId&gt;com.alibaba&lt;/groupId&gt;
  &lt;artifactId&gt;druid&lt;/artifactId&gt;
  &lt;version&gt;1.1.23&lt;/version&gt;
&lt;/dependency&gt;

&lt;!--springbootç¬¬ä¸‰æ–¹é…ç½®ç»‘å®š--&gt;
&lt;dependency&gt;
  &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
  &lt;artifactId&gt;spring-boot-configuration-processor&lt;/artifactId&gt;
&lt;/dependency&gt;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="pom.xml-2"><pre class="line-numbers language-none"><code class="language-none">servers:
  ipAddress: 192.168.0.1
  port: 2345
  timeout: -1

datasource:
  driverClassName: com.mysql.jdbc.Driver<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="pom.xml-3"><pre class="line-numbers language-none"><code class="language-none">package top.wabisabifag.config;

import lombok.Data;
import org.springframework.boot.context.properties.ConfigurationProperties;
import org.springframework.stereotype.Component;

//@Component  // å—Springæ¥ç®¡ åŠ è½½ä¸ºBean å’Œ @EnableConfigurationProperties å†²çª
@Data
@ConfigurationProperties(prefix = "servers")  // æ˜ å°„é…ç½®è®¾ç½®
public class ServertConfig {
    private String ipAddress;
    private int port;
    private long timeout;
}<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="pom.xml-4"><pre class="line-numbers language-none"><code class="language-none">package top.wabisabifag;

import com.alibaba.druid.pool.DruidDataSource;
import org.springframework.boot.SpringApplication;
import org.springframework.boot.autoconfigure.SpringBootApplication;
import org.springframework.boot.context.properties.ConfigurationProperties;
import org.springframework.boot.context.properties.EnableConfigurationProperties;
import org.springframework.context.ConfigurableApplicationContext;
import org.springframework.context.annotation.Bean;
import top.wabisabifag.config.ServertConfig;

@SpringBootApplication
/* è‡ªåŠ¨åŠ è½½é…ç½®ç±»ä¸ºBean å’Œ @Component  å†²çª
 å¼€å¯å±æ€§ç»‘å®š å¹¶ è®¾å®šå¯¹åº”çš„ç±» */
@EnableConfigurationProperties(ServertConfig.class) 
public class SpringBootConfigurationApplication {

    /* ç¬¬ä¸‰æ–¹é…ç½®ç±» Bean å·²ç»åŠ è½½ ä½†æ˜¯æ²¡æœ‰é…ç½®å±æ€§å€¼

    å¯é…ç½®è‡ªå®šä¹‰ å’Œ ç¬¬ä¸‰æ–¹ çš„ é…ç½®å±æ€§å€¼ç»‘å®š
     1.æŠ¥é”™:  æ³¨è§£æ²¡æœ‰é…ç½®   åŠ è½½ spring-boot-configuration-processor ä¾èµ–
     2.å®½æ¾ç»‘å®š:  é…ç½®æ–‡ä»¶é©¼å³°å‘½åæ—¶ï¼Œæ­¤å¤„ä¸ç”¨éµä»å‘½åè§„èŒƒ  */

    @Bean
    @ConfigurationProperties(prefix = "datasource")
    public DruidDataSource dataSource(){
        DruidDataSource dataSource = new DruidDataSource();
        //dataSource.setDriverClassName("com.mysql.jdbc.Driver");
        return dataSource;
    }

    public static void main(String[] args) {
        ConfigurableApplicationContext ctx = SpringApplication.run(SpringBootConfigurationApplication.class,args);

        // ../config/ServerConfig ç±»
        ServertConfig bean = ctx.getBean(ServertConfig.class);
        System.out.println(bean);

        // é…ç½®å€¼
        DruidDataSource dataSource = ctx.getBean(DruidDataSource.class);
        // è·å–æ‡’åŠ è½½çš„é…ç½®å±æ€§
        System.out.println(dataSource);

        // è®¾ç½®çš„å€¼ æ™®é€šç±»å¯¹è±¡
        System.out.println(dataSource.getDriverClassName());

    }
}<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div>




<h4 id="2-å®½æ¾ç»‘å®š"><a href="#2-å®½æ¾ç»‘å®š" class="headerlink" title="2. å®½æ¾ç»‘å®š"></a>2. å®½æ¾ç»‘å®š</h4><ul>
<li>@ConfigurationProperties é€‚é…å¤šç§å‘½åæ¨¡å¼</li>
</ul>
<ul>
<li>é©¼å³°:             ipAddress</li>
<li>underLine         ip_adderess </li>
<li>çŸ¢é‡ (çƒ¤è‚‰ä¸²)      ip-address  (ä¸»è¦é€‚åº”åº”ç”¨)</li>
<li>å¸¸äº®              IP_ADDRESS</li>
</ul>
<ul>
<li>@Value æ•°æ®ç»‘å®šæ”¯æŒ é©¼å³°<pre class="line-numbers language-none"><code class="language-none">@SpringBootTest
class application{

  @Value("${servers.ipAddress}")
  private String msg;

  @Test 
  void contextLoads(){
    System.out.println(msg);
  }
}<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></li>
</ul>
<h3 id="3-å¸¸é‡è®¡é‡å•ä½åº”ç”¨-jdkç‰ˆæœ¬-8"><a href="#3-å¸¸é‡è®¡é‡å•ä½åº”ç”¨-jdkç‰ˆæœ¬-8" class="headerlink" title="3. å¸¸é‡è®¡é‡å•ä½åº”ç”¨(jdkç‰ˆæœ¬:8)"></a>3. å¸¸é‡è®¡é‡å•ä½åº”ç”¨(jdkç‰ˆæœ¬:8)</h3><div class="tabs" id="application.yml"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#application.yml-1">application.yml</button></li><li class="tab"><button type="button" data-href="#application.yml-2">ServertConfig.java</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="application.yml-1"><pre class="line-numbers language-none"><code class="language-none">servers:
  ipAddress: 192.168.0.1
  port: 2345
  timeout: -1
  # æ•°æ®å­˜å‚¨æ—¶é—´ï¼ŒæœåŠ¡å™¨è¶…æ—¶æ—¶é—´ï¼š æ¯«ç§’
  serverTimeOut: 3
  # æ•°æ®å­˜å‚¨å•ä½ï¼š Byte
  dataSize: 10<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="application.yml-2"><pre class="line-numbers language-none"><code class="language-none">package top.wabisabifag.config;

import lombok.Data;
import org.springframework.boot.context.properties.ConfigurationProperties;
import org.springframework.boot.convert.DataSizeUnit;
import org.springframework.boot.convert.DurationUnit;
import org.springframework.stereotype.Component;
import org.springframework.util.unit.DataSize;
import org.springframework.util.unit.DataUnit;

import java.time.Duration;
import java.time.temporal.ChronoUnit;

//å—Springæ¥ç®¡ åŠ è½½ä¸ºBean å’Œ @EnableConfigurationProperties å†²çª
//@Component  
@Data
@ConfigurationProperties(prefix = "servers")  // æ˜ å°„é…ç½®è®¾ç½®
public class ServertConfig {
    private String ipAddress;
    private int port;
    private long timeout;

    @DurationUnit(ChronoUnit.HOURS) // æ—¶é—´å•ä½è‡ªå®šä¹‰
    private Duration serverTimeOut;

    @DataSizeUnit(DataUnit.GIGABYTES) // æ•°æ®å­˜å‚¨å•ä½è‡ªå®šä¹‰
    private DataSize dataSize;
}<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div>


<h3 id="4-æ•°æ®æ ¡éªŒ"><a href="#4-æ•°æ®æ ¡éªŒ" class="headerlink" title="4. æ•°æ®æ ¡éªŒ"></a>4. æ•°æ®æ ¡éªŒ</h3><div class="tabs" id="pom.xml"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#pom.xml-1">pom.xml</button></li><li class="tab"><button type="button" data-href="#pom.xml-2">ServertConfig.java</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="pom.xml-1"><pre class="line-numbers language-none"><code class="language-none">&lt;!--æ•°æ®æ ¡éªŒ  JSR303è§„èŒƒ æ¥å£--&gt;
   &lt;dependency&gt;
     &lt;groupId&gt;javax.validation&lt;/groupId&gt;
     &lt;artifactId&gt;validation-api&lt;/artifactId&gt;
   &lt;/dependency&gt;
 &lt;!--æ ¡éªŒæ¡†æ¶ å®ç°--&gt;
   &lt;dependency&gt;
     &lt;groupId&gt;org.hibernate.validator&lt;/groupId&gt;
     &lt;artifactId&gt;hibernate-validator&lt;/artifactId&gt;
   &lt;/dependency&gt;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="pom.xml-2"><pre class="line-numbers language-none"><code class="language-none">package top.wabisabifag.config;

import lombok.Data;
import org.springframework.boot.context.properties.ConfigurationProperties;
import org.springframework.boot.convert.DataSizeUnit;
import org.springframework.boot.convert.DurationUnit;
import org.springframework.stereotype.Component;
import org.springframework.util.unit.DataSize;
import org.springframework.util.unit.DataUnit;
import org.springframework.validation.annotation.Validated;

import javax.validation.constraints.Max;
import javax.validation.constraints.Min;
import javax.validation.constraints.NotEmpty;
import java.time.Duration;
import java.time.temporal.ChronoUnit;


@Data
@ConfigurationProperties(prefix = "servers")  // æ˜ å°„é…ç½®è®¾ç½®
@Validated      //2. å¯¹Beanå±æ€§æ³¨å…¥æ ¡éªŒ
public class ServertConfig {

    private String ipAddress;

    // 3. è®¾ç½®è§„åˆ™
    @Max(value = 8888,message = "ç«¯å£å·ä¸èƒ½è¶…è¿‡ 8888")
    @Min(value = 888,message = "ç«¯å£å·ä¸èƒ½è¶…è¿‡ 888")
    //@NotEmpty
    private int port;

    private long timeout;

    @DurationUnit(ChronoUnit.HOURS)// æ—¶é—´å•ä½è‡ªå®šä¹‰
    private Duration serverTimeOut;

    @DataSizeUnit(DataUnit.GIGABYTES)// æ•°æ®å­˜å‚¨å•ä½è‡ªå®šä¹‰
    private DataSize dataSize;
}<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div>



<h3 id="5-è¿›åˆ¶æ•°æ®è½¬æ¢"><a href="#5-è¿›åˆ¶æ•°æ®è½¬æ¢" class="headerlink" title="5. è¿›åˆ¶æ•°æ®è½¬æ¢"></a>5. è¿›åˆ¶æ•°æ®è½¬æ¢</h3><ul>
<li>æŠ¥é”™: å¯†ç é”™è¯¯</li>
</ul>
<div class="tabs" id="application.yml"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#application.yml-1">application.yml</button></li><li class="tab"><button type="button" data-href="#application.yml-2">application.java</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="application.yml-1"><pre class="line-numbers language-none"><code class="language-none">datasource:
  driverClassName: com.mysql.jdbc.Driver
  password: 0127<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="application.yml-2"><pre class="line-numbers language-none"><code class="language-none">@SpringBootTest
class application{

  @Value("${datasource.password}")
  private String password;

  @Test 
  void contextLoads(){
    System.out.println(password);  // è¾“å‡ºå€¼: 87
  }

}<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div>

<ul>
<li>åŸå› :</li>
</ul>
<ul>
<li><ol>
<li>String ç±»å‹æ¥æ”¶çš„ password</li>
</ol>
</li>
<li><ol start="2">
<li>datasource.password: 0127 ã€‚ ä¸º0 å¼€å¤´çš„8è¿›åˆ¶ ä¸”åªæœ‰æ•°å­—ï¼Œæ²¡æœ‰ç”¨â€â€ æŸç¼šã€‚ ç¼–è¯‘ä¸ºåè¿›åˆ¶ä¸º:87</li>
</ol>
</li>
</ul>
<h3 id="6-æµ‹è¯•"><a href="#6-æµ‹è¯•" class="headerlink" title="6. æµ‹è¯•"></a>6. æµ‹è¯•</h3><h4 id="1-åŠ è½½æµ‹è¯•ä¸“ç”¨å±æ€§"><a href="#1-åŠ è½½æµ‹è¯•ä¸“ç”¨å±æ€§" class="headerlink" title="1. åŠ è½½æµ‹è¯•ä¸“ç”¨å±æ€§"></a>1. åŠ è½½æµ‹è¯•ä¸“ç”¨å±æ€§</h4><div class="tabs" id="application.yml"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#application.yml-1">application.yml</button></li><li class="tab"><button type="button" data-href="#application.yml-2">PropertiesAndArgsTest.java</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="application.yml-1"><pre class="line-numbers language-none"><code class="language-none">test:
  prop: testValue<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="application.yml-2"><pre class="line-numbers language-none"><code class="language-none">package top.wabisabifag;

import org.junit.Test;
import org.springframework.beans.factory.annotation.Value;
import org.springframework.boot.test.context.SpringBootTest;

//@SpringBootTest(properties = {"test.prop=testValue1"}) // æ·»åŠ ä¸´æ—¶çš„æ•°ç»„å±æ€§
@SpringBootTest(properties = {"test.prop=testValue1"},args = {"--test.prop=testValue2"})
public class PropertiesAndArgsTest {
    @Value("${test.prop}")
    private String msg;

    @Test
    public void testProperties(){
        /* 2.7.x å±‚çº§æƒé™ properties &gt; args
           2.5.x å±‚çº§æƒé™ properties &lt; args
        */
        System.out.println(msg);
    }
}<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div>

<h5 id="1-å±€éƒ¨é…ç½®å¯¼å…¥"><a href="#1-å±€éƒ¨é…ç½®å¯¼å…¥" class="headerlink" title="1. å±€éƒ¨é…ç½®å¯¼å…¥"></a>1. å±€éƒ¨é…ç½®å¯¼å…¥</h5><div class="tabs" id="msgconfig.java"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#msgconfig.java-1">MsgConfig.java</button></li><li class="tab"><button type="button" data-href="#msgconfig.java-2">ConfigurationTest.java</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="msgconfig.java-1"><pre class="line-numbers language-none"><code class="language-none">package top.wabisabifag.config;

import org.springframework.context.annotation.Bean;
import org.springframework.context.annotation.Configuration;

@Configuration
public class MsgConfig {

    @Bean
    public String msg(){
        return "bean msg";
    }
}<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="msgconfig.java-2"><pre class="line-numbers language-none"><code class="language-none">package top.wabisabifag;

import org.junit.Test;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.boot.test.context.SpringBootTest;
import org.springframework.context.annotation.Import;
import top.wabisabifag.config.MsgConfig;

@SpringBootTest
@Import({MsgConfig.class})   // åŠ è½½å½“å‰æµ‹è¯•ç±»ä¸“ç”¨çš„é…ç½®
public class ConfigurationTest {

    @Autowired
    private String msg;

    @Test
    public void testConfiguration(){
        System.out.println(msg);
    }
}<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div>

<ul>
<li>åŠ è½½æµ‹è¯•ä¸´æ—¶å±æ€§åº”ç”¨äºå°èŒƒå›´æµ‹è¯•ç¯å¢ƒ</li>
</ul>
<h4 id="2-Web-ç¯å¢ƒæ¨¡æ‹Ÿæµ‹è¯•"><a href="#2-Web-ç¯å¢ƒæ¨¡æ‹Ÿæµ‹è¯•" class="headerlink" title="2. Web ç¯å¢ƒæ¨¡æ‹Ÿæµ‹è¯•"></a>2. Web ç¯å¢ƒæ¨¡æ‹Ÿæµ‹è¯•</h4><div class="tabs" id="bookcontroller.java"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#bookcontroller.java-1">BookController.java</button></li><li class="tab"><button type="button" data-href="#bookcontroller.java-2">WebTest.java</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="bookcontroller.java-1"><pre class="line-numbers language-none"><code class="language-none">package top.wabisabifag.controller;

import org.springframework.web.bind.annotation.GetMapping;
import org.springframework.web.bind.annotation.RequestMapping;
import org.springframework.web.bind.annotation.ResponseBody;
import org.springframework.web.bind.annotation.RestController;

@RestController
@RequestMapping("/books")
public class BookController {
    @GetMapping
    public String getById(){
        System.out.println("getById is running ...");
        return "springboot";
    }
    
    /*json æ•°æ®çš„å“åº”ä½“*/
    @GetMapping
    @ResponseBody
    public String finall(){
        return "{\"name\" : Webæµ‹è¯•æˆåŠŸ}";
    }
}<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="bookcontroller.java-2"><pre class="line-numbers language-none"><code class="language-none">package top.wabisabifag;

import org.junit.Test;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.boot.test.autoconfigure.web.servlet.AutoConfigureMockMvc;
import org.springframework.boot.test.context.SpringBootTest;
import org.springframework.mock.web.MockServletContext;
import org.springframework.test.web.servlet.MockMvc;
import org.springframework.test.web.servlet.ResultActions;
import org.springframework.test.web.servlet.ResultMatcher;
import org.springframework.test.web.servlet.request.MockHttpServletRequestBuilder;
import org.springframework.test.web.servlet.request.MockMvcRequestBuilders;
import org.springframework.test.web.servlet.result.ContentResultMatchers;
import org.springframework.test.web.servlet.result.HeaderResultMatchers;
import org.springframework.test.web.servlet.result.MockMvcResultMatchers;
import org.springframework.test.web.servlet.result.StatusResultMatchers;

// æ¨¡æ‹Ÿç«¯å£å¯åŠ¨Web ç¯å¢ƒ===&gt; éšæœºç«¯å£
@SpringBootTest(webEnvironment = SpringBootTest.WebEnvironment.RANDOM_PORT,classes = {MockServletContext.class })
// è™šæ‹Ÿè°ƒç”¨MVC æ³¨è§£
@AutoConfigureMockMvc
public class WebTest {
    // å¼•å…¥MockMvcç±»å‹å¯¹è±¡
    @Autowired
    private MockMvc mvc;

    // è°ƒç”¨ MockMvc æ‰§è¡ŒController å±‚åŠŸèƒ½
    @Test
    public void testWeb() throws Exception {

        MockHttpServletRequestBuilder builder = MockMvcRequestBuilders.get("/books");
        // æ‰§è¡Œå¯¹åº”è¯·æ±‚
        ResultActions actions = mvc.perform(builder);
    }

    @Test
    public void testStatus() throws Exception {
        /*http://localhost:8080/books åˆ›å»ºè™šæ‹Ÿè¯·æ±‚ï¼Œå½“å‰è®¿é—®  /books */
        MockHttpServletRequestBuilder builder = MockMvcRequestBuilders.get("/books");
        /*è¿™é‡Œéœ€è¦æŠ›å‡ºå¼‚å¸¸    è·å–è¿”å›å€¼*/
        ResultActions actions = mvc.perform(builder);

        /*1 .status()å“åº”çŠ¶æ€ åŒ¹é…*/
        // å®šä¹‰æœ¬æ¬¡è°ƒç”¨çš„é¢„æœŸå€¼
        StatusResultMatchers status = MockMvcResultMatchers.status();
        // é¢„è®¡æœ¬æ¬¡è°ƒç”¨æ—¶æˆåŠŸçš„çŠ¶æ€: 200
        ResultMatcher ok = status.isOk();
        // æ·»åŠ é¢„æœŸå€¼åˆ°æœ¬æ¬¡è°ƒç”¨è¿‡ç¨‹ä¸­è¿›è¡ŒåŒ¹é…
        actions.andExpect(ok);

        /*2 .content()å“åº”ä½“ åŒ¹é…*/
        ContentResultMatchers content = MockMvcResultMatchers.content();
            /* 1. content.string*/
        ResultMatcher stringData = content.string("Webæµ‹è¯•æˆåŠŸ");
        actions.andExpect(stringData);
            /* 2. content.json*/
        ResultMatcher jsonData = content.json("{\"name\":Webæµ‹è¯•æˆåŠŸ}");// controller return çš„ç»“æœ
        actions.andExpect(jsonData);

        /*3 .header()å“åº”å¤´ åŒ¹é…*/
        HeaderResultMatchers header = MockMvcResultMatchers.header();
        ResultMatcher contentType = header.string("Content-Type", "text/plain;charset=UTF-8");
        actions.andExpect(contentType);
    }
}<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div>

<h4 id="3-ä¸šåŠ¡å±‚æ•°æ®æµ‹è¯•äº‹ç‰©å›æ»š"><a href="#3-ä¸šåŠ¡å±‚æ•°æ®æµ‹è¯•äº‹ç‰©å›æ»š" class="headerlink" title="3. ä¸šåŠ¡å±‚æ•°æ®æµ‹è¯•äº‹ç‰©å›æ»š"></a>3. ä¸šåŠ¡å±‚æ•°æ®æµ‹è¯•äº‹ç‰©å›æ»š</h4><div class="tabs" id="application.yaml"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#application.yaml-1">application.yaml</button></li><li class="tab"><button type="button" data-href="#application.yaml-2">Book.java</button></li><li class="tab"><button type="button" data-href="#application.yaml-3">BookDao.java</button></li><li class="tab"><button type="button" data-href="#application.yaml-4">BookService.java</button></li><li class="tab"><button type="button" data-href="#application.yaml-5">BookServiceImpl.java</button></li><li class="tab"><button type="button" data-href="#application.yaml-6">BookDaoTest.java</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="application.yaml-1"><pre class="line-numbers language-none"><code class="language-none">#åœ¨application.properties/æˆ–è€…application.ymlæ–‡ä»¶ä¸­æ²¡æœ‰æ·»åŠ æ•°æ®åº“é…ç½®ä¿¡æ¯.
#      url: jdbc:mysql://localhost:3306/smbms?useUnicode=true&amp;characterEncoding=UTF-8&amp;useSSL=false

spring:
  datasource:
    druid:
      url: jdbc:mysql://localhost:3306/smbms
      username: root
      password: 123456
      driver-class-name: com.mysql.jdbc.Driver

#é…ç½®MPç›¸å…³æ•°æ®åº“åç§°
mybatis-plus:
  configuration:
    # æ—¥å¿—
    log-impl: org.apache.ibatis.logging.stdout.StdOutImpl
  global-config:
    db-config:
      table-prefix: smbms_
      id-type: auto<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="application.yaml-2"><pre class="line-numbers language-none"><code class="language-none">package top.wabisabifag.domain;

import lombok.AllArgsConstructor;
import lombok.Data;

@Data
@AllArgsConstructor
public class Book {
    private int id;
    private String name;
    private String type;
    private String description;

}<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="application.yaml-3"><pre class="line-numbers language-none"><code class="language-none">package top.wabisabifag.dao;

import com.baomidou.mybatisplus.core.mapper.BaseMapper;
import org.apache.ibatis.annotations.Mapper;
import top.wabisabifag.domain.Book;

@Mapper
public interface BookDao extends BaseMapper&lt;Book&gt; {
}<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="application.yaml-4"><pre class="line-numbers language-none"><code class="language-none">package top.wabisabifag.service;

import top.wabisabifag.domain.Book;

public interface BookService {
    public boolean save(Book book);
}<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="application.yaml-5"><pre class="line-numbers language-none"><code class="language-none">package top.wabisabifag.service.impl;

import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.stereotype.Service;
import top.wabisabifag.dao.BookDao;
import top.wabisabifag.domain.Book;
@Service
public class BookServiceImpl {
    @Autowired
    private BookDao bookDao;

    public boolean save(Book book){
        return bookDao.insert(book) &gt; 0;
    }
}<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="application.yaml-6"><pre class="line-numbers language-none"><code class="language-none">package top.wabisabifag;

import org.junit.Test;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.boot.test.context.SpringBootTest;
import org.springframework.test.annotation.Rollback;
import org.springframework.transaction.annotation.Transactional;
import top.wabisabifag.domain.Book;
import top.wabisabifag.service.BookService;

@SpringBootTest
@Transactional    // äº‹åŠ¡æ³¨è§£: åœæ­¢äº‹åŠ¡æäº¤ï¼Œè‡ªåŠ¨å›æ»š   [å†…æ¶µ @Rollback(true)]
//@Rollback(false)   æµ‹è¯•æ—¶ï¼Œæäº¤äº‹ç‰©æ›´æ”¹å€¼
public class BookDaoTest {
    @Autowired
    private BookService bookService;

    @Test
    public void testSave(){
        Book book = new Book(1,"name","type","description");
        bookService.save(book);
    }
}<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div>

<ul>
<li>ä¸åšæ•°æ®ç•™ç—•ï¼Œä¸åšåƒåœ¾æ•°æ®ï¼Œè„æ•°æ®ä¿å­˜</li>
</ul>
<h4 id="4-æµ‹è¯•ç”¨ä¾‹æ•°æ®è®¾å®š"><a href="#4-æµ‹è¯•ç”¨ä¾‹æ•°æ®è®¾å®š" class="headerlink" title="4. æµ‹è¯•ç”¨ä¾‹æ•°æ®è®¾å®š"></a>4. æµ‹è¯•ç”¨ä¾‹æ•°æ®è®¾å®š</h4><h5 id="1-æµ‹è¯•ç”¨ä¾‹è®¾å®šéšæœºæ•°æ®"><a href="#1-æµ‹è¯•ç”¨ä¾‹è®¾å®šéšæœºæ•°æ®" class="headerlink" title="1.  æµ‹è¯•ç”¨ä¾‹è®¾å®šéšæœºæ•°æ®"></a>1.  æµ‹è¯•ç”¨ä¾‹è®¾å®šéšæœºæ•°æ®</h5><div class="tabs" id="application.yml"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#application.yml-1">application.yml</button></li><li class="tab"><button type="button" data-href="#application.yml-2">BookCase.java</button></li><li class="tab"><button type="button" data-href="#application.yml-3">BookDaoTest.java</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="application.yml-1"><pre class="line-numbers language-none"><code class="language-none">#åœ¨application.properties/æˆ–è€…application.ymlæ–‡ä»¶ä¸­æ²¡æœ‰æ·»åŠ æ•°æ®åº“é…ç½®ä¿¡æ¯.
#      url: jdbc:mysql://localhost:3306/smbms?useUnicode=true&amp;characterEncoding=UTF-8&amp;useSSL=false
spring:
  datasource:
    druid:
      url: jdbc:mysql://localhost:3306/smbms
      username: root
      password: 123456
      driver-class-name: com.mysql.jdbc.Driver

#é…ç½®MPç›¸å…³æ•°æ®åº“åç§°
mybatis-plus:
  configuration:
    # æ—¥å¿—
    log-impl: org.apache.ibatis.logging.stdout.StdOutImpl
  global-config:
    db-config:
      table-prefix: smbms_
      id-type: auto
# æµ‹è¯•ç”¨ä¾‹è®¾å®šéšæœºæ•°æ®
testcase:
  book:
    id: ${random.int(0,10)} # è‡ªå®šä¹‰éšæœºèŒƒå›´
    name: Wabisabifag${random.value}   # æ•°æ®å¯æ‹¼æ¥
    uuid: ${random.uuid}
    publishTome: ${random.long}<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="application.yml-2"><pre class="line-numbers language-none"><code class="language-none">package top.wabisabifag.domain;

import lombok.Data;
import org.springframework.boot.context.properties.ConfigurationProperties;
import org.springframework.stereotype.Component;

@Component
@Data
@ConfigurationProperties(prefix = "testcase.book")
public class BookCase {
    private int id;
    private String name;
    private String uuid;
    private long publishTime;
}<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="application.yml-3"><pre class="line-numbers language-none"><code class="language-none">package top.wabisabifag;

import org.junit.Test;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.boot.test.context.SpringBootTest;
import top.wabisabifag.domain.BookCase;

@SpringBootTest
public class BookDaoTest {

    @Autowired
    private BookCase bookCase;

    public void testBookCase(){
        System.out.println(bookCase);
    }
}<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div>



<h3 id="7-æ•°æ®å±‚è§£å†³æ–¹æ¡ˆ"><a href="#7-æ•°æ®å±‚è§£å†³æ–¹æ¡ˆ" class="headerlink" title="7. æ•°æ®å±‚è§£å†³æ–¹æ¡ˆ"></a>7. æ•°æ®å±‚è§£å†³æ–¹æ¡ˆ</h3><h4 id="1-SQL"><a href="#1-SQL" class="headerlink" title="1. SQL"></a>1. SQL</h4><p>æ•°æ®å±‚è§£å†³æ–¹æ¡ˆ:</p>
<p>æ•°æ®æº       æŒä¹…åŒ–         æ•°æ®åº“</p>
<p>Druid       MyBatis-Plus    MySql</p>
<p>Hikari      MyBatis           H2</p>
<pre><code>        JDBCTemplate
</code></pre>
<h5 id="1-æ•°æ®æºé…ç½®-DruidDataSource"><a href="#1-æ•°æ®æºé…ç½®-DruidDataSource" class="headerlink" title="1. æ•°æ®æºé…ç½®(DruidDataSource)"></a>1. æ•°æ®æºé…ç½®(DruidDataSource)</h5><ul>
<li>SpringBootæä¾›çš„3ç§å†…åµŒçš„æ•°æ®æºå¯¹è±¡</li>
</ul>
<ul>
<li>HiKariCP</li>
<li>Tomcat æä¾› DataSource</li>
<li>Commons DBCP<pre class="line-numbers language-none"><code class="language-none">spring:
  datasource:
    url: jdbc:mysql://localhost:3306/smbms
      # è¿›ä¸€æ­¥é…ç½®  hikariã€ tomcat ã€dbcp2  æ•°æ®å®ç°
      hikari:
        username: root
        password: 123456
        driver-class-name: com.mysql.jdbc.Driver
        maximum-pool-size: 50  # æœ€å¤§è¿æ¥æ± æ•°é‡<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></li>
</ul>
<h5 id="2-æ•°æ®æŒä¹…åŒ–-jdbcTemplate"><a href="#2-æ•°æ®æŒä¹…åŒ–-jdbcTemplate" class="headerlink" title="2. æ•°æ®æŒä¹…åŒ–(jdbcTemplate)"></a>2. æ•°æ®æŒä¹…åŒ–(jdbcTemplate)</h5><h6 id="1-JDBCTemplate-é…ç½®"><a href="#1-JDBCTemplate-é…ç½®" class="headerlink" title="1. JDBCTemplate é…ç½®"></a>1. JDBCTemplate é…ç½®</h6><pre class="line-numbers language-none"><code class="language-none">spring:
  jdbc:
    template:
      query-timeout: -1   # æŸ¥è¯¢è¶…æ—¶æ—¶é—´
      max-rows: 500       # æœ€å¤§è¡Œæ•°
      fetch-size: -1      # æ‰¹å¤„ç†æ•°é‡<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<h5 id="3-æ•°æ®åº“-MySQL"><a href="#3-æ•°æ®åº“-MySQL" class="headerlink" title="3. æ•°æ®åº“(MySQL)"></a>3. æ•°æ®åº“(MySQL)</h5><ul>
<li>SpringBootæä¾›çš„3ç§å†…åµŒçš„æ•°æ®åº“</li>
<li>å†…å­˜çº§åˆ«æ•°æ®åº“: åŸºäºJavaå¼€å‘ï¼Œå¯ä»¥åœ¨å†…å­˜ä¸­å¯åŠ¨è¿è¡Œï¼Œæ–¹ä¾¿æµ‹è¯•</li>
</ul>
<ul>
<li>H2</li>
<li>HSQL</li>
<li>Derby</li>
</ul>
<div class="tabs" id="pom.xml"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#pom.xml-1">pom.xml</button></li><li class="tab"><button type="button" data-href="#pom.xml-2">application.yml</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="pom.xml-1"><pre class="line-numbers language-none"><code class="language-none">&lt;!--H2 æ•°æ®åº“ä¾èµ–--&gt;
    &lt;dependency&gt;
      &lt;groupId&gt;com.h2database&lt;/groupId&gt;
      &lt;artifactId&gt;h2&lt;/artifactId&gt;
    &lt;/dependency&gt;

    &lt;dependency&gt;
      &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
      &lt;artifactId&gt;spring-boot-starte-data-jpa&lt;/artifactId&gt;
    &lt;/dependency&gt;

    &lt;dependency&gt;
      &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
      &lt;artifactId&gt;spring-boot-starte-web-jpa&lt;/artifactId&gt;
    &lt;/dependency&gt;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="pom.xml-2"><pre class="line-numbers language-none"><code class="language-none">#åœ¨application.properties/æˆ–è€…application.ymlæ–‡ä»¶ä¸­æ²¡æœ‰æ·»åŠ æ•°æ®åº“é…ç½®ä¿¡æ¯.
spring:
  # h2 æ•°æ®åº“é…ç½®
  h2:
    console:
      path: /h2
      # ä»…ç”¨äºå¼€å‘é˜¶æ®µ å®‰å…¨é£é™©å·¨å¤§
      enabled: true
  # H2 æ•°æ®åº“åˆå§‹åŒ–æ—¶éœ€è¦é…ç½®æ•°æ®æº
  # æ ¼å¼åŒé¡µé¢æä¾›çš„æ•°æ®æºæ ·å¼
  datasource:
    druid:
      url: jdbc:h2:~/test
      username: root
      password: 123456
      # å¯ä»¥çœç•¥, è®¾ç½®åå¿…é¡»ä¿è¯å¯è®¿é—®
      driver-class-name: org.h2.Driver

# é…ç½®æœåŠ¡å™¨ç«¯å£
server:
  port:
    80
  servlet:
    context-path: /<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div>

<h6 id="1-è®¿é—®H2-æ•°æ®åº“æœåŠ¡é¡µé¢"><a href="#1-è®¿é—®H2-æ•°æ®åº“æœåŠ¡é¡µé¢" class="headerlink" title="1. è®¿é—®H2 æ•°æ®åº“æœåŠ¡é¡µé¢"></a>1. è®¿é—®H2 æ•°æ®åº“æœåŠ¡é¡µé¢</h6><ul>
<li>localhost://h2</li>
</ul>
<h4 id="2-NoSQL"><a href="#2-NoSQL" class="headerlink" title="2. NoSQL"></a>2. NoSQL</h4><ul>
<li>ä¸»è¦å¸¸è§çš„NoSQL è§£å†³æ–¹æ¡ˆ (å¸¸åœ¨Linux ç³»ç»Ÿä¸­éƒ¨ç½²å®‰è£…)</li>
</ul>
<h5 id="1-Redis"><a href="#1-Redis" class="headerlink" title="1. Redis"></a>1. Redis</h5><ul>
<li><a href="https://github.com/tporadowski/redis/releases">Redis</a> æ˜¯ä¸€æ¬¾ Key-Value å­˜å‚¨ç»“æ„çš„å†…å­˜çº§ NoSQL æ•°æ®åº“<ul>
<li>æ”¯æŒå¤šç§æ•°æ®å­˜å‚¨æ ¼å¼</li>
<li>æ”¯æŒæŒä¹…åŒ–</li>
<li>æ”¯æŒé›†ç¾¤</li>
</ul>
</li>
</ul>
<h6 id="1-RedisåŸºç¡€æ“ä½œ"><a href="#1-RedisåŸºç¡€æ“ä½œ" class="headerlink" title="1. RedisåŸºç¡€æ“ä½œ"></a>1. RedisåŸºç¡€æ“ä½œ</h6><ul>
<li><p>å¯åŠ¨å®‰è£…</p>
  <pre class="line-numbers language-none"><code class="language-none"># æœåŠ¡ç«¯å¯åŠ¨å‘½ä»¤   å£°æ˜å‚æ•°
redis-sercer.exe   redis.windows.conf
(å¦‚æœæœåŠ¡ç«¯æ— æ³•å¯åŠ¨ï¼Œå…ˆæ‰§è¡Œå®¢æœç«¯å¯åŠ¨å‘½ä»¤ã€‚è¿™é‡Œshutdownå°±æ˜¯ä¸ºäº†å…³é—­è¿™ä¸ªç‰ˆæœ¬çš„redisé»˜è®¤åˆ›å»ºçš„æœåŠ¡ï¼ŒæœåŠ¡å¯ä»¥åœ¨ä»»åŠ¡ç®¡ç†ä¸­æ‰¾åˆ°)

# å®¢æœç«¯å¯åŠ¨å‘½ä»¤
redis-cli.exe
shutdown    <span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
</li>
<li><p>Redis å­˜å‚¨è·å– å€¼</p>
  <pre class="line-numbers language-none"><code class="language-none"># å­˜å‚¨  key      value
  set   name     wabisabifag

# è·å–
  get   name

# æŸ¥è¯¢æ‰€æœ‰æ•°å€¼
  keys  *

# æ¸…å±
  clear

# è®¾ç½®å¤šä¸ªåµŒå¥—å€¼
hset keya a1 aa1
hset keya a2 aa2
hget keya a1         # "aa1"
hget keya a2         # "aa2"
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></li>
</ul>
<h6 id="2-Redisæ•´åˆ"><a href="#2-Redisæ•´åˆ" class="headerlink" title="2. Redisæ•´åˆ"></a>2. Redisæ•´åˆ</h6><div class="tabs" id="pom.xml"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#pom.xml-1">pom.xml</button></li><li class="tab"><button type="button" data-href="#pom.xml-2">application.yml</button></li><li class="tab"><button type="button" data-href="#pom.xml-3">Application.java</button></li><li class="tab"><button type="button" data-href="#pom.xml-4">MyRedisConfig.java</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="pom.xml-1"><pre class="line-numbers language-none"><code class="language-none">&lt;dependencies&gt;
        &lt;!--Nosqlæ•´åˆæ•°æ®åº“--&gt;
        &lt;dependency&gt;
            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
            &lt;artifactId&gt;spring-boot-starter-data-redis&lt;/artifactId&gt;
        &lt;/dependency&gt;

        &lt;dependency&gt;
            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
            &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;
        &lt;/dependency&gt;

&lt;/dependencies&gt;

    &lt;build&gt;
        &lt;plugins&gt;
            &lt;plugin&gt;
                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
                &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;
            &lt;/plugin&gt;
        &lt;/plugins&gt;
    &lt;/build&gt;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="pom.xml-2"><pre class="line-numbers language-none"><code class="language-none">spring:
  redis:
    host: localhost
    port: 6379<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="pom.xml-3"><pre class="line-numbers language-none"><code class="language-none">package top.wabisabifag;

import org.junit.jupiter.api.Test;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.boot.test.context.SpringBootTest;
import org.springframework.data.redis.core.RedisTemplate;
import org.springframework.data.redis.core.StringRedisTemplate;
import org.springframework.data.redis.core.ValueOperations;

@SpringBootTest
public class Application {

   // ä»¥å¯¹è±¡ä½œä¸ºæ“ä½œçš„åŸºæœ¬å•å…ƒ

    @Autowired
    // å®¢æœç«¯ : RedisTemplate ä»¥å¯¹è±¡ä½œä¸ºKey å’Œ Valueï¼Œå†…éƒ¨å¯¹æ•°æ®è¿›è¡Œåºåˆ—åŒ– æ“ä½œ
    private RedisTemplate redisTemplate;

    @Autowired
    private StringRedisTemplate stringRedisTemplate; // ä»¥å­—ç¬¦ä¸² æ“ä½œçš„åŸºæœ¬å•å…ƒ

    @Test
    public void setRedisTemplate(){
        ValueOperations ops = redisTemplate.opsForValue();
        ops.set("age",42);
    }
    @Test
    public void getRedisTemplate(){
        ValueOperations ops = redisTemplate.opsForValue();
        Object age = ops.get("age");
        System.out.println(age);     //  ç©ºå€¼
    }

    @Test
    public void getStringRedisTemplate(){
        ValueOperations&lt;String,String&gt; ops = stringRedisTemplate.opsForValue();
        String age = ops.get("age");
        System.out.println(age);
    }
}<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="pom.xml-4"><pre class="line-numbers language-none"><code class="language-none">import java.text.SimpleDateFormat;
import java.util.TimeZone;

@Configuration
public class MyRedisConfig {
    @Resource
    private RedisConnectionFactory factory;

    @Bean
    public RedisTemplate redisTemplate(){
        RedisTemplate&lt;String,Object&gt; redisTemplate = new RedisTemplate&lt;&gt;();
        redisTemplate.setConnectionFactory(factory);
        redisTemplate.setKeySerializer(new StringRedisSerializer());

        // String ç±»å‹åºåˆ—åŒ– json
        Jackson2JsonRedisSerializer&lt;Object&gt; serializer = new Jackson2JsonRedisSerializer&lt;&gt;(Object.class);
        redisTemplate.setValueSerializer(serializer);

        ObjectMapper om = new ObjectMapper();
        om.setVisibility(PropertyAccessor.ALL, JsonAutoDetect.Visibility.ANY);
        om.setDateFormat(new SimpleDateFormat("yyyy-MM-dd HH:mm:ss"));
                om.setTimeZone(TimeZone.getDefault());
        om.configure(MapperFeature.USE_ANNOTATIONS, false);
        om.configure(DeserializationFeature.FAIL_ON_UNKNOWN_PROPERTIES, false);
        om.configure(SerializationFeature.FAIL_ON_EMPTY_BEANS, false);
        om.activateDefaultTyping(LaissezFaireSubTypeValidator.instance
                ,ObjectMapper.DefaultTyping.NON_FINAL, JsonTypeInfo.As.PROPERTY);
        om.setSerializationInclusion(JsonInclude.Include.NON_NULL);
        serializer.setObjectMapper(om);

        return redisTemplate;
    }
}<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div>

<ul>
<li>å®¢æœç«¯ : RedisTemplate ä»¥å¯¹è±¡ä½œä¸ºKey å’Œ Valueï¼Œå†…éƒ¨å¯¹æ•°æ®è¿›è¡Œåºåˆ—åŒ– æ“ä½œ</li>
</ul>
<h6 id="3-jedis-å®¢æˆ·ç«¯å®ç°æŠ€æœ¯åˆ‡æ¢"><a href="#3-jedis-å®¢æˆ·ç«¯å®ç°æŠ€æœ¯åˆ‡æ¢" class="headerlink" title="3. jedis å®¢æˆ·ç«¯å®ç°æŠ€æœ¯åˆ‡æ¢"></a>3. jedis å®¢æˆ·ç«¯å®ç°æŠ€æœ¯åˆ‡æ¢</h6><div class="tabs" id="pom.xml"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#pom.xml-1">pom.xml</button></li><li class="tab"><button type="button" data-href="#pom.xml-2">application.yml</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="pom.xml-1"><pre class="line-numbers language-none"><code class="language-none">&lt;!--jedis--&gt;
       &lt;dependency&gt;
           &lt;groupId&gt;redis.clients&lt;/groupId&gt;
           &lt;artifactId&gt;jedis&lt;/artifactId&gt;
       &lt;/dependency&gt;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="pom.xml-2"><pre class="line-numbers language-none"><code class="language-none">spring:
  redis:
    host: localhost
    port: 6379
    client-type: jedis
    
    lettuce:
      pool:
        max-active: 16
        
    jedis:
      pool:
        max-active: 16<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div>

<ul>
<li><p>lettcus ä¸ jedis åŒºåˆ«</p>
<ul>
<li><p>jedis è¿æ¥ Redis æœåŠ¡å™¨æ˜¯ç›´è¿æ¨¡å¼ï¼Œå½“çº¿ç¨‹æ¨¡å¼ä¸‹ä½¿ç”¨ jedis ä¼šå­˜åœ¨çº¿ç¨‹å®‰å…¨é—®é¢˜ï¼Œè§£å†³æ–¹æ¡ˆé€šè¿‡é…ç½®è¿æ¥æ± ä½¿æ¯ä¸ªè¿æ¥ä¸“ç”¨ï¼Œè¿™æ ·æ•´ä½“æ€§èƒ½å°±å¤§å—å½±å“ã€‚</p>
</li>
<li><p>lettcus åŸºäº Netty æ¡†æ¶è¿›è¡Œä¸ Redis æœåŠ¡å™¨è¿æ¥ï¼Œåº•å±‚è®¾è®¡é‡‡ç”¨ StatefulRedisConnectionã€‚StatefulRedisConnection è‡ªèº«æ˜¯çº¿ç¨‹å®‰å…¨çš„ï¼Œå¯ä»¥ä¿éšœå¹¶å‘è®¿é—®å®‰å…¨é—®é¢˜ï¼Œæ‰€ä»¥ä¸€ä¸ªè¿æ¥å¯ä»¥è¢«å¤šçº¿ç¨‹å¤ç”¨ã€‚å½“ç„¶ lettcus ä¹Ÿæ”¯æŒå¤šè¿æ¥å®ä¾‹ä¸€èµ·å·¥ä½œã€‚</p>
</li>
</ul>
</li>
</ul>
<h5 id="2-Mongo"><a href="#2-Mongo" class="headerlink" title="2. Mongo"></a>2. Mongo</h5><h6 id="1-MongoDB-ç‰¹æ€§"><a href="#1-MongoDB-ç‰¹æ€§" class="headerlink" title="1. MongoDB ç‰¹æ€§"></a>1. MongoDB ç‰¹æ€§</h6><ul>
<li>MongoDB å¼€æºï¼Œé«˜æ€§èƒ½ï¼Œæ— æ¨¡å¼çš„æ–‡æ¡£å‹æ•°æ®åº“</li>
</ul>
<h6 id="2-Mysql-Redis-å¼Šç«¯"><a href="#2-Mysql-Redis-å¼Šç«¯" class="headerlink" title="2. Mysql Redis å¼Šç«¯"></a>2. Mysql Redis å¼Šç«¯</h6><ul>
<li><p>Mysql</p>
<ul>
<li>æœ‰ ç»“æ„åŒ–æ•°æ®, è¾ƒä½çš„å“åº”éœ€æ±‚</li>
</ul>
</li>
<li><p>Redis</p>
<ul>
<li>æ—  ç»“æ„åŒ–æ•°æ®, è¾ƒé«˜çš„å“åº”éœ€æ±‚</li>
</ul>
</li>
</ul>
<h6 id="3-æ•°æ®åˆ†æ"><a href="#3-æ•°æ®åˆ†æ" class="headerlink" title="3. æ•°æ®åˆ†æ"></a>3. æ•°æ®åˆ†æ</h6><ul>
<li>ç”¨æˆ·æ•°æ®: æ°¸ä¹…æ€§å­˜å‚¨ï¼Œä¿®æ”¹é¢‘åº¦æä½</li>
<li>æ¸¸æˆæ•°æ®: æ°¸ä¹…æ€§å­˜å‚¨å’Œä¸´æ—¶æ€§å­˜å‚¨ç»“åˆï¼Œä¿®æ”¹é¢‘åº¦è¾ƒé«˜</li>
<li>ç›´æ’­æ•°æ®: æ°¸ä¹…æ€§å­˜å‚¨å’Œä¸´æ—¶æ€§å­˜å‚¨ç»“åˆï¼Œä¿®æ”¹é¢‘åº¦æé«˜</li>
<li>ç‰©è”ç½‘æ•°æ®: ä¸´æ—¶æ€§å­˜å‚¨, ä¿®æ”¹é¢‘ç‡é£é€Ÿ</li>
</ul>
<h6 id="4-Mongo-è¿è¡Œ"><a href="#4-Mongo-è¿è¡Œ" class="headerlink" title="4. Mongo è¿è¡Œ"></a>4. Mongo è¿è¡Œ</h6><pre class="line-numbers language-none"><code class="language-none"># æ‰‹åŠ¨åˆ›å»º ..\data\db æ–‡ä»¶å¤¹
mongod --dbpath=..\data\db

# è¿è¡Œå®¢æœç«¯   è‡ªå®šä¹‰å‚æ•°
mongo --host=127.0.0.1 --port=27017<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p><img src="/../JavaEE/2.png" alt="MongoDBåŸºç¡€"></p>
<h6 id="5-Mongo-æ•´åˆ"><a href="#5-Mongo-æ•´åˆ" class="headerlink" title="5. Mongo æ•´åˆ"></a>5. Mongo æ•´åˆ</h6><div class="tabs" id="pom.xml"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#pom.xml-1">pom.xml</button></li><li class="tab"><button type="button" data-href="#pom.xml-2">application.yml</button></li><li class="tab"><button type="button" data-href="#pom.xml-3">Application.java</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="pom.xml-1"><pre class="line-numbers language-none"><code class="language-none">&lt;!--MongoDB æ•´åˆ--&gt;
       &lt;dependency&gt;
           &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
           &lt;artifactId&gt;spring-boot-starter-data-mongodb&lt;/artifactId&gt;
           &lt;version&gt;3.1.2&lt;/version&gt;
       &lt;/dependency&gt;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="pom.xml-2"><pre class="line-numbers language-none"><code class="language-none">spring:
  datasource:
    mongodb:
      uri: mongodb://localhost/wabisabifag<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="pom.xml-3"><pre class="line-numbers language-none"><code class="language-none">package top.wabisabifag;

import org.junit.jupiter.api.Test;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.boot.test.context.SpringBootTest;
import org.springframework.data.mongodb.core.MongoTemplate;

import java.awt.print.Book;

@SpringBootTest
public class Application {
    @Autowired
    private MongoTemplate mongoTemplate;

    @Test
    public void setMongoTemplate(){
        Book book = new Book(1,"spring","spring","spring");
        mongoTemplate.save(book);
    }    
    
    @Test 
    public void find(){
        List&lt;Book&gt; all = mongoTemplate.findAll(Book.class);
        System.out.println(all);
    }
}<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div>


<h5 id="3-ES"><a href="#3-ES" class="headerlink" title="3. ES"></a>3. ES</h5><ul>
<li><p><a target="_blank" rel="noopener external nofollow noreferrer" href="https://www.elastic.co/cn/downloads/elasticsearch">Elasticsearch</a> æ˜¯ä¸€ä¸ªåˆ†å¸ƒå¼å…¨æ–‡æœç´¢å¼•æ“</p>
</li>
<li><p>ç«¯å£å·: 9200</p>
</li>
</ul>
<h6 id="1-ç´¢å¼•æ“ä½œ"><a href="#1-ç´¢å¼•æ“ä½œ" class="headerlink" title="1. ç´¢å¼•æ“ä½œ"></a>1. ç´¢å¼•æ“ä½œ</h6><ul>
<li>å¹‚ç­‰æ€§ï¼ŒæŒ‡çš„æ˜¯ç›¸åŒå‚æ•°ä¸‹ï¼Œä¸€æ¬¡è¯·æ±‚å’Œå¤šæ¬¡è¯·æ±‚çš„ç»“æœæ˜¯ç›¸ç­‰çš„<ul>
<li>get,put,deleteè¯·æ±‚éƒ½æ˜¯å¹‚ç­‰çš„</li>
</ul>
</li>
</ul>
<ol>
<li><a href="https://github.com/medcl/elasticsearch-analysis-ik">IKåˆ†è¯å™¨ (Elasticsearch æ”¾å…¥æ’ä»¶æ–‡ä»¶å¤¹)</a></li>
</ol>
<h6 id="2-æ–‡æ¡£æ“ä½œ"><a href="#2-æ–‡æ¡£æ“ä½œ" class="headerlink" title="2. æ–‡æ¡£æ“ä½œ"></a>2. æ–‡æ¡£æ“ä½œ</h6><p>ä»¥ä¸‹å†…å®¹åœ¨ <a target="_blank" rel="noopener external nofollow noreferrer" href="https://www.postman.com/downloads/">postman</a> ä¸­æ‰§è¡Œ</p>
<ol>
<li>æ•°æ®ç”Ÿæˆ</li>
</ol>
<ul>
<li>post ç”ŸæˆæŒ‡å®šid     <a target="_blank" rel="noopener external nofollow noreferrer" href="http://localhost:9200/bools/_create">http://localhost:9200/bools/_create</a></li>
<li>post ç”Ÿæˆéšæœºid     <a target="_blank" rel="noopener external nofollow noreferrer" href="http://localhost:9200/bools/_doc">http://localhost:9200/bools/_doc</a></li>
<li>post ç”ŸæˆæŒ‡å®šid     <a target="_blank" rel="noopener external nofollow noreferrer" href="http://localhost:9200/bools/_doc/1">http://localhost:9200/bools/_doc/1</a><ul>
<li>body   {â€œidâ€:1,â€nameâ€:â€springâ€,â€typeâ€:â€springâ€,â€descriptionâ€:â€springâ€}</li>
</ul>
</li>
</ul>
<ol start="2">
<li>æ•°æ® id æŸ¥è¯¢</li>
</ol>
<ul>
<li>get æŸ¥è¯¢æŒ‡å®šid      <a target="_blank" rel="noopener external nofollow noreferrer" href="http://localhost:9200/bools/_doc/1">http://localhost:9200/bools/_doc/1</a></li>
<li>get æŸ¥è¯¢æ‰€æœ‰id      <a target="_blank" rel="noopener external nofollow noreferrer" href="http://localhost:9200/bools/_search">http://localhost:9200/bools/_search</a></li>
</ul>
<ol start="3">
<li>æ•°æ® æ¡ä»¶ æŸ¥è¯¢</li>
</ol>
<ul>
<li>get æŸ¥è¯¢æŒ‡å®šæ¡ä»¶     <a target="_blank" rel="noopener external nofollow noreferrer" href="http://localhost:9200/bools/_search?q=name:spring">http://localhost:9200/bools/_search?q=name:spring</a></li>
</ul>
<ol start="4">
<li>æ•°æ® id åˆ é™¤</li>
</ol>
<ul>
<li>delete åˆ é™¤æŒ‡å®šid    <a target="_blank" rel="noopener external nofollow noreferrer" href="http://localhost:9200/bools/_doc/1">http://localhost:9200/bools/_doc/1</a></li>
</ul>
<ol start="5">
<li>æ•°æ® id ä¿®æ”¹</li>
</ol>
<ul>
<li>put ä¿®æ”¹æŒ‡å®šid å…¨éƒ¨æ•°æ®       <a target="_blank" rel="noopener external nofollow noreferrer" href="http://localhost:9200/bools/_doc/1">http://localhost:9200/bools/_doc/1</a></li>
<li>post ä¿®æ”¹æŒ‡å®šid æŒ‡å®šæ•°æ®      <a target="_blank" rel="noopener external nofollow noreferrer" href="http://localhost:9200/bools/_update/1">http://localhost:9200/bools/_update/1</a><ul>
<li>body   {â€œdocâ€:{â€œnameâ€:â€springbootâ€} }</li>
</ul>
</li>
</ul>
<h6 id="3-Elasticsearch-æ•´åˆ"><a href="#3-Elasticsearch-æ•´åˆ" class="headerlink" title="3. Elasticsearch æ•´åˆ"></a>3. Elasticsearch æ•´åˆ</h6><ol>
<li>Low level</li>
</ol>
<div class="tabs" id="pom.xml"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#pom.xml-1">pom.xml</button></li><li class="tab"><button type="button" data-href="#pom.xml-2">application.yml</button></li><li class="tab"><button type="button" data-href="#pom.xml-3">Application.java</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="pom.xml-1"><pre class="line-numbers language-none"><code class="language-none">&lt;!--elasticsearch æ•´åˆ--&gt;
        &lt;dependency&gt;
            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
            &lt;artifactId&gt;spring-boot-starter-data-elasticsearch&lt;/artifactId&gt;
        &lt;/dependency&gt;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="pom.xml-2"><pre class="line-numbers language-none"><code class="language-none">spring:
  datasource:
    druid:
      url: jdbc:mysql://localhost:3306/smbms
      username: root
      password: 123456
      driver-class-name: com.mysql.jdbc.Driver
  elasticsearch:
    rest:
      uris: http://localhost:9200

mybatis-plus:
  configuration:
    # æ—¥å¿—
    log-impl: org.apache.ibatis.logging.stdout.StdOutImpl
  global-config:
    db-config:
      table-prefix: smbms_
      id-type: auto<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="pom.xml-3"><pre class="line-numbers language-none"><code class="language-none">package top.wabisabifag;

import org.junit.jupiter.api.Test;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.boot.test.context.SpringBootTest;
import org.springframework.data.elasticsearch.core.ElasticsearchRestTemplate;

import java.awt.print.Book;
import java.util.List;

@SpringBootTest
public class Application {

    @Autowired
    private ElasticsearchRestTemplate template;

    @Test
    public void fn(){
        template.get(new Book(1,"a","a","a"));
    }
}<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div>


<ol start="2">
<li>Hight level (æ–¹æ³•è¿‡æ—¶ï¼Œå·²ç»æœ‰æ–°çš„æ•´åˆå†…å®¹ ===ã€‹ã€‹ application.yml é…ç½®å‚æ•°)</li>
</ol>
<div class="tabs" id="pom.xml"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#pom.xml-1">pom.xml</button></li><li class="tab"><button type="button" data-href="#pom.xml-2">Application.java</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="pom.xml-1"><pre class="line-numbers language-none"><code class="language-none">&lt;!--elasticsearch æ•´åˆ--&gt;
    &lt;dependency&gt;
          &lt;groupId&gt;org.elasticsearch.client&lt;/groupId&gt;
          &lt;artifactId&gt;elasticsearch-rest-high-level-client&lt;/artifactId&gt;
    &lt;/dependency&gt;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="pom.xml-2"><pre class="line-numbers language-none"><code class="language-none">package top.wabisabifag;

import org.apache.http.HttpHost;
import org.elasticsearch.client.RequestOptions;
import org.elasticsearch.client.RestClient;
import org.elasticsearch.client.RestClientBuilder;
import org.elasticsearch.client.RestHighLevelClient;
import org.elasticsearch.client.indices.CreateIndexRequest;
import org.junit.jupiter.api.AfterEach;
import org.junit.jupiter.api.BeforeEach;
import org.junit.jupiter.api.Test;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.boot.test.context.SpringBootTest;
import org.springframework.data.elasticsearch.core.ElasticsearchRestTemplate;

import java.awt.print.Book;
import java.io.IOException;
import java.util.List;

@SpringBootTest
public class Application {

    @Autowired
    private RestHighLevelClient client;

    @BeforeEach
    void setUp(){
        this.client = new RestHighLevelClient(RestClient.builder(HttpHost.create("http://localhost:9200")));
    }
    
    @AfterEach
    void tearDown() throws IOException{
        this.client.close();
    }

    @Test
    public void testCreateClient(){

        &lt;!-- // åˆ›å»ºå®¢æœç«¯
        HttpHost host = HttpHost.create("http://localhost:9200");
        RestClientBuilder builder = RestClient.builder(host);
        client = new RestHighLevelClient(builder);

        // å‘é€è¯·æ±‚ åå«booksçš„ç´¢å¼•
        CreateIndexRequest request = new CreateIndexRequest("books");
        client.indices().create(request, RequestOptions.DEFAULT);

        client.close(); --&gt;
        
        CreateIndexRequest request = new CreateIndexRequest("books");
        client.indices().create(request, RequestOptions.DEFAULT);
        
    }
}
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div>


<h6 id="4-åˆ†è¯å™¨-å’Œ-åˆ›å»ºç´¢å¼•å±æ€§"><a href="#4-åˆ†è¯å™¨-å’Œ-åˆ›å»ºç´¢å¼•å±æ€§" class="headerlink" title="4. åˆ†è¯å™¨ å’Œ åˆ›å»ºç´¢å¼•å±æ€§"></a>4. åˆ†è¯å™¨ å’Œ åˆ›å»ºç´¢å¼•å±æ€§</h6><div class="tabs" id="pom.xml"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#pom.xml-1">pom.xml</button></li><li class="tab"><button type="button" data-href="#pom.xml-2">Application.java</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="pom.xml-1"><pre class="line-numbers language-none"><code class="language-none">&lt;!--String è½¬æ¢ä¸º json--&gt;
       &lt;dependency&gt;
           &lt;groupId&gt;com.alibaba&lt;/groupId&gt;
           &lt;artifactId&gt;fastjson&lt;/artifactId&gt;
           &lt;version&gt;1.2.78&lt;/version&gt;
       &lt;/dependency&gt;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="pom.xml-2"><pre class="line-numbers language-none"><code class="language-none">@SpringBootTest
public class Application {

    /* åˆ›å»ºç´¢å¼•*/
    @Test
    public void testCreateIndex() throws IOException{
        CreateIndexRequest request = new CreateIndexRequest("books");
      
        client.indices().create(request,RequestOptions.DEFAULT);
    }
    /* åˆ›å»ºç´¢å¼• By IK*/
    @Test
    public void testCreateIndexByIK() throws IOException{
        CreateIndexRequest request = new CreateIndexRequest("books");
        String json = "";
        // è®¾ç½®è¯·æ±‚ä¸­çš„å‚æ•°
        request.source(json, XContentType.JSON);
        client.indices().create(request,RequestOptions.DEFAULT);
    }

    /* æ·»åŠ æ–‡æ¡£ */
    @Test
    public void testCreateDoc() throws IOException{
        /* 1.æŸ¥è¯¢å•ä¸ªid */
        Book book = bookDao.selectByID(1);
        IndexRequest request = new IndexRequest("books").id(book.getId().toString());
        /* fastjson ä¾èµ–: å¯¹è±¡è½¬åŒ–ä¸º json*/
        String json = JSON.toJSONString(book);
        request.source(json,XContentType.JSON);
        client.index(request,RequestOptions.DEFAULT);

        /* 2. æŸ¥è¯¢æ‰€æœ‰id*/
        List&lt;Book&gt; bookList = bookDao.selectList(null);
        /* æ‰¹å¤„ç†è¯·æ±‚ */
        BulkRequest request = new BulkRequest();

        for (Book book : bookList) {
            IndexRequest request = new IndexRequest("books").id(book.getId().toString());
            String json = JSON.toJSONString(book);
            request.source(json,XContentType.JSON);
            request.add(request);
        }

        client.bulk(request,RequestOptions.DEFAULT);
    }
}<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div>


<h3 id="8-æ•´åˆç¬¬ä¸‰æ–¹æŠ€æœ¯"><a href="#8-æ•´åˆç¬¬ä¸‰æ–¹æŠ€æœ¯" class="headerlink" title="8. æ•´åˆç¬¬ä¸‰æ–¹æŠ€æœ¯"></a>8. æ•´åˆç¬¬ä¸‰æ–¹æŠ€æœ¯</h3><h4 id="1-ç¼“å­˜-éƒ¨åˆ†è¿‡æ—¶ï¼Œä»¥æœ€æ–°ä¸ºä¸»ï¼Œè‡ªè¡Œç†è§£"><a href="#1-ç¼“å­˜-éƒ¨åˆ†è¿‡æ—¶ï¼Œä»¥æœ€æ–°ä¸ºä¸»ï¼Œè‡ªè¡Œç†è§£" class="headerlink" title="1. ç¼“å­˜ (éƒ¨åˆ†è¿‡æ—¶ï¼Œä»¥æœ€æ–°ä¸ºä¸»ï¼Œè‡ªè¡Œç†è§£)"></a>1. ç¼“å­˜ (éƒ¨åˆ†è¿‡æ—¶ï¼Œä»¥æœ€æ–°ä¸ºä¸»ï¼Œè‡ªè¡Œç†è§£)</h4><ul>
<li>ä¸€ç§ä»‹è´¨äºæ•°æ®æ°¸ä¹…å­˜å‚¨ä»‹è´¨å¯æ•°æ®åº”ç”¨ä¹‹é—´çš„æ•°æ®ä¸´æ—¶å­˜å‚¨ä»‹è´¨</li>
<li>ç¼“å­˜å¯å‡å°‘ä½é€Ÿæ•°æ®é€Ÿè¿‡ç¨‹çš„æ¬¡æ•°ï¼Œæé«˜ç³»ç»Ÿæ€§èƒ½ã€‚å¦‚ï¼šç£ç›˜IOï¼Œ</li>
<li>æé«˜æ°¸ä¹…æ€§å­˜å‚¨ä»‹è´¨çš„æ•°æ®è¯»å–æ•ˆç‡ï¼Œæä¾›ä¸´æ—¶æ•°æ®å­˜å‚¨ç©ºé—´</li>
<li>SpringBoot æä¾›å…¶ä»–ç¼“å­˜æŠ€æœ¯æ•´åˆï¼Œç»Ÿä¸€æ¥å£ï¼Œæ–¹ä¾¿ç¼“å­˜æŠ€æœ¯å¼€å‘ç®¡ç†<ul>
<li>Generic</li>
<li>JCache</li>
</ul>
<ul>
<li>Ehcache</li>
</ul>
<ul>
<li>Hazelcast</li>
<li>infinispan</li>
<li>Couchbase</li>
</ul>
<ul>
<li>Redis</li>
</ul>
<ul>
<li>Caffenine</li>
<li>Simple  (å†…å­˜çº§ é»˜è®¤)</li>
</ul>
<ul>
<li>memcached</li>
</ul>
<ul>
<li>jetcache  (é˜¿é‡Œ)</li>
<li>j2cache</li>
</ul>
</li>
</ul>
<h5 id="1-æ¨¡æ‹Ÿç¼“å­˜"><a href="#1-æ¨¡æ‹Ÿç¼“å­˜" class="headerlink" title="1. æ¨¡æ‹Ÿç¼“å­˜"></a>1. æ¨¡æ‹Ÿç¼“å­˜</h5><pre class="line-numbers language-none"><code class="language-none">package top.wabisabifag.service.impl;

import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.stereotype.Service;
import top.wabisabifag.dao.BookDao;
import top.wabisabifag.domain.Book;

import java.util.HashMap;

@Service
public class BookServiceImpl {
    @Autowired
    private BookDao bookDao;
    /* å¯¹åº”ç¼“å­˜ */
    private HashMap&lt;Integer,Book&gt; cache = new HashMap&lt;Integer, Book&gt;();
    
    public Book getById(Integer id){
        /* ç¼“å­˜ä¸­æ²¡æœ‰æœ¬æ¬¡æŸ¥è¯¢æ•°æ®ï¼Œè®¿é—®æ•°æ®åº“*/
        Book book = cache.get(id);
        if(book == null){
            Book queryBook = bookDao.selectById(id);
            cache.put(id,queryBook);
            return queryBook;
        }
        return cache.get(id);
    }


    public boolean save(Book book){
        return bookDao.insert(book) &gt; 0;
    }
}<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<h5 id="2-æ¨¡æ‹ŸéªŒè¯"><a href="#2-æ¨¡æ‹ŸéªŒè¯" class="headerlink" title="2. æ¨¡æ‹ŸéªŒè¯"></a>2. æ¨¡æ‹ŸéªŒè¯</h5><div class="tabs" id="msgserviceimpl.java"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#msgserviceimpl.java-1">MsgServiceImpl.java</button></li><li class="tab"><button type="button" data-href="#msgserviceimpl.java-2">MsgControll.java</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="msgserviceimpl.java-1"><pre class="line-numbers language-none"><code class="language-none">package top.wabisabifag.service.impl;

import top.wabisabifag.service.MsgService;

import java.util.HashMap;

public class MsgServiceImpl implements MsgService {
    private HashMap&lt;String,String&gt; cache = new HashMap&lt;String,String&gt;();

    @Override
    public String get(String tele) {
        /* è·å–å6ä½æ•°æ®*/
        String code = tele.substring(tele.length() - 6);
        cache.put(tele,code);
        return code;
    }

    @Override
    public boolean check(String tele, String code) {
        String queryCode = cache.get(tele);
        return code.equals(queryCode);
    }
}<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="msgserviceimpl.java-2"><pre class="line-numbers language-none"><code class="language-none">package top.wabisabifag.config;

import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.web.bind.annotation.*;
import top.wabisabifag.service.MsgService;

@RestController
@RequestMapping("/msg")
public class MsgControll {
    @Autowired
    private MsgService msgService;

    @GetMapping("{tele}")
    public String get(@PathVariable String tele){
        return  msgService.get(tele);
    }

    @GetMapping
    public boolean check(String tele,String code){
        return msgService.check(tele, code);
    }
}<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div>


<h5 id="3-SpringBoot-ç¼“å­˜"><a href="#3-SpringBoot-ç¼“å­˜" class="headerlink" title="3. SpringBoot ç¼“å­˜"></a>3. SpringBoot ç¼“å­˜</h5><div class="tabs" id="pom.xml"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#pom.xml-1">pom.xml</button></li><li class="tab"><button type="button" data-href="#pom.xml-2">application.java</button></li><li class="tab"><button type="button" data-href="#pom.xml-3">BookServiceImpl.java</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="pom.xml-1"><pre class="line-numbers language-none"><code class="language-none"> &lt;!--SpringBoot ç¼“å­˜--&gt;
    &lt;dependency&gt;
      &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
      &lt;artifactId&gt;spring-boot-starter-cache&lt;/artifactId&gt;
      &lt;version&gt;1.2.78&lt;/version&gt;
    &lt;/dependency&gt;
&lt;!--Nosqlæ•´åˆæ•°æ®åº“--&gt;
    &lt;dependency&gt;
      &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
      &lt;artifactId&gt;spring-boot-starter-data-redis&lt;/artifactId&gt;
    &lt;/dependency&gt;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="pom.xml-2"><pre class="line-numbers language-none"><code class="language-none">package top.wabisabifag;

import org.mybatis.spring.annotation.MapperScan;
import org.springframework.boot.SpringApplication;
import org.springframework.boot.autoconfigure.SpringBootApplication;
import org.springframework.cache.annotation.EnableCaching;
import org.springframework.context.annotation.ComponentScan;

@SpringBootApplication
@MapperScan("top.wabisabifag.dao") /*ä½¿ç”¨@MapperScanå¯ä»¥æŒ‡å®šè¦æ‰«æçš„Mapperç±»çš„åŒ…çš„è·¯å¾„*/
@ComponentScan(basePackages={"top.wabisabifag"})
@EnableCaching       /* å¼€å¯ç¼“å­˜*/
public class application {
    public static void main(String[] args) {
        // çº¿ç¨‹å®‰å…¨é—®é¢˜
        SpringApplication.run(application.class,args);
        // ä¸æ¥å—å¤–éƒ¨ä¸´æ—¶å‚æ•°
        SpringApplication.run(application.class);
    }
}<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="pom.xml-3"><pre class="line-numbers language-none"><code class="language-none">package top.wabisabifag.service.impl;

import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.cache.annotation.Cacheable;
import org.springframework.stereotype.Service;
import top.wabisabifag.dao.BookDao;
import top.wabisabifag.domain.Book;

import java.util.HashMap;

@Service
public class BookServiceImpl {
  
    @Autowired
    private BookDao bookDao;

    @Override
    @Cacheable(value = "cacheSpace",key = "#id")
    public Book getById(Integer id){
        return bookDao.selectById(id);
    }
}<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div>



<h5 id="4-æ¨¡æ‹ŸçŸ­ä¿¡éªŒè¯-Simple"><a href="#4-æ¨¡æ‹ŸçŸ­ä¿¡éªŒè¯-Simple" class="headerlink" title="4. æ¨¡æ‹ŸçŸ­ä¿¡éªŒè¯(Simple)"></a>4. æ¨¡æ‹ŸçŸ­ä¿¡éªŒè¯(Simple)</h5><div class="tabs" id="smscode.java"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#smscode.java-1">SMSCode.java</button></li><li class="tab"><button type="button" data-href="#smscode.java-2">SMSCodeService.java</button></li><li class="tab"><button type="button" data-href="#smscode.java-3">SMSCodeServiceImpl.java</button></li><li class="tab"><button type="button" data-href="#smscode.java-4">SMSCodeController.java</button></li><li class="tab"><button type="button" data-href="#smscode.java-5">CodeUtils.java</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="smscode.java-1"><pre class="line-numbers language-none"><code class="language-none">package top.wabisabifag.domain;

import lombok.Data;

@Data
public class SMSCode {
    private String tele;
    private String Code;
}<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="smscode.java-2"><pre class="line-numbers language-none"><code class="language-none">package top.wabisabifag.service;

import top.wabisabifag.domain.SMSCode;

public interface SMSCodeService {
    public String sendCodeToSMS(String tele);
    public boolean checkCode(SMSCode smsCode);
}<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="smscode.java-3"><pre class="line-numbers language-none"><code class="language-none">package top.wabisabifag.service.impl;

import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.cache.annotation.CachePut;
import org.springframework.cache.annotation.Cacheable;
import org.springframework.stereotype.Service;
import top.wabisabifag.domain.SMSCode;
import top.wabisabifag.service.SMSCodeService;
import top.wabisabifag.utils.CodeUtils;

@Service
public class SMSCodeServiceImpl implements SMSCodeService {

    @Autowired
    private CodeUtils codeUtils;

    @Override
    /*@Cacheable(value = "smsCode",key = "#tele") // å¯ä»¥å­˜æ”¾å’Œè¯»å–ï¼Œä¸é€‚ç”¨äºéªŒè¯ç é‡æ–°è·å–*/
    @CachePut(value = "smsCode",key = "#tele")
    public String sendCodeToSMS(String tele) {
        String code = codeUtils.generator(tele);
        return code;
    }

    @Override
    public boolean checkCode(SMSCode smsCode) {
        String code = smsCode.getCode();
        String cacheCode = codeUtils.get(smsCode.getTele());
        return code.equals(cacheCode);
    }

}<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="smscode.java-4"><pre class="line-numbers language-none"><code class="language-none">package top.wabisabifag.config;

import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.web.bind.annotation.GetMapping;
import org.springframework.web.bind.annotation.PostMapping;
import org.springframework.web.bind.annotation.RequestMapping;
import org.springframework.web.bind.annotation.RestController;
import top.wabisabifag.domain.SMSCode;
import top.wabisabifag.service.SMSCodeService;

@RestController
@RequestMapping("/sms")
public class SMSCodeController {

    @Autowired
    private SMSCodeService service;

    @GetMapping
    public String getCode(String tele){
        String code = service.sendCodeToSMS(tele);
        return code;
    }

    @PostMapping
    public boolean checkCode(SMSCode smsCode){
        return service.checkCode(smsCode);
    }
}<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="smscode.java-5"><pre class="line-numbers language-none"><code class="language-none">package top.wabisabifag.utils;

import org.springframework.cache.annotation.Cacheable;
import org.springframework.stereotype.Component;

@Component  /* è®¾ç½®ä¸ºbeanï¼Œå¯¹æ–¹æ³¨è§£è°ƒç”¨*/
public class CodeUtils {

    private String[] patch={"00000","0000","000","00","0",""};
    public String generator(String tele){
        /* åŠ å¯†ç  */
        int encryption = 20230929;
        int hash = tele.hashCode();
        long nowTime = System.currentTimeMillis();

        long result = hash ^ encryption;
        result = result ^ nowTime;

        /*
         *  é—®é¢˜
         *  1. è´Ÿæ•°é—®é¢˜
         *  2. å‰ç½®ä½ä¸º 0 ã€‚å¦‚: 001233ï¼Œè¾“å‡º: 1233é—®é¢˜
         */
        long code = result % 1000000;

        /* é˜²æ­¢è´Ÿæ•°*/
        code = code&lt;0 ? -code:code;

        /* è¡¥é›¶ */
        String codeString = code + "";
        int len = codeString.length();

        return patch[len-1]+codeString;
    }
    /* è¯¥æ–¹æ³•ä¸æ”¾ç½®äº ServiceImplï¼Œå°±ç®—æœ‰æ³¨è§£ä¹Ÿè¢«è®¤ä¸ºæ™®é€šæ–¹æ³•
    *   beanæ–¹æ³•ä¸èƒ½è‡ªæˆ‘è°ƒç”¨
    */
    @Cacheable(value = "smsCode",key = "#tele")
    public String get(String tele){
        return null;
    }

   /* *//* åŠŸèƒ½éªŒè¯*//*
    public static void main(String[] args) {
        System.out.println(new CodeUtils().generator("18866668888") );;
    }*/
}<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div>



<h5 id="5-Ehcache-Redis-memcached-ç¼“å­˜ç»Ÿä¸€æ¥å£é…ç½®"><a href="#5-Ehcache-Redis-memcached-ç¼“å­˜ç»Ÿä¸€æ¥å£é…ç½®" class="headerlink" title="5. Ehcache Redis memcached ç¼“å­˜ç»Ÿä¸€æ¥å£é…ç½®"></a>5. Ehcache Redis memcached ç¼“å­˜ç»Ÿä¸€æ¥å£é…ç½®</h5><h6 id="1-Ehcache-Redis"><a href="#1-Ehcache-Redis" class="headerlink" title="1. Ehcache Redis"></a>1. Ehcache Redis</h6><div class="tabs" id="pom.xml"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#pom.xml-1">pom.xml</button></li><li class="tab"><button type="button" data-href="#pom.xml-2">application.xml</button></li><li class="tab"><button type="button" data-href="#pom.xml-3">ehcache.xml</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="pom.xml-1"><pre class="line-numbers language-none"><code class="language-none">&lt;!--Ehcache ç¼“å­˜--&gt;
   &lt;dependency&gt;
     &lt;groupId&gt;net.sf.ehcache&lt;/groupId&gt;
     &lt;artifactId&gt;ehcache&lt;/artifactId&gt;
   &lt;/dependency&gt;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="pom.xml-2"><pre class="line-numbers language-none"><code class="language-none">// ç»Ÿä¸€æ¥å£
spring:
  # é…ç½®ç¼“å­˜ç±»å‹
  cache:

    # ehcache (æ–‡æ¡£é…ç½®)
    #type: ehcache
    #ehcache: ehcache.xml

    # redis  (ymlé…ç½®)
    type: redis
    redis:
      host: localhost
      port: 6379
      use-key-prefix: true  # æ˜¯å¦ä½¿ç”¨å‰ç¼€
      cache-null-values: false  # æ˜¯å¦ç¼“å­˜ç©ºå€¼
      key-prefix: sms_    # æŒ‡å®šå‰ç¼€
      time-to-live: # æ´»åŠ¨æ—¶é—´

  datasource:
    druid:
      url: jdbc:mysql://localhost:3306/smbms
      username: root
      password: 123456
      driver-class-name: com.mysql.jdbc.Driver
  elasticsearch:
    rest:
      uris: http://localhost:9200<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="pom.xml-3"><pre class="line-numbers language-none"><code class="language-none">&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;ehcache xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
         xsi:noNamespaceSchemaLocation="http://ehcache.org/ehcache.xsd"
        updateCheck="false" name="defaultCache"&gt;

    &lt;!--
       diskStoreï¼šä¸ºç¼“å­˜è·¯å¾„ï¼Œehcacheåˆ†ä¸ºå†…å­˜å’Œç£ç›˜ä¸¤çº§ï¼Œæ­¤å±æ€§å®šä¹‰ç£ç›˜çš„ç¼“å­˜ä½ç½®,å¯ä»¥è‡ªå®šä¹‰ç›®å½•ï¼Œç¡®ä¿ç”¨æˆ·æœ‰æƒé™å³å¯ã€‚å‚æ•°è§£é‡Šå¦‚ä¸‹ï¼š
       user.home â€“ ç”¨æˆ·ä¸»ç›®å½•
       user.dir  â€“ ç”¨æˆ·å½“å‰å·¥ä½œç›®å½•
       java.io.tmpdir â€“ é»˜è®¤ä¸´æ—¶æ–‡ä»¶è·¯å¾„
     --&gt;
    &lt;!--    &lt;diskStore path="java.io.tmpdir"/&gt; --&gt;
    &lt;diskStore path="C:/Users/admin/ehcache/"/&gt;

    &lt;!-- maxElementsInMemoryï¼šå†…å­˜ä¸­æœ€å¤§ç¼“å­˜å¯¹è±¡æ•°ï¼Œæ ¹æ®æœåŠ¡å™¨èµ„æºé…ç½® --&gt;
    &lt;!-- eternalï¼š é»˜è®¤ä¸ºfalse,è®¾ç½®trueè¡¨ç¤ºå¯¹è±¡æ°¸ä¸è¿‡æœŸï¼Œæ­¤æ—¶ä¼šå¿½ç•¥timeToIdleSecondså’ŒtimeToLiveSecondså±æ€§ï¼Œ --&gt;
    &lt;!-- maxElementsOnDiskï¼šç¡¬ç›˜ä¸­æœ€å¤§ç¼“å­˜å¯¹è±¡æ•°ï¼Œè‹¥æ˜¯0è¡¨ç¤ºæ— ç©·å¤§ --&gt;
    &lt;!-- overflowToDiskï¼štrueè¡¨ç¤ºå½“å†…å­˜ç¼“å­˜çš„å¯¹è±¡æ•°ç›®è¾¾åˆ°äº†maxElementsInMemoryç•Œé™åï¼Œä¼šæŠŠæº¢å‡ºçš„å¯¹è±¡å†™åˆ°ç¡¬ç›˜ç¼“å­˜ä¸­ã€‚
    æ³¨æ„ï¼šå¦‚æœç¼“å­˜çš„å¯¹è±¡è¦å†™å…¥åˆ°ç¡¬ç›˜ä¸­çš„è¯ï¼Œåˆ™è¯¥å¯¹è±¡å¿…é¡»å®ç°äº†Serializableæ¥å£æ‰è¡Œã€‚--&gt;
    &lt;!-- diskSpoolBufferSizeMBï¼šç£ç›˜ç¼“å­˜åŒºå¤§å°ï¼Œé»˜è®¤ä¸º30MBã€‚æ¯ä¸ªCacheéƒ½åº”è¯¥æœ‰è‡ªå·±çš„ä¸€ä¸ªç¼“å­˜åŒºã€‚--&gt;
    &lt;!-- diskPersistentï¼šæ˜¯å¦ç¼“å­˜è™šæ‹Ÿæœºé‡å¯æœŸæ•°æ®  --&gt;
    &lt;!-- diskExpiryThreadIntervalSecondsï¼šç£ç›˜å¤±æ•ˆçº¿ç¨‹è¿è¡Œæ—¶é—´é—´éš”ï¼Œé»˜è®¤ä¸º120ç§’ --&gt;

    &lt;!-- timeToIdleSecondsï¼š è®¾å®šå…è®¸å¯¹è±¡å¤„äºç©ºé—²çŠ¶æ€çš„æœ€é•¿æ—¶é—´ï¼Œå•ä½ï¼ˆç§’ï¼‰ã€‚è‡ªå¯¹è±¡æœ€è¿‘ä¸€æ¬¡è¢«è®¿é—®åï¼Œ
    ç©ºé—²æ—¶é—´è¶…è¿‡äº†timeToIdleSecondså±æ€§å€¼ï¼Œè¿™ä¸ªå¯¹è±¡å°±ä¼šè¿‡æœŸï¼Œå¦‚æœè¯¥å±æ€§å€¼ä¸º0ï¼Œåˆ™å¯¹è±¡æ— é™æœŸåœ°å¤„äºç©ºé—²çŠ¶æ€
    EHCacheå°†æŠŠå®ƒä»ç¼“å­˜ä¸­æ¸…ç©ºã€‚åªæœ‰å½“eternalå±æ€§ä¸ºfalseï¼Œè¯¥å±æ€§æ‰æœ‰æ•ˆã€‚
    --&gt;

    &lt;!-- timeToLiveSecondsï¼šè®¾å®šå…è®¸å¯¹è±¡å­˜åœ¨äºç¼“å­˜ä¸­çš„æœ€é•¿æ—¶é—´ï¼Œå•ä½ï¼ˆç§’ï¼‰ã€‚è‡ªå¯¹è±¡è¢«å­˜æ”¾åˆ°ç¼“å­˜ä¸­åï¼Œ
    åœ¨ç¼“å­˜ä¸­çš„æ—¶é—´è¶…è¿‡äº†timeToLiveSecondså±æ€§å€¼ï¼Œè¿™ä¸ªå¯¹è±¡å°±ä¼šè¿‡æœŸï¼Œå¦‚æœè¯¥å±æ€§å€¼ä¸º0ï¼Œåˆ™å¯¹è±¡æ— é™æœŸåœ°å­˜åœ¨äºç¼“å­˜ä¸­ã€‚
    EHCacheå°†æŠŠå®ƒä»ç¼“å­˜ä¸­æ¸…é™¤ã€‚åªæœ‰å½“eternalå±æ€§ä¸ºfalseï¼Œè¯¥å±æ€§æ‰æœ‰æ•ˆã€‚timeToLiveSecondså¿…é¡»å¤§äºtimeToIdleSecondså±æ€§ï¼Œæ‰æœ‰æ„ä¹‰ --&gt;

    &lt;!-- memoryStoreEvictionPolicyï¼šå½“è¾¾åˆ°maxElementsInMemoryé™åˆ¶æ—¶ï¼ŒEhcacheå°†ä¼šæ ¹æ®æŒ‡å®šçš„ç­–ç•¥å»æ¸…ç†å†…å­˜ã€‚
    å¯é€‰ç­–ç•¥æœ‰ï¼šLRUï¼ˆæœ€è¿‘æœ€å°‘ä½¿ç”¨ï¼Œé»˜è®¤ç­–ç•¥ï¼‰ã€FIFOï¼ˆå…ˆè¿›å…ˆå‡ºï¼‰ã€LFUï¼ˆæœ€å°‘è®¿é—®æ¬¡æ•°ï¼‰ã€‚--&gt;

    &lt;!-- é»˜è®¤ç¼“å­˜ --&gt;
    &lt;defaultCache
            maxElementsInMemory="10000"
            eternal="false"
            overflowToDisk="false"
            diskSpoolBufferSizeMB="50"
            timeToIdleSeconds="300"
            timeToLiveSeconds="600"
            maxElementsOnDisk="10000000"
            diskExpiryThreadIntervalSeconds="120"
            memoryStoreEvictionPolicy="LRU"&gt;

        &lt;persistence strategy="localTempSwap"/&gt;

    &lt;/defaultCache&gt;

    &lt;cache name="employee_all"
           maxElementsInMemory="100"
           eternal="false"
           overflowToDisk="true"
           timeToIdleSeconds="300"
           timeToLiveSeconds="600"
           memoryStoreEvictionPolicy="LRU"/&gt;

    &lt;cache name="employee_info"
           maxElementsInMemory="1000"
           eternal="false"
           overflowToDisk="true"
           timeToIdleSeconds="300"
           timeToLiveSeconds="600"
           memoryStoreEvictionPolicy="LRU"/&gt;

    &lt;!--è®¾ç½®ç¼“å­˜ç©ºé—´--&gt;
     &lt;cache name="smsCode"
           maxElementsInMemory="1000"
           eternal="false"
           overflowToDisk="true"
           timeToIdleSeconds="60"
           timeToLiveSeconds="60"
           memoryStoreEvictionPolicy="LRU"/&gt;

&lt;/ehcache&gt;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div>



<h6 id="2-memcached-ç¼“å­˜æ•´åˆ"><a href="#2-memcached-ç¼“å­˜æ•´åˆ" class="headerlink" title="2. memcached ç¼“å­˜æ•´åˆ"></a>2. memcached ç¼“å­˜æ•´åˆ</h6><ol>
<li>memcached ç‰¹æ€§</li>
</ol>
<ul>
<li>memcached Client for Java: æœ€æ—©æœŸå®¢æœç«¯ï¼Œç¨³å®šï¼Œç”¨æˆ·ç¾¤å¹¿</li>
<li>SpyMemcached: æ•ˆç‡é«˜</li>
<li>Xmemcached: å¹¶å‘å¤„ç†å¥½</li>
<li>æš‚æœªè¢«SpringBoot æ•´åˆï¼Œç¡¬ç¼–ç æ–¹å¼å®ç°å®¢æœç«¯åˆå§‹åŒ–ç®¡ç†</li>
</ul>
<ol start="2">
<li>memcached å®‰è£…</li>
</ol>
<ul>
<li><a target="_blank" rel="noopener external nofollow noreferrer" href="https://www.memcached.org/downloads">memcached</a></li>
<li>ç®¡ç†å‘˜æƒé™ æ“ä½œå‘½ä»¤è¡Œ:<ul>
<li>å®‰è£…: memcached.exe -d install</li>
<li>å¯åŠ¨: emcached.exe -d start</li>
<li>å…³é—­: emcached.exe -d stop</li>
</ul>
</li>
</ul>
<div class="tabs" id="pom.xml"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#pom.xml-1">pom.xml</button></li><li class="tab"><button type="button" data-href="#pom.xml-2">XMemcachedConfig.xml</button></li><li class="tab"><button type="button" data-href="#pom.xml-3">SMSCodeServiceImpl.xml</button></li><li class="tab"><button type="button" data-href="#pom.xml-4">application.yml</button></li><li class="tab"><button type="button" data-href="#pom.xml-5">pom.xml 5</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="pom.xml-1"><pre class="line-numbers language-none"><code class="language-none">&lt;!--memcached ç¼“å­˜--&gt;
    &lt;dependency&gt;
      &lt;groupId&gt;com.googlecode&lt;/groupId&gt;
      &lt;artifactId&gt;xmemcached&lt;/artifactId&gt;
      &lt;version&gt;2.4.7&lt;/version&gt;
    &lt;/dependency&gt;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="pom.xml-2"><pre class="line-numbers language-none"><code class="language-none">ppackage top.wabisabifag.config;

import org.springframework.context.annotation.Bean;

import java.io.IOException;

public class XMemcachedConfig {
    @Bean
    public MemcachedClient getMemcachedClient() throws IOException {
        MemcachedClientBuilder memcachedClientBuilder = new XMemcachedClientBuilder("localhost:11211");
        MemcachedClient memcachedClient = memcachedClientBuilder.build();
        return memcachedClient;
    }
}


&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;ä¼˜&gt;&gt;&gt;&gt;&gt;åŒ–&gt;&gt;&gt;&gt;&gt;é…&gt;&gt;&gt;&gt;&gt;&gt;ç½®&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;

package top.wabisabifag.config;

import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.context.annotation.Bean;
import org.springframework.context.annotation.Configuration;

import java.io.IOException;
@Configuration
public class XMemcachedConfig {
    @Autowired
    private XMemcachedProperties memcachedProperties;

    @Bean
    public MemcachedClient getMemcachedClient() throws IOException {
        MemcachedClientBuilder memcachedClientBuilder = new XMemcachedClientBuilder(memcachedProperties.getServers());
        memcachedProperties.setPoolSize(memcachedProperties.getPoolSize());
        memcachedProperties.setOpTimeout(memcachedProperties.getOpTimeout());
        MemcachedClient memcachedClient = memcachedClientBuilder.build();
        return memcachedClient;
    }
}<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="pom.xml-3"><pre class="line-numbers language-none"><code class="language-none">package top.wabisabifag.service.impl;

import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.cache.annotation.CachePut;
import org.springframework.cache.annotation.Cacheable;
import org.springframework.stereotype.Service;
import top.wabisabifag.domain.SMSCode;
import top.wabisabifag.service.SMSCodeService;
import top.wabisabifag.utils.CodeUtils;

@Service
public class SMSCodeServiceImpl implements SMSCodeService {
    @Autowired
    private MemcachedClient memcachedClient;
    @Override
    public String sendCodeToSMS(String tele) {
        String code = codeUtils.generator(tele);
                      // key   æœ‰æ•ˆæ—¶é—´   å€¼
        memcachedClient.set(tele,0,code);
        return code;
    }

    @Override
    public boolean checkCode(SMSCode smsCode) {
        String code = memcachedClient.get(smsCode.getTele()).toString();
        return smsCode.getCode().equals(code);
    }
}<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="pom.xml-4"><pre class="line-numbers language-none"><code class="language-none">spring:
  # é…ç½®ç¼“å­˜ç±»å‹
  cache:
    # memcached
    servers: localhost:11211
    poolSize: 10
    opTimeout:  3000<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="pom.xml-5"><pre class="line-numbers language-none"><code class="language-none">package top.wabisabifag.config;

import lombok.Data;
import org.springframework.boot.context.properties.ConfigurationProperties;
import org.springframework.stereotype.Component;

@Component
@ConfigurationProperties(prefix = "memcached")
@Data
public class XMemcachedProperties {
    private String servers;
    private int poolSize;
    private long opTimeout;
}<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div>


<h5 id="6-jetCache"><a href="#6-jetCache" class="headerlink" title="6. jetCache"></a>6. jetCache</h5><h6 id="1-jetCache-ç‰¹æ€§"><a href="#1-jetCache-ç‰¹æ€§" class="headerlink" title="1. jetCache ç‰¹æ€§"></a>1. jetCache ç‰¹æ€§</h6><ul>
<li>jetCache å¯¹ SpringCache è¿›è¡Œå°è£…ï¼ŒåŸæœ‰åŸºç¡€ä¸Šå®ç°å¤šçº§ç¼“å­˜ï¼Œç¼“å­˜ç»Ÿè®¡ï¼Œè‡ªåŠ¨åˆ·æ–°ï¼Œå¼‚æ­¥è°ƒç”¨ï¼Œæ•°æ®æŠ¥è¡¨ç­‰åŠŸèƒ½ã€‚</li>
<li>jetCache è®¾å®šæœ¬åœ°ç¼“å­˜ å’Œ è¿œç¨‹ç¼“å­˜ çš„å¤šçº§ç¼“å­˜è§£å†³æ–¹æ¡ˆ<ul>
<li>æœ¬åœ°ç¼“å­˜<ul>
<li>LinkedHashMap</li>
<li>Caffeine</li>
</ul>
</li>
<li>è¿œç¨‹ç¼“å­˜<ul>
<li>Redis</li>
<li>Tair<br><img src="/../JavaEE/3.png" alt="jetCache ymlé…ç½®æ–‡ä»¶å€¼å®šæ„ä¹‰"></li>
</ul>
</li>
</ul>
</li>
</ul>
<h6 id="2-æ•´ä½“éƒ¨ç½²-åŸºç¡€"><a href="#2-æ•´ä½“éƒ¨ç½²-åŸºç¡€" class="headerlink" title="2. æ•´ä½“éƒ¨ç½²(åŸºç¡€)"></a>2. æ•´ä½“éƒ¨ç½²(åŸºç¡€)</h6><div class="tabs" id="pom.xml"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#pom.xml-1">pom.xml</button></li><li class="tab"><button type="button" data-href="#pom.xml-2">application.yml</button></li><li class="tab"><button type="button" data-href="#pom.xml-3">application.java</button></li><li class="tab"><button type="button" data-href="#pom.xml-4">Redis è¿œç¨‹æ–¹æ¡ˆ</button></li><li class="tab"><button type="button" data-href="#pom.xml-5">æœ¬åœ°æ–¹æ¡ˆ</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="pom.xml-1"><pre class="line-numbers language-none"><code class="language-none">&lt;!--jetCache é˜¿é‡Œç¼“å­˜æ•´åˆæ–¹æ¡ˆ--&gt;
    &lt;dependency&gt;
      &lt;groupId&gt;com.alicp.jetcache&lt;/groupId&gt;
      &lt;artifactId&gt;jetcache-starter-redis&lt;/artifactId&gt;
      &lt;version&gt;2.4.7&lt;/version&gt;
    &lt;/dependency&gt;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="pom.xml-2"><pre class="line-numbers language-none"><code class="language-none">  # jetcache é˜¿é‡Œç¼“å­˜é…ç½®
jetcache:
  # æ¯è¿‡ ä¸€æ®µæ—¶é—´ åœ¨æ§åˆ¶å°ä¸Šæ˜¾ç¤ºä¸€æ®µæ•°æ®
  statIntervalMinutes: 15
  # è¿œç¨‹è®¿é—®çš„ area çš„åç§° æ˜¯å¦è¿›å…¥ ç¼“å­˜åä¸­
  areaInCacheName: false
  # æœ¬åœ°
  local:
    default:
      type: linkedhashmap
      # ä¸ºæ–¹ä¾¿å¯¹è±¡è½¬æ¢ä¸ºå­—ç¬¦ç²—ä¸²ï¼škeyå¿…é¡»ä¸ºå­—ç¬¦ä¸²
      keyConvertor: fastjson
      # ç¼“å­˜çš„æ•°æ®é‡
      limit: 100
  # è¿œç¨‹
  remote:
    default:
      type: redis
      host: localhost
      port: 6379
      # ä¸ºæ–¹ä¾¿å¯¹è±¡è½¬æ¢ä¸ºå­—ç¬¦ç²—ä¸²ï¼škeyå¿…é¡»ä¸ºå­—ç¬¦ä¸²
      # jetCache çš„æ–¹æ³•ç¼“å­˜ æ³¨è§£æ–¹å¼æ—¶éœ€è¦
      keyConvertor: fastjson
      valueEncoder: java
      valueDecoder: java
      # åˆå§‹åŒ–è¿æ¥æ± 
      poolConfig:
        minIdle: 5
        maxIdle: 20
        maxTotal: 50
    sms:
      type: redis
      host: localhost
      port: 6379
      poolConfig:
        maxTotal: 50<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="pom.xml-3"><pre class="line-numbers language-none"><code class="language-none">package top.wabisabifag;

import org.mybatis.spring.annotation.MapperScan;
import org.springframework.boot.SpringApplication;
import org.springframework.boot.autoconfigure.SpringBootApplication;
import org.springframework.cache.annotation.EnableCaching;
import org.springframework.context.annotation.ComponentScan;

@SpringBootApplication
/* jetCache å¼€å…³: å¯ç”¨æ³¨è§£æ–¹å¼å¼€å¯ç¼“å­˜*/
@EnableCreateCacheAnnotation
public class application {
    public static void main(String[] args) {

        // çº¿ç¨‹å®‰å…¨é—®é¢˜
        SpringApplication.run(application.class,args);

        // ä¸æ¥å—å¤–éƒ¨ä¸´æ—¶å‚æ•°
        SpringApplication.run(application.class);
    }
}<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="pom.xml-4"><pre class="line-numbers language-none"><code class="language-none">package top.wabisabifag.service.impl;

import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.cache.annotation.CachePut;
import org.springframework.cache.annotation.Cacheable;
import org.springframework.stereotype.Service;
import top.wabisabifag.domain.SMSCode;
import top.wabisabifag.service.SMSCodeService;
import top.wabisabifag.utils.CodeUtils;

import java.util.concurrent.TimeUnit;

@Service
public class SMSCodeServiceImpl implements SMSCodeService {

    @Autowired
    private CodeUtils codeUtils;

    # é€šè¿‡ area="sms"  è°ƒç”¨è¿œç¨‹ç¼“å­˜çš„è‡ªå®šä¹‰å‰ç¼€
    @CreateCache(area="sms",name="jetCache",expire=3600,timeUnit= TimeUnit.SECONDS)
    private Cache&lt;String,String&gt; jetCache;
    @Override
    public String sendCodeToSMS(String tele) {
        String code = codeUtils.generator(tele);
        jetCache.put(tele,code);
        return code;
    }

    @Override
    public boolean checkCode(SMSCode smsCode) {
        String code = jetCache.get(smsCode.getTele());
        return smsCode.getCode().equals(code);
    }
}<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="pom.xml-5"><pre class="line-numbers language-none"><code class="language-none">package top.wabisabifag.service.impl;

import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.cache.annotation.CachePut;
import org.springframework.cache.annotation.Cacheable;
import org.springframework.stereotype.Service;
import top.wabisabifag.domain.SMSCode;
import top.wabisabifag.service.SMSCodeService;
import top.wabisabifag.utils.CodeUtils;

import java.util.concurrent.TimeUnit;

@Service
public class SMSCodeServiceImpl implements SMSCodeService {

    @Autowired
    private CodeUtils codeUtils;

    # è®¾å®šç¼“å­˜ç±»å‹: ä»…ç”¨ æœ¬åœ°ç¼“å­˜
    @CreateCache(name="jetCache",expire=3600,timeUnit= TimeUnit.SECONDS,cacheType= CacheType.LOCAL)
    private Cache&lt;String,String&gt; jetCache;
    @Override
    public String sendCodeToSMS(String tele) {
        String code = codeUtils.generator(tele);
        jetCache.put(tele,code);
        return code;
    }

    @Override
    public boolean checkCode(SMSCode smsCode) {
        String code = jetCache.get(smsCode.getTele());
        return smsCode.getCode().equals(code);
    }
}<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div>


<h6 id="3-jetCache-æ–¹æ³•ç¼“å­˜-æ”¹åŠ¨åŸºç¡€"><a href="#3-jetCache-æ–¹æ³•ç¼“å­˜-æ”¹åŠ¨åŸºç¡€" class="headerlink" title="3. jetCache æ–¹æ³•ç¼“å­˜(æ”¹åŠ¨åŸºç¡€)"></a>3. jetCache æ–¹æ³•ç¼“å­˜(æ”¹åŠ¨åŸºç¡€)</h6><div class="tabs" id="application.java"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#application.java-1">application.java</button></li><li class="tab"><button type="button" data-href="#application.java-2">Book.java</button></li><li class="tab"><button type="button" data-href="#application.java-3">jetCacheè¿œç¨‹æ–¹æ¡ˆ</button></li><li class="tab"><button type="button" data-href="#application.java-4">jetCacheæœ¬åœ°æ–¹æ¡ˆ</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="application.java-1"><pre class="line-numbers language-none"><code class="language-none">package top.wabisabifag;

import org.mybatis.spring.annotation.MapperScan;
import org.springframework.boot.SpringApplication;
import org.springframework.boot.autoconfigure.SpringBootApplication;
import org.springframework.cache.annotation.EnableCaching;
import org.springframework.context.annotation.ComponentScan;

@SpringBootApplication
/* jetCache å¼€å…³: å¯ç”¨æ³¨è§£æ–¹å¼å¼€å¯ç¼“å­˜*/
@EnableCreateCacheAnnotation

/* å¼€å¯æ³¨è§£ç¼“å­˜: åŒ…åè¦†ç›– */
@EnableMethodCache(basePackages = "top.wabisabifag")
public class application {
    public static void main(String[] args) {
        // çº¿ç¨‹å®‰å…¨é—®é¢˜
        SpringApplication.run(application.class,args);
        // ä¸æ¥å—å¤–éƒ¨ä¸´æ—¶å‚æ•°
        SpringApplication.run(application.class);
    }
}<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="application.java-2"><pre class="line-numbers language-none"><code class="language-none">package top.wabisabifag.domain;

import lombok.AllArgsConstructor;
import lombok.Data;

import java.io.Serializable;

@Data
@AllArgsConstructor
/* jetCache ç¼“å­˜ Java çš„å¯¹è±¡æ—¶
    æ˜ å…¥ Redis åº“ä¸æ”¯æŒã€‚ï¼ˆ åºåˆ—åŒ–å’Œååºåˆ—åŒ–é—®é¢˜*/
public class Book implements Serializable {
    private int id;
    private String name;
    private String type;
    private String description;
}<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="application.java-3"><pre class="line-numbers language-none"><code class="language-none">package top.wabisabifag.service.impl;

import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.cache.annotation.Cacheable;
import org.springframework.stereotype.Service;
import top.wabisabifag.dao.BookDao;
import top.wabisabifag.domain.Book;

import java.util.HashMap;

@Service
public class BookServiceImpl {

    @Autowired
    private BookDao bookDao;

    /* å¯¹åº”ç¼“å­˜ */
    private HashMap&lt;Integer,Book&gt; cache = new HashMap&lt;Integer, Book&gt;();

    @Override
    //@Cacheable(value = "cacheSpace",key = "#id")
    @Cached(name="book",key="#id",expire=3600)
    public Book getById(Integer id){
        return bookDao.selectById(id);
    }
}
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="application.java-4"><pre class="line-numbers language-none"><code class="language-none">package top.wabisabifag.service.impl;

import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.cache.annotation.Cacheable;
import org.springframework.stereotype.Service;
import top.wabisabifag.dao.BookDao;
import top.wabisabifag.domain.Book;

import java.util.HashMap;

@Service
public class BookServiceImpl {

    @Autowired
    private BookDao bookDao;

    /* å¯¹åº”ç¼“å­˜ */
    private HashMap&lt;Integer,Book&gt; cache = new HashMap&lt;Integer, Book&gt;();

    @Override
    /* æ³¨å…¥ç¼“å­˜æ³¨è§£*/
    @Cached(name="book",key="#id",expire=3600)
     /* åˆ·æ–°: å†…å­˜å’Œæ•°æ®åº“å†…å®¹ä¸åŒæ­¥*/
    @CacheRefresh(refresh=10)
    public Book getById(Integer id){
        return bookDao.selectById(id);
    }

    @Override
    /* æ›´æ–°ç¼“å­˜æ³¨è§£*/
    @CacheUpdate(name="book_",key="#book.id",value="#book")
    public boolean update(Book book){
        return bookDao.updateById(book)&gt;0;
    }

    @Override
    /* åˆ é™¤ç¼“å­˜æ³¨è§£*/
    @CacheInvalidate(name="book_",key="#id",value="#book")
    public boolean update(Book book){
        return bookDao.updateById(book)&gt;0;
    }
}<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div>



<h5 id="7-j2cache"><a href="#7-j2cache" class="headerlink" title="7. j2cache"></a>7. j2cache</h5><h6 id="1-j2cache-ç‰¹æ€§"><a href="#1-j2cache-ç‰¹æ€§" class="headerlink" title="1. j2cache ç‰¹æ€§"></a>1. j2cache ç‰¹æ€§</h6><ul>
<li>j2cache æ˜¯ä¸€ä¸ªç¼“å­˜æ•´åˆæ¡†æ¶ï¼Œå¯æä¾›ç¼“å­˜çš„æ•´åˆæ–¹æ¡ˆï¼Œä½¿ç”¨å„ç§ç¼“å­˜æ­é…ä½¿ç”¨ã€‚(è‡ªèº«ä¸æä¾›ç¼“å­˜åŠŸèƒ½</li>
</ul>
<h6 id="2-j2cache-ä¸»è¦æ•´åˆ-Redis-Ehcache"><a href="#2-j2cache-ä¸»è¦æ•´åˆ-Redis-Ehcache" class="headerlink" title="2. j2cache (ä¸»è¦æ•´åˆ Redis Ehcache)"></a>2. j2cache (ä¸»è¦æ•´åˆ Redis Ehcache)</h6><div class="tabs" id="pom.xml"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#pom.xml-1">pom.xml</button></li><li class="tab"><button type="button" data-href="#pom.xml-2">application.yml</button></li><li class="tab"><button type="button" data-href="#pom.xml-3">j2cache.properties</button></li><li class="tab"><button type="button" data-href="#pom.xml-4">ehcache.xml</button></li><li class="tab"><button type="button" data-href="#pom.xml-5">SMSCodeServiceImpl.java</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="pom.xml-1"><pre class="line-numbers language-none"><code class="language-none">&lt;!--j2Cache æ ¸å¿ƒ--&gt;
    &lt;dependency&gt;
      &lt;groupId&gt;net-oschina.j2cache&lt;/groupId&gt;
      &lt;artifactId&gt;j2cache-core&lt;/artifactId&gt;
      &lt;version&gt;2.8.4-release&lt;/version&gt;
    &lt;/dependency&gt;

&lt;!--jetCache SpringBootæ•´åˆ--&gt;
    &lt;dependency&gt;
      &lt;groupId&gt;net-oschina.j2cache&lt;/groupId&gt;
      &lt;artifactId&gt;j2cache-spring-boot2-starter&lt;/artifactId&gt;
      &lt;version&gt;2.8.0-release&lt;/version&gt;
    &lt;/dependency&gt;

&lt;!--Ehcache ç¼“å­˜--&gt;
    &lt;dependency&gt;
      &lt;groupId&gt;net.sf.ehcache&lt;/groupId&gt;
      &lt;artifactId&gt;ehcache&lt;/artifactId&gt;
    &lt;/dependency&gt;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="pom.xml-2"><pre class="line-numbers language-none"><code class="language-none">  # j2cache æ•´åˆ
j2cache:
  # j2cache é…ç½®æ–‡ä»¶å
  config-location: j2cache.properties<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="pom.xml-3"><pre class="line-numbers language-none"><code class="language-none"># 1çº§ç¼“å­˜
j2cache.L1.provider_class= ehcache
ehcache.configXml = ehcache.xml

# æ˜¯å¦å¼€å¯äºŒçº§ç¼“å­˜
j2cache.l2-cache-open = ture

# 1çº§ç¼“å­˜ä¸­çš„æ•°æ®å¦‚ä½•åˆ°è¾¾2çº§ç¼“å­˜:
#   å¹¿æ’­æ–¹å¼ï¼Œå¯ä»¥ä½¿ç”¨redis æä¾›çš„æ¶ˆæ¯è®¢é˜…æ¨¡å¼ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨jgroupså¤šæ’­å®ç°
j2cache.broadcast = net.oschina.j2cache.cache.support.redis.SpringRedisPubSubPolicy

# 2çº§ç¼“å­˜
j2cache.L2.provider_class = net.oschina.j2cache.cache.support.redis.SpringRedisProvider
j2cache.L2.config_section = redis
redis.hosts = localhost:6379

redis.mode = single
redis.namespace =j2cache

##J2Cache configuration
##########################################
## Cache Broadcast Method
## values:
## jgroups -&gt; use jgroups's multicast
## redis -&gt; use redis publish/subscribe mechanism (using jedis)
## lettuce -&gt; use redis publish/subscribe mechanism (using lettuce, Recommend)
## rabbitmq -&gt; use RabbitMQ publisher/consumer mechanism
## rocketmq -&gt; use RocketMQ publisher/consumer mechanism
## none -&gt; don't notify the other nodes in cluster
## xx.xxxx.xxxx.Xxxxx your own cache broadcast policy classname that implement net.oschina.j2cache.cluster.ClusterPolicy
##########################################
#j2cache.broadcast = redis
#
## jgroups properties
#jgroups.channel.name = j2cache
#jgroups.configXml = /network.xml
#
## RabbitMQ properties
#rabbitmq.exchange = j2cache
#rabbitmq.host = localhost
#rabbitmq.port = 5672
#rabbitmq.username = guest
#rabbitmq.password = guest
#
## RocketMQ properties
#rocketmq.name = j2cache
#rocketmq.topic = j2cache
## use ; to split multi hosts
#rocketmq.hosts = 127.0.0.1:9876
#
##########################################
## Level 1&amp;2 provider
## values:
## none -&gt; disable this level cache
## ehcache -&gt; use ehcache2 as level 1 cache
## ehcache3 -&gt; use ehcache3 as level 1 cache
## caffeine -&gt; use caffeine as level 1 cache(only in memory)
## redis -&gt; use redis as level 2 cache (using jedis)
## lettuce -&gt; use redis as level 2 cache (using lettuce)
## readonly-redis -&gt; use redis as level 2 cache ,but never write data to it. if use this provider, you must uncomment `j2cache.L2.config_section` to make the redis configurations available.
## memcached -&gt; use memcached as level 2 cache (xmemcached),
## [classname] -&gt; use custom provider
##########################################
#
#j2cache.L1.provider_class = caffeine
#j2cache.L2.provider_class = redis
#
## When L2 provider isn't `redis`, using `L2.config_section = redis` to read redis configurations
## j2cache.L2.config_section = redis
#
## Enable/Disable ttl in redis cache data (if disabled, the object in redis will never expire, default:true)
## NOTICE: redis hash mode (redis.storage = hash) do not support this feature)
#j2cache.sync_ttl_to_redis = true
#
## Whether to cache null objects by default (default false)
#j2cache.default_cache_null_object = true
#
##########################################
## Cache Serialization Provider
## values:
## fst -&gt; using fast-serialization (recommend)
## kryo -&gt; using kryo serialization
## json -&gt; using fst's json serialization (testing)
## fastjson -&gt; using fastjson serialization (embed non-static class not support)
## java -&gt; java standard
## fse -&gt; using fse serialization
## [classname implements Serializer]
##########################################
#
#j2cache.serialization = json
##json.map.person = net.oschina.j2cache.demo.Person
#
##########################################
## Ehcache configuration
##########################################
#
## ehcache.configXml = /ehcache.xml
#
## ehcache3.configXml = /ehcache3.xml
## ehcache3.defaultHeapSize = 1000
#
##########################################
## Caffeine configuration
## caffeine.region.[name] = size, xxxx[s|m|h|d]
##
##########################################
#caffeine.properties = /caffeine.properties
#
##########################################
## Redis connection configuration
##########################################
#
##########################################
## Redis Cluster Mode
##
## single -&gt; single redis server
## sentinel -&gt; master-slaves servers
## cluster -&gt; cluster servers (æ•°æ®åº“é…ç½®æ— æ•ˆï¼Œä½¿ç”¨ database = 0)
## sharded -&gt; sharded servers  (å¯†ç ã€æ•°æ®åº“å¿…é¡»åœ¨ hosts ä¸­æŒ‡å®šï¼Œä¸”è¿æ¥æ± é…ç½®æ— æ•ˆ); redis://user:password@127.0.0.1:6379/0ï¼‰
##
##########################################
#
#redis.mode = single
#
##redis storage mode (generic|hash)
#redis.storage = generic
#
### redis pub/sub channel name
#redis.channel = j2cache
### redis pub/sub server (using redis.hosts when empty)
#redis.channel.host =
#
##cluster name just for sharded
#redis.cluster_name = j2cache
#
### redis cache namespace optional, default[empty]
#redis.namespace =
#
### redis command scan parameter count, default[1000]
##redis.scanCount = 1000
#
### connection
## Separate multiple redis nodes with commas, such as 192.168.0.10:6379,192.168.0.11:6379,192.168.0.12:6379
#
#redis.hosts = 127.0.0.1:6379
#redis.timeout = 2000
#redis.password =
#redis.database = 0
#redis.ssl = false
#
### redis pool properties
#redis.maxTotal = 100
#redis.maxIdle = 10
#redis.maxWaitMillis = 5000
#redis.minEvictableIdleTimeMillis = 60000
#redis.minIdle = 1
#redis.numTestsPerEvictionRun = 10
#redis.lifo = false
#redis.softMinEvictableIdleTimeMillis = 10
#redis.testOnBorrow = true
#redis.testOnReturn = false
#redis.testWhileIdle = true
#redis.timeBetweenEvictionRunsMillis = 300000
#redis.blockWhenExhausted = false
#redis.jmxEnabled = false
#
##########################################
## Lettuce scheme
##
## redis -&gt; single redis server
## rediss -&gt; single redis server with ssl
## redis-sentinel -&gt; redis sentinel
## redis-cluster -&gt; cluster servers
##
##########################################
#
##########################################
## Lettuce Mode
##
## single -&gt; single redis server
## sentinel -&gt; master-slaves servers
## cluster -&gt; cluster servers (æ•°æ®åº“é…ç½®æ— æ•ˆï¼Œä½¿ç”¨ database = 0)
## sharded -&gt; sharded servers  (å¯†ç ã€æ•°æ®åº“å¿…é¡»åœ¨ hosts ä¸­æŒ‡å®šï¼Œä¸”è¿æ¥æ± é…ç½®æ— æ•ˆ ; redis://user:password@127.0.0.1:6379/0ï¼‰
##
##########################################
#
### redis command scan parameter count, default[1000]
##lettuce.scanCount = 1000
#lettuce.mode = single
#lettuce.namespace =
#lettuce.storage = hash
#lettuce.channel = j2cache
#lettuce.scheme = redis
#lettuce.hosts = 127.0.0.1:6379
#lettuce.password =
#lettuce.database = 0
#lettuce.sentinelMasterId =
#lettuce.maxTotal = 100
#lettuce.maxIdle = 10
#lettuce.minIdle = 10
## timeout in milliseconds
#lettuce.timeout = 10000
## redis cluster topology refresh interval in milliseconds
#lettuce.clusterTopologyRefresh = 3000
#
##########################################
## memcached server configurations
## refer to https://gitee.com/mirrors/XMemcached
##########################################
#
#memcached.servers = 127.0.0.1:11211
#memcached.username =
#memcached.password =
#memcached.connectionPoolSize = 10
#memcached.connectTimeout = 1000
#memcached.failureMode = false
#memcached.healSessionInterval = 1000
#memcached.maxQueuedNoReplyOperations = 100
#memcached.opTimeout = 100
#memcached.sanitizeKeys = false<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="pom.xml-4"><pre class="line-numbers language-none"><code class="language-none">&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;ehcache xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
         xsi:noNamespaceSchemaLocation="http://ehcache.org/ehcache.xsd"
        updateCheck="false" name="defaultCache"&gt;

    &lt;!--
       diskStoreï¼šä¸ºç¼“å­˜è·¯å¾„ï¼Œehcacheåˆ†ä¸ºå†…å­˜å’Œç£ç›˜ä¸¤çº§ï¼Œæ­¤å±æ€§å®šä¹‰ç£ç›˜çš„ç¼“å­˜ä½ç½®,å¯ä»¥è‡ªå®šä¹‰ç›®å½•ï¼Œç¡®ä¿ç”¨æˆ·æœ‰æƒé™å³å¯ã€‚å‚æ•°è§£é‡Šå¦‚ä¸‹ï¼š
       user.home â€“ ç”¨æˆ·ä¸»ç›®å½•
       user.dir  â€“ ç”¨æˆ·å½“å‰å·¥ä½œç›®å½•
       java.io.tmpdir â€“ é»˜è®¤ä¸´æ—¶æ–‡ä»¶è·¯å¾„
     --&gt;
    &lt;!--    &lt;diskStore path="java.io.tmpdir"/&gt; --&gt;
    &lt;diskStore path="C:/Users/admin/ehcache/"/&gt;

    &lt;!-- maxElementsInMemoryï¼šå†…å­˜ä¸­æœ€å¤§ç¼“å­˜å¯¹è±¡æ•°ï¼Œæ ¹æ®æœåŠ¡å™¨èµ„æºé…ç½® --&gt;
    &lt;!-- eternalï¼š é»˜è®¤ä¸ºfalse,è®¾ç½®trueè¡¨ç¤ºå¯¹è±¡æ°¸ä¸è¿‡æœŸï¼Œæ­¤æ—¶ä¼šå¿½ç•¥timeToIdleSecondså’ŒtimeToLiveSecondså±æ€§ï¼Œ --&gt;
    &lt;!-- maxElementsOnDiskï¼šç¡¬ç›˜ä¸­æœ€å¤§ç¼“å­˜å¯¹è±¡æ•°ï¼Œè‹¥æ˜¯0è¡¨ç¤ºæ— ç©·å¤§ --&gt;
    &lt;!-- overflowToDiskï¼štrueè¡¨ç¤ºå½“å†…å­˜ç¼“å­˜çš„å¯¹è±¡æ•°ç›®è¾¾åˆ°äº†maxElementsInMemoryç•Œé™åï¼Œä¼šæŠŠæº¢å‡ºçš„å¯¹è±¡å†™åˆ°ç¡¬ç›˜ç¼“å­˜ä¸­ã€‚
    æ³¨æ„ï¼šå¦‚æœç¼“å­˜çš„å¯¹è±¡è¦å†™å…¥åˆ°ç¡¬ç›˜ä¸­çš„è¯ï¼Œåˆ™è¯¥å¯¹è±¡å¿…é¡»å®ç°äº†Serializableæ¥å£æ‰è¡Œã€‚--&gt;
    &lt;!-- diskSpoolBufferSizeMBï¼šç£ç›˜ç¼“å­˜åŒºå¤§å°ï¼Œé»˜è®¤ä¸º30MBã€‚æ¯ä¸ªCacheéƒ½åº”è¯¥æœ‰è‡ªå·±çš„ä¸€ä¸ªç¼“å­˜åŒºã€‚--&gt;
    &lt;!-- diskPersistentï¼šæ˜¯å¦ç¼“å­˜è™šæ‹Ÿæœºé‡å¯æœŸæ•°æ®  --&gt;
    &lt;!-- diskExpiryThreadIntervalSecondsï¼šç£ç›˜å¤±æ•ˆçº¿ç¨‹è¿è¡Œæ—¶é—´é—´éš”ï¼Œé»˜è®¤ä¸º120ç§’ --&gt;

    &lt;!-- timeToIdleSecondsï¼š è®¾å®šå…è®¸å¯¹è±¡å¤„äºç©ºé—²çŠ¶æ€çš„æœ€é•¿æ—¶é—´ï¼Œå•ä½ï¼ˆç§’ï¼‰ã€‚è‡ªå¯¹è±¡æœ€è¿‘ä¸€æ¬¡è¢«è®¿é—®åï¼Œ
    ç©ºé—²æ—¶é—´è¶…è¿‡äº†timeToIdleSecondså±æ€§å€¼ï¼Œè¿™ä¸ªå¯¹è±¡å°±ä¼šè¿‡æœŸï¼Œå¦‚æœè¯¥å±æ€§å€¼ä¸º0ï¼Œåˆ™å¯¹è±¡æ— é™æœŸåœ°å¤„äºç©ºé—²çŠ¶æ€
    EHCacheå°†æŠŠå®ƒä»ç¼“å­˜ä¸­æ¸…ç©ºã€‚åªæœ‰å½“eternalå±æ€§ä¸ºfalseï¼Œè¯¥å±æ€§æ‰æœ‰æ•ˆã€‚
    --&gt;

    &lt;!-- timeToLiveSecondsï¼šè®¾å®šå…è®¸å¯¹è±¡å­˜åœ¨äºç¼“å­˜ä¸­çš„æœ€é•¿æ—¶é—´ï¼Œå•ä½ï¼ˆç§’ï¼‰ã€‚è‡ªå¯¹è±¡è¢«å­˜æ”¾åˆ°ç¼“å­˜ä¸­åï¼Œ
    åœ¨ç¼“å­˜ä¸­çš„æ—¶é—´è¶…è¿‡äº†timeToLiveSecondså±æ€§å€¼ï¼Œè¿™ä¸ªå¯¹è±¡å°±ä¼šè¿‡æœŸï¼Œå¦‚æœè¯¥å±æ€§å€¼ä¸º0ï¼Œåˆ™å¯¹è±¡æ— é™æœŸåœ°å­˜åœ¨äºç¼“å­˜ä¸­ã€‚
    EHCacheå°†æŠŠå®ƒä»ç¼“å­˜ä¸­æ¸…é™¤ã€‚åªæœ‰å½“eternalå±æ€§ä¸ºfalseï¼Œè¯¥å±æ€§æ‰æœ‰æ•ˆã€‚timeToLiveSecondså¿…é¡»å¤§äºtimeToIdleSecondså±æ€§ï¼Œæ‰æœ‰æ„ä¹‰ --&gt;

    &lt;!-- memoryStoreEvictionPolicyï¼šå½“è¾¾åˆ°maxElementsInMemoryé™åˆ¶æ—¶ï¼ŒEhcacheå°†ä¼šæ ¹æ®æŒ‡å®šçš„ç­–ç•¥å»æ¸…ç†å†…å­˜ã€‚
    å¯é€‰ç­–ç•¥æœ‰ï¼šLRUï¼ˆæœ€è¿‘æœ€å°‘ä½¿ç”¨ï¼Œé»˜è®¤ç­–ç•¥ï¼‰ã€FIFOï¼ˆå…ˆè¿›å…ˆå‡ºï¼‰ã€LFUï¼ˆæœ€å°‘è®¿é—®æ¬¡æ•°ï¼‰ã€‚--&gt;

    &lt;!-- é»˜è®¤ç¼“å­˜ --&gt;
    &lt;defaultCache
            maxElementsInMemory="10000"
            eternal="false"
            overflowToDisk="false"
            diskSpoolBufferSizeMB="50"
            timeToIdleSeconds="300"
            timeToLiveSeconds="600"
            maxElementsOnDisk="10000000"
            diskExpiryThreadIntervalSeconds="120"
            memoryStoreEvictionPolicy="LRU"&gt;

        &lt;persistence strategy="localTempSwap"/&gt;

    &lt;/defaultCache&gt;

    &lt;cache name="employee_all"
           maxElementsInMemory="100"
           eternal="false"
           overflowToDisk="true"
           timeToIdleSeconds="300"
           timeToLiveSeconds="600"
           memoryStoreEvictionPolicy="LRU"/&gt;

    &lt;cache name="employee_info"
           maxElementsInMemory="1000"
           eternal="false"
           overflowToDisk="true"
           timeToIdleSeconds="300"
           timeToLiveSeconds="600"
           memoryStoreEvictionPolicy="LRU"/&gt;
    &lt;!--è®¾ç½®ç¼“å­˜ç©ºé—´--&gt;
    &lt;cache name="smsCode"
           maxElementsInMemory="1000"
           eternal="false"
           overflowToDisk="true"
           timeToIdleSeconds="300"
           timeToLiveSeconds="600"
           memoryStoreEvictionPolicy="LRU"/&gt;

&lt;/ehcache&gt;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="pom.xml-5"><pre class="line-numbers language-none"><code class="language-none">package top.wabisabifag.service.impl;

import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.boot.autoconfigure.cache.CacheType;
import org.springframework.cache.annotation.CachePut;
import org.springframework.cache.annotation.Cacheable;
import org.springframework.stereotype.Service;
import top.wabisabifag.domain.SMSCode;
import top.wabisabifag.service.SMSCodeService;
import top.wabisabifag.utils.CodeUtils;

import java.util.concurrent.TimeUnit;

@Service
public class SMSCodeServiceImpl implements SMSCodeService {

    @Autowired
    private CodeUtils codeUtils;

    @Autowired
    /* å®šä¹‰ç¼“å­˜å¯¹è±¡*/
    private CacheChannel cacheChannel;

    @Override
    public String sendCodeToSMS(String tele) {
        String code = codeUtils.generator(tele);
        /* æ”¾å…¥å†…ç¼“å­˜å¯¹è±¡ä¸­*/
        cacheChannel.set("sms",tele,code);
        return code;
    }

    @Override
    public boolean checkCode(SMSCode smsCode) {
        /* è·å–å†…ç¼“å­˜å¯¹è±¡æ•°æ®*/
        String code = cacheChannel.get("sms",smsCode.getTele()).asString();
        return smsCode.getCode().equals(code);
    }
}<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div>



<h4 id="2-ä»»åŠ¡"><a href="#2-ä»»åŠ¡" class="headerlink" title="2. ä»»åŠ¡"></a>2. ä»»åŠ¡</h4><ul>
<li><p>å®šæ—¶ä»»åŠ¡</p>
<ul>
<li>å¹´åº¦æŠ¥è¡¨</li>
<li>ç¼“å­˜ç»Ÿè®¡æŠ¥å‘Š</li>
</ul>
</li>
<li><p>å®šæ—¶ä»»åŠ¡æ¡†æ¶æŠ€æœ¯</p>
<ul>
<li>Quartz</li>
<li>Spring Task</li>
</ul>
</li>
</ul>
<pre class="line-numbers language-none"><code class="language-none">package top.wabisabifag;

import java.util.Timer;
import java.util.TimerTask;

public class TimeTaskApp {
    public static void main(String[] args) {
        /* åˆ›å»ºå®šæ—¶å™¨å¯¹è±¡*/
        Timer timer = new Timer();
        /* åˆ›å»ºå®šæ—¶ä»»åŠ¡*/
        TimerTask task = new TimerTask() {
            @Override
            public void run() {
                System.out.println("timer task run...");
            }
        };
        /* æ¯è¿‡ 2ç§’ æ‰§è¡Œå®šæ—¶ä»»åŠ¡*/
        timer.schedule(task,0,2000);
    }
}<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<h5 id="1-SpringBoot-æ•´åˆ-Quartz"><a href="#1-SpringBoot-æ•´åˆ-Quartz" class="headerlink" title="1. SpringBoot æ•´åˆ Quartz"></a>1. SpringBoot æ•´åˆ Quartz</h5><h6 id="1-æ¦‚å¿µ"><a href="#1-æ¦‚å¿µ" class="headerlink" title="1. æ¦‚å¿µ"></a>1. æ¦‚å¿µ</h6><ul>
<li>å·¥ä½œ(Job):  ç”¨äºå®šä¹‰å…·ä½“çš„å·¥ä½œ</li>
<li>å·¥ä½œæ˜ç»†(JobDetail):  ç”¨äºæè¿°å®šæ—¶å·¥ä½œç›¸å…³çš„ä¿¡æ¯</li>
<li>è§¦å‘å™¨(Trugger):  ç”¨äºæè¿°è§¦å‘å·¥ä½œçš„è§„åˆ™ï¼Œé€šå¸¸ä½¿ç”¨cron è¡¨è¾¾å¼å®šä¹‰è°ƒåº¦è§„åˆ™</li>
<li>è°ƒåº¦å™¨(Scheduler):  æè¿°å·¥ä½œæ˜ç»†ä¸è§¦å‘å™¨çš„å¯¹åº”å…³ç³»</li>
</ul>
<h6 id="2-Quartz"><a href="#2-Quartz" class="headerlink" title="2. Quartz"></a>2. Quartz</h6><div class="tabs" id="pom.xml"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#pom.xml-1">pom.xml</button></li><li class="tab"><button type="button" data-href="#pom.xml-2">MyQuartzjava</button></li><li class="tab"><button type="button" data-href="#pom.xml-3">QuartzConfig.java</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="pom.xml-1"><pre class="line-numbers language-none"><code class="language-none">&lt;!--Quartz æ•´åˆ--&gt;
    &lt;dependency&gt;
      &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
      &lt;artifactId&gt;spring-boot-starter-quartz&lt;/artifactId&gt;
      &lt;scop&gt;test&lt;/scop&gt;
    &lt;/dependency&gt;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="pom.xml-2"><pre class="line-numbers language-none"><code class="language-none">package top.wabisabifag.quartz;

import org.springframework.scheduling.quartz.QuartzJobBean;

public class MyQuartz extends QuartzJobBean {
    @Override
    protected void executeInternal(JobExecutionContext jobExecutionContext) throws JobExecutionException {

    }
}<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="pom.xml-3"><pre class="line-numbers language-none"><code class="language-none">package top.wabisabifag.config;

import org.springframework.context.annotation.Bean;
import org.springframework.context.annotation.Configuration;
import top.wabisabifag.quartz.MyQuartz;

@Configuration
public class QuartzConfig {

    @Bean
    /* æè¿°*/
    public JobDetail printJobDetail(){
        /* ç»‘å®šå…·ä½“çš„å·¥ä½œ  */
        return JobBuilder.newJob(MyQuartz.class)
                          .storeDurably().build; //æŒä¹…åŒ–å¯¹è±¡
    }

    @Bean
    public Trigger printJobTrigger(){
        /* è®¾å®šä»»åŠ¡æ‰§è¡Œçš„å‘¨æœŸ:  åˆ† æ—¶ æ—¥ æœˆ */
        ScheduleBuilder scheduleBuilder = CronScheduleBuilder.cronSchedule("0 * * * * ?");

        /* ç»‘å®šå¯¹åº”çš„å·¥ä½œæ˜ç»†*/
        return TriggerBuilder
                            .newTrigger().forJob(printJobTrigger()) // æ–°å»ºè§¦å‘å™¨ ç»‘å®šä»»åŠ¡
                            .withSchedule(schedBuilder).build();// æ„å»ºæ‰§è¡Œå‘¨æœŸ ç»‘å®šä»»åŠ¡æ‰§è¡Œå‘¨æœŸ 
    }
}<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div>


<h5 id="2-Spring-Task"><a href="#2-Spring-Task" class="headerlink" title="2. Spring Task"></a>2. Spring Task</h5><div class="tabs" id="application.java"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#application.java-1">application.java</button></li><li class="tab"><button type="button" data-href="#application.java-2">MyBean.java</button></li><li class="tab"><button type="button" data-href="#application.java-3">application.yml</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="application.java-1"><pre class="line-numbers language-none"><code class="language-none">@SpringBootApplication
/* å¼€å¯å®šæ—¶ä»»åŠ¡åŠŸèƒ½*/
@EnableScheduling       
public class application {
    public static void main(String[] args) {
        // çº¿ç¨‹å®‰å…¨é—®é¢˜
        SpringApplication.run(application.class,args);
        // ä¸æ¥å—å¤–éƒ¨ä¸´æ—¶å‚æ•°
        SpringApplication.run(application.class);
    }
}<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="application.java-2"><pre class="line-numbers language-none"><code class="language-none">package top.wabisabifag.quartz;

import org.springframework.scheduling.annotation.Scheduled;
import org.springframework.stereotype.Component;

@Component
public class MyBean {
    @Scheduled(cron = "0/1 * * * * ?")
    public void print(){
        //  è·å–çº¿ç¨‹åç§°
        System.out.println(Thread.currentThread().getName()+":spring task run ã€‚ã€‚ã€‚");
    }
}<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="application.java-3"><pre class="line-numbers language-none"><code class="language-none">spring:
    # å®šæ—¶ä»»åŠ¡é…ç½®
  task:
    scheduling:
      # ä»»åŠ¡è°ƒåº¦çº¿ç¨‹æ± å¤§å° é»˜è®¤ 1
    pool:
      size: 1
    # è°ƒåº¦çº¿ç¨‹åç§°å‰ç¼€ é»˜è®¤ scheduling-
    thread-name-prefix: ssm_
    shutdown:
      # çº¿ç¨‹æ± å…³é—­æ—¶ç­‰å¾…æ‰€æœ‰ä»»åŠ¡å®Œæˆ
      await-termination: false
      # è°ƒåº¦çº¿ç¨‹ å…³é—­å‰æœ€å¤§ç­‰å¾…æ—¶é—´ï¼Œç¡®ä¿æœ€åä¸€å®šå…³é—­
      await-termination=period: 10s<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div>



<h5 id="3-SpringBoot-æ•´åˆ-JavaMail"><a href="#3-SpringBoot-æ•´åˆ-JavaMail" class="headerlink" title="3. SpringBoot æ•´åˆ JavaMail"></a>3. SpringBoot æ•´åˆ JavaMail</h5><ul>
<li>SMTP(Simple Mail Transfer Protocol): ç®€å•çš„é‚®ä»¶ä¼ è¾“åè®®ï¼Œç”¨äºå‘é€ç”µå­é‚®ä»¶çš„ä¼ è¾“åè®®</li>
<li>POP3(Post Office Protocol -Version 3): ç”¨äºæ¥æ”¶ç”µå­é‚®ä»¶çš„æ ‡å‡†åè®®</li>
<li>IMAP(Internat Mail Access Protocol): äº’è”ç½‘æ¶ˆæ¯åè®®ï¼ŒPOP3 æ›¿ä»£åè®®</li>
</ul>
<h6 id="1-JavaMail-åŸºç¡€"><a href="#1-JavaMail-åŸºç¡€" class="headerlink" title="1. JavaMail(åŸºç¡€)"></a>1. JavaMail(åŸºç¡€)</h6><div class="tabs" id="pom.xml"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#pom.xml-1">pom.xml</button></li><li class="tab"><button type="button" data-href="#pom.xml-2">application.yml</button></li><li class="tab"><button type="button" data-href="#pom.xml-3">SendMailTest.java</button></li><li class="tab"><button type="button" data-href="#pom.xml-4">åŸºç¡€å‘é€</button></li><li class="tab"><button type="button" data-href="#pom.xml-5">ä¼˜åŒ–å¤šæ ¼å¼å†…å®¹å‘é€</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="pom.xml-1"><pre class="line-numbers language-none"><code class="language-none">&lt;!--JavaMail æ•´åˆ--&gt;
   &lt;dependency&gt;
     &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
     &lt;artifactId&gt;spring-boot-starter-mail&lt;/artifactId&gt;
   &lt;/dependency&gt;
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="pom.xml-2"><pre class="line-numbers language-none"><code class="language-none">spring:
    # JavaMail é‚®ä»¶
  mail:
    host: smtp.qq.com
    username: 12345678@qq.com
    # QQé‚®ç®± =&gt; è®¾ç½® =&gt; è´¦æˆ· =&gt; POP3æœåŠ¡å¼€å¯ï¼š è·å–æˆæƒç  (ä»˜è´¹åŠŸèƒ½)
    password: zsaf45coca<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="pom.xml-3"><pre class="line-numbers language-none"><code class="language-none">package top.wabisabifag;

import org.junit.Test;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.boot.test.context.SpringBootTest;
import top.wabisabifag.service.SendMailService;

@SpringBootTest
public class SendMailTest {

    @Autowired
    private SendMailService sendMailService;

    @Test
    public void contextLoads(){
        sendMailService.sendMail();
    }
}<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="pom.xml-4"><pre class="line-numbers language-none"><code class="language-none">package top.wabisabifag.service.impl;

import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.mail.SimpleMailMessage;
import org.springframework.mail.javamail.JavaMailSender;
import org.springframework.stereotype.Service;
import top.wabisabifag.service.SendMailService;
@Service
public class SendMaillServiceImpl implements SendMailService {

    @Autowired
    private JavaMailSender javaMailSender;

    private String from = "12345678@qq.com"; /* å‘é€äºº*/
    private String to = "12345678@126.com"; /* æ¥æ”¶äºº*/
    private String subject = "æµ‹è¯•é‚®ä»¶"; /* æ ‡é¢˜*/
    private String context = "æµ‹è¯•é‚®ä»¶æ­£æ–‡å†…å®¹"; /* æ­£æ–‡*/

    @Override
    public void sendMail() {

        SimpleMailMessage message = new SimpleMailMessage();

        /* æ›¿ä»£å‘é€è€…çš„é‚®ç®±è´¦å·ï¼Œæ¥æ”¶è€…ä¿¡æ¯æœ‰å…·ä½“çš„ä¿¡æ¯*/
        message.setFrom(from+"(å¥½å‹:å¼ ä¼Ÿ)");
        message.setTo(to);
        message.setSubject(subject);
        message.setText(context);

        javaMailSender.send(message);

    }
}<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="pom.xml-5"><pre class="line-numbers language-none"><code class="language-none">package top.wabisabifag.service.impl;

import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.mail.SimpleMailMessage;
import org.springframework.mail.javamail.JavaMailSender;
import org.springframework.mail.javamail.MimeMailMessage;
import org.springframework.mail.javamail.MimeMessageHelper;
import org.springframework.stereotype.Service;
import top.wabisabifag.service.SendMailService;

import java.io.File;

@Service
public class SendMaillServiceImpl implements SendMailService {

    @Autowired
    private JavaMailSender javaMailSender;

    private String from = "12345678@qq.com"; /* å‘é€äºº*/
    private String to = "12345678@126.com"; /* æ¥æ”¶äºº*/
    private String subject = "æµ‹è¯•é‚®ä»¶"; /* æ ‡é¢˜*/
    private String context = "&lt;a href='http://www.wabisabifag.top'&gt;æµ‹è¯•é‚®ä»¶æ­£æ–‡å†…å®¹&lt;/a&gt;"; /* æ­£æ–‡*/

    @Override
    public void sendMail() {
        try{

            MimeMessage message = javaMailSender.createMimeMessage();

            /* 1.æ·»åŠ é™„ä»¶åŠŸèƒ½: true*/
            MimeMessageHelper helper = new MimeMessageHelper(message,true);
            helper.setFrom(from+"(å¥½å‹:å¼ ä¼Ÿ)");
            helper.setTo(to);
            helper.setSubject(subject);

            /* 4.æ–‡æ¡£å†…å®¹æ”¯æŒ HTML æ ¼å¼*/
            helper.setText(context,true);

            /* 2.æ·»åŠ  é™„ä»¶*/
            File file = new File("D:\\wabisabifag.jar");
            File file2 = new File("D:\\å­¦ä¹ èµ„æ–™.zip");

            /* 3.é™„ä»¶åä¿®æ”¹æ–¹å¼*/
            helper.addAttachment(file.getName(),file);
            helper.addAttachment("å‘ç»™å¼ æ€»çš„ç´ æ.zip",file2);

            javaMailSender.send(message);

        }catch (Exception e){
            e.printStackTrace();
        }
    }
}
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div>



<h4 id="3-æ¶ˆæ¯"><a href="#3-æ¶ˆæ¯" class="headerlink" title="3. æ¶ˆæ¯"></a>3. æ¶ˆæ¯</h4><ul>
<li>ç”Ÿäº§è€… æ¶ˆè´¹è€…</li>
<li>æ¶ˆæ¯é˜Ÿåˆ—<ul>
<li>æµè§ˆå™¨ ===&gt;&gt; ä¸šåŠ¡ç³»ç»Ÿ ===&gt;&gt; MQ ===&gt;&gt; å­ä¸šåŠ¡ç³»ç»Ÿ</li>
</ul>
</li>
</ul>
<h5 id="1-åŒæ­¥æ¶ˆæ¯"><a href="#1-åŒæ­¥æ¶ˆæ¯" class="headerlink" title="1. åŒæ­¥æ¶ˆæ¯"></a>1. åŒæ­¥æ¶ˆæ¯</h5><h5 id="2-å¼‚æ­¥æ¶ˆæ¯"><a href="#2-å¼‚æ­¥æ¶ˆæ¯" class="headerlink" title="2. å¼‚æ­¥æ¶ˆæ¯"></a>2. å¼‚æ­¥æ¶ˆæ¯</h5><h6 id="1-JMS"><a href="#1-JMS" class="headerlink" title="1. JMS"></a>1. JMS</h6><p>JMS(Java Message Service): ä¸€ä¸ªè§„èŒƒï¼Œç­‰åŒäºJDBC è§„èŒƒï¼Œæä¾›æ¶ˆæ¯æœåŠ¡çš„APIæ¥å£</p>
<ol>
<li><p>JMS æ¶ˆæ¯æ¨¡å‹</p>
<ul>
<li>peer-2-peer: ç‚¹å¯¹ç‚¹æ¨¡å‹ï¼Œæ¶ˆæ¯å‘é€åˆ°ä¸€ä¸ªé˜Ÿåˆ—ä¸­ï¼Œé˜Ÿåˆ—ä¿å­˜æ¶ˆæ¯åªèƒ½è¢«ä¸€ä¸ªæ¶ˆè´¹è€…æ¶ˆè´¹ï¼Œæˆ–è¶…æ—¶</li>
<li>publish-subscribe: å‘å¸ƒè®¢é˜…æ¨¡å‹ï¼Œæ¶ˆæ¯è¢«å¤šæ¶ˆè´¹è€…æ¶ˆè´¹ï¼Œç”Ÿäº§è€…å’Œæ¶ˆè´¹è€…å®Œå…¨ç‹¬ç«‹</li>
</ul>
</li>
<li><p>JMS æ¶ˆæ¯ç§ç±»</p>
<ul>
<li>TextMessage</li>
<li>MapMessage</li>
<li>BytesMessage (ä¸»è¦ä½¿ç”¨)</li>
<li>StreamMessage</li>
<li>ObjectMessage</li>
<li>Message (åªæœ‰æ¶ˆæ¯å’Œå±æ€§)</li>
</ul>
</li>
<li><p>JMS å®ç°:</p>
<ul>
<li>ActiveMQ</li>
<li>Redis</li>
<li>HornetMQ</li>
<li>RabbitMQ</li>
</ul>
</li>
</ol>
<h6 id="2-AMQP"><a href="#2-AMQP" class="headerlink" title="2. AMQP"></a>2. AMQP</h6><p>AMQP(advanced message queuing protocol): ä¸€ç§åè®®(é«˜çº§æ¶ˆæ¯é˜Ÿåˆ—åè®®ï¼Œæ¶ˆæ¯ä»£ç†è§„èŒƒ)ã€‚ä¼šçŠ¯ç½‘ç»œäº¤æ¢çš„æ•°æ®æ ¼å¼ï¼Œå…¼å®¹JMS</p>
<ul>
<li>ç‰¹æ€§<ul>
<li>è·¨å¹³å°å’Œè¯­è¨€</li>
<li>æœåŠ¡å™¨ä¾›åº”å•†</li>
<li>ç”Ÿäº§è€…</li>
</ul>
</li>
</ul>
<ol>
<li><p>AMQP æ¶ˆæ¯æ¨¡å‹</p>
<ul>
<li>direct exchange</li>
<li>fanout exchange</li>
<li>topic exchange (ä¸»è¦)</li>
<li>headers exchange</li>
<li>system exchange</li>
</ul>
</li>
<li><p>AMQP æ¶ˆæ¯ç§ç±»</p>
<ul>
<li>byte[]</li>
</ul>
</li>
<li><p>AMQP å®ç°:</p>
<ul>
<li>RabbitMQ</li>
<li>StormMQ</li>
<li>RockeMQ</li>
</ul>
</li>
</ol>
<h6 id="3-MQTT"><a href="#3-MQTT" class="headerlink" title="3. MQTT"></a>3. MQTT</h6><p>MQTT(Message Queueing Telemetry Transport) æ¶ˆæ¯é˜Ÿåˆ—é¥æµ‹ä¼ è¾“ï¼Œä¸“ä¸ºå°è®¾å¤‡è®¾è®¡ï¼Œç‰©è”ç½‘(IOT)ç”Ÿæ€ç³»ç»Ÿä¸»è¦æˆåˆ†ä¹‹ä¸€</p>
<h6 id="4-Kafka"><a href="#4-Kafka" class="headerlink" title="4. Kafka"></a>4. Kafka</h6><p>Kafka ä¸€ç§é«˜ååé‡çš„åˆ†å¸ƒå¼å‘å¸ƒè®¢é˜…æ¶ˆæ¯ç³»ç»Ÿï¼Œæä¾›å®æ—¶æ¶ˆæ¯åŠŸèƒ½</p>
<h5 id="3-æ¶ˆæ¯æ¡ˆä¾‹-â€”-æ¨¡æ‹Ÿè®¢å•çŸ­ä¿¡é€šçŸ¥"><a href="#3-æ¶ˆæ¯æ¡ˆä¾‹-â€”-æ¨¡æ‹Ÿè®¢å•çŸ­ä¿¡é€šçŸ¥" class="headerlink" title="3. æ¶ˆæ¯æ¡ˆä¾‹ â€” æ¨¡æ‹Ÿè®¢å•çŸ­ä¿¡é€šçŸ¥"></a>3. æ¶ˆæ¯æ¡ˆä¾‹ â€” æ¨¡æ‹Ÿè®¢å•çŸ­ä¿¡é€šçŸ¥</h5><div class="tabs" id="orderserviceimpl.java"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#orderserviceimpl.java-1">OrderServiceImpl.java</button></li><li class="tab"><button type="button" data-href="#orderserviceimpl.java-2">MessageServiceImpl.java</button></li><li class="tab"><button type="button" data-href="#orderserviceimpl.java-3">OrderController.java</button></li><li class="tab"><button type="button" data-href="#orderserviceimpl.java-4">MessageController.java</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="orderserviceimpl.java-1"><pre class="line-numbers language-none"><code class="language-none">package top.wabisabifag.service.impl;

import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.stereotype.Service;
import top.wabisabifag.service.MessageService;
import top.wabisabifag.service.OrderService;
@Service
public class OrderServiceImpl implements OrderService {

    @Autowired
    private MessageService messageService;

    @Override
    public void order(String id) {
        /* æœåŠ¡è°ƒç”¨ å¤„ç†å„ç§ä¸šåŠ¡*/
        System.out.println("è®¢å•å¤„ç†å¤„ç†ä¸­ã€‚ã€‚ã€‚");
        /* çŸ­ä¿¡æ¶ˆæ¯å¤„ç†*/
        messageService.sendMessage(id);

        System.out.println("è®¢å•å¤„ç†å®Œæˆ");
    }
}<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="orderserviceimpl.java-2"><pre class="line-numbers language-none"><code class="language-none">package top.wabisabifag.service.impl;

import org.springframework.stereotype.Service;
import top.wabisabifag.service.MessageService;

import java.util.ArrayList;

@Service
public class MessageServiceImpl implements MessageService {
    private ArrayList&lt;String&gt; msgList = new ArrayList&lt;&gt;();

    @Override
    public void sendMessage(String id) {
        System.out.println("å¾…å‘é€çŸ­ä¿¡çš„è®¢å•å·²çº³å…¥å¤„ç†é˜Ÿåˆ—: id"+id);
        msgList.add(id);
    }

    @Override
    public String doMessage() {
        String id = msgList.remove(0);
        System.out.println("å·²å®ŒæˆçŸ­ä¿¡å‘é€ä¸šåŠ¡ï¼šid"+id);
        return null;
    }
}<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="orderserviceimpl.java-3"><pre class="line-numbers language-none"><code class="language-none">package top.wabisabifag.controller;

import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.web.bind.annotation.PathVariable;
import org.springframework.web.bind.annotation.PostMapping;
import org.springframework.web.bind.annotation.RequestMapping;
import org.springframework.web.bind.annotation.RestController;
import top.wabisabifag.service.OrderService;

@RestController
@RequestMapping("/orders")
public class OrderController {

    @Autowired
    private OrderService orderService;

    @PostMapping("{id}")
    public void Order(@PathVariable String id){
        orderService.order(id);
    }
}<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="orderserviceimpl.java-4"><pre class="line-numbers language-none"><code class="language-none">package top.wabisabifag.controller;

import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.web.bind.annotation.GetMapping;
import org.springframework.web.bind.annotation.RequestMapping;
import org.springframework.web.bind.annotation.RestController;
import top.wabisabifag.service.MessageService;

@RestController
@RequestMapping("/msg")
public class MessageController {
    @Autowired
    private MessageService messageService;

    @GetMapping
    public String doMessage(){
        String id = messageService.doMessage();
        return id;
    }
}<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div>


<h6 id="1-ActiveMQ"><a href="#1-ActiveMQ" class="headerlink" title="1. ActiveMQ"></a>1. ActiveMQ</h6><ol>
<li><p><a target="_blank" rel="noopener external nofollow noreferrer" href="https://activemq.apache.org/components/classic/download/">ActiveMQ ä¸‹è½½åœ°å€</a></p>
</li>
<li><p>å®‰è£…è¿è¡Œ</p>
</li>
</ol>
<ul>
<li>æ‰¹å¤„ç†è¿è¡Œ: ../bin/win64/activemq.bat </li>
<li>å®‰è£…: ../bin/win64/InstallService.bat</li>
<li>åå°ç®¡ç†ç•Œé¢: 127.0.0.1:8161/   (password: admin)</li>
<li>æœåŠ¡ç«¯å£: 127.0.0.1:61616/</li>
</ul>
<ol start="3">
<li>Spring æ•´åˆ ActiveMQ</li>
</ol>
<div class="tabs" id="pom.xml"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#pom.xml-1">pom.xml</button></li><li class="tab"><button type="button" data-href="#pom.xml-2">application.yml</button></li><li class="tab"><button type="button" data-href="#pom.xml-3">MessageServiceActivemqImpl.java</button></li><li class="tab"><button type="button" data-href="#pom.xml-4">ç›‘å¬æ¶ˆè´¹</button></li><li class="tab"><button type="button" data-href="#pom.xml-5">ä¼ é€’é˜Ÿåˆ—æ¶ˆæ¯</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="pom.xml-1"><pre class="line-numbers language-none"><code class="language-none">&lt;!--ActiveMQ æ•´åˆ--&gt;
    &lt;dependency&gt;
      &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
      &lt;artifactId&gt;spring-boot-starter-activemq&lt;/artifactId&gt;
    &lt;/dependency&gt;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="pom.xml-2"><pre class="line-numbers language-none"><code class="language-none">spring:
  # ActiveMQ æ¶ˆæ¯
  activemq:
    broker-url: top://localhost:61616
  jms:
    # å‘å¸ƒè®¢é˜…æ¨¡å‹ï¼štrue ç‚¹å¯¹ç‚¹æ¨¡å‹ï¼šfalse 
    pub-sub-domain: true
    template:
    default-destination: wabisabifag<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="pom.xml-3"><pre class="line-numbers language-none"><code class="language-none">package top.wabisabifag.service.impl.activemq;

import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.stereotype.Service;
import top.wabisabifag.service.MessageService;
@Service
public class MessageServiceActivemqImpl implements MessageService {

    @Autowired
    private JmsMessagingTemplate messagingTemplate;

    @Override
    public void sendMessage(String id) {
        System.out.println("å¾…å‘é€çŸ­ä¿¡çš„è®¢å•å·²çº³å…¥å¤„ç†é˜Ÿåˆ—: id"+id);
        /* è®¾ç½®é˜Ÿåˆ—åå­— */
        messagingTemplate.convertAndSend("order.queu.id",id);
    }

    @Override
    public String doMessage() {
        String id = messagingTemplate.receiveAndConvert(String.class);
        System.out.println("å·²å®ŒæˆçŸ­ä¿¡å‘é€ä¸šåŠ¡ï¼šid"+id);
        return null;
    }
}<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="pom.xml-4"><pre class="line-numbers language-none"><code class="language-none">package top.wabisabifag.service.impl.activemq.listener;

import org.springframework.stereotype.Component;

@Component
public class MessageListener {
    @JsmListener(destination = "order.queue.id")
    public void recevi(String id){
        System.out.println("å·²å®ŒæˆçŸ­ä¿¡å‘é€ä¸šåŠ¡ï¼šid"+id);
    }
}<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="pom.xml-5"><pre class="line-numbers language-none"><code class="language-none">package top.wabisabifag.service.impl.activemq.listener;

import org.springframework.stereotype.Component;

@Component
public class MessageListener {
    @JsmListener(destination = "order.queue.id")
    @SendTo("order.other.queue.id")
    public String recevi(String id){
        System.out.println("å·²å®ŒæˆçŸ­ä¿¡å‘é€ä¸šåŠ¡ï¼šid"+id);
        return "new:"+ id;
    }
}<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div>



<h6 id="2-RabbitMQ"><a href="#2-RabbitMQ" class="headerlink" title="2. RabbitMQ"></a>2. RabbitMQ</h6><ol>
<li><a target="_blank" rel="noopener external nofollow noreferrer" href="https://rabbitmq.com/install-windows.html">RabbitMQ </a>åŸºäºErlang è¯­è¨€ç¼–å†™ï¼Œéœ€è¦å®‰è£… <a target="_blank" rel="noopener external nofollow noreferrer" href="https://www.erlang.org.downloads/">Erlang</a> å¹¶é‡å¯ç”µè„‘</li>
<li>é…ç½®ç¯å¢ƒ ERLANG_HOME</li>
<li>ç®¡ç†å‘˜æƒé™ ..\bin\rabbitmq-service.bat start</li>
<li>æ’ä»¶</li>
</ol>
<ul>
<li>æŸ¥çœ‹ rabbitmq-plugins.bat list </li>
<li>å¼€å¯ rabbitmq-plugins.bat enable rabbitmq_management</li>
</ul>
<ol start="5">
<li>è®¿é—®æœåŠ¡</li>
</ol>
<ul>
<li>ç®¡ç†åå°ç«¯å£ localhost:156772  (password: guest)</li>
<li>æœåŠ¡ç«¯å£ localhost:5672</li>
</ul>
<ol start="6">
<li>direct exchange ç›´è¿äº¤æ¢æœº(æ¶ˆæ¯æ¨¡å‹)</li>
</ol>
<div class="tabs" id="pom.xml"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#pom.xml-1">pom.xml</button></li><li class="tab"><button type="button" data-href="#pom.xml-2">application.yml</button></li><li class="tab"><button type="button" data-href="#pom.xml-3">å®šä¹‰æ¶ˆæ¯é˜Ÿåˆ—</button></li><li class="tab"><button type="button" data-href="#pom.xml-4">ç”Ÿäº§ä¸æ¶ˆè´¹æ¶ˆæ¯</button></li><li class="tab"><button type="button" data-href="#pom.xml-5">æ¶ˆæ¯ç›‘å¬å™¨</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="pom.xml-1"><pre class="line-numbers language-<!--RabbitMQ" data-language="<!--RabbitMQ"><div class="caption"><span>direct exchange (æ¶ˆæ¯æ¨¡å‹)--&gt;</span></div><code class="language-<!--RabbitMQ">&lt;dependency&gt;
  &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
  &lt;artifactId&gt;spring-boot-starter-amqp&lt;/artifactId&gt;
&lt;/dependency&gt;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="pom.xml-2"><pre class="line-numbers language-none"><code class="language-none">spring:
    # RabbitMQ
    rabbitmq:
      host: localhost
      # æœåŠ¡ç«¯å£       ç®¡ç†ï¼š15672
      port: 5672<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="pom.xml-3"><pre class="line-numbers language-none"><code class="language-none">package top.wabisabifag.service.impl.rabbitmq.direct.config;

import org.elasticsearch.common.inject.internal.BindingBuilder;
import org.springframework.context.annotation.Bean;
import org.springframework.context.annotation.Configuration;

import javax.naming.Binding;
import java.util.Queue;

@Configuration
public class RabbitConfigDirect {
    @Bean       /* æ¶ˆæ¯é˜Ÿåˆ—*/
    public Queue directQueue(){
                /*  1.æ˜¯å¦æŒä¹…åŒ–  2.å½“å‰æ¶ˆæ¯é˜Ÿåˆ—æ˜¯å¦è¿æ¥ä¸“ç”¨  3.æ˜¯å¦åˆ é™¤*/
        return new Queue("direct_queue",true,false,false);
    }

    @Bean       /* æ¶ˆæ¯é˜Ÿåˆ—*/
    public Queue directQueue2(){
        return new Queue("direct_queue2");
    }
    @Bean       /* äº¤æ¢æœº*/
    public DirectExchange directExchange(){
        return new DirectExchange("directExchange");
    }

    @Bean       /* ç»‘å®šæ¶ˆæ¯é˜Ÿåˆ—å’Œäº¤æ¢æœº*/
    public Binding bindingDirect(){
        return BindingBuilder.bind(directQueue()).to(directExchange()).with("direct");
    }

    @Bean       /* ç»‘å®šæ¶ˆæ¯é˜Ÿåˆ—å’Œäº¤æ¢æœº*/
    public Binding bindingDirect2(){
        return BindingBuilder.bind(directQueue2()).to(directExchange()).with("direct2");
    }
}<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="pom.xml-4"><pre class="line-numbers language-none"><code class="language-none">package top.wabisabifag.service.impl.rabbitmq.direct;

import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.stereotype.Service;
import top.wabisabifag.service.MessageService;
@Service
public class MessageServiceRabbitmqDirectImpl implements MessageService {

    @Autowired
    private  AmqpTemplate amqpTemplate;

    @Override
    public void sendMessage(String id) {
        System.out.println("å¾…å‘é€çŸ­ä¿¡çš„è®¢å•å·²çº³å…¥å¤„ç†é˜Ÿåˆ—(rabbitmq direct)ï¼šid"+id);
        /* æ˜ç¡®æ¶ˆæ¯æ¨¡å‹*/
        amqpTemplate.convertAndSend("directExchange","direct",id);
    }

    @Override
    public String doMessage() {
        return null;
    }
}<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="pom.xml-5"><pre class="line-numbers language-none"><code class="language-none">package top.wabisabifag.service.impl.rabbitmq.direct.listener;

import org.springframework.stereotype.Component;

@Component
public class MessageListener {
    @RabbitListener(queue="direct_queue")
    public void recive(String id){
        System.out.println("å¾…å‘é€çŸ­ä¿¡çš„è®¢å•å·²çº³å…¥å¤„ç†é˜Ÿåˆ—(rabbitmq direct)ï¼šid"+id);
    }
}<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div>



<ol start="7">
<li>topic exchange  ä¸»é¢˜äº¤æ¢æœº(æ¶ˆæ¯æ¨¡å‹)</li>
</ol>
<div class="tabs" id="rabbitconfigtopic.java"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#rabbitconfigtopic.java-1">RabbitConfigTopic.java</button></li><li class="tab"><button type="button" data-href="#rabbitconfigtopic.java-2">MessageListener.java</button></li><li class="tab"><button type="button" data-href="#rabbitconfigtopic.java-3">MessageServiceRabbitmqTopicImpl.java</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="rabbitconfigtopic.java-1"><pre class="line-numbers language-none"><code class="language-none">package top.wabisabifag.service.impl.rabbitmq.topic.config;

import org.elasticsearch.common.inject.internal.BindingBuilder;
import org.springframework.context.annotation.Bean;
import org.springframework.context.annotation.Configuration;

import javax.naming.Binding;
import java.util.Queue;

@Configuration
public class RabbitConfigTopic {
    @Bean       /* æ¶ˆæ¯é˜Ÿåˆ—*/
    public Queue topicQueue(){
                /*  1.æ˜¯å¦æŒä¹…åŒ–  2.å½“å‰æ¶ˆæ¯é˜Ÿåˆ—æ˜¯å¦è¿æ¥ä¸“ç”¨  3.æ˜¯å¦åˆ é™¤*/
        return new Queue("topic_queue",true,false,false);
    }

    @Bean       /* æ¶ˆæ¯é˜Ÿåˆ—*/
    public Queue topictQueue2(){
        return new Queue("topic_queue2");
    }
    @Bean       /* äº¤æ¢æœº*/
    public TopicExchange topicExchange(){
        return new TopicExchange("topicExchange");
    }

    /* ä¸€æ¬¡é˜Ÿåˆ—æ¶ˆæ¯å¤šæ¬¡åŒ¹é…*/

    @Bean       /* ç»‘å®šæ¶ˆæ¯é˜Ÿåˆ—å’Œäº¤æ¢æœº*/
    public Binding bindingTopic(){
        return BindingBuilder.bind(topicQueue()).to(topicExchange()).with("topic.*.id");
    }

    @Bean       /* ç»‘å®šæ¶ˆæ¯é˜Ÿåˆ—å’Œäº¤æ¢æœº*/
    public Binding bindingTopic2(){
        return BindingBuilder.bind(topicQueue2()).to(topicExchange()).with("topic.order.*");
    }
}<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="rabbitconfigtopic.java-2"><pre class="line-numbers language-none"><code class="language-none">package top.wabisabifag.service.impl.rabbitmq.topic.listener;

import org.springframework.stereotype.Component;

@Component
public class MessageListener {
    @RabbitListener(queue="topic_queue")
    public void recive(String id){
        System.out.println("å¾…å‘é€çŸ­ä¿¡çš„è®¢å•å·²çº³å…¥å¤„ç†é˜Ÿåˆ—(rabbitmq direct)ï¼šid"+id);
    }
}<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="rabbitconfigtopic.java-3"><pre class="line-numbers language-none"><code class="language-none">package top.wabisabifag.service.impl.rabbitmq.topic;

import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.stereotype.Service;
import top.wabisabifag.service.MessageService;
@Service
public class MessageServiceRabbitmqTopicImpl implements MessageService {

    @Autowired
    private  AmqpTemplate amqpTemplate;

    @Override
    public void sendMessage(String id) {
        System.out.println("å¾…å‘é€çŸ­ä¿¡çš„è®¢å•å·²çº³å…¥å¤„ç†é˜Ÿåˆ—(rabbitmq topic)ï¼šid"+id);
        /* æ˜ç¡®æ¶ˆæ¯æ¨¡å‹*/                              /*topic exchange çš„ç‰¹ç‚¹*/
        /* ä¸€æ¬¡é˜Ÿåˆ—æ¶ˆæ¯å¤šæ¬¡åŒ¹é…*/
        amqpTemplate.convertAndSend("topicExchange","topic.order.id",id);
    }

    @Override
    public String doMessage() {
        return null;
    }
}<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div>


<ul>
<li>ç‰¹æ€§: ä¸€ä¸ªç”Ÿäº§è€…ï¼Œå¯äº§ç”Ÿå¤šä¸ªæ¶ˆæ¯é˜Ÿåˆ—ï¼Œç„¶åæ¶ˆè´¹è€…é€šè¿‡routingkeyå»åŒ¹é…ç”Ÿäº§è€…çš„routingkey</li>
<li>ç»‘å®šé”®åŒ¹é…è§„åˆ™<br><img src="/../JavaEE/4.png" alt="ç»‘å®šé”®åŒ¹é…è§„åˆ™"></li>
</ul>
<h6 id="3-RocketMQ"><a href="#3-RocketMQ" class="headerlink" title="3. RocketMQ"></a>3. RocketMQ</h6><ol>
<li><a target="_blank" rel="noopener external nofollow noreferrer" href="https://rocketmq.apache.org/">RocketMQ ä¸‹è½½åœ°å€</a></li>
<li>ç¯å¢ƒé…ç½®</li>
</ol>
<ul>
<li>ROCKETMQ_HOME</li>
<li>PATH</li>
<li>NAMESRV_ADDR</li>
</ul>
<ol start="3">
<li>è®¿é—®æœåŠ¡</li>
</ol>
<ul>
<li>æœåŠ¡ç«¯å£: 9876</li>
<li>ç®¡ç†ç«¯å£: 127.0.0.1:9876</li>
</ul>
<ol start="4">
<li>å¯åŠ¨æœåŠ¡å™¨</li>
</ol>
<ul>
<li>mqnamesrv.cmd</li>
<li>mqbroker.cmd</li>
</ul>
<ol start="5">
<li>RocketMq æ•´åˆ</li>
</ol>
<div class="tabs" id="pom.xml"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#pom.xml-1">pom.xml</button></li><li class="tab"><button type="button" data-href="#pom.xml-2">application.yml</button></li><li class="tab"><button type="button" data-href="#pom.xml-3">MessageServiceRocketmqImpl.java</button></li><li class="tab"><button type="button" data-href="#pom.xml-4">MessageListener.java</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="pom.xml-1"><pre class="line-numbers language-none"><code class="language-none">&lt;!--rocketmq--&gt;
   &lt;dependency&gt;
     &lt;groupId&gt;org.apache.rocketmq&lt;/groupId&gt;
     &lt;artifactId&gt;rockemq-spring-boot-starter&lt;/artifactId&gt;
     &lt;version&gt;2.2.1&lt;/version&gt;
   &lt;/dependency&gt;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="pom.xml-2"><pre class="line-numbers language-none"><code class="language-none"># rocketmq æ¶ˆæ¯
rocketmq:
  name-server: localhost:9876
  # é»˜è®¤çš„ç”Ÿäº§è€…æ‰€å±ç»„
  producer:
    group: group_rocketmq<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="pom.xml-3"><pre class="line-numbers language-none"><code class="language-none">package top.wabisabifag.service.impl.rocketmq;

import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.stereotype.Service;
import top.wabisabifag.service.MessageService;

@Service
public class MessageServiceRocketmqImpl implements MessageService {

    @Autowired
    private RocketMQTemplate rocketMQTemplate;

    @Override
    public void sendMessage(String id) {
        System.out.println("å¾…å‘é€çŸ­ä¿¡çš„è®¢å•å·²çº³å…¥å¤„ç†é˜Ÿåˆ—(rabbitmq topic)ï¼šid"+id);
         //rocketMQTemplate.convertAndSend("order_id",id);
         
        /* å¼‚æ­¥å‘é€æ¶ˆæ¯é˜Ÿåˆ—*/
        SendCallback callback = new SendCallback(){
            @Override
            public void onSuccess(SendResult sendResult){
                System.out.println("æ¶ˆæ¯å‘é€æˆåŠŸ");
            }
            @Override
            public void onException(Throwable e){
                System.out.println("æ¶ˆæ¯å‘é€å¤±è´¥");
            }
        };
        rocketMQTemplate.convertAndSend("order_id",id);
    }

    @Override
    public String doMessage() {
        return null;
    }
}<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="pom.xml-4"><pre class="line-numbers language-none"><code class="language-none">package top.wabisabifag.service.impl.rocketmq.listener;

import org.springframework.stereotype.Component;

@Component
@RocketMQMessageListener(topic = "order_id",consumerGroup = "group_rocketmq")
public class MessageListener implements RocketMqListener{
    @Override
    public void onMessage(String id){
        System.out.println("å¾…å‘é€çŸ­ä¿¡çš„è®¢å•å·²çº³å…¥å¤„ç†é˜Ÿåˆ—(roketmq)ï¼šid"+id);
    }
}<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div>`


<h6 id="4-Kafka-1"><a href="#4-Kafka-1" class="headerlink" title="4. Kafka"></a>4. Kafka</h6><ol>
<li><a target="_blank" rel="noopener external nofollow noreferrer" href="https://kafka.apache.org/downloads">Kafka</a></li>
<li>å®‰è£…è¿è¡Œ</li>
</ol>
<ul>
<li>å¯åŠ¨zookeeper æ³¨å†Œå™¨(é»˜è®¤ç«¯å£:2181): zookeeper-server-start.bat ....\config\zookeeper.properties</li>
<li>å¯åŠ¨kafka (é»˜è®¤ç«¯å£:9092): kafka-server-start.bat ....\config\server.properties</li>
<li>åˆ›å»ºtopic: kafka-topic.bat â€“create â€“zookeeper localhost:2181 â€“replication-factor 1 â€“partition 1 â€“topic wabisabifag</li>
<li>æŸ¥çœ‹topic: kafka-topics.bat â€“zookeeper 127.0.0.1:2181 â€“list</li>
<li>åˆ é™¤topic: kafka-topics.bat â€“delete â€“zookeeper localhost:2181 â€“topic wabisabifag</li>
<li>ç”Ÿäº§è€…åŠŸèƒ½æµ‹è¯•: kafka-console-producer.bat â€“broker-list localhost:9092 â€“topic wabisabifag</li>
<li>æ¶ˆè´¹è€…åŠŸèƒ½æµ‹è¯•: kafka-console-consumer.bat â€“bootstrap-server localhost:9092 â€“topic wabisabifag â€“from-beginning</li>
</ul>
<ol start="3">
<li>Kafka æ•´åˆ</li>
</ol>
<div class="tabs" id=""><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#-1">pom.xml</button></li><li class="tab"><button type="button" data-href="#-2">application.yml</button></li><li class="tab"><button type="button" data-href="#-3">MessageServiceKafkaImpl.java</button></li><li class="tab"><button type="button" data-href="#-4">4</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="-1"><pre class="line-numbers language-none"><code class="language-none">&lt;!--Kafka--&gt;
    &lt;dependency&gt;
      &lt;groupId&gt;org.springframework.kafka&lt;/groupId&gt;
      &lt;artifactId&gt;spring-kafka&lt;/artifactId&gt;
    &lt;/dependency&gt;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="-2"><pre class="line-numbers language-none"><code class="language-none">spring:
  # Kafka
  kafka:
    bootstrap-servers: localhost:9092
    consumer:
      group-id: order<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="-3"><pre class="line-numbers language-none"><code class="language-none">package top.wabisabifag.service.impl.kafka;

import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.stereotype.Service;
import top.wabisabifag.service.MessageService;
@Service
public class MessageServiceKafkaImpl implements MessageService {

    @Autowired
    private KafkaTemplate&lt;String,String&gt; kafkaTemplate;

    @Override
    public void sendMessage(String id) {
        System.out.println("å¾…å‘é€çŸ­ä¿¡çš„è®¢å•å·²çº³å…¥å¤„ç†é˜Ÿåˆ—(Kafka)ï¼šid"+id);
        kafkaTemplate.send("wabisabifag",id);
    }

    @Override
    public String doMessage() {
        return null;
    }
}<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="-4"><pre class="line-numbers language-none"><code class="language-none">package top.wabisabifag.service.impl.kafka.Listener;

import org.springframework.stereotype.Component;

@Component
public class MessageListener {

    // ç›‘å¬ æ¶ˆè´¹æœ‰é¡µé¢å­˜å…¥ kafka çš„ç¼“å­˜æ•°æ®
    @KafkaListener(topics={"wabisabifag"})
    public void onMessage(ConsumerRecord&lt;String,String&gt; record){
        System.out.println("å¾…å‘é€çŸ­ä¿¡çš„è®¢å•å·²çº³å…¥å¤„ç†é˜Ÿåˆ—(Kafka)ï¼šid"+record.value());
    }
}<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div>


<h4 id="4-ç›‘æ§"><a href="#4-ç›‘æ§" class="headerlink" title="4. ç›‘æ§"></a>4. ç›‘æ§</h4><h5 id="1-ç›‘æ§çš„æ„ä¹‰"><a href="#1-ç›‘æ§çš„æ„ä¹‰" class="headerlink" title="1. ç›‘æ§çš„æ„ä¹‰"></a>1. ç›‘æ§çš„æ„ä¹‰</h5><ul>
<li>ç›‘æ§æœåŠ¡çŠ¶æ€æ˜¯å¦å®•æœº</li>
<li>ç›‘æ§æœåŠ¡è¿è¡ŒæŒ‡æ ‡(å†…å­˜ï¼Œè™šæ‹Ÿæœºï¼Œçº¿ç¨‹ï¼Œè¯·æ±‚ç­‰)</li>
<li>ç›‘æ§æ—¥å¿—</li>
<li>ç®¡ç†æœåŠ¡</li>
</ul>
<h6 id="1-ç›‘æ§çš„å®æ–½æ–¹å¼"><a href="#1-ç›‘æ§çš„å®æ–½æ–¹å¼" class="headerlink" title="1. ç›‘æ§çš„å®æ–½æ–¹å¼"></a>1. ç›‘æ§çš„å®æ–½æ–¹å¼</h6><ul>
<li>æ˜¾ç¤ºç›‘æ§ä¿¡æ¯çš„æœåŠ¡å™¨: ç”¨äºè·å–æœåŠ¡ä¿¡æ¯ï¼Œå¹¶æ˜¾ç¤ºå¯¹åº”çš„ä¿¡æ¯</li>
<li>è¿è¡Œçš„æœåŠ¡: å¯åŠ¨æ—¶ï¼Œä¸»åŠ¨ä¸ŠæŠ¥ã€‚å‘ŠçŸ¥ç›‘æ§æœåŠ¡å™¨è‡ªå·±éœ€è¦å—åˆ°ç›‘æ§</li>
</ul>
<h5 id="2-å¯è§†åŒ–ç›‘æ§å¹³å°"><a href="#2-å¯è§†åŒ–ç›‘æ§å¹³å°" class="headerlink" title="2. å¯è§†åŒ–ç›‘æ§å¹³å°"></a>2. å¯è§†åŒ–ç›‘æ§å¹³å°</h5><ol>
<li>Java æä¾›ä¸€ä¸ªjmxæ–¹å¼è·å–çš„ç›‘æ§å¹³å°:cmdå‘½ä»¤è¡Œ è¾“å…¥: jconsole</li>
<li>ä¹Ÿå¯ä»¥é€šè¿‡ http çš„ web ç¨‹åºè·å–</li>
</ol>
<h6 id="1-SpringBoot-Admin"><a href="#1-SpringBoot-Admin" class="headerlink" title="1. SpringBoot Admin"></a>1. SpringBoot Admin</h6><p><a target="_blank" rel="noopener external nofollow noreferrer" href="https://consolelog.gitee.io/docs-spring-boot-admin-docs-chinese/">SpringBoot Admin æ–‡æ¡£</a> ç›‘æ§ç®¡ç†SpringBoot åº”ç”¨ç¨‹åºã€‚å®¢æœç«¯æ³¨å†Œåˆ°æœåŠ¡ç«¯åï¼Œé€šè¿‡ HTTP è¯·æ±‚æ–¹å¼ï¼ŒæœåŠ¡ç«¯å®šæœŸä»å®¢æœç«¯è·å–å¯¹åº”ä¿¡æ¯ï¼Œé€šè¿‡UIç•Œé¢æˆ˜å£«å¯¹åº”ä¿¡æ¯</p>
<div class="tabs" id="pom.xml"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#pom.xml-1">pom.xml</button></li><li class="tab"><button type="button" data-href="#pom.xml-2">application.yml</button></li><li class="tab"><button type="button" data-href="#pom.xml-3">application.java</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="pom.xml-1"><pre class="line-numbers language-none"><code class="language-none">&lt;!--ç›‘æ§ æœåŠ¡ç«¯--&gt;
    &lt;dependency&gt;
      &lt;groupId&gt;de.codecentric&lt;/groupId&gt;
      &lt;artifactId&gt;spring-boot-admin-starter-server&lt;/artifactId&gt;
      &lt;!--å’ŒSpringBootç‰ˆæœ¬å¯¹åº”--&gt;
      &lt;version&gt;2.4.5&lt;/version&gt;
    &lt;/dependency&gt;

&lt;!--ç›‘æ§ å®¢æœç«¯--&gt;
    &lt;dependency&gt;
      &lt;groupId&gt;de.codecentric&lt;/groupId&gt;
      &lt;artifactId&gt;spring-boot-admin-starter-client&lt;/artifactId&gt;
      &lt;version&gt;2.4.5&lt;/version&gt;
    &lt;/dependency&gt;

    &lt;dependency&gt;
      &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
      &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;
    &lt;/dependency&gt;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="pom.xml-2"><pre class="line-numbers language-none"><code class="language-none"># å‘æœåŠ¡ç«¯ æäº¤ç›‘æ§
spring:
  boot:
    admin:
      client:
        url: http://localhost:8080
  management:
    # ç«¯ç‚¹åŠŸèƒ½çš„å¼€å…³æ§åˆ¶ 
    endpoint:
      # å¿…é¡»å¯¹å¤–å¼€æ”¾çš„
      health:
        show-details: always
      # ä¸å¯¹å¤–å±•ç¤º ç«¯å£
      info:
        enabled: false
    # ç«¯ç‚¹åŠŸèƒ½çš„æš´éœ²    
    endpoints:
      # åœ¨webé¡µé¢èƒ½è·å–çš„ç«¯å£
      web:
        exposure:
          include: "*"
      # å¯ç”¨æ‰€æœ‰ç«¯å£
      enabled-by-default: true<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="pom.xml-3"><pre class="line-numbers language-none"><code class="language-none">@SpringBootApplication
/* å¼€å¯ç›‘æ§*/
@EnableAdminServer
public class application {
    public static void main(String[] args) {
        // çº¿ç¨‹å®‰å…¨é—®é¢˜
        SpringApplication.run(application.class,args);
        // ä¸æ¥å—å¤–éƒ¨ä¸´æ—¶å‚æ•°
        SpringApplication.run(application.class);
    }
}<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div>

<h5 id="3-ç›‘æ§åŸç†"><a href="#3-ç›‘æ§åŸç†" class="headerlink" title="3. ç›‘æ§åŸç†"></a>3. ç›‘æ§åŸç†</h5><ul>
<li>Actuator æä¾›SpringBoot ç”Ÿäº§å°±ç»ªåŠŸèƒ½ï¼Œé€šè¿‡ç«¯ç‚¹çš„é…ç½®ä¸è®¿é—®è·å–ç«¯ç‚¹ä¿¡æ¯(spring-boot-admin-starter-client æä¾›spring-boot-admin-starter-actuator)</li>
<li>ç«¯ç‚¹æè¿°ä¸€ç»„ç›‘æ§ä¿¡æ¯ã€‚SpringBoot æä¾›å¤šä¸ªå†…ç½®ç«¯ç‚¹ï¼Œä¹Ÿå¯ä»¥æ ¹æ®éœ€è¦è‡ªå®šä¹‰ç«¯ç‚¹ä¿¡æ¯</li>
<li>è®¿é—®å½“å‰åº”ç”¨çš„æ‰€æœ‰ç«¯ç‚¹ä¿¡æ¯: /actuator</li>
<li>è®¿é—®ç«¯ç‚¹è¯¦ç»†ä¿¡æ¯: /actuator/ç«¯ç‚¹åç§°</li>
</ul>
<p><img src="/../JavaEE/5.png" alt="ç›‘æ§åŸç†1"><br><img src="/../JavaEE/6.png" alt="ç›‘æ§åŸç†2"><br><img src="/../JavaEE/7.png" alt="ç›‘æ§åŸç†3"></p>
<h5 id="4-è‡ªå®šä¹‰ç›‘æ§æŒ‡æ ‡"><a href="#4-è‡ªå®šä¹‰ç›‘æ§æŒ‡æ ‡" class="headerlink" title="4. è‡ªå®šä¹‰ç›‘æ§æŒ‡æ ‡"></a>4. è‡ªå®šä¹‰ç›‘æ§æŒ‡æ ‡</h5><ol>
<li><p>info ç«¯ç‚¹æŒ‡æ ‡æ§åˆ¶</p>
<div class="tabs" id="application.yml"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#application.yml-1">application.yml</button></li><li class="tab"><button type="button" data-href="#application.yml-2">é€šè¿‡ç±»æ³¨å†Œä¸ºBeanï¼Œå¢åŠ Infoçš„è‡ªå®šä¹‰ä¿¡æ¯</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="application.yml-1"><pre class="line-numbers language-none"><code class="language-none">info:
  # é™æ€ä¿¡æ¯
  # æ˜ å°„é¡¹ç›®åç§°
  webName: @project.artifactId@
  version: @project.version@
  author: wabisabifag<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="application.yml-2"><pre class="line-numbers language-none"><code class="language-none">package top.wabisabifag.actuator;

import org.springframework.stereotype.Component;

import java.util.HashMap;

@Component
public class InfoConfig implements InfoContributor{
    @Override
    public void contribute(Info.Builder builder){

        // withDetail() å•å€¼åŠ è½½
        builder.withDetail("runtime",System.currentTimeMillis());

        // withDetails() å¤šå€¼åŠ è½½
        Map infoMap = new HashMap();
        infoMap.put("buildTime","2006");
        builder.withDetails(infoMap);
    }
}<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div>
</li>
<li><p>health ç«¯ç‚¹æŒ‡æ ‡æ§åˆ¶</p>
<pre class="line-numbers language-none"><code class="language-none">package top.wabisabifag.actuator;

import org.springframework.stereotype.Component;

import java.util.HashMap;

@Component
public class HealthConfig extends AbstractHealthIndocator{
    @Override
    protected void doHealthCheck(Health.Builder builder) throws Exception{
        boolean condition = true;
        if (condition){
            // è®¾ç½® health çš„çŠ¶æ€
            builder.status(Status.UP); 
            /*builder.unknown();
            builder.outService();
            builder.down();*/

            builder.withDetail("runtime",System.currentTimeMillis());
            Map infoMap = new HashMap();
            infoMap.put("buildTime","2006");
            builder.withDetails(infoMap);   
        }else {
            builder.withDetail("ä¸Šçº¿äº†å—ï¼Ÿ","ä½ åšæ¢¦");
            builder.down();
        }
    }
}
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
</li>
<li><p>metrics ç«¯ç‚¹æŒ‡æ ‡æ§åˆ¶</p>
<pre class="line-numbers language-none"><code class="language-none">@Service
public class BookServiceImpl extends ServiceImpl&lt;BookDao Book&gt; implements IBookService{
   
    private Counter counter;

    public BookServiceImpl(MeterRegistry meterRegistry){
        // ç›‘æ§çš„åç§°
        cunter = meterRegistry.counter("ç”¨æˆ·ä»˜è´¹æ“ä½œæ¬¡æ•°:");
    }

    @Override
    public boolean delete(Integer id){
      // åŸå­é€’å¢
      counter.increment();
      return bookDao.deleteById(id) &gt; 0;
    }
}<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
</li>
<li><p>è‡ªå®šä¹‰ç›‘æ§æŒ‡æ ‡</p>
<pre class="line-numbers language-none"><code class="language-none">package top.wabisabifag.actuator;

import org.springframework.stereotype.Component;

import java.util.HashMap;

@Component
/* å£°æ˜ç«¯ç‚¹å  id:è®¿é—®åç§°     æ˜¯å¦é»˜è®¤å¼€å¯*/
@Endpoint(id="pay",enableByDefault=true)
public class PayEndpoint {

    /* æ³¨è§£åŠŸèƒ½: ç«¯ç‚¹è¯»å–æ—¶è°ƒç”¨è¯¥æ–¹æ³•*/
    @ReadOperation
    public Object getPay(){
        // è°ƒç”¨ä¸šåŠ¡æ“ä½œ è·å–æ”¯ä»˜ç›¸å…³ä¿¡æ¯ç»“æœï¼Œreturnä¸€ä¸ªå¯è½¬æ¢ä¸º json æ•°æ®çš„å€¼
        Map payMap = new HashMap();
        payMap.put("vip 1","10");
        payMap.put("vip 2","100");
        payMap.put("vip 3","éŸ­èœå˜å˜å¤š");
        return payMap;
    }
}<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></li>
</ol>
<h1 id="2-Docker"><a href="#2-Docker" class="headerlink" title="2. Docker"></a>2. Docker</h1><p><a target="_blank" rel="noopener external nofollow noreferrer" href="https://docs.docker.com/engine/install/centos/">Docker å®˜æ–¹å®‰è£…æ–‡æ¡£</a> æ˜¯ä¸€ä¸ªå¿«é€Ÿæ„å»ºã€è¿è¡Œã€ç®¡ç†åº”ç”¨å·¥å…·</p>
<p><a target="_blank" rel="noopener external nofollow noreferrer" href="https://hub.docker.com/">Docker å®˜æ–¹ç»´æŠ¤çš„å…¬å…± é•œåƒä»“åº“</a><br><img src="/../JavaEE/9.png" alt="Docker é•œåƒåŸç†å›¾"></p>
<h2 id="1-ä¼ ç»Ÿ-Linux-å®‰è£…-MySQL-æ•°æ®åº“"><a href="#1-ä¼ ç»Ÿ-Linux-å®‰è£…-MySQL-æ•°æ®åº“" class="headerlink" title="1. ä¼ ç»Ÿ Linux å®‰è£… MySQL æ•°æ®åº“"></a>1. ä¼ ç»Ÿ Linux å®‰è£… MySQL æ•°æ®åº“</h2><h3 id="1-å‡†å¤‡å·¥ä½œ"><a href="#1-å‡†å¤‡å·¥ä½œ" class="headerlink" title="1. å‡†å¤‡å·¥ä½œ"></a>1. å‡†å¤‡å·¥ä½œ</h3><h4 id="1-æŸ¥çœ‹ç³»ç»Ÿç¯å¢ƒ"><a href="#1-æŸ¥çœ‹ç³»ç»Ÿç¯å¢ƒ" class="headerlink" title="1. æŸ¥çœ‹ç³»ç»Ÿç¯å¢ƒ"></a>1. æŸ¥çœ‹ç³»ç»Ÿç¯å¢ƒ</h4><p>ä½¿ç”¨ lable lsb_release -a  å‘½ä»¤æŸ¥çœ‹Linux ç³»ç»Ÿç‰ˆæœ¬ï¼Œä¾¿äºä¸‹è½½MySqlå®‰è£…åŒ…æ—¶é€‰æ‹©å¯¹åº”çš„ OS version</p>
<h4 id="2-ä¸‹è½½MySQL-å®‰è£…åŒ…"><a href="#2-ä¸‹è½½MySQL-å®‰è£…åŒ…" class="headerlink" title="2. ä¸‹è½½MySQL å®‰è£…åŒ…"></a>2. ä¸‹è½½MySQL å®‰è£…åŒ…</h4><p>ä¸‹è½½<a target="_blank" rel="noopener external nofollow noreferrer" href="https://dev.mysql.com/downloads/mysql/">MySQL</a>ï¼Œé€‰æ‹© OS Version ä»¥åŠ MySQLå®‰è£…åŒ…</p>
<p>è§£å‹å‘½ä»¤ï¼štar -xf packageName -C /user/local/â€¦</p>
<h3 id="2-å®‰è£…"><a href="#2-å®‰è£…" class="headerlink" title="2. å®‰è£…"></a>2. å®‰è£…</h3><h4 id="1-å¸è½½é»˜è®¤æ•°æ®åº“-MariaDB"><a href="#1-å¸è½½é»˜è®¤æ•°æ®åº“-MariaDB" class="headerlink" title="1. å¸è½½é»˜è®¤æ•°æ®åº“ MariaDB"></a>1. å¸è½½é»˜è®¤æ•°æ®åº“ MariaDB</h4><ol>
<li>æŸ¥çœ‹å·²å­˜åœ¨çš„æ•°æ®åº“ï¼š<pre class="line-numbers language-none"><code class="language-none">yum list installed | grep mariadb &amp;&amp; yum list installed | grep mysql<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></li>
<li>å¸è½½ï¼š<pre class="line-numbers language-none"><code class="language-none">yum -y remove -mariadb-libs.x86_64<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></li>
<li>æŒ‰é¡ºåºå®‰è£…ä»¥ä¸‹å‡ ä¸ªæ–‡ä»¶ï¼š<pre class="line-numbers language-none"><code class="language-none">rpm -ivh mysql-community-common-8.0.29-1.el7.x86_64.rpm
rpm -ivh mysql-community-client-plugins-8.0.29-1.el7.x86_64.rpm
rpm -ivh mysql-community-libs-8.0.29-1.el7.x86_64.rpm
rpm -ivh mysql-community-libs-compat-8.0.29-1.el7.x86_64.rpm
rpm -ivh mysql-community-devel-8.0.29-1.el7.x86_64.rpm
rpm -ivh mysql-community-client-8.0.29-1.el7.x86_64.rpm
rpm -ivh mysql-community-icu-data-files-8.0.29-1.el7.x86_64.rpm
rpm -ivh mysql-community-server-8.0.29-1.el7.x86_64.rpm<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
åœ¨æ­¤å®‰è£…è¿‡ç¨‹ä¸­ï¼Œé‡åˆ°äº†å¦‚ä¸‹é—®é¢˜ï¼š</li>
</ol>
<ul>
<li>mysql-community-devel å®‰è£…å¤±è´¥<ul>
<li>è§£å†³æ–¹æ³•ï¼š</li>
<li>å®‰è£…ä¾èµ– openssl-develï¼šyum install openssl-devel -y  </li>
<li>å®‰è£…å¤±è´¥ä¸€èˆ¬æ˜¯ç”±åŒ…ä¾èµ–å¼•èµ·çš„ï¼Œå®‰è£…å¯¹åº”çš„ä¾èµ–åŒ…å³å¯</li>
</ul>
</li>
</ul>
<ol start="4">
<li><p>æŸ¥çœ‹å®‰è£…å®Œæˆåçš„å®‰è£…åŒ…<br>æŸ¥çœ‹å·²å®Œæˆçš„å®‰è£…å®Œ:rpm -qa | grep mysql</p>
</li>
<li><p>åˆå§‹åŒ–MySQLæœåŠ¡<br>ä¿®æ”¹æ•°æ®åº“ç›®å½•ä¸æ–‡ä»¶ï¼ˆé»˜è®¤/var/lib/mysqlä¸‹ï¼‰çš„æ‰€æœ‰è€…ä¸ºmysqlç”¨æˆ·ï¼š</p>
<pre class="line-numbers language-none"><code class="language-none">mysqld --initialize --user=mysql<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></li>
</ol>
<p>è¯¥å‘½ä»¤æ‰§è¡Œåä¼šç”Ÿæˆä¸€ä¸ªrootçš„ä¸´æ—¶å¯†ç ï¼Œåœ¨ /var/log/mysqld.log æ–‡ä»¶ä¸­ï¼š</p>
<pre class="line-numbers language-none"><code class="language-none">grep "password" /var/log/mysqld.log<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>

<ol start="6">
<li><p>å¯åŠ¨MySQLæœåŠ¡</p>
<pre class="line-numbers language-none"><code class="language-none">service mysqld start<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
</li>
<li><p>éªŒè¯<br>è¾“å…¥åˆšæ‰æ‰¾åˆ°çš„ä¸´æ—¶å¯†ç ç™»å½•å‘½ä»¤è¡Œæ“ä½œ</p>
<pre class="line-numbers language-none"><code class="language-none">mysql -uroot -p<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<p>éªŒè¯æˆåŠŸã€‚</p>
</li>
</ol>
<h2 id="2-Docke-å®‰è£…"><a href="#2-Docke-å®‰è£…" class="headerlink" title="2.Docke å®‰è£…"></a>2.Docke å®‰è£…</h2><h3 id="1-é…ç½®Docker-çš„-yum-åº“"><a href="#1-é…ç½®Docker-çš„-yum-åº“" class="headerlink" title="1. é…ç½®Docker çš„ yum åº“"></a>1. é…ç½®Docker çš„ yum åº“</h3><p>å®‰è£…yumå·¥å…·ï¼š</p>
<pre class="line-numbers language-none"><code class="language-none">yum install -y yum-utils<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<p>å®‰è£…å®Œæˆæ‰§è¡Œå‘½ä»¤ï¼Œé…ç½®Docker çš„ yum æºï¼š</p>
<pre class="line-numbers language-none"><code class="language-none">yum-config-manager --add-repo https://download.docker.com/linux/centos/docker-ce.repo<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>

<h3 id="2-å®‰è£…-Docker"><a href="#2-å®‰è£…-Docker" class="headerlink" title="2. å®‰è£… Docker"></a>2. å®‰è£… Docker</h3><pre class="line-numbers language-none"><code class="language-none">yum install -y docker-ce docker-ce-cli comtainerd.io docker-buildx-plugin docker-compose-plugin<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>

<ul>
<li>ç‰ˆæœ¬éªŒè¯ï¼š<pre class="line-numbers language-none"><code class="language-none">docker -v

# å¯åŠ¨ docker
systemctl start docker
systemctl stop docker

# è®¾ç½®å¼€å¯è‡ªå¯åŠ¨
systemctl restart docker

# æ‰§è¡Œdocker.ps å‘½ä»¤æ£€éªŒ
docker ps

# å¯åŠ¨å®ˆæŠ¤è¿›ç¨‹
docker images<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></li>
</ul>
<h3 id="3-é…ç½®é•œåƒåŠ é€Ÿ"><a href="#3-é…ç½®é•œåƒåŠ é€Ÿ" class="headerlink" title="3. é…ç½®é•œåƒåŠ é€Ÿ"></a>3. é…ç½®é•œåƒåŠ é€Ÿ</h3><p><img src="/../JavaEE/8.png" alt="é˜¿é‡Œäº‘æä¾›çš„é•œåƒåŠ é€Ÿ"></p>
<h3 id="4-Docker-ä¸€é”®éƒ¨ç½²MySQL"><a href="#4-Docker-ä¸€é”®éƒ¨ç½²MySQL" class="headerlink" title="4. Docker ä¸€é”®éƒ¨ç½²MySQL"></a>4. Docker ä¸€é”®éƒ¨ç½²MySQL</h3><p>è‡ªåŠ¨æœç´¢ä¸‹è½½åº”ç”¨é•œåƒï¼Œåˆ›å»ºä¸€ä¸ªéš”ç¦»ç¯å¢ƒçš„å®¹å™¨<br>å¤šä¸ªåˆ›å»ºç”¨ docker ps å¯ä»¥æ£€æŸ¥å¤šä¸ªè¿è¡Œåº”ç”¨</p>
<ol>
<li>ä¸€é”®éƒ¨ç½²MySQL å‘½ä»¤<pre class="line-numbers language-none"><code class="language-none">docker run -d --name wabisabifag -p 3306:3306 -e MYSQL_ROOT_PASSWORD=123 -e TZ=Asia/Shanghai   -v /root/mysql/data:/var/lib/mysql  -v /root/mysql/init:/docker-entrypoint-initdb.d  -v /root/mysql/config:/etc/mysql/conf.d mysql:5.1.47<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></li>
</ol>
<ul>
<li>docker runï¼š åˆ›å»ºè¿è¡Œå®¹å™¨ -d è®©å®¹å™¨åœ¨åå°è¿è¡Œ</li>
<li>â€“name: å”¯ä¸€åç§°</li>
<li>-pï¼šæ˜ å°„ç«¯å£ï¼Œå®¿ä¸»æœºç«¯å£ï¼šå®¹å™¨ç«¯å£</li>
<li>-eï¼š<a target="_blank" rel="noopener external nofollow noreferrer" href="https://hub.docker.com/_/mysql">è®¾ç½®MySQLçš„ Key=Valueç¯å¢ƒå˜é‡</a></li>
<li>mysqï¼šæŒ‡å®šé•œåƒå(ä¸å†™é»˜è®¤æœ€æ–°)</li>
</ul>
<h2 id="3-å¸¸è§å‘½ä»¤"><a href="#3-å¸¸è§å‘½ä»¤" class="headerlink" title="3. å¸¸è§å‘½ä»¤"></a>3. å¸¸è§å‘½ä»¤</h2><p><img src="/../JavaEE/10.png" alt="Docker å¸¸è§é•œåƒï¼Œå®¹å™¨æ“ä½œ"></p>
<pre class="line-numbers language-none"><code class="language-none"># é•œåƒä»“åº“
docker pull       docker push

# æœ¬åœ°é•œåƒ
docker images     docker rmi  #åˆ é™¤é•œåƒ

# DOCKERFILE
docker build
docker save       docker load

# å®¹å™¨ 
docker run  #å¯åŠ¨å¹¶åˆ›å»ºæ–‡ä»¶
docker start      
docker stop
docker ps # æŸ¥çœ‹è¿è¡ŒçŠ¶æ€
docker rm # åˆ é™¤å®¹å™¨
docker logs # æŸ¥çœ‹å®¹å™¨æ—¥å¿—
docker exec # å®¹å™¨ä¿®æ”¹<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p><a target="_blank" rel="noopener external nofollow noreferrer" href="https://docs.docker.com/reference/">å®˜æ–¹å…·ä½“å‘½ä»¤æŸ¥è¯¢</a></p>
<h2 id="4-æŸ¥çœ‹DockerHubï¼Œæ‹‰å–nginx-é•œåƒï¼Œåˆ›å»ºè¿è¡ŒNginxå®¹å™¨"><a href="#4-æŸ¥çœ‹DockerHubï¼Œæ‹‰å–nginx-é•œåƒï¼Œåˆ›å»ºè¿è¡ŒNginxå®¹å™¨" class="headerlink" title="4. æŸ¥çœ‹DockerHubï¼Œæ‹‰å–nginx é•œåƒï¼Œåˆ›å»ºè¿è¡ŒNginxå®¹å™¨"></a>4. æŸ¥çœ‹DockerHubï¼Œæ‹‰å–nginx é•œåƒï¼Œåˆ›å»ºè¿è¡ŒNginxå®¹å™¨</h2><ul>
<li><p>åœ¨DockerHubæœç´¢<a target="_blank" rel="noopener external nofollow noreferrer" href="https://docs.docker.com/_/nginx">Nginxé•œåƒ</a>ï¼ŒæŸ¥çœ‹é•œåƒåç§°</p>
</li>
<li><p>æ‹‰å»Nginx é•œåƒ: docker pull nginx</p>
</li>
<li><p>æŸ¥çœ‹æœ¬åœ°é•œåƒåˆ—è¡¨: docker images</p>
<ul>
<li>ä¿å­˜æ‰“åŒ…è‡³æœ¬åœ°ï¼šdocker save -o nginx.tar nginx:latest</li>
<li>è¯»å–å®¹å™¨ï¼š docker load -i nginx.tar</li>
</ul>
</li>
<li><p>åˆ›å»ºå¹¶è¿è¡ŒNginx å®¹å™¨ï¼šdocker run -d â€“name nginx -p 80:80 nginx</p>
</li>
<li><p>æŸ¥çœ‹è¿è¡Œçš„å®¹å™¨: docker ps </p>
</li>
<li><p>æŸ¥çœ‹æ‰€æœ‰å®¹å™¨ï¼šdocker ps -a</p>
</li>
<li><p>åœæ­¢å®¹å™¨ï¼š docker stop nginx</p>
</li>
<li><p>å†å¯åŠ¨å®¹å™¨ï¼šdocker start nginx</p>
</li>
<li><p>è¿›å…¥Nginxå®¹å™¨ï¼šdocker exec -it nginx bash /docker exec -it mysql mysql -uroot -p</p>
<ul>
<li>é€€å‡ºå‘½ä»¤ï¼šexit</li>
</ul>
</li>
<li><p>åˆ é™¤å®¹å™¨(è¿è¡Œæ—¶å¼ºè¡Œåˆ é™¤)ï¼šdocker rm mysql -f</p>
</li>
</ul>
<h2 id="5-å‘½ä»¤åˆ«å"><a href="#5-å‘½ä»¤åˆ«å" class="headerlink" title="5. å‘½ä»¤åˆ«å"></a>5. å‘½ä»¤åˆ«å</h2><pre class="line-numbers language-none"><code class="language-none">vi ~/.bashrc

# ç®€åŒ–æ‰§è¡Œå‘½ä»¤
alias dps='docker ps -format "table{{.ID}}\t{{.Image}}\t{{.Ports}}\t{{.Status}}\t{{.Names}}"' 

source ~/.ashrc<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h2 id="6-æ•°æ®å·"><a href="#6-æ•°æ®å·" class="headerlink" title="6.æ•°æ®å·"></a>6.æ•°æ®å·</h2><p><img src="/../JavaEE/11.png" alt="æ•°æ®å·æ˜ å°„æ–‡ä»¶ï¼Œå®¿ä¸»æœºä¿®æ”¹å†…å®¹è‡ªåŠ¨åŒæ­¥"></p>
<h3 id="1-æ•°æ®å·æŒ‚è½½"><a href="#1-æ•°æ®å·æŒ‚è½½" class="headerlink" title="1. æ•°æ®å·æŒ‚è½½"></a>1. æ•°æ®å·æŒ‚è½½</h3><p>æ•°æ®å·(volume)æ˜¯ä¸€ä¸ªè™šæ‹Ÿç›®å½•ï¼Œå®¹å™¨å†…ç›®å½•ä¸å®¿ä¸»æœºç›®å½•ä¹‹é—´æ˜ å°„çš„æ¡¥æ¢</p>
<ul>
<li>åˆ›å»ºNginxå®¹å™¨ï¼Œä¿®æ”¹Nginx å®¹å™¨å†…çš„htmlç›®å½•çš„index.htmlæ–‡ä»¶ï¼ŒæŸ¥çœ‹å˜åŒ–(/user/share/nginx/htmml),æŒ‚åœ¨æ•°æ®å·ï¼š <ul>
<li>docker run -d â€“name nginx -p 80:80 -v html:/user/share/nginx/htmml nginx</li>
<li>docker volume inspect html</li>
</ul>
</li>
<li>å°†é™æ€èµ„æºéƒ¨ç½²åˆ°Nginx çš„htmlç›®å½•</li>
</ul>
<pre class="line-numbers language-none"><code class="language-none"># å‘½ä»¤                  è¯´æ˜         
docker volume create    åˆ›å»ºæ•°æ®å·
docker volume ls        æŸ¥çœ‹æ‰€æœ‰æ•°æ®å·
docker volume rm        åˆ é™¤æŒ‡å®šæ•°æ®å·
docker volume inspect   æŸ¥çœ‹æŸä¸ªæ•°æ®å·çš„è¯¦æƒ…
docker volume prune     æ¸…é™¤æ•°æ®å·<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h3 id="2-mysqlå®¹å™¨çš„æ•°æ®æŒ‚è½½"><a href="#2-mysqlå®¹å™¨çš„æ•°æ®æŒ‚è½½" class="headerlink" title="2. mysqlå®¹å™¨çš„æ•°æ®æŒ‚è½½"></a>2. mysqlå®¹å™¨çš„æ•°æ®æŒ‚è½½</h3><ul>
<li><p>æŸ¥çœ‹mysqlå®¹å™¨ï¼Œæ•°æ®å·æŒ‚è½½(è‡ªåŠ¨åˆ›å»ºçš„åŒ¿åå·,å½“å®¹å™¨åˆ é™¤æ—¶Volumeæ–‡ä»¶ä¾ç„¶å­˜åœ¨,ä½†é‡é…ç½®å®¹å™¨å®¹æ˜“æ–‡ä»¶ä¸¢å¤±,ä¸”æ–‡ä»¶å¤åˆ¶ç¹ç,æ‰€ä»¥æ‰‹åŠ¨æŒ‚è½½)</p>
<ul>
<li>docker inspect mysql</li>
</ul>
</li>
<li><p>åŸºäºå®¿ä¸»æœºç›®å½•å®ç° MySQL æ•°æ®ç›®å½•ã€é…ç½®æ–‡ä»¶ã€åˆå§‹åŒ–è„šæœ¬çš„æŒ‚è½½<br>  docker run -d <br>  â€“name wabisabifag \<br>  -p 3306:3306 <br>  -e MYSQL_ROOT_PASSWORD=123 <br>  -e TZ=Asia/Shanghai <br>  -v /root/mysql/data:/var/lib/mysql \<br>  -v /root/mysql/init:/docker-entrypoint-initdb.d \<br>  -v /root/mysql/config:/etc/mysql/conf.d \<br>  mysql:5.7</p>
<p>  â€“network  wabisabifag \</p>
</li>
</ul>
<pre class="line-numbers language-none"><code class="language-none">hm.cnf
[client]
default_character_set=utf8mb4
[mysql]
default_character_set=utf8mb4
[mysqld]
character_set_server=utf8mb4
collation_server=utf8mb4_unicode_ci
init_connect='SET NAMES utf8mb4'<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p><img src="/../JavaEE/12.png" alt="æ ¼å¼è¦æ±‚"></p>
<h2 id="7-è‡ªå®šä¹‰é•œåƒ"><a href="#7-è‡ªå®šä¹‰é•œåƒ" class="headerlink" title="7. è‡ªå®šä¹‰é•œåƒ"></a>7. è‡ªå®šä¹‰é•œåƒ</h2><h3 id="1-é•œåƒç»“æ„"><a href="#1-é•œåƒç»“æ„" class="headerlink" title="1. é•œåƒç»“æ„"></a>1. é•œåƒç»“æ„</h3><ol>
<li>å±‚(Layer)<br>æ·»åŠ å®‰è£…åŒ…ï¼Œä¾èµ–ï¼Œé…ç½®ç­‰ï¼Œæ¯æ¬¡æ“ä½œéƒ½å½¢æˆæ–°çš„ä¸€å±‚(æ¯ä¸ªæ“ä½œå‹ç¼©ä¸€ä¸ªåŒ…)</li>
<li>åŸºç¡€é•œåƒ(BaseImages)<br>åº”ç”¨ä¾èµ–çš„ç³»ç»Ÿå‡½æ•°åº“ã€ç¯å¢ƒã€é…ç½®ã€æ–‡ä»¶ç­‰</li>
<li>å…¥å£(Entrypoint)<br>é•œåƒè¿è¡Œå…¥å£ï¼Œä¸€èˆ¬ç¨‹åºå¯åŠ¨çš„è„šæœ¬å’Œå‚æ•°</li>
</ol>
<h4 id="Dockerfile"><a href="#Dockerfile" class="headerlink" title="Dockerfile"></a>Dockerfile</h4><p>Dockerfile æ˜¯ä¸€ä¸ªæ–‡ä»¶å¤¹ï¼Œå…¶ä¸­åŒ…å«ä¸€ä¸ªä¸ªæŒ‡ä»¤(Instruction)<br><img src="/../JavaEE/13.png" alt="Dockerfile æŒ‡ä»¤"></p>
<pre class="line-numbers language-none"><code class="language-none">docker build -t myImage:1.0 .<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<ul>
<li><p>-tï¼š é•œåƒå(æ ¼å¼ï¼šrepository:tag)</p>
</li>
<li><p>. ï¼š æŒ‡å®šDockerfileæ‰€åœ¨ç›®å½•ï¼Œå¦‚æœå°±åœ¨å½“å‰ç›®å½•ï¼Œåˆ™æŒ‡å®šä¸ºâ€.â€</p>
</li>
</ul>
<div class="tabs" id="åŸºäºubuntuåŸºç¡€é•œåƒ"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#åŸºäºubuntuåŸºç¡€é•œåƒ-1">åŸºäºUbuntuåŸºç¡€é•œåƒ</button></li><li class="tab"><button type="button" data-href="#åŸºäºubuntuåŸºç¡€é•œåƒ-2">åŸºäºJDKåŸºç¡€é•œåƒ</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="åŸºäºubuntuåŸºç¡€é•œåƒ-1"><pre class="line-numbers language-none"><code class="language-none"># æŒ‡å®šåŸºç¡€é•œåƒ
FROM ubuntu:16.04
# é…ç½®ç¯å¢ƒå˜é‡ï¼Œ3DKçš„å®‰è£…ç›®å½•ã€å®¹å™¨å†…æ—¶åŒº
ENV JAVA_DIR=/usr/local
# æ‹·è´jdkå’Œjavaé¡¹ç›®çš„åŒ…
COPY ./jdk8.tar.gz $JAVA_DIR/
COPY ./docker-demo.jar /tmp/app.jar
# å®‰è£…JDK
RUN cd $JAVA_DIR \ &amp;&amp; tar -xf ./jdk8.tar.gz \
&amp;&amp; mv ./jdkl.8.0_144 ./java8
#é…ç½®ç¯å¢ƒå˜é‡
ENV JAVA_HOME=$JAVA_DIR/java8
ENV PATH=$PATH:$JAVA_HOME/bin
#å…¥å£ï¼Œjavaé¡¹ç›®çš„å¯åŠ¨å‘½ä»¤
ENTRYPOINT ["java", "-jar", "/app.jar"]<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="åŸºäºubuntuåŸºç¡€é•œåƒ-2"><pre class="line-numbers language-none"><code class="language-none"># åŸºç¡€é•œåƒ
FROM openjdk:11.0-jre-bister
# æ‹·è´jarè´
COPY docker-demo.jar /app.jar
# å…¥å£
ENTRYTPOINT ["java", "-jar", "/app.jar"]<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div>

<p><a target="_blank" rel="noopener external nofollow noreferrer" href="https://www.bilibili.com/video/BV1HP4118797/?p=10&amp;spm_id_from=pageDriver&amp;vd_source=88d198aeee6b1ee29878c8ac870074a9">è¯¦ç»†é…ç½®æ­¥éª¤</a></p>
<h2 id="8-ç½‘ç»œ"><a href="#8-ç½‘ç»œ" class="headerlink" title="8. ç½‘ç»œ"></a>8. ç½‘ç»œ</h2><ul>
<li>é»˜è®¤æƒ…å†µæ‰€æœ‰å®¹å™¨ä»¥bridgeæ–¹å¼è¿æ¥åˆ°Dockerçš„ä¸€ä¸ªè™šæ‹Ÿç½‘æ¡¥ä¸Šï¼š<br><img src="/../JavaEE/14.png" alt="bridgeæ–¹å¼è¿æ¥"></li>
</ul>
<h3 id="1-å®¹å™¨äº’è”"><a href="#1-å®¹å™¨äº’è”" class="headerlink" title="1. å®¹å™¨äº’è”"></a>1. å®¹å™¨äº’è”</h3><ul>
<li>åŠ å…¥è‡ªå®šä¹‰ç½‘ç»œå®¹å™¨æ‰å¯ä»¥é€šè¿‡å®¹å™¨äº’ç›¸è®¿é—®ï¼ŒDockerçš„ç½‘ç»œæ“ä½œå‘½ä»¤å¦‚ä¸‹ï¼š<br><img src="/../JavaEE/15.png" alt="Dockerçš„ç½‘ç»œæ“ä½œå‘½ä»¤"></li>
</ul>
<h2 id="9-DockerCompose"><a href="#9-DockerCompose" class="headerlink" title="9. DockerCompose"></a>9. DockerCompose</h2><p>Docker Compose é€šè¿‡ä¸€ä¸ªå•ç‹¬çš„docker-compose.ymlæ¨¡ç‰ˆæ–‡ä»¶(YAMLæ ¼å¼)å®šä¹‰ä¸€ç»„ç›¸å…³è”çš„åº”ç”¨å®¹å™¨ï¼Œå¸®åŠ©æˆ‘ä»¬å®ç° å¤šä¸ªç›¸äº’å…³è”çš„Dockerå®¹å™¨çš„å¿«é€Ÿéƒ¨ç½²ã€‚</p>
<ul>
<li>ä¸€é”®éƒ¨ç½²</li>
<li>é›†ç¾¤éƒ¨ç½²<br><img src="/../JavaEE/16.png" alt="docker-compose.ymlæ¨¡ç‰ˆæ–‡ä»¶"></li>
</ul>
<h3 id="1-docker-compose-å‘½ä»¤æ ¼å¼"><a href="#1-docker-compose-å‘½ä»¤æ ¼å¼" class="headerlink" title="1. docker compose å‘½ä»¤æ ¼å¼"></a>1. docker compose å‘½ä»¤æ ¼å¼</h3><p><img src="/../JavaEE/20.png" alt="docker-compose.ymlæ¨¡ç‰ˆæ–‡ä»¶"></p>
<ol>
<li>æ¯”è¾ƒå‘½ä»¤è¡Œå’Œdocker-compose.yml æ–‡ä»¶<br><img src="/../JavaEE/17.png" alt="docker-compose.ymlæ¨¡ç‰ˆæ–‡ä»¶"></li>
</ol>
<h3 id="2-docker-compose-ymlä¸€é”®éƒ¨ç½²"><a href="#2-docker-compose-ymlä¸€é”®éƒ¨ç½²" class="headerlink" title="2. docker-compose.ymlä¸€é”®éƒ¨ç½²"></a>2. docker-compose.ymlä¸€é”®éƒ¨ç½²</h3><pre class="line-numbers language-none"><code class="language-none">docker compose up -d<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<p><img src="/../JavaEE/18.png" alt="docker-compose.ymlæ¨¡ç‰ˆæ–‡ä»¶"></p>
<p><img src="/../JavaEE/19.png" alt="docker-compose.ymlæ¨¡ç‰ˆæ–‡ä»¶"></p>
<h1 id="3-Redis"><a href="#3-Redis" class="headerlink" title="3.Redis"></a>3.Redis</h1><h2 id="1-Redis-åŸºç¡€"><a href="#1-Redis-åŸºç¡€" class="headerlink" title="1.Redis åŸºç¡€"></a>1.Redis åŸºç¡€</h2><h3 id="1-åˆè¯†Redis"><a href="#1-åˆè¯†Redis" class="headerlink" title="1.åˆè¯†Redis"></a>1.åˆè¯†Redis</h3><h4 id="1-è®¤è¯†NoSQL"><a href="#1-è®¤è¯†NoSQL" class="headerlink" title="1.è®¤è¯†NoSQL"></a>1.è®¤è¯†NoSQL</h4><ul>
<li>SQL<ul>
<li>æ•°æ®ç»“æ„: ç»“æ„åŒ–</li>
<li>æ•°æ®å…³è”: å…³ç³»å‹<ul>
<li>å¤–é”®è¡¨å…³è”</li>
</ul>
</li>
<li>æŸ¥è¯¢æ–¹å¼: SQL<ul>
<li>SELECT id FROM td_user WHERE id=1;</li>
</ul>
</li>
<li>äº‹åŠ¡ç‰¹æ€§: ACID(å®‰å…¨)</li>
<li>æ‰©å±•æ€§: å‚ç›´</li>
<li>ä½¿ç”¨åœºæ™¯:<ul>
<li>æ•°æ®ç»“æ„å›ºå®š</li>
<li>ç›¸å…³ä¸šåŠ¡å¯¹æ•°æ®å®‰å…¨æ€§ã€ä¸€è‡´æ€§è¦æ±‚é«˜</li>
</ul>
</li>
</ul>
</li>
<li>NoSQL<ul>
<li>æ•°æ®ç»“æ„: éç»“æ„åŒ–<ul>
<li>key:value é”®å€¼å¯¹ç±»å‹(Redis)</li>
<li>Document  æ–‡æ¡£ç±»å‹(MongoDB)</li>
<li>Graph   å›¾(Neo4j)</li>
<li>åˆ—ç±»å‹(HBase)</li>
</ul>
</li>
<li>æ•°æ®å…³è”: éå…³ç³»å‹</li>
<li>æŸ¥è¯¢æ–¹å¼: éSQL<ul>
<li>Redis: get user:1</li>
<li>MongDB: db.users.find({_id:1})</li>
<li>elasticsearch GET <a target="_blank" rel="noopener external nofollow noreferrer" href="http://localhost:9200/users/1">http://localhost:9200/users/1</a></li>
</ul>
</li>
<li>äº‹åŠ¡ç‰¹æ€§: BASE</li>
<li>æ‰©å±•æ€§: æ°´å¹³</li>
<li>ä½¿ç”¨åœºæ™¯:<ul>
<li>æ•°æ®ç»“æ„ä¸å›ºå®š</li>
<li>ç›¸å…³ä¸šåŠ¡å¯¹æ•°æ®å®‰å…¨æ€§ã€ä¸€è‡´æ€§è¦æ±‚ä¸é«˜ </li>
<li>å¯¹æ€§èƒ½è¦æ±‚é«˜</li>
</ul>
</li>
</ul>
</li>
</ul>
<h4 id="2-è®¤è¯†Redis"><a href="#2-è®¤è¯†Redis" class="headerlink" title="2.è®¤è¯†Redis"></a>2.è®¤è¯†Redis</h4><p>Remote Dictionary Server(è¿œç¨‹è¯å…¸æœåŠ¡å™¨)æ˜¯ä¸€ä¸ªåŸºäºå†…å­˜çš„é”®å€¼å‹å•çº¿ç¨‹NoSQLæ•°æ®åº“ã€‚</p>
<ul>
<li>ç‰¹å¾ï¼š<ul>
<li>é”®å€¼å‹ï¼Œvalueæ”¯æŒå¤šç§ä¸åŒæ•°æ®ç»“æ„ï¼ŒåŠŸèƒ½ä¸°å¯Œ</li>
<li>å•çº¿ç¨‹ï¼Œæ¯ä¸ªå‘½ä»¤å…·å¤‡åŸå­æ€§</li>
<li>ä½å»¶è¿Ÿï¼Œé€Ÿåº¦å¿«(åŸºäºå†…å­˜ã€IOå¤šè·¯å¤ç”¨ã€è‰¯å¥½çš„ç¼–ç )</li>
<li>æ”¯æŒæ•°æ®æŒä¹…åŒ–</li>
<li>æ”¯æŒä¸»ä»é›†ç¾¤ã€åˆ†ç‰‡é›†ç¾¤</li>
<li>æ”¯æŒå¤šè¯­è¨€å®¢æˆ·ç«¯</li>
</ul>
</li>
</ul>
<h4 id="3-å®‰è£…Redis"><a href="#3-å®‰è£…Redis" class="headerlink" title="3.å®‰è£…Redis"></a>3.å®‰è£…Redis</h4><h5 id="1-RedisæŒ‡å®šé…ç½®å¯åŠ¨"><a href="#1-RedisæŒ‡å®šé…ç½®å¯åŠ¨" class="headerlink" title="1.RedisæŒ‡å®šé…ç½®å¯åŠ¨"></a>1.RedisæŒ‡å®šé…ç½®å¯åŠ¨</h5><pre class="line-numbers language-none"><code class="language-none">// å¤‡ä»½æºæ–‡ä»¶
cp redis.conf redis.conf.bck

// ç›‘å¬åœ°å€ï¼š127.0.0.1 æœ¬åœ°è®¿é—®  ä¿®æ”¹ä¸º 0.0.0.0 å¯ä»¥åœ¨ä»»æ„IPè®¿é—®
bind 0.0.0.0
# å®ˆæŠ¤è¿›ç¨‹ï¼Œä¿®æ”¹ä¸º yes åå°è¿è¡Œ
daemonize yes
# å¯†ç ï¼Œè®¾ç½®åè®¿é—® Redis å¿…é¡»è¾“å…¥å¯†ç 
requirepass 123456

# è®¾ç½®æ•°æ®åº“æ•°é‡ï¼Œé»˜è®¤16ï¼Œç¼–å·0-15
database 1
# æœ€å¤§ä½¿ç”¨å†…å­˜
maxmemory 512mb
# æ—¥å¿—æ–‡ä»¶ã€é»˜è®¤ä¸ºç©ºï¼Œå¯æŒ‡å®šæ—¥å¿—æ–‡ä»¶å
logfile "redis.log"<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h5 id="2-å¼€æœºè‡ªå¯"><a href="#2-å¼€æœºè‡ªå¯" class="headerlink" title="2.å¼€æœºè‡ªå¯"></a>2.å¼€æœºè‡ªå¯</h5><pre class="line-numbers language-none"><code class="language-none"># æ–°å»ºç³»ç»ŸæœåŠ¡æ–‡ä»¶
vi /etc/systemd/system/redis.service

########  æ–‡ä»¶
[Unit]
Description=redis-server
After=network.target

[Service]
Type=forking
ExecStart=/usr/local/bin/redis-server /usr/local/src/redis-6.2.6/redis.conf
PrivateTmp=true
[Install]
WantedBy=multi-user.target


# é‡è½½ç³»ç»ŸæœåŠ¡
systemctl daemon-reload

# å¯åŠ¨Redis 
systemctl start redis

# å¼€æœºè‡ªå¯
systemctl enable redis<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<h5 id="3-Rediså®¢æœç«¯"><a href="#3-Rediså®¢æœç«¯" class="headerlink" title="3.Rediså®¢æœç«¯"></a>3.Rediså®¢æœç«¯</h5><h6 id="1-å‘½ä»¤è¡Œå®¢æˆ·ç«¯"><a href="#1-å‘½ä»¤è¡Œå®¢æˆ·ç«¯" class="headerlink" title="1.å‘½ä»¤è¡Œå®¢æˆ·ç«¯"></a>1.å‘½ä»¤è¡Œå®¢æˆ·ç«¯</h6><p>redis-cli [options] [commonds]</p>
<ul>
<li>options<ul>
<li>-h 127.0.0.1: æŒ‡å®šè¿æ¥çš„RedisèŠ‚ç‚¹çš„IPåœ°å€</li>
<li>-p 6379: æŒ‡å®šè¦è¿æ¥çš„RedisèŠ‚ç‚¹çš„ç«¯å£(ä¸å»ºè®®)<ul>
<li>åœ¨è¿æ¥Rediså é€šè¿‡: AUTH 123321 (ä¸RedisæœåŠ¡ç«¯åšå¿ƒè·³æµ‹è¯•)</li>
</ul>
</li>
<li>-a 123456: æŒ‡å®šRedisè®¿é—®å¯†ç </li>
</ul>
</li>
<li>commonds<ul>
<li>ping: ä¸RedisæœåŠ¡ç«¯åšå¿ƒè·³æµ‹è¯•ã€‚æœåŠ¡ç«¯æ­£å¸¸è¿”å› pongã€‚ä¸æŒ‡å®šcommondæ—¶ï¼Œä¼šè¿›å…¥ redis-cliçš„äº¤äº’æ§åˆ¶å°</li>
</ul>
</li>
</ul>
<h6 id="2-å›¾å½¢åŒ–æ¡Œé¢å®¢æˆ·ç«¯"><a href="#2-å›¾å½¢åŒ–æ¡Œé¢å®¢æˆ·ç«¯" class="headerlink" title="2.å›¾å½¢åŒ–æ¡Œé¢å®¢æˆ·ç«¯"></a>2.å›¾å½¢åŒ–æ¡Œé¢å®¢æˆ·ç«¯</h6><ul>
<li>GitHubç”¨æˆ·ç¼–å†™çš„<a href="https://github.com/uglide/RedisDesktopManager">Rediså›¾å½¢åŒ–æ¡Œé¢å®¢æˆ·ç«¯</a>(æœªæä¾›Windowså®‰è£…åŒ…,éœ€è¦ä»˜è´¹ä½¿ç”¨)</li>
<li>æä¾›å…è´¹çš„<a href="https://github.com/lework/RedisDesktopManager-Windows/releases">Rediså›¾å½¢åŒ–æ¡Œé¢å®¢æˆ·ç«¯</a></li>
</ul>
<pre class="line-numbers language-none"><code class="language-none"># æ›´æ¢Redisåº“å
select 0
# å­˜ å– æ•°æ®æ“ä½œ
set  get<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>

<h3 id="2-Rediså¸¸è§å‘½ä»¤"><a href="#2-Rediså¸¸è§å‘½ä»¤" class="headerlink" title="2.Rediså¸¸è§å‘½ä»¤"></a>2.Rediså¸¸è§å‘½ä»¤</h3><h4 id="1-5ç§å¸¸è§æ•°æ®ç»“æ„"><a href="#1-5ç§å¸¸è§æ•°æ®ç»“æ„" class="headerlink" title="1.5ç§å¸¸è§æ•°æ®ç»“æ„"></a>1.5ç§å¸¸è§æ•°æ®ç»“æ„</h4><h5 id="1-Redisæ•°æ®ç»“æ„"><a href="#1-Redisæ•°æ®ç»“æ„" class="headerlink" title="1.Redisæ•°æ®ç»“æ„"></a>1.Redisæ•°æ®ç»“æ„</h5><ul>
<li>åŸºæœ¬ç±»å‹<ul>
<li>String</li>
<li>Hash:<ul>
<li>{name:â€jackâ€,age:21}</li>
</ul>
</li>
<li>List:<ul>
<li>[A -&gt; B -&gt;C]</li>
</ul>
</li>
<li>Set(æ— åº,ä¸å¯é‡å¤):<ul>
<li>{A,B,C}</li>
</ul>
</li>
<li>SortedSet:<ul>
<li>{A:1,B:2,C:3}</li>
</ul>
</li>
</ul>
</li>
<li>ç‰¹æ®Šç±»å‹<ul>
<li>GEO:<ul>
<li>{A:(120.3,30.5)}</li>
</ul>
</li>
<li>BitMap:<ul>
<li>0110110101110101011</li>
</ul>
</li>
<li>HyperLog:<ul>
<li>0110110101110101011</li>
</ul>
</li>
</ul>
</li>
</ul>
<p><a target="_blank" rel="noopener external nofollow noreferrer" href="https://redis.io/commands">Redis æ•°æ®ç»“æ„ç±»å‹å‘½ä»¤æ–‡æ¡£</a></p>
<h5 id="2-Redisé€šç”¨å‘½ä»¤-Keys"><a href="#2-Redisé€šç”¨å‘½ä»¤-Keys" class="headerlink" title="2.Redisé€šç”¨å‘½ä»¤(Keys)"></a>2.Redisé€šç”¨å‘½ä»¤(Keys)</h5><ul>
<li>KEYS æŸ¥çœ‹æ‰€æœ‰ç¬¦åˆæ¨¡ç‰ˆ<ul>
<li>KEYS *  æ¨¡ç³ŠæŸ¥è¯¢</li>
</ul>
</li>
<li>DEL åˆ é™¤ä¸€ä¸ªæˆ–å¤šä¸ªkeyå€¼<ul>
<li>DEL *</li>
</ul>
</li>
<li>EXISTS åˆ¤æ–­keyå­˜åœ¨</li>
<li>EXPIRE è®¾ç½®keyçš„æœ‰æ•ˆæœŸ<ul>
<li>EXPIRE age 20</li>
</ul>
</li>
<li>TTL æŸ¥çœ‹keyå‰©ä½™æœ‰æ•ˆæœŸ(-1ï¼šæ°¸ä¹…æœ‰æ•ˆ)<ul>
<li>TTL age</li>
</ul>
</li>
</ul>
<p>é€šè¿‡help [command] æŸ¥çœ‹å‘½ä»¤å…·ä½“ä½¿ç”¨æ–¹æ³•</p>
<h5 id="3-Stringç±»å‹"><a href="#3-Stringç±»å‹" class="headerlink" title="3.Stringç±»å‹"></a>3.Stringç±»å‹</h5><ul>
<li>Stringç±»å‹åˆ†ä¸ºä¸‰ç±»<ul>
<li>Stringï¼šå­—ç¬¦ä¸²(&lt;512m)</li>
<li>intï¼šå¯åšè‡ªå¢è‡ªå‡æ“ä½œ</li>
<li>floatï¼šå¯åšè‡ªå¢è‡ªå‡æ“ä½œ<br>åº•å±‚éƒ½æ˜¯å­—èŠ‚æ•°æ®å½¢å¼å­˜å‚¨ï¼Œä½†æ˜¯ç¼–ç æ–¹å¼ä¸åŒã€‚<br>å­—ç¬¦ä¸²ç±»å‹çš„æœ€å¤§ç©ºé—´ä¸è¶…è¿‡512m</li>
</ul>
</li>
</ul>
<h6 id="1-Stringçš„å¸¸è§å‘½ä»¤æœ‰ï¼š"><a href="#1-Stringçš„å¸¸è§å‘½ä»¤æœ‰ï¼š" class="headerlink" title="1.Stringçš„å¸¸è§å‘½ä»¤æœ‰ï¼š"></a>1.Stringçš„å¸¸è§å‘½ä»¤æœ‰ï¼š</h6><ul>
<li><p>SET:æ·»åŠ æˆ–è€…ä¿®æ”¹å·²ç»å­˜åœ¨çš„ä¸€ä¸ªStringç±»å‹çš„é”®å€¼å¯¹</p>
</li>
<li><p>GET:æ ¹æ®keyè·å–Stringç±»å‹çš„value</p>
</li>
<li><p>MSET:æ‰¹é‡æ·»åŠ å¤šä¸ªStringç±»å‹çš„é”®å€¼å¯¹</p>
</li>
<li><p>MGET:æ ¹æ®å¤šä¸ªkeyè·å–å¤šä¸ªStringç±»å‹çš„value</p>
</li>
<li><p>INCR:è®©ä¸€ä¸ªæ•´å‹çš„keyè‡ªå¢1</p>
</li>
<li><p>DECR:è®©ä¸€ä¸ªæ•´å‹çš„keyè‡ªå‡1</p>
</li>
<li><p>INCRBY:è®©ä¸€ä¸ªæ•´å‹çš„keyè‡ªå¢å¹¶æŒ‡å®šæ­¥é•¿ï¼Œä¾‹å¦‚ï¼šincrby num 2è®©numå€¼è‡ªå¢2</p>
</li>
<li><p>INCRBYFLOATï¼šè®©ä¸€ä¸ªæµ®ç‚¹ç±»å‹çš„æ•°å­—è‡ªå¢å¹¶æŒ‡å®šæ­¥é•¿</p>
</li>
<li><p>SETNX:æ–°å¢ä¸€ä¸ªStringç±»å‹çš„é”®å€¼å¯¹,å‰ææ˜¯è¿™ä¸ªkeyä¸å­˜åœ¨ï¼Œå¦åˆ™ä¸æ‰§è¡Œ</p>
</li>
<li><p>SETEX:æ–°å¢ä¸€ä¸ªStringç±»å‹çš„é”®å€¼å¯¹,å¹¶ä¸”æŒ‡å®šæœ‰æ•ˆæœŸ</p>
</li>
</ul>
<h6 id="2-keyçš„ç»“æ„"><a href="#2-keyçš„ç»“æ„" class="headerlink" title="2.keyçš„ç»“æ„"></a>2.keyçš„ç»“æ„</h6><p>Rediså…è®¸å¤šä¸ªå•è¯å½¢æˆå±‚çº§ç»“æ„ï¼Œå¤šä¸ªå•è¯é—´ç”¨â€™:â€™ï¼Œæ ¼å¼å¦‚ä¸‹ï¼š</p>
<ul>
<li>é¡¹ç›®å:ä¸šåŠ¡å:ç±»å‹:id<ul>
<li>userç›¸å…³keyï¼š wabisabifag:user:1<ul>
<li>vaule: get  {â€œidâ€:1,â€nameâ€:â€Jackâ€,â€ageâ€:21}</li>
</ul>
</li>
<li>videoç›¸å…³key:  wabisabifag:video:1<ul>
<li>value:  {â€œidâ€:1,â€nameâ€:â€OPPOâ€,â€priceâ€:2100}<pre class="line-numbers language-none"><code class="language-none"># æ³¨æ„ value ç”¨ å•å¼•å·
set wabisabifag:user:1 '{"id":1,"name":"Jack","age":21}'
GET wabisabifag:user:1<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>
<img src="/../JavaEE/21.png" alt="Rediså›¾å½¢åŒ–ç•Œé¢æ˜¾ç¤ºå±‚çº§å…³ç³»å›¾"></li>
</ul>
</li>
</ul>
</li>
</ul>
<h5 id="4-Hashç±»å‹"><a href="#4-Hashç±»å‹" class="headerlink" title="4.Hashç±»å‹"></a>4.Hashç±»å‹</h5><p>Hashç±»å‹(æ•£åˆ—),valueæ˜¯ä¸€ä¸ªæ— åºå­—å…¸ï¼Œç±»ä¼¼javaçš„HashMapç»“æ„ã€‚</p>
<ul>
<li>Stringç»“æ„å¯¹è±¡åºåˆ—åŒ–ä¸ºJSONå­—ç¬¦ä¸²åå­˜å‚¨ï¼Œå½“ä¿®æ”¹å¯¹è±¡æŸä¸ªå­—æ®µæ—¶ä¸æ–¹ä¾¿<br><img src="/../JavaEE/23.png" alt="Stringç»“æ„æ•°æ®"></li>
<li>Hashç»“æ„å¯ä»¥å°†å¯¹è±¡çš„æ¯ä¸ªå­—æ®µç‹¬ç«‹å­˜å‚¨ï¼Œå¯é’ˆå¯¹å•ä¸ªå­—æ®µåšCRUD<br><img src="/../JavaEE/22.png" alt="Hashç»“æ„æ•°æ®"></li>
</ul>
<h6 id="1-Hashçš„å¸¸è§å‘½ä»¤æœ‰ï¼š"><a href="#1-Hashçš„å¸¸è§å‘½ä»¤æœ‰ï¼š" class="headerlink" title="1.Hashçš„å¸¸è§å‘½ä»¤æœ‰ï¼š"></a>1.Hashçš„å¸¸è§å‘½ä»¤æœ‰ï¼š</h6><ul>
<li><p>HSET key field value:æ·»åŠ æˆ–è€…ä¿®æ”¹hashç±»å‹keyçš„fieldçš„å€¼</p>
</li>
<li><p>HGET key field:è·å–ä¸€ä¸ª hash ç±»å‹ key çš„ field çš„å€¼</p>
</li>
<li><p>HMSET:æ‰¹é‡æ·»åŠ›å£å¤šä¸ªhashç±»å‹keyçš„fieldçš„å€¼ a</p>
</li>
<li><p>HMGET:æ‰¹é‡è·å–å¤šä¸ªhashç±»å‹keyçš„fieldçš„å€¼</p>
</li>
<li><p>HGETALL:è·å–ä¸€ä¸ªhashç±»å‹çš„keyä¸­çš„æ‰€æœ‰çš„fieldå’Œvalue</p>
</li>
<li><p>HKEYS:è·å–ä¸€ä¸ªhashç±»å‹çš„keyä¸­çš„æ‰€æœ‰çš„field</p>
</li>
<li><p>HVALS:è·å–ä¸€ä¸ªhashç±»å‹çš„keyä¸­çš„æ‰€æœ‰çš„value</p>
</li>
<li><p>HINCRBY:è®©ä¸€ä¸ªhashç±»å‹keyçš„å­—æ®µå€¼è‡ªå¢å¹¶æŒ‡å®šæ­¥é•¿</p>
<ul>
<li>HINCRBY wabisabi:user:1 age -2</li>
</ul>
</li>
<li><p>HSETNX:æ·»åŠ ä¸€ä¸ªhashç±»å‹çš„keyçš„fieldå€¼ï¼Œå‰ææ˜¯è¿™ä¸ªfieldä¸å­˜åœ¨</p>
</li>
</ul>
<pre class="line-numbers language-none"><code class="language-none">HMSET wabisabifag:user:1 name wabisabifag age 20 gender man<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<p><img src="/../JavaEE/24.png" alt="Hashç»“æ„æ•°æ®å±‚çº§å­˜å‚¨"></p>
<h5 id="5-Listç±»å‹"><a href="#5-Listç±»å‹" class="headerlink" title="5.Listç±»å‹"></a>5.Listç±»å‹</h5><p>Redisçš„Listç±»å‹æ˜¯ä¸€ä¸ªåŒå‘é“¾è¡¨ç»“æ„ï¼Œå¯ä»¥åŒå‘æ£€ç´¢</p>
<h6 id="1-Listç‰¹å¾"><a href="#1-Listç‰¹å¾" class="headerlink" title="1.Listç‰¹å¾"></a>1.Listç‰¹å¾</h6><ul>
<li>æœ‰åº</li>
<li>å…ƒç´ å¯é‡å¤</li>
<li>æ’å…¥å’Œåˆ é™¤å¿«</li>
<li>æŸ¥è¯¢é€Ÿåº¦ä¸€èˆ¬</li>
</ul>
<h6 id="2-Listçš„å¸¸è§å‘½ä»¤"><a href="#2-Listçš„å¸¸è§å‘½ä»¤" class="headerlink" title="2.Listçš„å¸¸è§å‘½ä»¤"></a>2.Listçš„å¸¸è§å‘½ä»¤</h6><ul>
<li><p>LPUSH key elementâ€¦ :å‘åˆ—è¡¨å·¦ä¾§æ’å…¥ä¸€ä¸ªæˆ–å¤šä¸ªå…ƒç´ </p>
</li>
<li><p>LPOP key:ç§»é™¤å¹¶è¿”å›åˆ—è¡¨å·¦ä¾§çš„ç¬¬ä¸€ä¸ªå…ƒç´ ï¼Œæ²¡æœ‰åˆ™è¿”å›nil</p>
</li>
<li><p>RPUSH key elementâ€¦ :å‘åˆ—è¡¨å³ä¾§æ’å…¥ä¸€ä¸ªæˆ–å¤šä¸ªå…ƒç´ </p>
</li>
<li><p>RPOP key:ç§»é™¤å¹¶è¿”å›åˆ—è¡¨å³ä¾§çš„ç¬¬ä¸€ä¸ªå…ƒç´ </p>
</li>
<li><p>LRANGE key star end:è¿”å›ä¸€æ®µè§’æ ‡èŒƒå›´å†…çš„æ‰€æœ‰å…ƒç´ </p>
</li>
<li><p>BLPOPå’ŒBRPOPï¼šä¸LPOPå’ŒRPOPç±»ä¼¼ï¼Œåªä¸è¿‡åœ¨æ²¡æœ‰å…ƒç´ æ—¶ç­‰å¾…æŒ‡å®šæ—¶é—´ï¼Œè€Œä¸æ˜¯ç›´æ¥è¿”å›è€Œ</p>
</li>
</ul>
<p><img src="/../JavaEE/25.png" alt="Listç±»å‹ç»“æ„æ“ä½œæœºåˆ¶åŸç†"></p>
<pre class="line-numbers language-none"><code class="language-none"># é˜»å¡å¼è·å–ç­‰å¾…(user2ä¸å­˜åœ¨ï¼Œç­‰å¾…æ—¶é—´100s)
BLPOP user2 100<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>
<h6 id="3-æ¨¡æ‹Ÿ-æ ˆ-åŠŸèƒ½"><a href="#3-æ¨¡æ‹Ÿ-æ ˆ-åŠŸèƒ½" class="headerlink" title="3.æ¨¡æ‹Ÿ æ ˆ åŠŸèƒ½"></a>3.æ¨¡æ‹Ÿ æ ˆ åŠŸèƒ½</h6><ol>
<li>Listç»“æ„æ¨¡æ‹Ÿæ ˆ</li>
</ol>
<ul>
<li>å…¥å£å’Œå‡ºå£åœ¨åŒä¸€è¾¹</li>
</ul>
<ol start="2">
<li>Listç»“æ„æ¨¡æ‹Ÿé˜Ÿåˆ—</li>
</ol>
<ul>
<li>å…¥å£å’Œå‡ºå£ä¸åœ¨åŒä¸€è¾¹</li>
</ul>
<ol start="3">
<li>Listç»“æ„æ¨¡æ‹Ÿé˜»å¡é˜Ÿåˆ—</li>
</ol>
<ul>
<li>å…¥å£å’Œå‡ºå£ä¸åœ¨åŒä¸€è¾¹</li>
<li>å‡ºé˜Ÿæ—¶é‡‡ç”¨BLPOPæˆ–BRPOP</li>
</ul>
<h5 id="6-Setç±»å‹"><a href="#6-Setç±»å‹" class="headerlink" title="6.Setç±»å‹"></a>6.Setç±»å‹</h5><p>Redisçš„Setç»“æ„æ˜¯ä¸€ä¸ªvalueä¸ºnullçš„HashMapï¼Œåº”ä¸ºæ˜¯ä¸€ä¸ªhashè¡¨ï¼Œå› æ­¤å…·å¤‡HashSetç±»ä¼¼ç‰¹å¾(ç¤¾äº¤å…³ç³»åº”ç”¨)</p>
<ul>
<li>æ— åº</li>
<li>å…ƒç´ ä¸å¯é‡å¤</li>
<li>æŸ¥è¯¢å¿«</li>
<li>æ”¯æŒäº¤é›†ã€å¹¶é›†ã€å·®é›†ç­‰åŠŸèƒ½</li>
</ul>
<h6 id="1-Setçš„å¸¸è§å‘½ä»¤"><a href="#1-Setçš„å¸¸è§å‘½ä»¤" class="headerlink" title="1.Setçš„å¸¸è§å‘½ä»¤"></a>1.Setçš„å¸¸è§å‘½ä»¤</h6><ul>
<li><p>SADD key memberâ€¦:å‘setä¸­æ·»åŠ ä¸€ä¸ªæˆ–å¤šä¸ªå…ƒç´ </p>
</li>
<li><p>SREM key memberâ€¦ï¼šç§»é™¤setä¸­çš„æŒ‡å®šå…ƒç´ </p>
</li>
<li><p>SCARD key:è¿”å›setä¸­å…ƒç´ çš„ä¸ªæ•° </p>
</li>
<li><p>SMEMBERS:è·å–setä¸­çš„æ‰€æœ‰å…ƒç´           </p>
</li>
<li><p>SISMEMBER key member:åˆ¤æ–­ä¸€ä¸ªå…ƒç´ æ˜¯å¦å­˜åœ¨äºsetä¸­</p>
</li>
<li><p>SINTER keyl key2 â€¦:æ±‚keylä¸key2çš„äº¤é›†</p>
</li>
<li><p>SDIFF keyl key2 â€¦:æ±‚keyl ä¸key2çš„å·®é›†</p>
</li>
<li><p>SUNION keyl key2 æ±‚keylå’Œkey2çš„å¹¶é›†</p>
</li>
</ul>
<p><img src="/../JavaEE/26.png" alt="Setç±»å‹ç»“æ„æ“ä½œæœºåˆ¶åŸç†"></p>
<h5 id="7-SortedSetç±»å‹"><a href="#7-SortedSetç±»å‹" class="headerlink" title="7.SortedSetç±»å‹"></a>7.SortedSetç±»å‹</h5><p>Redisçš„SortedSetæ˜¯ä¸€ä¸ªå¯æ’åºçš„seté›†åˆ</p>
<h6 id="1-SortedSetç‰¹æ€§"><a href="#1-SortedSetç‰¹æ€§" class="headerlink" title="1.SortedSetç‰¹æ€§"></a>1.SortedSetç‰¹æ€§</h6><p>SortedSetä¸­çš„æ¯ä¸€ä¸ªå…ƒç´ éƒ½å¸¦ä¸€ä¸ªscoreå±æ€§ï¼ŒåŸºäºscoreå±æ€§å¯¹å…ƒç´ æ’åºï¼Œåº•å±‚çš„å®ç°æ˜¯ä¸€ä¸ªè·³è¡¨(SkipList)åŠ Hashè¡¨</p>
<h6 id="2-SortedSetçš„å¸¸è§å‘½ä»¤"><a href="#2-SortedSetçš„å¸¸è§å‘½ä»¤" class="headerlink" title="2.SortedSetçš„å¸¸è§å‘½ä»¤"></a>2.SortedSetçš„å¸¸è§å‘½ä»¤</h6><ul>
<li><p>ZADD key score member:æ·»åŠ ä¸€ä¸ªæˆ–å¤šä¸ªå…ƒç´ åˆ°sorted set,å¦‚æœå·²ç»å­˜åœ¨åˆ™æ›´æ–°å…¶scoreå€¼</p>
</li>
<li><p>ZREM key member:åˆ é™¤sorted setä¸­çš„ä¸€ä¸ªæŒ‡å®šå…ƒç´ </p>
</li>
<li><p>ZSCORE key member:è·å–sorted setä¸­çš„æŒ‡å®šå…ƒç´ çš„scoreå€¼</p>
</li>
<li><p>ZRANK key member:è·å–sorted setä¸­çš„æŒ‡å®šå…ƒç´ çš„æ’å</p>
</li>
<li><p>ZCARD key:è·å–sorted setä¸­çš„å…ƒç´ ä¸ªæ•°</p>
</li>
<li><p>ZCOUNT key min max:ç»Ÿè®¡scoreå€¼åœ¨ç»™å®šèŒƒå›´å†…çš„æ‰€æœ‰å…ƒç´ çš„ä¸ªæ•°</p>
</li>
<li><p>ZINCRBY key increment member:è®©sorted setä¸­çš„æŒ‡å®šå…ƒç´ è‡ªå¢ï¼Œæ­¥é•¿ä¸ºæŒ‡å®šçš„incrementå€¼</p>
</li>
<li><p>ZRANGE key min max:æŒ‰ç…§scoreæ’åºåï¼Œè·å–æŒ‡å®šæ’åèŒƒå›´å†…çš„å…ƒç´ </p>
</li>
<li><p>ZRANGEBYSCORE key min max:æŒ‰ç…§scoreæ’åºåï¼Œè·å–æŒ‡å®šscoreèŒƒå›´å†…çš„å…ƒç´ </p>
</li>
<li><p>ZDIFFã€ZINTER. ZUNIONï¼šæ±‚å·®é›†ã€äº¤é›†ã€å¹¶é›†<br>æ³¨æ„: æ’åé»˜è®¤å‡åºï¼Œé™åºæ’åºæ ¼å¼ Z+rev+è¯­æ³•ã€‚ä¾‹å¦‚: ZREVINCRBY key increment member</p>
</li>
</ul>
<h3 id="3-Redisçš„Javaå®¢æˆ·ç«¯"><a href="#3-Redisçš„Javaå®¢æˆ·ç«¯" class="headerlink" title="3.Redisçš„Javaå®¢æˆ·ç«¯"></a>3.Redisçš„Javaå®¢æˆ·ç«¯</h3><p>åœ¨Rediså®˜ç½‘ä¸­æä¾›å„ç§è¯­è¨€<a target="_blank" rel="noopener external nofollow noreferrer" href="https://redis.io/clients">Redisçš„å®¢æˆ·ç«¯</a></p>
<h4 id="1-Jediså®¢æˆ·ç«¯"><a href="#1-Jediså®¢æˆ·ç«¯" class="headerlink" title="1.Jediså®¢æˆ·ç«¯"></a>1.Jediså®¢æˆ·ç«¯</h4><p>Spring Data Redis æ•´åˆJediså’Œlettuce</p>
<ul>
<li><a href="https://github.com/redis/jedis">Jedis</a>ä»¥Rediså‘½ä»¤ä½œä¸ºæ–¹æ³•åç§°ï¼Œå­¦ä¹ æˆæœ¬ä½ï¼Œç®€å•å®ç”¨ã€‚ä½†æ˜¯Jediså®ä¾‹çº¿ç¨‹ä¸å®‰å…¨ï¼Œå¤šçº¿ç¨‹ç¯å¢ƒä¸‹éœ€è¦åŸºäºè¿æ¥æ± ä½¿ç”¨</li>
<li>lettuceåŸºäºNettyå®ç°ï¼Œæ”¯æŒåŒæ­¥ã€å¼‚æ­¥ã€å’Œå“åº”å¼ç¼–ç¨‹æ–¹å¼ï¼Œçº¿ç¨‹å®‰å…¨ã€‚æ”¯æŒRedisçš„å“¨å…µæ¨¡å¼ã€é›†ç¾¤æ¨¡å¼å’Œç®¡é“æ¨¡å¼</li>
<li>Redissonæ˜¯åŸºäºRediså®ç°çš„åˆ†å¸ƒå¼ã€å¯ä¼¸ç¼©çš„Javaæ•°æ®ç»“æ„é›†åˆï¼ŒåŒ…å«Mapã€Queueã€Lockã€Semaphoreã€AtomicLongç­‰åŠŸèƒ½</li>
</ul>
<h5 id="1-Springbootæ•´åˆJedis"><a href="#1-Springbootæ•´åˆJedis" class="headerlink" title="1.Springbootæ•´åˆJedis"></a>1.Springbootæ•´åˆJedis</h5><div class="tabs" id="å¼•å…¥ä¾èµ–"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#å¼•å…¥ä¾èµ–-1">å¼•å…¥ä¾èµ–</button></li><li class="tab"><button type="button" data-href="#å¼•å…¥ä¾èµ–-2">å»ºç«‹è¿æ¥</button></li><li class="tab"><button type="button" data-href="#å¼•å…¥ä¾èµ–-3">å»ºç«‹Poolè¿æ¥æ± </button></li><li class="tab"><button type="button" data-href="#å¼•å…¥ä¾èµ–-4">å¼•å…¥ä¾èµ– 4</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="å¼•å…¥ä¾èµ–-1"><pre class="line-numbers language-none"><code class="language-none">&lt;!--jedis--&gt;
  &lt;dependency&gt;
      &lt;groupId&gt;redis.clients&lt;/groupId&gt;
      artifactId&gt;jedis&lt;/artifactId&gt;
  &lt;/dependency&gt;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="å¼•å…¥ä¾èµ–-2"><pre class="line-numbers language-none"><code class="language-none">package top.wabisabifag.test;

import org.junit.jupiter.api.AfterEach;
import org.junit.jupiter.api.BeforeEach;
import org.junit.jupiter.api.Test;
import redis.clients.jedis.Jedis;
import top.wabisabifag.util.JedisConnectionFactory;

public class JedisTest {
    private RedisProperties.Jedis jedis;

    @BeforeEach
    void setUp(){
        // 1.å»ºç«‹è¿æ¥
        jedis = new RedisProperties.Jedis();
        // 2.è®¾ç½®å¯†ç 
        jedis.auth("123456");
        // 3.é€‰æ‹©åº“
        jedis.select(0);
    }

    @Test
    void testString(){
        // å­˜å…¥æ•°æ®
        String result = jedis.set("name","Tigger");
        System.out.println("result="+result);
        // è·å–æ•°æ®
        String name = jedis.get("name");
        System.out.println("name="+name);
    }

    @Test
    void testHash(){
        //æ’å…¥Hashæ•°æ®
        jedis.hset("user:1","name","jack");
        jedis.hset("user:1","age","20");
        // è·å–
        Map&lt;String,String&gt; map=jedis.hgetAll("user:1");
    }

    @AfterEach
    void tearDown(){
        // 4. å…³é—­èµ„æº
        if (jedis!=null){
            jedis.close();
        }
    }

}<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="å¼•å…¥ä¾èµ–-3"><pre class="line-numbers language-none"><code class="language-none">package top.wabisabifag.util;

import redis.clients.jedis.Jedis;
import redis.clients.jedis.JedisPool;
import redis.clients.jedis.JedisPoolConfig;

public class JedisConnectionFactory {
    private static final JedisPool jedisPool;

    static {
        // é…ç½®è¿æ¥æ± 
        JedisPoolConfig poolConfig = new JedisPoolConfig();
        poolConfig.setMaxTotal(8);
        poolConfig.setMaxIdle(8);
        poolConfig.setMaxIdle(0);
        poolConfig.setMaxWaitMillis(100);

        // åˆ›å»ºè¿æ¥æ± å¯¹è±¡
        jedisPool = new JedisPool(poolConfig,
                "192.168.0.0.1",6379,100,"123456");
    }

    public static Jedis getJedis(){
        return jedisPool.getResource();
    }
}<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="å¼•å…¥ä¾èµ–-4"><p>package top.wabisabifag.test;</p>
<p>import org.junit.jupiter.api.AfterEach;<br>import org.junit.jupiter.api.BeforeEach;<br>import org.junit.jupiter.api.Test;<br>import redis.clients.jedis.Jedis;<br>import top.wabisabifag.util.JedisConnectionFactory;</p>
<p>import java.util.Map;</p>
<p>public class JedisTest {<br>    private Jedis jedis;</p>
<pre><code>@BeforeEach
void setUp(){
    // 1.å»ºç«‹è¿æ¥
    jedis = JedisConnectionFactory.getJedis();
    // 2.è®¾ç½®å¯†ç 
    jedis.auth("123456");
    // 3.é€‰æ‹©åº“
    jedis.select(0);
}
@Test
void testString(){
    // å­˜å…¥æ•°æ®
    String result = jedis.set("name","Tigger");
    System.out.println("result="+result);
    // è·å–æ•°æ®
    String name = jedis.get("name");
    System.out.println("name="+name);
}
@Test
void testHash(){
    //æ’å…¥Hashæ•°æ®
    jedis.hset("user:1","name","jack");
    jedis.hset("user:1","age","20");
    // è·å–
    Map&lt;String,String&gt; map=jedis.hgetAll("user:1");
}

@AfterEach
void tearDown(){
    // 4. å…³é—­èµ„æº
    if (jedis!=null){
        jedis.close();
    }
}
</code></pre>
<p>}</p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div>

<h4 id="2-SpringDataRedis-å®¢æˆ·ç«¯"><a href="#2-SpringDataRedis-å®¢æˆ·ç«¯" class="headerlink" title="2.SpringDataRedis å®¢æˆ·ç«¯"></a>2.SpringDataRedis å®¢æˆ·ç«¯</h4><p>SpringDataæ˜¯Springä¸­æ•°æ®æ“ä½œçš„æ¨¡å—ï¼ŒåŒ…å«å¯¹å„ç§æ•°æ®åº“çš„é›†æˆï¼Œå…¶ä¸­Redisçš„é›†æˆæ¨¡å—å«åš<a target="_blank" rel="noopener external nofollow noreferrer" href="http://spring.io/project/spring-data-redis">SpringDataRedis</a></p>
<ul>
<li>æä¾›äº†å¯¹ä¸åŒRediså®¢æˆ·ç«¯çš„æ•´è€³ï¼ˆLettuceå’ŒJedisï¼‰</li>
<li>æä¾›äº† RedisTemplate ç»Ÿä¸€API æ¥æ“ä½œ Redis</li>
<li>æ”¯æŒRedisçš„å‘å¸ƒè®¢é˜…æ¨¡å‹</li>
<li>æ”¯æŒRediså“¨å…µå’ŒRedisé›†ç¾¤</li>
<li>æ”¯æŒåŸºäºLettuceçš„å“åº”å¼ç¼–ç¨‹</li>
<li>æ”¯æŒåŸºäºJDKã€JSONã€å­—ç¬¦ä¸²ã€Springå¯¹è±¡çš„æ•°æ®åºåˆ—åŒ–åŠååºåˆ—åŒ–</li>
<li>æ”¯æŒåŸºäºRudisçš„JDKCoUectionå®ç°</li>
</ul>
<h5 id="1-RedisTemplateå·¥å…·ç±»"><a href="#1-RedisTemplateå·¥å…·ç±»" class="headerlink" title="1.RedisTemplateå·¥å…·ç±»"></a>1.RedisTemplateå·¥å…·ç±»</h5><p>SpringDataRedisä¸­æä¾›äº†RedisTemplateå·¥å…·ç±»,å…¶ä¸­å°è£…äº†å„ç§å¯¹Redisçš„æ“ä½œã€‚å¹¶ä¸”å°†ä¸åŒæ•°æ®ç±»å‹çš„æ“ä½œAPIå° è£…åˆ°äº†ä¸åŒçš„ç±»å‹ä¸­ï¼š<br>API              </p>
<ul>
<li><p>rednsTemplate.opsForValue() </p>
<ul>
<li>ValueOperations   æ“ä½œStringç±»å‹æ•°æ®</li>
</ul>
</li>
<li><p>redisTemplate.opsForHash()   </p>
<ul>
<li>Hashoperations    æ“ä½œHashç±»å‹æ•°æ®</li>
</ul>
</li>
<li><p>red-isTemplate.opsForList() </p>
<ul>
<li>Listoperations    æ“ä½œListç±»å‹æ•°æ®</li>
</ul>
</li>
<li><p>redisTemplate.opsForSet ()  </p>
<ul>
<li>SetOperations     æ“ä½œSetç±»å‹æ•°æ®</li>
</ul>
</li>
<li><p>redisTemplate.opsForZSet()  </p>
<ul>
<li>ZSetOperations    æ“ä½œSortedSetç±»å‹æ•°æ®</li>
</ul>
</li>
<li><p>redisTemplate     é€šç”¨çš„å‘½ä»¤</p>
</li>
</ul>
<h6 id="1-SpringBoot-é…ç½®åºåˆ—åŒ–ç±»"><a href="#1-SpringBoot-é…ç½®åºåˆ—åŒ–ç±»" class="headerlink" title="1.SpringBoot é…ç½®åºåˆ—åŒ–ç±»"></a>1.SpringBoot é…ç½®åºåˆ—åŒ–ç±»</h6><pre class="line-numbers language-none"><code class="language-none">package top.wabisabifag.config;

import com.fasterxml.jackson.annotation.JsonAutoDetect;
import com.fasterxml.jackson.annotation.JsonInclude;
import com.fasterxml.jackson.annotation.JsonTypeInfo;
import com.fasterxml.jackson.annotation.PropertyAccessor;
import com.fasterxml.jackson.databind.DeserializationFeature;
import com.fasterxml.jackson.databind.MapperFeature;
import com.fasterxml.jackson.databind.ObjectMapper;
import com.fasterxml.jackson.databind.SerializationFeature;
import com.fasterxml.jackson.databind.jsontype.impl.LaissezFaireSubTypeValidator;
import org.springframework.context.annotation.Bean;
import org.springframework.context.annotation.Configuration;
import org.springframework.data.redis.connection.RedisConnectionFactory;
import org.springframework.data.redis.core.RedisTemplate;
import org.springframework.data.redis.serializer.Jackson2JsonRedisSerializer;
import org.springframework.data.redis.serializer.StringRedisSerializer;

import javax.annotation.Resource;
import java.text.SimpleDateFormat;
import java.util.TimeZone;

@Configuration
public class MyRedisConfig {

    @Resource
    private RedisConnectionFactory factory;

    @Bean
    public RedisTemplate redisTemplate(){
        RedisTemplate&lt;String,Object&gt; redisTemplate = new RedisTemplate&lt;&gt;();
        redisTemplate.setConnectionFactory(factory);
        redisTemplate.setKeySerializer(new StringRedisSerializer());

        // String ç±»å‹åºåˆ—åŒ– json
        Jackson2JsonRedisSerializer&lt;Object&gt; serializer = new Jackson2JsonRedisSerializer&lt;&gt;(Object.class);
        redisTemplate.setValueSerializer(serializer);

        ObjectMapper om = new ObjectMapper();
        om.setVisibility(PropertyAccessor.ALL, JsonAutoDetect.Visibility.ANY);
        om.setDateFormat(new SimpleDateFormat("yyyy-MM-dd HH:mm:ss"));
                om.setTimeZone(TimeZone.getDefault());
        om.configure(MapperFeature.USE_ANNOTATIONS, false);
        om.configure(DeserializationFeature.FAIL_ON_UNKNOWN_PROPERTIES, false);
        om.configure(SerializationFeature.FAIL_ON_EMPTY_BEANS, false);
        om.activateDefaultTyping(LaissezFaireSubTypeValidator.instance
                ,ObjectMapper.DefaultTyping.NON_FINAL, JsonTypeInfo.As.PROPERTY);
        om.setSerializationInclusion(JsonInclude.Include.NON_NULL);
        serializer.setObjectMapper(om);

        return redisTemplate;
    }
}<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<h5 id="2-SpringDataRedisæ•´åˆ"><a href="#2-SpringDataRedisæ•´åˆ" class="headerlink" title="2.SpringDataRedisæ•´åˆ"></a>2.SpringDataRedisæ•´åˆ</h5><div class="tabs" id="å¼•å…¥ä¾èµ–"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#å¼•å…¥ä¾èµ–-1">å¼•å…¥ä¾èµ–</button></li><li class="tab"><button type="button" data-href="#å¼•å…¥ä¾èµ–-2">é…ç½®æ–‡ä»¶</button></li><li class="tab"><button type="button" data-href="#å¼•å…¥ä¾èµ–-3">æ³¨å…¥APIæµ‹è¯•ç¼–å†™</button></li><li class="tab"><button type="button" data-href="#å¼•å…¥ä¾èµ–-4">æ‰‹åŠ¨åºåˆ—åŒ–</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="å¼•å…¥ä¾èµ–-1"><pre class="line-numbers language-none"><code class="language-none">&lt;!--jedis--&gt;
&lt;dependency&gt;
    &lt;groupId&gt;redis.clients&lt;/groupId&gt;
    &lt;artifactId&gt;jedis&lt;/artifactId&gt;
&lt;/dependency&gt;
&lt;!--è¿æ¥æ± ä¾èµ–--&gt;
&lt;dependency&gt;
    &lt;groupId&gt;org.apache.commons&lt;/groupId&gt;
    &lt;artifactId&gt;commons-pool2&lt;/artifactId&gt;
&lt;/dependency&gt;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="å¼•å…¥ä¾èµ–-2"><pre class="line-numbers language-none"><code class="language-none">spring:
  redis:
    host: localhost
    port: 6379
    client-type: jedis
    password: 123456
    lettuce:
      pool:
        max-active: 16
        max-idle: 8
        min-idle: 0
        max-wait: 100
    jedis:
      pool:
        max-active: 16
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="å¼•å…¥ä¾èµ–-3"><pre class="line-numbers language-none"><code class="language-none">@SpringBootTest
public class RedisTest{

    // ä»¥å¯¹è±¡ æ“ä½œçš„åŸºæœ¬å•å…ƒ
    // å®¢æœç«¯ : RedisTemplate ä»¥å¯¹è±¡ä½œä¸ºKey å’Œ Valueï¼Œå†…éƒ¨å¯¹æ•°æ®è¿›è¡Œåºåˆ—åŒ– æ“ä½œ    
    @Autowired
    private RedisTemplate redisTemplate;

    @Test
    public void setRedisTemplate(){
        ValueOperations ops = redisTemplate.opsForValue();
        ops.set("age",42);
        Object age = redisTemplate.opsForValue().get("age");
        System.out.println(age);
    }
}<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="å¼•å…¥ä¾èµ–-4"><pre class="line-numbers language-none"><code class="language-none">@SpringBootTest
public class RedisTest{

    // ä»¥å¯¹è±¡ æ“ä½œçš„åŸºæœ¬å•å…ƒ
    // å®¢æœç«¯ : RedisTemplate ä»¥å¯¹è±¡ä½œä¸ºKey å’Œ Valueï¼Œå†…éƒ¨å¯¹æ•°æ®è¿›è¡Œåºåˆ—åŒ– æ“ä½œ    
    @Autowired
    private StringRedisTemplate stringRedisTemplate;
    private static final ObjectMapper mapper = new ObjectMapper();
    @Test
    public void setAndGetRedisTemplate(){
      stringRedisTemplate.opsForValue().set("age",42);
      Object age = stringRedisTemplate.opsForValue().get("age");
       
      User user = new User("Jack",21);

      // æ‰‹åŠ¨åºåˆ—åŒ–
      String JSON = mapper.writeValueAsString(user);
      stringRedisTemplate.opsForValue().set("user:1",JSON);
      String jsonUser = stringRedisTemplate.opsForValue().get("user:1");
      
      User user1 = mapper.readValue(jsonUser,User.class);
      System.out.print("user1"+user1);


    }
}<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div>
<h2 id="4-Axios"><a href="#4-Axios" class="headerlink" title="4.Axios"></a>4.Axios</h2><p><a href="https://github.com/axios/axios">Axios</a>æ˜¯å¼€æºçš„åœ¨æµè§ˆå™¨å’ŒNode.jsçš„å¼‚æ­¥é€šä¿¡æ¡†æ¶ï¼Œå¥¹çš„ä¸»è¦ä½œç”¨å°±æ˜¯å®ç°AJAXå¼‚æ­¥é€šä¿¡</p>
<h3 id="1-Axiosç‰¹æ€§"><a href="#1-Axiosç‰¹æ€§" class="headerlink" title="1.Axiosç‰¹æ€§"></a>1.Axiosç‰¹æ€§</h3><ul>
<li>ä»æµè§ˆå™¨ä¸­åˆ›å»º XMLHttpRequests</li>
<li>ä» node.js åˆ›å»º http è¯·æ±‚</li>
<li>æ”¯æŒ Promise API</li>
<li>æ‹¦æˆªè¯·æ±‚å’Œå“åº”</li>
<li>è½¬æ¢è¯·æ±‚æ•°æ®å’Œå“åº”æ•°æ®</li>
<li>å–æ¶ˆè¯·æ±‚</li>
<li>è‡ªåŠ¨è½¬æ¢ JSON æ•°æ®</li>
<li>å®¢æœç«¯æ”¯æŒé˜²å¾¡ XSRF(è·¨ç«™è¯·æ±‚ä¼ªæ¸£)</li>
</ul>
<h2 id="5-redisè¯¾ç¨‹ç¬”è®°"><a href="#5-redisè¯¾ç¨‹ç¬”è®°" class="headerlink" title="5.redisè¯¾ç¨‹ç¬”è®°"></a>5.redisè¯¾ç¨‹ç¬”è®°</h2><h3 id="2-Axios-ä½¿ç”¨"><a href="#2-Axios-ä½¿ç”¨" class="headerlink" title="2.Axios ä½¿ç”¨"></a>2.Axios ä½¿ç”¨</h3><h4 id="1-å®‰è£…vue-axios"><a href="#1-å®‰è£…vue-axios" class="headerlink" title="1.å®‰è£…vue axios"></a>1.å®‰è£…vue axios</h4><h5 id="1-ä¸‹è½½-vue-axios"><a href="#1-ä¸‹è½½-vue-axios" class="headerlink" title="1.ä¸‹è½½ vue-axios"></a>1.ä¸‹è½½ vue-axios</h5><pre class="line-numbers language-none"><code class="language-none">npm install --save axios vue-axios<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<h5 id="2-åœ¨main-js-å¼•å…¥"><a href="#2-åœ¨main-js-å¼•å…¥" class="headerlink" title="2.åœ¨main.js å¼•å…¥"></a>2.åœ¨main.js å¼•å…¥</h5><pre class="line-numbers language-none"><code class="language-none">import Vue from 'vue'
import axios from 'axios'
import VueAxios from 'vue-axios'

Vue.use(VueAxios,axios)<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h5 id="3-å‘é€axiosè¯·æ±‚"><a href="#3-å‘é€axiosè¯·æ±‚" class="headerlink" title="3.å‘é€axiosè¯·æ±‚"></a>3.å‘é€axiosè¯·æ±‚</h5><pre class="line-numbers language-none"><code class="language-none">import axios from "axios";
import Qs from 'qs'

 methods: {
        getData() {
            const _this = this;
            axios.get("http://localhost:8081/student/findAll").then(function (resp) {
                console.log(response);
                _this.tableData = resp.data;
            })
        }
 }<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<h5 id="4-SpringMVC-è§£å†³è·¨åŸŸé—®é¢˜"><a href="#4-SpringMVC-è§£å†³è·¨åŸŸé—®é¢˜" class="headerlink" title="4.SpringMVC è§£å†³è·¨åŸŸé—®é¢˜"></a>4.SpringMVC è§£å†³è·¨åŸŸé—®é¢˜</h5><pre class="line-numbers language-none"><code class="language-none">&lt;mvc:cors&gt;
  &lt;mvc:mapping path="/**"
    allowed-originPatterns="*"
    allowed-methods="GET,POST,PUT,DELETE,OPTIONS,PATCH"
    allow-credentials="true"
    allowed-headers="Content-Type,Access-Control-Allow-Headers,Authorization,X-Requestes-With" /&gt;
&lt;/mvc:cors&gt;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h6 id="1-è§£å†³axiosæ— æ³•ä¼ é€’dataä¸­çš„å‚æ•°é—®é¢˜"><a href="#1-è§£å†³axiosæ— æ³•ä¼ é€’dataä¸­çš„å‚æ•°é—®é¢˜" class="headerlink" title="1.è§£å†³axiosæ— æ³•ä¼ é€’dataä¸­çš„å‚æ•°é—®é¢˜"></a>1.è§£å†³axiosæ— æ³•ä¼ é€’dataä¸­çš„å‚æ•°é—®é¢˜</h6><pre class="line-numbers language-none"><code class="language-none">é»˜è®¤æƒ…å†µä¸‹å‘é€axiosæ—¶è¯·æ±‚å¤´å†…å®¹ç±»å‹ï¼š
Content-Type:application/json;charset=UTF-8

å®é™…æœåŠ¡ç«¯éœ€è¦çš„ï¼š
Content-Type:application/x-www-form-urlencoded

å› æ­¤ï¼Œä½¿ç”¨axioså†…ç½®åº“ä¸­çš„æ–¹æ³•è¿›è¡Œå†…å®¹ç±»å‹çš„è½¬æ¢ï¼š
import Qs from 'qs'

this.axios({
  method: 'post',
  url: 'http://localhost:8081/reqist',
  transformRequest: [function(data){
    return Qs.stringify(data)
  }],
  data:{
    email: this.email
  }
}) 
  .then(function(response){
    alert(response.data.message)
  });<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>








<h1 id="9-MyBatiså…¥é—¨"><a href="#9-MyBatiså…¥é—¨" class="headerlink" title="9.MyBatiså…¥é—¨"></a>9.MyBatiså…¥é—¨</h1><h2 id="1-æ•°æ®æŒä¹…å±‚æ¡†æ¶"><a href="#1-æ•°æ®æŒä¹…å±‚æ¡†æ¶" class="headerlink" title="1.æ•°æ®æŒä¹…å±‚æ¡†æ¶"></a>1.æ•°æ®æŒä¹…å±‚æ¡†æ¶</h2><h3 id="1-æ•°æ®æŒä¹…å±‚"><a href="#1-æ•°æ®æŒä¹…å±‚" class="headerlink" title="1.æ•°æ®æŒä¹…å±‚"></a>1.æ•°æ®æŒä¹…å±‚</h3><p>æ•°æ®æŒä¹…åŒ–æŒ‡çš„å°†å†…å­˜ä¸­çš„æ•°æ®ä¿å­˜åˆ°ç£ç›˜ä¸­åŠ ä»¥â€œå›ºåŒ–â€ï¼Œå‡ ä¹æ‰€æœ‰çš„åº”ç”¨ç³»ç»Ÿéƒ½éœ€è¦æ•°æ®æŒä¹…åŒ–ã€‚<br>æŒä¹…åŒ–çš„å®ç°é€šè¿‡å°†æ•°æ®å­˜å‚¨åœ¨å„ç§å…³ç³»å‹æ•°æ®åº“ä¸­å®Œæˆã€‚<br>å› æ­¤åœ¨åº”ç”¨æ¡†æ¶ä¸­ï¼Œä¸€ä¸ªç›¸å¯¹ç‹¬ç«‹çš„é€»è¾‘å±‚ï¼Œä¸“æ³¨äºæ•°æ®æŒä¹…åŒ–é€»è¾‘çš„å®ç°ï¼Œè¯¥é€»è¾‘å±‚é€šå¸¸è¢«ç§°ä¸ºâ€œæ•°æ®æŒä¹…å±‚â€ã€‚</p>
<h3 id="2-ORM"><a href="#2-ORM" class="headerlink" title="2.ORM"></a>2.ORM</h3><p>ORMä¸€èˆ¬æŒ‡æŒä¹…åŒ–æ•°æ®å’Œå®ç°å¯¹è±¡çš„æ˜ å°„ã€‚<br>ORMæ¡†æ¶ä¸€èˆ¬é‡‡ç”¨XMLæ ¼å¼æè¿°å¯¹è±¡å…³ç³»çš„æ˜ å°„ç»†èŠ‚ï¼Œå¹¶ä¸”å°†å…¶å­˜æ”¾åœ¨ä¸“é—¨çš„æ˜ å°„æ–‡ä»¶ä¸­ã€‚</p>
<h2 id="2-Mybatisæ¡†æ¶"><a href="#2-Mybatisæ¡†æ¶" class="headerlink" title="2.Mybatisæ¡†æ¶"></a>2.Mybatisæ¡†æ¶</h2><p>Mybatiså¯ä»¥ä½¿ç”¨ç®€å•çš„XMLä»£ç æˆ–æ³¨è§£ï¼Œå°†åŸç”Ÿç±»å‹ï¼Œæ¥å£å’ŒJavçš„POJOé…ç½®æ˜ å°„ä¸ºæ•°æ®åº“ä¸­çš„è®°å½•ã€‚</p>
<h3 id="MyBatisç‰¹ç‚¹"><a href="#MyBatisç‰¹ç‚¹" class="headerlink" title="MyBatisç‰¹ç‚¹"></a>MyBatisç‰¹ç‚¹</h3><h4 id="1-ç®€å•æ˜“å­¦"><a href="#1-ç®€å•æ˜“å­¦" class="headerlink" title="1.ç®€å•æ˜“å­¦"></a>1.ç®€å•æ˜“å­¦</h4><p>ä¸‹è½½JARåŒ…ï¼Œé…ç½®SQLæ˜ å°„æ–‡ä»¶</p>
<h4 id="2-çµæ´»"><a href="#2-çµæ´»" class="headerlink" title="2.çµæ´»"></a>2.çµæ´»</h4><p>SQlè¯­å¥å†™åœ¨XMLæ–‡ä»¶ä¸­ï¼Œä¾¿äºç»Ÿä¸€ç®¡ç†å’Œä¼˜åŒ–ã€‚<br>è§£é™¤SQLè¯­å¥ä¸ç¨‹åºä»£ç çš„è€¦åˆï¼Œæä¾›æ•°æ®æŒä¹…å±‚ï¼Œå°†ä¸šåŠ¡é€»è¾‘å’Œæ•°æ®è®¿é—®é€»è¾‘åˆ†ç¦»ï¼Œä½¿å¾—ç³»ç»Ÿè®¾è®¡æ›´æ¸…æ™°ï¼Œæ˜“ç»´æŠ¤ï¼Œå®¹æ˜“å•å…ƒæµ‹è¯•ã€‚</p>
<h4 id="3-æä¾›æ˜ å°„æ ‡ç­¾"><a href="#3-æä¾›æ˜ å°„æ ‡ç­¾" class="headerlink" title="3.æä¾›æ˜ å°„æ ‡ç­¾"></a>3.æä¾›æ˜ å°„æ ‡ç­¾</h4><p>æ”¯æŒå¯¹è±¡å’Œæ•°æ®åº“çš„ORMå­—æ®µå…³ç³»æ˜ å°„ï¼Œæ”¯æŒå¯¹è±¡å…³ç³»ç»„å»ºç»´æŠ¤ï¼Œæä¾›XMLæ ‡ç­¾ï¼Œæ”¯æŒåŠ¨æ€SQLã€‚<br>ç›¸æ¯”è¾ƒHibernateè®¾è®¡ç†å¿µå®Œå…¨é¢å‘POJOï¼ŒMyBatisæ›´é€‚åˆç½‘ç»œæ€§ä¸šåŠ¡çš„çµæ´»å˜åŒ–ã€‚</p>
<h2 id="3-MyBatiså·¥ä½œåŸç†"><a href="#3-MyBatiså·¥ä½œåŸç†" class="headerlink" title="3.MyBatiså·¥ä½œåŸç†"></a>3.MyBatiså·¥ä½œåŸç†</h2><h3 id="1-MyBatisæ ¸å¿ƒç±»"><a href="#1-MyBatisæ ¸å¿ƒç±»" class="headerlink" title="1.MyBatisæ ¸å¿ƒç±»"></a>1.MyBatisæ ¸å¿ƒç±»</h3><h4 id="1-Configuration"><a href="#1-Configuration" class="headerlink" title="1.Configuration"></a>1.Configuration</h4><p>MyBatisçš„æ‰€æœ‰çš„é…ç½®ä¿¡æ¯éƒ½ä¿å­˜åœ¨Configurationå¯¹è±¡ä¸­ï¼ŒXMLé…ç½®æ–‡ä»¶ä¸­çš„å¤§éƒ¨åˆ†é…ç½®ä¼šå­˜å‚¨åœ¨è¯¥ç±»ã€‚<br>æ­¤å¤–ï¼Œæä¾›è®¾ç½®é…ç½®ä¿¡æ¯çš„æ–¹æ³•ã€‚Configurationå¯ä»¥ä»XMLé…ç½®æ–‡ä»¶ä¸­è·å–å±æ€§å€¼ï¼Œä¹Ÿå¯ä»¥é€šè¿‡ç¨‹åºç›´æ¥é…ç½®ã€‚</p>
<h4 id="2-SqlSessionFactory"><a href="#2-SqlSessionFactory" class="headerlink" title="2.SqlSessionFactory"></a>2.SqlSessionFactory</h4><p>æ¯ä¸ªå±…äºMyBtisçš„é¡¹ç›®éƒ½é€šè¿‡SQL Session Factoryçš„å®åˆ—ä¸ºä¸­å¿ƒ</p>
<h4 id="3-SqlSession"><a href="#3-SqlSession" class="headerlink" title="3.SqlSession"></a>3.SqlSession</h4><p>MyBatisçš„ä¸»è¦é¡¶å±‚APIï¼ŒSQL Sessionè¡¨ç¤ºå’Œæ•°æ®åº“äº¤äº’æ—¶çš„ä¼šè¯ï¼Œå®Œå…¨åŒ…å«é¢å‘æ•°æ®åº“æ‰§è¡ŒSQLè¯­å¥æ‰€éœ€è¦çš„æ‰€æœ‰æ–¹æ³•ã€‚</p>
<h5 id="SqlSessionçš„å®ç°ç±»"><a href="#SqlSessionçš„å®ç°ç±»" class="headerlink" title="SqlSessionçš„å®ç°ç±»"></a>SqlSessionçš„å®ç°ç±»</h5><h6 id="1-DefaultSqlSession"><a href="#1-DefaultSqlSession" class="headerlink" title="1.DefaultSqlSession"></a>1.DefaultSqlSession</h6><h6 id="2-SqlSessionManager"><a href="#2-SqlSessionManager" class="headerlink" title="2.SqlSessionManager"></a>2.SqlSessionManager</h6><p>SqlSessioné€šè¿‡å†…éƒ¨å­˜æ”¾çš„æ‰§è¡Œå™¨ï¼ˆExecutorï¼‰æ¥å¯¹æ•°æ®è¿›è¡Œ CRUD åŸºç¡€æ“ä½œã€‚<br>æ­¤å¤–ï¼Œæ¯ä¸ªçº¿ç¨‹éƒ½åº”è¯¥æœ‰è‡ªå·±çš„SQL Sessionå®åˆ—ï¼Œä½†SQL Sessionå®åˆ—ä¸æ˜¯çº¿ç¨‹å®‰å…¨çš„ï¼Œå› æ­¤ä¸èƒ½è¢«å…±äº«ï¼Œä½¿ç”¨åéœ€è¦å…³é—­ã€‚</p>
<h4 id="4-Executor"><a href="#4-Executor" class="headerlink" title="4.Executor"></a>4.Executor</h4><p>Executoræ˜¯MyBatisçš„æ‰§è¡Œå™¨ï¼Œè°ƒåº¦çš„æ ¸å¿ƒï¼Œè´Ÿè´£SQLè¯­å¥çš„ç”Ÿæˆå’ŒæŸ¥è¯¢ç¼“å­˜çš„ç»´æŠ¤ã€‚</p>
<h4 id="5-MappedStatement"><a href="#5-MappedStatement" class="headerlink" title="5.MappedStatement"></a>5.MappedStatement</h4><p>Mapped Statementå¯¹åº”é…ç½®æ–‡ä»¶ä¸­çš„ &lt;select | update | delete | insert&gt;èŠ‚ç‚¹ï¼Œæè¿°çš„æ˜¯ä¸€æ¡SQLè¯­å¥ã€‚</p>
<h3 id="2-MyBatiså·¥ä½œæµç¨‹"><a href="#2-MyBatiså·¥ä½œæµç¨‹" class="headerlink" title="2.MyBatiså·¥ä½œæµç¨‹"></a>2.MyBatiså·¥ä½œæµç¨‹</h3><p><img src="/../JavaEE/1.png" alt="MybatisåŸç†æµç¨‹"></p>
<h2 id="4"><a href="#4" class="headerlink" title="4."></a>4.<a href="https://mybatis.net.cn/getting-started.html" rel="external nofollow noreferrer" title="" target="">Mybatiså…¥é—¨</a></h2><h3 id="1-SQL-1"><a href="#1-SQL-1" class="headerlink" title="1.SQL"></a>1.SQL</h3><h3 id="2-cn-edu-example-mybatis-mapper"><a href="#2-cn-edu-example-mybatis-mapper" class="headerlink" title="2.cn.edu.example.mybatis.mapper"></a>2.cn.edu.example.mybatis.mapper</h3><p>StudentMapper.xml</p>
<pre class="line-numbers language-none"><code class="language-none">&lt;?xml version="1.0" encoding="utf-8"?&gt;
&lt;!DOCTYPE mapper
 PUBLIC "-//mybatis.org//DTD Mapper3.0//EN"
 "http://mybatis.org/dtd/mybatis-3-mapper.dtd"&gt;
&lt;!-- namespace è¡¨ç¤ºå‘½åç©ºé—´ --&gt;
&lt;mapper namespace="cn.edu.example.mybatis.mapper.StudentMapper"&gt;
 &lt;!-- æ ¹æ®å­¦å·è·å–å­¦ç”Ÿä¿¡æ¯--&gt;
 &lt;select id="findStudentByStuno" parameterType="Integer"
  resultType="cn.edu.example.mybatis.po.Student"&gt;
  Select*from t_student where stuno=#{stuno}
  &lt;/select&gt;
&lt;/mapper&gt;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h3 id="3-cn-edu-example-mybatis-po"><a href="#3-cn-edu-example-mybatis-po" class="headerlink" title="3.cn.edu.example.mybatis.po"></a>3.cn.edu.example.mybatis.po</h3><p>Student.java</p>
<pre class="line-numbers language-none"><code class="language-none">package cn.edu.example.mybatis.po;

public class Student {
 private Integer stuno;// ä¸»é”®ï¼Œå­¦å·
 private String stuname;// å­¦ç”Ÿå§“å
 private Integer grade;// å¹´çºª
 private String dept;// ä¸“ä¸š
 private String classname;

 @Override
 public String toString() {
  return "Student [stuno=" + stuno + ", stuname=" + stuname + ", grade=" + grade + ", dept=" + dept
    + ", classname=" + classname + "]";
 }

 public Integer getStuno() {
  return stuno;
 }

 public void setStuno(Integer stuno) {
  this.stuno = stuno;
 }

 public String getStuname() {
  return stuname;
 }

 public void setStuname(String stuname) {
  this.stuname = stuname;
 }

 public Integer getGrade() {
  return grade;
 }

 public void setGrade(Integer grade) {
  this.grade = grade;
 }

 public String getDept() {
  return dept;
 }

 public void setDept(String dept) {
  this.dept = dept;
 }

 public String getClassname() {
  return classname;
 }

 public void setClassname(String classname) {
  this.classname = classname;
 }

}<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h3 id="3-cn-edu-example-mybatis-test"><a href="#3-cn-edu-example-mybatis-test" class="headerlink" title="3.cn.edu.example.mybatis.test"></a>3.cn.edu.example.mybatis.test</h3><p>MyBatis.java</p>
<pre class="line-numbers language-none"><code class="language-none">package cn.edu.example.mybatis.test;

import java.io.Reader;
import org.apache.ibatis.io.Resources;
import org.apache.ibatis.session.SqlSession;
import org.apache.ibatis.session.SqlSessionFactory;
import org.apache.ibatis.session.SqlSessionFactoryBuilder;
import cn.edu.example.mybatis.po.Student;

public class MybatisTest {
 private static SqlSessionFactory sqlSessionFactory = null;
 // åˆå§‹åŒ–SQL Session Factoryå¯¹è±¡
 static {
  try {
   // ä½¿ç”¨Mybaticæä¾›çš„Resourcesç±»åŠ è½½MyBatisçš„XMLé…ç½®æ–‡ä»¶
   Reader reader = Resources.getResourceAsReader("mybatis-config.xml");
   // æ„å»ºSqlSessionFactoryå¯¹è±¡ 
   // SqlSessionFactoryå¯¹è±¡
   sqlSessionFactory = new SqlSessionFactoryBuilder().build(reader);
  } catch (Exception e) {
   e.printStackTrace();
  }
 }

 // è·å–SQL Sessionå¯¹è±¡çš„é™æ€æ–¹æ³•
 public static SqlSession getSession() {
  return sqlSessionFactory.openSession();
 }

 // æ ¹æ®å­¦å·æŸ¥è¯¢å­¦ç”Ÿä¿¡æ¯
 public void findStudentByStunoTest() {
  // è·å–SQL Session
  SqlSession sqlSession = getSession();
  // Sqlsession æ‰§è¡Œæ˜ å°„æ–‡ä»¶ä¸­å®šä¹‰çš„SQLè¯­å¥ï¼Œå¹¶è¿”å›æ˜ å°„ç»“æœ
  Student stu = sqlSession.selectOne("cn.edu.example.mybatis.mapper." + "StudentMapper.findStudentByStuno",
    2018020222);

  // è¾“å‡ºç»“æœ
  System.out.println(stu.toString());
  // å…³é—­SQL Session
  sqlSession.close();
 }

 public static void main(String[] args) {
  MybatisTest test = new MybatisTest();
  test.findStudentByStunoTest();
 }

}<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h3 id="4-mybatis-config-xml"><a href="#4-mybatis-config-xml" class="headerlink" title="4.mybatis-config.xml"></a>4.mybatis-config.xml</h3><pre class="line-numbers language-none"><code class="language-none">&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;!DOCTYPE configuration PUBLIC "-//mybatis.org//DTD Config 3.0//EN"
 "http://mybatis.org/dtd/mybatis-3-config.dtd"&gt;
&lt;configuration&gt;
 &lt;!-- é…ç½®ç¯å¢ƒï¼Œé»˜è®¤çš„ç¯å¢ƒIDä¸ºmysql--&gt;
 &lt;environments default="mysql"&gt;
  &lt;!--é…ç½®ç¯å¢ƒIDä¸ºmysqlçš„æ•°æ®åº“ç¯å¢ƒ --&gt;
  &lt;environment id="mysql"&gt;
   &lt;transactionManager type="JDBC"/&gt;
   &lt;dataSource type="POOLED"&gt;
    &lt;property name="driver" value="com.mysql.cj.jdbc.Driver"/&gt;
    &lt;property name="url"
    value="jdbc:mysql://localhost:3306/mybatis?serverTimezone=UTC"/&gt;
    &lt;property name="username" value="root"/&gt;
    &lt;property name="password" value="love1314"/&gt;
   &lt;/dataSource&gt;
  &lt;/environment&gt;
 &lt;/environments&gt;
 &lt;!-- é…ç½®æ˜ å°„å™¨çš„ä½ç½®--&gt;
 &lt;mappers&gt;
  &lt;mapper resource="cn/edu/example/mybatis/mapper/StudentMapper.xml"/&gt;
 &lt;/mappers&gt;
&lt;/configuration&gt;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h3 id="5-è¾“å‡º"><a href="#5-è¾“å‡º" class="headerlink" title="5.è¾“å‡º"></a>5.è¾“å‡º</h3><p>Student [stuno=2018020222, stuname=ï¿½ï¿½ï¿½ï¿½, grade=2018, dept=ï¿½ï¿½ï¿½ï¿½ï¿½, classname=ï¿½ï¿½ï¿½ï¿½ï¿½1802]</p>
<h1 id="10-Mybatisé…ç½®"><a href="#10-Mybatisé…ç½®" class="headerlink" title="10 Mybatisé…ç½®"></a>10 Mybatisé…ç½®</h1><h2 id="1-1-å±æ€§-properties"><a href="#1-1-å±æ€§-properties" class="headerlink" title="1.1 å±æ€§(properties)"></a>1.1 å±æ€§(properties)</h2><p>properties éƒ½æ˜¯å¯ä»¥åœ¨å¤–éƒ¨é…ç½®ä¸”å¯ä»¥åŠ¨æ€æ›¿æ¢çš„ï¼Œæ—¢å¯ä»¥åœ¨Javaå±æ€§æ–‡ä»¶ä¸­é…ç½®ï¼Œåˆå¯ä»¥åœ¨propertieså…ƒç´ çš„å­å…ƒç´ æ¥ä¼ é€’ã€‚</p>
<h2 id="1-2-è®¾ç½®-settings"><a href="#1-2-è®¾ç½®-settings" class="headerlink" title="1.2 è®¾ç½®(settings)"></a>1.2 è®¾ç½®(settings)</h2><p>å¸¸ç”¨é¡¹ç›®å                       æè¿°                                                            æœ‰æ•ˆå€¼              é»˜è®¤å€¼<br>cacheEnabled                    å…¨å±€åœ°å¼€å¯/å…³é—­XMLé…ç½®æ–‡ä»¶ä¸­çš„æ‰€æœ‰æ˜ å°„å™¨å·²ç»é…ç½®çš„ä»»ä½•ç¼“å­˜          å¸ƒå°”å€¼</p>
<p>multipleResultSetsEnabled       æ˜¯/å¦å…è®¸å•ä¸€è¯­å¥è¿”å›å¤šç»“æœé›†</p>
<p>useColumnLabel                  ä½¿ç”¨åˆ—è¡¨æ ‡ç­¾ä»£æ›¿åˆ«åã€‚ä¸åŒçš„é©±åŠ¨ä¼šæœ‰ä¸åŒçš„è¡¨ç°ï¼Œå…·ä½“å¯å‚è€ƒç›¸<br>                                å…³é©±åŠ¨æ–‡æ¡£ï¼Œæˆ–é€šè¿‡æµ‹è¯•è¿™ä¸¤ç§ä¸åŒçš„æ¨¡å¼æ¥è§‚å¯Ÿæ‰€ç”¨é©±åŠ¨çš„ç»“æœã€‚</p>
<p>useGeneratedKeys                å…è®¸JDBCæ”¯æŒè‡ªåŠ¨åŒ–ç”Ÿæˆä¸»é”®ï¼Œéœ€è¦é©±åŠ¨æ”¯æŒã€‚å¦‚æœè®¾ç½®ä¸ºtrueï¼Œ<br>                                åˆ™å°†å¼ºåˆ¶ä½¿ç”¨è‡ªåŠ¨ç”Ÿæˆä¸»é”®ã€‚å°½ç®¡ä¸€äº›é©±åŠ¨ä¸æ”¯æŒæ­¤å¸¸ç”¨é¡¹ã€‚</p>
<p>autoMappbehavior                æŒ‡å®šMyBatistaåº”å¦‚ä½•è‡ªåŠ¨æ˜ å°„åˆ—åˆ°å­—æ®µæˆ–å±æ€§ä¸Šã€‚<br>                                Noneè¡¨ç¤ºå–æ¶ˆè‡ªåŠ¨æ˜ å°„ï¼›<br>                                Partialåªä¼šè‡ªåŠ¨æ˜ å°„æ²¡æœ‰å®šä¹‰åµŒå¥—ç»“æœé›†æ˜ å°„çš„ç»“æœé›†ï¼›<br>                                fullä¼šè‡ªåŠ¨æ˜ å°„ä»»æ„å¤æ‚çš„ç»“æœé›†ã€‚</p>
<p>safeRowBoundsEnabled			å…è®¸åœ¨åµŒå¥—è¯­å¥ä¸­ä½¿ç”¨åˆ†é¡µ(RowBounds)ã€‚å¦‚æœå…è®¸ä½¿ç”¨ï¼Œåˆ™è®¾ç½®<br>                                ä¸º	false</p>
<p>safeResultHandlerEnabled		å…è®¸åœ¨åµŒå¥—è¯­å¥ä¸­ä½¿ç”¨åˆ†é¡µ(ResultHandler)ï¼Œå¦‚æœä½¿ç”¨è®¾ç½®ä¸ºfalseã€‚</p>
<p>returnlnstanceForEmptyRow		å½“è¿”å›çš„æ‰€æœ‰åˆ—æ˜¯ç©ºæ—¶ï¼ŒMyBatisé»˜è®¤è¿”å›nullã€‚å½“å¼€å¯è¿™ä¸ªè®¾ç½®æ—¶ï¼Œ<br>                                Mybatisä¼šè¿”å›ä¸€ä¸ªç©ºå®åˆ—ã€‚ä¹Ÿé€‚ç”¨äºåµŒå¥—çš„ç»“æœé›†ã€‚</p>
<h2 id="3-ç±»å‹åˆ«å-typeAiases"><a href="#3-ç±»å‹åˆ«å-typeAiases" class="headerlink" title="3.ç±»å‹åˆ«å(typeAiases)"></a>3.ç±»å‹åˆ«å(typeAiases)</h2><p>è§£é‡Šï¼š<br>ç±»å‹åˆ«å(typeAiases)æ˜¯ä¸ºJavaæ•°æ®ç±»å‹è®¾ç½®ä¸€ä¸ªçŸ­çš„åç§°ã€‚<br>åªå’ŒXMLé…ç½®æ–‡ä»¶æœ‰å…³ï¼Œç”¨æ¥å‡å°‘å®Œå…¨é™å®šåçš„å†—ä½™ã€‚</p>
<p>1. </p>
<pre class="line-numbers language-none"><code class="language-none">&lt;typeAliases&gt;
 &lt;typeAliase alias='Student' type='cn.edu.mybatis.po.Student' /&gt;
&lt;/typeAliases&gt;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>
<p>Student å°±å¯ä»¥åœ¨ä»»ä½•ä½¿ç”¨ cn.edu.mybatis.po.Student çš„åœ°æ–¹ã€‚<br>2. </p>
<pre class="line-numbers language-none"><code class="language-none">&lt;typeAliases&gt;
 &lt;package name="cn.edu.mybatis.po" /&gt;
&lt;/typeAliases&gt;

@Alias("Student")
public class Student{
 ...
}<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>æŒ‡å®šä¸€ä¸ªåŒ…åï¼ŒMybatisä¼šåœ¨æŠ¥åä¸‹æœç´¢éœ€è¦çš„JavaBeanã€‚</p>
<p>æ¯ä¸€ä¸ªåœ¨åŒ… cn.edu.mybatis.po ä¸­çš„JavaBeanï¼Œåœ¨æ²¡æœ‰æ³¨è§£çš„æƒ…å†µä¸‹ï¼Œéƒ½ä¼šä½¿ç”¨ Bean çš„é¦–å­—æ¯å°å†™çš„éé™å®šç±»åæ¥ä½œä¸ºå¥¹çš„åˆ«åã€‚</p>
<h2 id="4-ç¯å¢ƒé…ç½®-environments"><a href="#4-ç¯å¢ƒé…ç½®-environments" class="headerlink" title="4.ç¯å¢ƒé…ç½®(environments)"></a>4.ç¯å¢ƒé…ç½®(environments)</h2><p>Mybatiså¯ä»¥é…ç½®å¤šç§ç¯å¢ƒï¼Œä½†æ˜¯æ¯ä¸€ä¸ª SqlSessionFactoryå®åˆ—åªèƒ½å¯¹åº”ä¸€ä¸ªç¯å¢ƒã€‚å¦‚æœé“¾æ¥å¤šä¸ªæ•°æ®åº“ï¼Œåˆ™éœ€è¦åˆ›å»ºå¤šä¸ª SqlSessionFactoryå®åˆ—ã€‚</p>
<p>ä¸ºæŒ‡å®šåˆ›å»ºç¯å¢ƒï¼Œéœ€è¦å°†ç¯å¢ƒä½œä¸ºå¯é€‰çš„å‚æ•°ä¼ é€’ç»™SQLSessionFactoryBuilderï¼š</p>
<pre class="line-numbers language-none"><code class="language-none">SqlSessionFactory factory =
       new SqlSessionFactoryBuilder().build(reader,environment[,properties]);<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>
<p>å½“ä½¿ç”¨é»˜è®¤ç¯å¢ƒæ—¶ï¼š</p>
<pre class="line-numbers language-none"><code class="language-none">SqlSessionFactory factory =
       new SqlSessionFactoryBuilder().build(reader[,properties]);<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>
<h3 id="1-å…ƒç´ å®šä¹‰é…ç½®ç¯å¢ƒ"><a href="#1-å…ƒç´ å®šä¹‰é…ç½®ç¯å¢ƒ" class="headerlink" title="1.å…ƒç´ å®šä¹‰é…ç½®ç¯å¢ƒ"></a>1.<environments>å…ƒç´ å®šä¹‰é…ç½®ç¯å¢ƒ</environments></h3><pre class="line-numbers language-none"><code class="language-none">&lt;environments default="del"&gt;
    &lt;environment id="del"&gt;
        &lt;transactionManager type="JDBC"&gt;&lt;/transactionManager&gt;
        &lt;dataSource type="POOLED"&gt;
            &lt;!--Java 18 value="com.mysql.cj.jdbc.Driver"--&gt;
            &lt;property name="driver" value="com.mysql.cj.jdbc.Driver"/&gt;
            &lt;property name="url" value="jdbc:mysql://localhost:3306/mybatis"/&gt;
            &lt;property name="username" value="root"/&gt;
            &lt;property name="password" value="love1314"/&gt;
        &lt;/dataSource&gt;
    &lt;/environment&gt;
&lt;/environments&gt;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<ul>
<li>(1). é»˜è®¤ä½¿ç”¨çš„ç¯å¢ƒID (default=â€œmysqlâ€)</li>
<li>(2). æ¯ä¸ªenvironmentå…ƒç´ å®šä¹‰çš„ç¯å¢ƒID (id=â€mysqlâ€)</li>
<li>(3). äº‹åŠ¡ç®¡ç†å™¨çš„é…ç½®(type=â€JDBCâ€)</li>
<li>(4). æ•°æ®æºçš„é…ç½® (type=â€POOLEDâ€)</li>
</ul>
<h4 id="1-äº‹åŠ¡ç®¡ç†å™¨å’Œæ•°æ®æº-ä»‹ç»"><a href="#1-äº‹åŠ¡ç®¡ç†å™¨å’Œæ•°æ®æº-ä»‹ç»" class="headerlink" title="1.äº‹åŠ¡ç®¡ç†å™¨å’Œæ•°æ®æº ä»‹ç»"></a>1.äº‹åŠ¡ç®¡ç†å™¨å’Œæ•°æ®æº ä»‹ç»</h4><h5 id="1äº‹åŠ¡ç®¡ç†å™¨-type-x3D-â€-JDBC-x2F-MANAGED-â€œ"><a href="#1äº‹åŠ¡ç®¡ç†å™¨-type-x3D-â€-JDBC-x2F-MANAGED-â€œ" class="headerlink" title="1äº‹åŠ¡ç®¡ç†å™¨ type=â€ [JDBC / MANAGED] â€œ"></a>1äº‹åŠ¡ç®¡ç†å™¨ type=â€ [JDBC / MANAGED] â€œ</h5><ol>
<li>JDBC: ä½¿ç”¨JDBCçš„æäº¤å’Œå›æ»šè®¾ç½®ï¼Œå®ƒä¾èµ–äºä»æ•°æ®æºå¾—åˆ°çš„é“¾æ¥æ¥ç®¡ç†äº‹åŠ¡ä½œç”¨åŸŸã€‚</li>
<li>MANAGED: è¿™ä¸ªé…ç½®ä¸æäº¤æˆ–å›æ»šä¸€ä¸ªé“¾æ¥ï¼Œè€Œæ˜¯è®©å®¹å™¨æ¥ç®¡ç†äº‹ç‰©çš„æ•´ä¸ªç”Ÿå‘½å‘¨æœŸã€‚é»˜è®¤æƒ…å†µå…³é—­è¿æ¥ï¼Œæœ‰äº›å®¹å™¨ä¸å¸Œæœ›å¦‚æ­¤ï¼Œéœ€è¦å°†closeConnectionå±æ€§è®¾ç½®ä¸ºfalseï¼Œæ¥é˜»æ­¢é»˜è®¤çš„å…³é—­æ“ä½œã€‚</li>
<li>ä½¿ç”¨ Mybatiså’ŒSpringä¸éœ€è¦é…ç½®äº‹åŠ¡ç®¡ç†å™¨ï¼ŒSpringè‡ªå¸¦ç®¡ç†å™¨ä¼šè¦†ç›–é…ç½®ã€‚</li>
</ol>
<h5 id="2-æ•°æ®æº-type-x3D-â€œ-UNPOOLED-x2F-POOLED-x2F-JND-â€œ"><a href="#2-æ•°æ®æº-type-x3D-â€œ-UNPOOLED-x2F-POOLED-x2F-JND-â€œ" class="headerlink" title="2.æ•°æ®æº type= â€œ [UNPOOLED / POOLED / JND ] â€œ"></a>2.æ•°æ®æº type= â€œ [UNPOOLED / POOLED / JND ] â€œ</h5><p>è™½ç„¶æ•°æ®æºçš„é…ç½®æ˜¯å¯é€‰çš„ï¼Œä½†ä¸ºä½¿ç”¨å»¶è¿ŸåŠ è½½ï¼Œæ•°æ®æºæ˜¯å¿…é¡»é…ç½®çš„.</p>
<ol>
<li>UNPOOLED: åªç”¨äºæ¯æ¬¡è¯·æ±‚æ—¶æ‰“å¼€å’Œå…³é—­è¯·æ±‚ï¼Œé€‚ç”¨äºè¿æ¥æ± ä¸é‡è¦çš„ã€‚</li>
<li>POOLED: æ•°æ®æºåˆ©ç”¨â€œæ± â€çš„æ¦‚å¿µå°†JDBCé“¾æ¥å¯¹è±¡ç»„ç»‡èµ·æ¥ï¼Œé¿å…åˆ›å»ºæ–°çš„é“¾æ¥å®åˆ—æ—¶å¿…é¡»çš„åˆå§‹åŒ–ï¼ŒèŠ‚çœè®¤è¯æ—¶é—´ã€‚èƒ½ä½¿å¹¶å‘Webåº”ç”¨å¿«é€Ÿå“åº”è¯·æ±‚çš„å¤„ç†æ–¹å¼ï¼Œ</li>
<li>JNDI: æ•°æ®æºå®ç°ä¸ºEJBæˆ–åº”ç”¨æœåŠ¡åŒºè¿™ç±»å®¹å™¨ä¸­çš„ä½¿ç”¨ï¼Œå®¹å™¨å¯ä»¥é›†ä¸­æˆ–åœ¨å¤–éƒ¨é…ç½®æ•°æ®æºå¹¶è®¾ç½®ä¸€ä¸ªJNDIä¸Šä¸‹æ–‡çš„åº”ç”¨ã€‚</li>
</ol>
<h2 id="5-æ˜ å°„å™¨-mappers"><a href="#5-æ˜ å°„å™¨-mappers" class="headerlink" title="5.æ˜ å°„å™¨(mappers)"></a>5.æ˜ å°„å™¨(mappers)</h2><pre class="line-numbers language-none"><code class="language-none">ç›¸å¯¹äºç±»ä¼¼è·¯å¾„çš„èµ„æºåº”å¼•ç”¨
&lt;mappers&gt;
 &lt;mapper resource="cn/edu/mybtis/mapper/SrudentMapper.xml" /&gt;
&lt;/mappers&gt;

ç»Ÿä¸€èµ„æºå®šä½ç¬¦
&lt;mappers&gt;
 &lt;mapper url="file:///var/mappers/SrudentMapper.xml" /&gt;
&lt;/mappers&gt;

æ˜ å°„å™¨æ¥å£å®ç°ç±»çš„å®Œå…¨é™å®šç±»å
&lt;mappers&gt;
 &lt;mapper class="cn.edu.mybtis.mapper.SrudentMapper.xml" /&gt;
&lt;/mappers&gt;

å°†åŒ…å†…çš„æ˜ å°„å™¨æ¥å£å®ç°å…¨éƒ¨æ³¨å†Œä¸ºæ˜ å°„å™¨
&lt;mappers&gt;
 &lt;package name="cn.edu.mybatis.mapper" /&gt;
&lt;/mappers&gt;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>


<h2 id="6-mapper-xml-å¸¸ç”¨SQLæ ‡ç­¾"><a href="#6-mapper-xml-å¸¸ç”¨SQLæ ‡ç­¾" class="headerlink" title="6. mapper.xml å¸¸ç”¨SQLæ ‡ç­¾"></a>6. mapper.xml å¸¸ç”¨SQLæ ‡ç­¾</h2><div class="tabs" id="1.æŸ¥è¯¢è¯­å¥"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#1.æŸ¥è¯¢è¯­å¥-1">1.æŸ¥è¯¢è¯­å¥</button></li><li class="tab"><button type="button" data-href="#1.æŸ¥è¯¢è¯­å¥-2">2.æ’å…¥è¯­å¥</button></li><li class="tab"><button type="button" data-href="#1.æŸ¥è¯¢è¯­å¥-3">3.åˆ é™¤è¯­å¥</button></li><li class="tab"><button type="button" data-href="#1.æŸ¥è¯¢è¯­å¥-4">4.ä¿®æ”¹è¯­å¥</button></li><li class="tab"><button type="button" data-href="#1.æŸ¥è¯¢è¯­å¥-5">5.æ¨¡ç³ŠæŸ¥è¯¢</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="1.æŸ¥è¯¢è¯­å¥-1"><pre class="line-numbers language-none"><code class="language-none">&lt;select id="selectByPrimaryKey"  resultMap="BaseResultMap" parameterType="java.lang.String" &gt;
   selec...   
 &lt;/select&gt; <span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="1.æŸ¥è¯¢è¯­å¥-2"><pre class="line-numbers language-none"><code class="language-none">&lt;insert id="insert" parameterType="pojo.OrderTable" &gt;
  insert into ordertable(...)
    values(...)
&lt;/insert&gt; <span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="1.æŸ¥è¯¢è¯­å¥-3"><pre class="line-numbers language-none"><code class="language-none">&lt;delete id="deleteByPrimaryKey" parameterType="java.lang.String" &gt;
    delete from ordertable  
      where order_id = #{orderId,jdbcType=VARCHAR}  
&lt;/delete&gt;  <span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="1.æŸ¥è¯¢è¯­å¥-4"><pre class="line-numbers language-none"><code class="language-none">&lt;update id="updateByPrimaryKey" parameterType="pojo.OrderTable" &gt;  
   update ordertable 
    set   
          cid = #{cid,jdbcType=VARCHAR},  
          address = #{address,jdbcType=VARCHAR},  
          create_date = #{createDate,jdbcType=TIMESTAMP},  
          orderitem_id = #{orderitemId,jdbcType=VARCHAR}  
    where 
          order_id = #{orderId,jdbcType=VARCHAR}  
&lt;/update&gt; <span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="1.æŸ¥è¯¢è¯­å¥-5"><pre class="line-numbers language-none"><code class="language-none">&lt;select id="listProduct" resultType="Product"&gt;
    select * from product_
        &lt;if test="name!=null"&gt;
            where name like concat('%',#{name},'%')
        &lt;/if&gt;        
&lt;/select&gt;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div>

<h4 id="1-éœ€è¦é…ç½®çš„å±æ€§"><a href="#1-éœ€è¦é…ç½®çš„å±æ€§" class="headerlink" title="1.éœ€è¦é…ç½®çš„å±æ€§"></a>1.éœ€è¦é…ç½®çš„å±æ€§</h4><p>1ã€id=â€xxxxâ€    è¡¨ç¤ºæ­¤æ®µSQLæ‰§è¡Œè¯­å¥çš„å”¯ä¸€æ ‡è¯†ï¼Œä¹Ÿæ˜¯æ¥å£çš„æ–¹æ³•åç§° (å¿…é¡»ä¸€è‡´æ‰èƒ½æ‰¾åˆ°)</p>
<p>2ã€parameterType=â€xxxxâ€    è¡¨ç¤ºSQLè¯­å¥ä¸­éœ€è¦ä¼ å…¥çš„å‚æ•°ï¼Œç±»å‹è¦ä¸å¯¹åº”çš„æ¥å£æ–¹æ³•çš„ç±»å‹ä¸€è‡´</p>
<p>3ã€resultMap=â€xxxâ€    å®šä¹‰å‡ºå‚ï¼Œè°ƒç”¨å·²å®šä¹‰çš„æ˜ å°„ç®¡ç†å™¨çš„idçš„å€¼</p>
<p>4ã€resultType=â€xxxxâ€    å®šä¹‰å‡ºå‚ï¼ŒåŒ¹é…æ™®é€šJavaç±»å‹æˆ–è‡ªå®šä¹‰çš„pojo (å‡ºå‚ç±»å‹è‹¥ä¸æŒ‡å®šï¼Œå°†ä¸ºè¯­å¥ç±»å‹é»˜è®¤ç±»å‹ï¼Œå¦‚è¯­å¥è¿”å›å€¼ä¸ºint)</p>
<h3 id="1-if-å’Œ-where-æ ‡ç­¾"><a href="#1-if-å’Œ-where-æ ‡ç­¾" class="headerlink" title="1.if å’Œ where æ ‡ç­¾"></a>1.if å’Œ where æ ‡ç­¾</h3><pre class="line-numbers language-none"><code class="language-none">&lt;select id="listProduct" resultType="Product"&gt;
    select * from product_
      &lt;where&gt;
        &lt;if test="name!=null"&gt;
            and name like concat('%',#{name},'%')
        &lt;/if&gt;        
        &lt;if test="price!=null and price!=0"&gt;
            and price &gt; #{price}
        &lt;/if&gt;
      &lt;/where&gt;     
&lt;/select&gt;

/**
ä½œç”¨:
æ ‡ç­¾ä¼šè¿›è¡Œè‡ªåŠ¨åˆ¤æ–­ï¼š
å¦‚æœä»»ä½•æ¡ä»¶éƒ½ä¸æˆç«‹ï¼Œé‚£ä¹ˆå°±åœ¨sqlè¯­å¥é‡Œå°±ä¸ä¼šå‡ºç°whereå…³é”®å­—ï¼ˆé‡ç‚¹ï¼‰
å¦‚æœæœ‰ä»»ä½•æ¡ä»¶æˆç«‹ï¼Œä¼šè‡ªåŠ¨å»æ‰å¤šå‡ºæ¥çš„ and æˆ–è€… or
 */<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>


<h3 id="2-set-æ ‡ç­¾"><a href="#2-set-æ ‡ç­¾" class="headerlink" title="2.set æ ‡ç­¾"></a>2.set æ ‡ç­¾</h3><pre class="line-numbers language-none"><code class="language-none">&lt;update id="updateProduct" parameterType="Product" &gt;
    update product_
    &lt;set&gt;
        &lt;if test="name != null"&gt;name=#{name},&lt;/if&gt;
        &lt;if test="price != null"&gt;price=#{price}&lt;/if&gt; 
    &lt;/set&gt;
     where id=#{id}   
&lt;/update&gt;

/**
ä½œç”¨:
æ ‡ç­¾ä¼šè¿›è¡Œè‡ªåŠ¨åˆ¤æ–­ï¼š
å¦‚æœä»»ä½•æ¡ä»¶éƒ½ä¸æˆç«‹ï¼Œé‚£ä¹ˆå°±åœ¨sqlè¯­å¥é‡Œå°±ä¸ä¼šå‡ºç°whereå…³é”®å­—ï¼ˆé‡ç‚¹ï¼‰
 */<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>


<h3 id="3-trim-æ ‡ç­¾"><a href="#3-trim-æ ‡ç­¾" class="headerlink" title="3.trim æ ‡ç­¾"></a>3.trim æ ‡ç­¾</h3><pre class="line-numbers language-none"><code class="language-none">&lt;select id="listProduct" resultType="Product"&gt;
    select *from product_
    &lt;trim prefix="WHERE" prefixOverrides="AND |OR "&gt;
        &lt;if test="name!=null"&gt;
            and name like concat('%',#{name},'%')
        &lt;/if&gt;        
        &lt;if test="price!=null and price!=0"&gt;
            and price &gt; #{price}
        &lt;/if&gt;
    &lt;/trim&gt;      
&lt;/select&gt;
 
&lt;update id="updateProduct" parameterType="Product" &gt;
    update product_
    &lt;trim prefix="SET" suffixOverrides=","&gt;
        &lt;if test="name != null"&gt;name=#{name},&lt;/if&gt;
        &lt;if test="price != null"&gt;price=#{price}&lt;/if&gt;   
    &lt;/trim&gt;
     where id=#{id}   
&lt;/update&gt;

/**
  trim ç”¨æ¥å®šåˆ¶æƒ³è¦çš„åŠŸèƒ½ï¼Œæ¯”å¦‚whereæ ‡ç­¾å°±å¯ä»¥ç”¨
 */<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>


<h3 id="4-chooseWhenOtherwise-æ ‡ç­¾"><a href="#4-chooseWhenOtherwise-æ ‡ç­¾" class="headerlink" title="4.chooseWhenOtherwise æ ‡ç­¾"></a>4.chooseWhenOtherwise æ ‡ç­¾</h3><pre class="line-numbers language-none"><code class="language-none">&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;!DOCTYPE mapper
    PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
    "http://mybatis.org/dtd/mybatis-3-mapper.dtd"&gt;
&lt;mapper namespace="com.myjava.pojo"&gt;

        &lt;select id="listProduct" resultType="Product"&gt;
              SELECT * FROM product_
              &lt;where&gt;
                &lt;choose&gt;
                  &lt;when test="name != null"&gt;
                    and name like concat('%',#{name},'%')
                  &lt;/when&gt;          
                  &lt;when test="price !=null and price != 0"&gt;
                    and price &gt; #{price}
                  &lt;/when&gt;                
                  &lt;otherwise&gt;
                    and id &gt;1
                  &lt;/otherwise&gt;
                &lt;/choose&gt;
              &lt;/where&gt;
        &lt;/select&gt;
&lt;/mapper&gt;

/**
  æœ‰ä»»ä½•ä»»ä½•æ¡ä»¶ç¬¦åˆï¼Œå°±è¿›è¡Œæ¡ä»¶æŸ¥è¯¢ï¼Œå¦åˆ™å°±åªä½¿ç”¨id&gt;1è¿™ä¸ªæ¡ä»¶
 */<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<h3 id="5-foreach-æ ‡ç­¾"><a href="#5-foreach-æ ‡ç­¾" class="headerlink" title="5.foreach æ ‡ç­¾"></a>5.foreach æ ‡ç­¾</h3><pre class="line-numbers language-none"><code class="language-none">&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;!DOCTYPE mapper
    PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
    "http://mybatis.org/dtd/mybatis-3-mapper.dtd"&gt;

&lt;mapper namespace="com.myjava.pojo"&gt;
    &lt;select id="listProduct" resultType="Product"&gt;
          SELECT * FROM product_
            WHERE ID in
                &lt;foreach item="item" index="index" collection="list"
                    open="(" separator="," close=")"&gt;
                    #{item}
                &lt;/foreach&gt;
    &lt;/select&gt;
&lt;/mapper&gt;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<h3 id="6-bind-æ ‡ç­¾"><a href="#6-bind-æ ‡ç­¾" class="headerlink" title="6.bind æ ‡ç­¾"></a>6.bind æ ‡ç­¾</h3><pre class="line-numbers language-none"><code class="language-none">&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;!DOCTYPE mapper
    PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
    "http://mybatis.org/dtd/mybatis-3-mapper.dtd"&gt;

&lt;mapper namespace="com.myjava.pojo"&gt;
    &lt;select id="listProduct" resultType="Product"&gt;
        &lt;bind name="likename" value="'%' + name + '%'" /&gt;
        select * from   product_  where name like #{likename}
    &lt;/select&gt;
 
&lt;/mapper&gt;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>


<h3 id="7-sql-ç‰‡æ®µæ ‡ç­¾"><a href="#7-sql-ç‰‡æ®µæ ‡ç­¾" class="headerlink" title="7.sql ç‰‡æ®µæ ‡ç­¾"></a>7.sql ç‰‡æ®µæ ‡ç­¾</h3><pre class="line-numbers language-none"><code class="language-none">&lt;!--å®šä¹‰sqlç‰‡æ®µ--&gt;
&lt;sql id="orderAndItem"&gt;
    o.order_id,o.cid,o.address,o.create_date,o.orderitem_id,i.orderitem_id,i.product_id,i.count
&lt;/sql&gt;

&lt;select id="findOrderAndItemsByOid" parameterType="java.lang.String" resultMap="BaseResultMap"&gt;
    select     &lt;!--å¼•ç”¨sqlç‰‡æ®µ--&gt;
        &lt;include refid="orderAndItem" /&gt; 
    from 
          ordertable o 

    join  orderitem i 
    on    o.orderitem_id = i.orderitem_id
    where 
        o.order_id = #{orderId}

&lt;/select&gt;

/**
ä½œç”¨æ˜¯:
é€šè¿‡è¯¥æ ‡ç­¾å¯å®šä¹‰èƒ½å¤ç”¨çš„sqlè¯­å¥ç‰‡æ®µï¼Œåœ¨æ‰§è¡Œsqlè¯­å¥æ ‡ç­¾ä¸­ç›´æ¥å¼•ç”¨å³å¯ã€‚
è¿™æ ·æ—¢å¯ä»¥æé«˜ç¼–ç æ•ˆç‡ï¼Œè¿˜èƒ½æœ‰æ•ˆç®€åŒ–ä»£ç ï¼Œæé«˜å¯è¯»æ€§ã€‚
 */<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>


<h2 id="7-Mybatis-å¤šè¡¨æŸ¥è¯¢"><a href="#7-Mybatis-å¤šè¡¨æŸ¥è¯¢" class="headerlink" title="7. Mybatis å¤šè¡¨æŸ¥è¯¢"></a>7. Mybatis å¤šè¡¨æŸ¥è¯¢</h2><h3 id="1-ä¸€å¯¹ä¸€"><a href="#1-ä¸€å¯¹ä¸€" class="headerlink" title="1. ä¸€å¯¹ä¸€"></a>1. ä¸€å¯¹ä¸€</h3><div class="tabs" id="mapper.xml"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#mapper.xml-1">mapper.xml</button></li><li class="tab"><button type="button" data-href="#mapper.xml-2">POJO</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="mapper.xml-1"><pre class="line-numbers language-none"><code class="language-none">&lt;sql id="ListMap"&gt;
    b.id,b.productName,p.proName,b.totalPrice,b.isPayment,b.creationDate
&lt;/sql&gt;
/**
    resultMap: å£°æ˜ ä¸€ä¸ªå­˜å‚¨å¤šä¸ªPOJO å¯¹è±¡çš„å›¾è¡¨
    property: pojo å¯¹è±¡å±æ€§
    column: mysql åˆ—å
 */
&lt;resultMap id="toProviderId" type="top.wabisabifag.entity.SmbmsBill"&gt;
    &lt;id property="id" column="id"/&gt;
    &lt;result property="productName" column="productName"/&gt;
    &lt;result property="totalPrice" column="totalPrice"/&gt;
    &lt;result property="isPayment" column="isPayment"/&gt;
    &lt;result property="creationDate" column="creationDate"/&gt;

    &lt;!-- ç›¸åŒåˆ—åçš„åšåŒºåˆ†--&gt;
    &lt;association property="smbmsProvider" javaType="top.wabisabifag.entity.SmbmsProvider"&gt;
        &lt;result property="proName" column="proName"/&gt;
    &lt;/association&gt;
&lt;/resultMap&gt;

/**
    resultMap: ä½¿ç”¨å£°æ˜çš„å›¾è¡¨
 */
&lt;select id="billShowList" resultMap="toProviderId"&gt;
    select  &lt;include refid="ListMap" /&gt;
        from smbms_bill b, smbms_provider p
    where b.providerId = p.id
&lt;/select&gt;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="mapper.xml-2"><pre class="line-numbers language-none"><code class="language-none">private SmbmsProvider smbmsProvider;<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div>


<h3 id="2-ä¸€å¯¹å¤š"><a href="#2-ä¸€å¯¹å¤š" class="headerlink" title="2. ä¸€å¯¹å¤š"></a>2. ä¸€å¯¹å¤š</h3><div class="tabs" id="mapper.xml"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#mapper.xml-1">mapper.xml</button></li><li class="tab"><button type="button" data-href="#mapper.xml-2">POJO</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="mapper.xml-1"><pre class="line-numbers language-none"><code class="language-none">&lt;sql id="ListMap"&gt;
    b.id,b.productName,p.proName,b.totalPrice,b.isPayment,b.creationDate
&lt;/sql&gt;
/**
    resultMap: id="toProviderId"  å£°æ˜ ä¸€ä¸ªå­˜å‚¨å¤šä¸ªPOJO å¯¹è±¡çš„å›¾è¡¨
    property: pojo å¯¹è±¡å±æ€§
    column: mysql åˆ—å
 */
&lt;resultMap id="toProviderId" type="top.wabisabifag.entity.SmbmsBill"&gt;
    &lt;id property="id" column="id"/&gt;
    &lt;result property="productName" column="productName"/&gt;
    &lt;result property="totalPrice" column="totalPrice"/&gt;
    &lt;result property="isPayment" column="isPayment"/&gt;
    &lt;result property="creationDate" column="creationDate"/&gt;

    &lt;!-- é…ç½®é›†åˆä¿¡æ¯ 
        property: é›†åˆåœ¨POJOå¯¹è±¡çš„åç§°
        ofTypeï¼šå½“å‰é›†åˆä¸­çš„æ•°æ®ç±»å‹
    --&gt;
    &lt;collection property="smbmsProviderList" ofType="top.wabisabifag.entity.SmbmsProvider"&gt;
        &lt;result property="proName" column="proName"/&gt;
    &lt;/collection&gt;
&lt;/resultMap&gt;

/**
     resultMap = "toProviderId" ä½¿ç”¨å£°æ˜çš„å›¾è¡¨
 */
&lt;select id="billShowList" resultMap="toProviderId"&gt;
    select  &lt;include refid="ListMap" /&gt;
        from smbms_bill b, smbms_provider p
    where b.providerId = p.id
&lt;/select&gt;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="mapper.xml-2"><pre class="line-numbers language-none"><code class="language-none">private List&lt;SmbmsProvider&gt; smbmsProviderList;<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div>


<h3 id="3-å¤šå¯¹å¤š"><a href="#3-å¤šå¯¹å¤š" class="headerlink" title="3. å¤šå¯¹å¤š"></a>3. å¤šå¯¹å¤š</h3><div class="tabs" id="mapper.xml"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#mapper.xml-1">mapper.xml</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="mapper.xml-1"><pre class="line-numbers language-none"><code class="language-none">&lt;resultMap id="userRoleMap" type="user"&gt;
  /* user ä¿¡æ¯ */
  &lt;id column="userId" property="id"/&gt;
  &lt;result column="username" property="username"/&gt;
  &lt;result column="password" property="password"/&gt;
  &lt;result column="birthday" property="birthday"/&gt;
    &lt;collection property="roleList" ofType="top.wabisabifag.entity.role"&gt;
          /* userå†…éƒ¨roleList ä¿¡æ¯ */
          &lt;id  property="id" cloumn="roleId"/&gt;
          &lt;result property="roleName" column="roleName"/&gt;
          &lt;result property="roleDesc" column="roleDesc"/&gt;
    &lt;/collection&gt;
&lt;/resultMap&gt;

&lt;select id="findUserAndRoleAll" resultMap="userRoleMap"&gt;
  select * from  user u,
                 sys_user_role ur,
                 sys_role r
    where 
            u.id=ur.userTd and ur.roleId=r.id 
&lt;/select&gt;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>ä¸‰å¼ è¡¨ï¼Œä¸­é—´è¡¨è¿›è¡Œè¿æ¥ä½œç”¨ï¼Œä»…åœ¨æŸ¥è¯¢è¯­å¥æ—¶ä½œç”¨</p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div>













<h1 id="é¢è¯•é¢˜"><a href="#é¢è¯•é¢˜" class="headerlink" title="é¢è¯•é¢˜"></a>é¢è¯•é¢˜</h1><h2 id="Mybatis"><a href="#Mybatis" class="headerlink" title="Mybatis"></a>Mybatis</h2><ol>
<li>mybatis<br> 1.ä¸€çº§ç¼“å­˜<br>mapperè°ƒç”¨å¯¹è±¡ä»£ç†çš„session,å¯¹æ•°æ®åº“æŸ¥è¯¢æ•°æ®åä¼šå­˜åœ¨çš„æ•°æ®ç¼“å­˜ã€‚<br>å‡ºç°çš„é—®é¢˜:<br>      å½“åœ¨åŒä¸€ä¸ªæ–¹æ³•ä¸­è¿è´¯queryçš„æ—¶å€™ï¼Œç”±äºä»£ç é mapperä»£ç†ç»‘å®šåœ¨å‰ä¸€ä¸ªmapperå¯¹è±¡ä¸Šï¼Œä¼šæŠ¥é”™ã€‚<br>è§£å†³æ–¹æ³•:<br>      å†æ¬¡èµ‹å€¼ç»‘å®šåˆ°mapperçš„sessionä¸Šè¿›è¡Œqueryã€‚<br> 2.äºŒçº§ç¼“å­˜<br>   (1)ä¸ºä»€ä¹ˆæœ‰äºŒçº§ç¼“å­˜ï¼š<br>   ä¸€çº§ç¼“å­˜ï¼ŒæŸ¥è¯¢çš„æ•°æ®ä¸æ˜¯æ•°æ®åº“çš„æ•°æ®ï¼Œè€Œæ˜¯ç›´æ¥åœ¨Clientç«¯å‘é€requestè¯·æ±‚ç»™Tomcatï¼Œåœ¨æœåŠ¡å™¨åŒä¸€ä¸ªçº¿ç¨‹çš„ç¼“å­˜ä¸­è°ƒç”¨ï¼Œè¯¥çº¿ç¨‹ç¬¬äºŒæ¬¡è°ƒç”¨æ—¶ä¸è®¿é—®æ•°æ®åº“ã€‚<br>   (2)äºŒçº§ç¼“å­˜çš„å­˜åœ¨åŸç†ï¼š<br>   äºŒçº§ç¼“å­˜ä¼šé‡æ–°ç‹¬ç«‹è®¿é—®æ•°æ®åº“ï¼Œä»¥ä¾¿è·å–æœ€æ–°çš„æ•°æ®åº“ä¿¡æ¯ã€‚<br>   å‡ºç°çš„é—®é¢˜:<br>   (1)ç”±äºSpringä¸å¯¹å¤–å¼€æ”¾ï¼ŒmybatisäºŒçº§ç¼“å­˜ä¼šè‡ªåŠ¨å…³é—­å¯¹æ•°æ®åº“çš„è®¿é—®ã€‚<br>   (2)å½“æ•°æ®æ“ä½œçš„æ–¹æ³•è”åŠ¨(åŠ¨æ€)æ”¹åŠ¨ä¿¡æ¯çš„æ—¶å€™ï¼Œæ— æ³•è·å¾—æ”¹åŠ¨çš„æœ€æ–°æ•°æ®ã€‚</li>
</ol>
<h1 id="Spring-â€”é»‘é©¬ç¨‹åºå‘˜"><a href="#Spring-â€”é»‘é©¬ç¨‹åºå‘˜" class="headerlink" title="Spring â€”é»‘é©¬ç¨‹åºå‘˜"></a>Spring â€”é»‘é©¬ç¨‹åºå‘˜</h1><h2 id="Spring"><a href="#Spring" class="headerlink" title="Spring"></a>Spring</h2><ol>
<li><p>æ€æƒ³ï¼š<br>IoC  ( inversion of Control) ï¼Œæ§åˆ¶åè½¬ï¼Œå¼ºè°ƒçš„æ˜¯åŸæ¥åœ¨ç¨‹åºä¸­åˆ›å»ºBeançš„æƒåˆ©åè½¬ç»™ç¬¬ä¸‰æ–¹ã€‚Springæ¥ç®¡æ“çºµã€‚<br>DI  ï¼ˆDependency Injectionï¼‰ï¼Œä¾èµ–æ³¨å…¥ï¼Œå¼ºè°ƒçš„beanä¹‹é—´å…³ç³»ï¼Œè¿™ç§å…³ç³»ç¬¬ä¸‰æ–¹è´Ÿè´£è®¾ç½®ã€‚<br>AOP  ï¼ˆAspect Oriented Programming)ï¼Œé¢å‘åˆ‡é¢ç¼–ç¨‹ã€‚åŠŸèƒ½çš„æ¨ªå‘æŠ½å–ï¼Œä¸»è¦çš„å®ç°æ–¹å¼å°±æ˜¯ Peoxyã€‚</p>
</li>
<li><p>Springæä¾›ï¼š<br>IoCï¼ŒAOPï¼ŒWeb MVC </p>
</li>
<li><p>Spring FrameworlæŠ€æœ¯æ ˆï¼š<br>Data Accessï¼šæ•°æ®è®¿é—®<br>Data Integrationï¼šæ•°æ®é›†æˆ<br>Webï¼šWebå¼€å‘<br>ADPï¼šé¢å‘åˆ‡é¢ç¼–ç¨‹<br>Aspectsï¼šAOPæ€æƒ³å®ç°<br>Core Containerï¼šæ ¸å¿ƒå®¹å™¨<br>Testï¼šå•å…ƒæµ‹è¯•ï¼Œé›†æˆæµ‹è¯•</p>
</li>
<li><p>BeanFactoryä¸ApplicationContextçš„å…³ç³»ï¼š<br>1.BeanFactoryæ—¶Springçš„æ—©æœŸæ¥å£ï¼Œç§°ä¸ºSpringçš„Beanå·¥å‚ï¼ŒApplication Contextæ—¶åæœŸæ›´é«˜çº§çš„æ¥å£ï¼Œæ˜¯Springå®¹å™¨ï¼›<br>2.Application Contextæ—©Bean FactoryåŸºç¡€ä¸Šå¯¹åŠŸèƒ½è¿›è¡Œäº†æ‰©å±•ï¼Œåˆ—å¦‚ï¼šç›‘å¬åŠŸèƒ½ï¼Œå›½é™…åŒ–åŠŸèƒ½ç­‰ã€‚Bean Factoryçš„APIæ›´åå‘åº•å±‚ï¼ŒApplication Contextçš„APIå¤šæ•°æ˜¯å¯¹åº•å±‚APIçš„å°è£…ï¼›<br>3.Beançš„åˆ›å»ºä¸»è¦é€»è¾‘å’ŒåŠŸèƒ½éƒ½è¢«å°è£…åœ¨Bean Factoryä¸­ï¼ŒApplication Contextä¸ä»…ç»§æ‰¿Bean Factoryï¼Œè€Œä¸”Application Contextå†…éƒ¨è¿˜ç»´æŠ¤ç€Bean Factoryçš„å¼•ç”¨ï¼Œæ‰€ä»¥ï¼ŒApplicationContextä¸Bean Factoryæ—¢æœ‰ç»§æ‰¿å…³ç³»ï¼Œåˆæœ‰ä»»ä½•å…³ç³»ï¼›<br>4.beançš„åˆå§‹åŒ–å®é™…ä¸åŒï¼ŒåŸå§‹Bean Factoryæ˜¯åœ¨é¦–æ¬¡è°ƒç”¨ä¸ªä½“Beanæ˜¯æ‰è¿›è¡ŒBeançš„åˆ›å»ºï¼Œè€ŒApplication Contextåˆ™æ˜¯é…ç½®æ–‡ä»¶åŠ è½½ï¼Œå®¹å™¨ä¸€åˆ›å»ºå°±å°†Beanéƒ½å®åˆ—åŒ–å¹¶åˆå§‹åŒ–å¥½ï¼›</p>
</li>
</ol>
<h2 id="åŸºäºxmlçš„Springåº”ç”¨"><a href="#åŸºäºxmlçš„Springåº”ç”¨" class="headerlink" title="åŸºäºxmlçš„Springåº”ç”¨"></a>åŸºäºxmlçš„Springåº”ç”¨</h2><h3 id="SpringBean-çš„é…ç½®è¯¦è§£"><a href="#SpringBean-çš„é…ç½®è¯¦è§£" class="headerlink" title="SpringBean çš„é…ç½®è¯¦è§£"></a>SpringBean çš„é…ç½®è¯¦è§£</h3><pre class="line-numbers language-none"><code class="language-none">xmlé…ç½®æ–¹å¼										åŠŸèƒ½æè¿°

&lt;bean id="" class=""&gt;							å…¨é™å®šåé…ç½®

&lt;bean name=""&gt;									é€šè¿‡nameè®¾ç½®Beançš„åˆ«åï¼Œé€šè¿‡åˆ«åä¹Ÿèƒ½ç›´æ¥è·å–åˆ°Beanå®åˆ—

&lt;bean scope=""&gt;									Beançš„ä½œç”¨èŒƒå›´ï¼ŒBean Factoryä½œä¸ºå®¹å™¨æ—¶å–å€¼singletonå’Œprototype

&lt;bean lazy-init=""&gt;								Beanå®åˆ—åŒ–æ—¶æœºï¼Œæ˜¯å¦å»¶è¿ŸåŠ è½½ã€‚Bean Factoryä½œä¸ºå®¹å™¨æ—¶æ— æ•ˆ

&lt;bean init-method=""&gt;							Beançš„å®åˆ—åŒ–åè‡ªåŠ¨æ‰§è¡Œçš„åˆå§‹åŒ–æ–¹æ³•ï¼ŒmethodæŒ‡å®šæ–¹æ³•å

&lt;bean destory-method=""&gt;						Beanå®åˆ—é”€æ¯é’±çš„æ–¹æ³•ï¼ŒmethodæŒ‡å®šæ–¹æ³•å

&lt;bean autowire="byType"&gt;						è®¾ç½®è‡ªåŠ¨æ³¨å…¥æ¨¡å¼ï¼Œå¸¸ç”¨çš„æœ‰æŒ‰ç…§ç±»å‹byTypeï¼ŒæŒ‰ç…§åå­—byName

&lt;bean factory-bean="" factory-method=""/&gt; 		æŒ‡å®šé‚£ä¸ªå·¥å‚Beançš„é‚£ä¸ªæ–¹æ³•å®ŒæˆBeançš„åˆ›å»º<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<h3 id="SpringBeané…ç½®"><a href="#SpringBeané…ç½®" class="headerlink" title="SpringBeané…ç½®"></a>SpringBeané…ç½®</h3><pre class="line-numbers language-none"><code class="language-none">&lt;!--    é…ç½®UserServiceImpl--&gt;
   &lt;bean id="userService" class="top.wabisabifag.service.impl.UserServiceImpl"&gt;
       &lt;property name="userDao" ref="userDao"&gt;&lt;/property&gt;
   &lt;/bean&gt;
&lt;!--    ç¯‡æ—¥å¿—UserDaoImpl--&gt;
   &lt;bean id="userDao" class="top.wabisabifag.service.impl.UserDaoImpl"&gt;&lt;/bean&gt;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<ol>
<li><p>Beançš„åŸºç¡€é…ç½®<br> åˆ—å¦‚ï¼š<br>     é…ç½®UserDaoImplç”±Springå®¹å™¨è´Ÿè´£ç®¡ç†<br>     <bean id="userDao" class="top.wabisabifag.dao.impl.UserDaoImpl"><br><br>     æ­¤æ—¶å­˜å‚¨åˆ°Springå®¹å™¨çš„Beançš„beanNameæ—¶uerDaoï¼Œå€¼æ˜¯UserDaoImplå¯¹è±¡ï¼Œå¯æ ¹æ®beanNameè·å–Beanå®åˆ—<br>     applicationContext.getBean(â€œuserDaoâ€);<br><br>     å¦‚ä¸é…ç½®idï¼Œåˆ™Springä¼šæŠŠå½“å‰Beanå®åˆ—çš„å…¨é™å®šåä½œä¸ºbeanName<br>     applicationContext.getBean(â€œtop.wabisabifag.dao.impl.UserDaoImplâ€)</bean></p>
</li>
<li><p>Beançš„åˆ«åé…ç½®<br> å¯ä»¥ä¸ºå½“å‰BeanæŒ‡å®šå¤šä¸ªåˆ«åï¼Œæ ¹æ®åˆ«åå¯è·å¾—Beanå¯¹è±¡<br> <bean id="userDao" name="aa,bb" class="top.wabisabifag.dao.impl.UserDaoImpl"><br><br> æ­¤æ—¶å¤šä¸ªåç§°å¯ä»¥è·å¾—UserDaoImplå®åˆ—duixiang<br> applicationContext.getBean(â€œUserDaoâ€);<br> applicationContext.getBean(â€œaaâ€);<br> applicationContext.getBean(â€œbbâ€);</bean></p>
</li>
<li><p>Beançš„èŒƒå›´è®¾ç½®<br> å•çº¯çš„Springç¯å¢ƒçš„ä½œç”¨æœ‰ä¸¤ä¸ªï¼šSingletonå’ŒPrototype<br> Singletonï¼šå•åˆ—ï¼Œé»˜è®¤å€¼ï¼ŒSpringå®¹å™¨åˆ›å»ºæ—¶å€™å°±ä¼šè¿›è¡ŒBeançš„å®åˆ—åŒ–ï¼Œå¹¶å­˜å‚¨åˆ°å®¹å™¨å†…éƒ¨çš„å•åˆ—æ± ä¸­ï¼Œæ¯æ¬¡getBeanæ—¶éƒ½æ˜¯ä»å•åˆ—æ± ä¸­è·å–ç›¸åŒçš„Beanå®åˆ—<br> prototypeï¼šåŸå‹ï¼ŒSpringå®¹å™¨åˆå§‹åŒ–æ—¶ä¸ä¼šåˆ›å»ºBeanå®åˆ—ï¼Œå½“è°ƒç”¨getBeanæ—¶æ‰ä¼šå®åˆ—åŒ–Beanï¼Œæ¯æ¬¡getBeanéƒ½ä¼šåˆ›å»ºä¸€ä¸ªæ–°çš„Beanå®åˆ—</p>
</li>
<li><p>Beançš„å»¶è¿ŸåŠ è½½<br> å½“lazy-initè®¾ç½®ä¸ºtrueï¼ŒSpringå®¹å™¨åˆ›å»ºæ—¶ä¸ä¼šç«‹å³åˆ›å»ºBeanå®åˆ—ï¼Œç­‰å¾…ç”¨åˆ°æ—¶åœ¨åˆ›å»ºBeanå®åˆ—å¹¶å­˜å‚¨åˆ°å•åˆ—æ± ä¸­ï¼Œåç»­åœ¨ä½¿ç”¨è¯¥Beanç›´æ¥ä»å•åˆ—æ± è·å–ï¼Œæœ¬è´¨ä¸Šè¯¥Beanè¿˜æ˜¯å•åˆ—<br> <bean id="userDao" class="top.wabisabifag.dao.impl.UserDaoImpl" lazy-init="true"></bean></p>
</li>
<li><p>Beançš„åˆå§‹åŒ–å’Œé”€æ¯æ–¹æ³•é…ç½®<br> Beanåœ¨è¢«å®åˆ—åŒ–åï¼Œå¯æ‰§è¡ŒæŒ‡å®šçš„åˆå§‹åŒ–æ–¹æ³•å®Œæˆä¸€äº›åˆå§‹åŒ–çš„æ“ä½œï¼ŒBeanåœ¨é”€æ¯ä¹‹å‰ä¹Ÿå¯ä»¥æ‰§è¡ŒæŒ‡å®šçš„é”€æ¯æ–¹æ³•å®Œæˆä¸€äº›æ“ä½œï¼Œåˆå§‹åŒ–æ–¹æ³•åç§°å’Œé”€æ¯æ–¹æ³•åç§°é€šè¿‡<br> </p><pre class="line-numbers language-none"><code class="language-none">&lt;bean id="userDao" class="top.wabisabifag.dao.impl.UserDaoImpl" init-method="init" destory-method="destroy"/&gt;

public class UserDaoImpl implements UserDao{
 public UserDaoImpl(){};
 public void init(){};
 public void destory(){};
}<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p></p>
</li>
<li><p>Beançš„å®åˆ—åŒ–é…ç½®<br> Springçš„å®åˆ—åŒ–æ–¹å¼ï¼š</p>
</li>
<li><p>æ„é€ æ–¹å¼å®åˆ—åŒ–ï¼šåº•å±‚é€šè¿‡æ„é€ æ–¹æ³•å¯¹Beanè¿›è¡Œå®åˆ—åŒ–</p>
<pre class="line-numbers language-none"><code class="language-none">&lt;!--    é…ç½®UserServiceImpl--&gt;
   &lt;bean id="userService" class="top.wabisabifag.service.impl.UserServiceImpl"&gt;
       &lt;!-- UserDapImplçš„æœ‰å‚æ„é€ --&gt;
 &lt;constructor-arg name="name" value="H"&gt;&lt;/constructor&gt;
 &lt;property name="userDao" ref="userDao"&gt;&lt;/property&gt;
   &lt;/bean&gt;
&lt;!--    ç¯‡æ—¥å¿—UserDaoImpl--&gt;
   &lt;bean id="userDao" class="top.wabisabifag.service.impl.UserDaoImpl"&gt;&lt;/bean&gt;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></li>
<li><p>å·¥å‚æ–¹å¼å®åˆ—åŒ–ï¼šåº•å±‚é€šè¿‡è°ƒç”¨è‡ªå®šä¹‰çš„å·¥å‚æ–¹å¼å¯¹Beanè¿›è¡Œå®åˆ—åŒ–</p>
</li>
</ol>
<ul>
<li><p>é™æ€å·¥å‚æ–¹æ³•å®åˆ—åŒ–Bean<br>  idå®šä¹‰ä¸€ä¸ªåœ¨impl.UserServiceImplå‡½æ•°æ–¹æ³•ä¸‹çš„ userDao å‡½æ•°æ–¹æ³•.<br>  å¯ä»¥è¢«åº”ç”¨,ä¾¿äºåœ¨è¿è¡Œå‰åœ¨è¯¥æ–¹æ³•ä¸­çš„å…¶ä»–åŠŸèƒ½çš„è¿è¡Œè°ƒç”¨.<br>  </p><pre class="line-numbers language-none"><code class="language-none">&lt;!--    é…ç½®UserServiceImpl--&gt;
 		&lt;bean id="user" class="top.wabisabifag.service.impl.UserServiceImpl" 
factory-method="userDao"&gt;&lt;/bean&gt;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><p></p>
</li>
<li><p>å®åˆ—å·¥å‚æ–¹æ³•å®åˆ—åŒ–Bean</p>
</li>
<li><p>å®ç°FavtoryBeanè§„èŒƒå»¶è¿Ÿå®åˆ—åŒ–Bean</p>
</li>
</ul>
<p>2.Spring çš„getæ–¹æ³•</p>
<p>3.Spring é…ç½®éå®šä¹‰Bean</p>
<p>4ï¼ŒBean å®åˆ—åŒ–çš„åŸºæœ¬æµç¨‹</p>
<p>5.Spring çš„åå¤„ç†å™¨</p>
<p>6.SpringBean çš„ç”Ÿå‘½å‘¨æœŸ</p>
<p>7.Spring Ioc æ•´ä½“æµç¨‹æ€»ç»“</p>
<p>8.Spring xml æ–¹å¼æ•´åˆç¬¬ä¸‰æ–¹æ¡†æ¶</p>
</article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">æ–‡ç« ä½œè€…: </span><span class="post-copyright-info"><a href="https://github.com/Wabi-Sabifag/Wabi-Sabifag.github.io">Wabi-Sabifag</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">æ–‡ç« é“¾æ¥: </span><span class="post-copyright-info"><a href="https://github.com/Wabi-Sabifag/Wabi-Sabifag.github.io/2023/02/18/JavaEE/">https://github.com/Wabi-Sabifag/Wabi-Sabifag.github.io/2023/02/18/JavaEE/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">ç‰ˆæƒå£°æ˜: </span><span class="post-copyright-info">æœ¬åšå®¢æ‰€æœ‰æ–‡ç« é™¤ç‰¹åˆ«å£°æ˜å¤–ï¼Œå‡é‡‡ç”¨ <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" rel="external nofollow noreferrer" target="_blank">CC BY-NC-SA 4.0</a> è®¸å¯åè®®ã€‚è½¬è½½è¯·æ³¨æ˜æ¥è‡ª <a href="https://github.com/Wabi-Sabifag/Wabi-Sabifag.github.io" target="_blank">å½“ä½ æŠ¬å¤´ä»°æœ›æ˜Ÿè¾°æ—¶ï¼Œæœˆè¾‰äº²æ˜µåŒé¢Š</a>ï¼</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/Java/">Java</a><a class="post-meta__tags" href="/tags/JavaEE/">JavaEE</a><a class="post-meta__tags" href="/tags/Mybatis/">Mybatis</a><a class="post-meta__tags" href="/tags/MybatisPlus/">MybatisPlus</a><a class="post-meta__tags" href="/tags/SpringBoot/">SpringBoot</a><a class="post-meta__tags" href="/tags/Docker/">Docker</a><a class="post-meta__tags" href="/tags/Redis/">Redis</a><a class="post-meta__tags" href="/tags/Swaggger/">Swaggger</a></div><div class="post_share"><div class="social-share" data-image="/img/22.png" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/css/share.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/js/social-share.min.js" defer></script></div></div><div class="post-reward"><div class="reward-button"><i class="fas fa-qrcode"></i> æ‰“èµ</div><div class="reward-main"><ul class="reward-all"><li class="reward-item"><a href="/img/wechat.jpg" target="_blank"><img class="post-qr-code-img" src="/img/wechat.jpg" alt="å¾®ä¿¡"/></a><div class="post-qr-code-desc">å¾®ä¿¡</div></li><li class="reward-item"><a href="/img/alipay.jpg" target="_blank"><img class="post-qr-code-img" src="/img/alipay.jpg" alt="æ”¯ä»˜å®"/></a><div class="post-qr-code-desc">æ”¯ä»˜å®</div></li><li class="reward-item"><a href="/./img/Wabi-Sabifag.jpg" target="_blank"><img class="post-qr-code-img" src="/./img/Wabi-Sabifag.jpg" alt="BiliBili"/></a><div class="post-qr-code-desc">BiliBili</div></li></ul></div></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-left"><a href="/2023/02/23/Vue.js/"><img class="prev-cover" src="/img/15.png" onerror="onerror=null;src='/img/404.jpg'" alt="cover of previous post"><div class="pagination-info"><div class="label">ä¸Šä¸€ç¯‡</div><div class="prev_info">Vue.js</div></div></a></div><div class="next-post pull-right"><a href="/2023/02/18/MyDiary/"><img class="next-cover" src="/img/7.jpg" onerror="onerror=null;src='/img/404.jpg'" alt="cover of next post"><div class="pagination-info"><div class="label">ä¸‹ä¸€ç¯‡</div><div class="next_info">MyDiary</div></div></a></div></nav><div class="relatedPosts"><div class="headline"><i class="fas fa-thumbs-up fa-fw"></i><span>ç›¸å…³æ¨è</span></div><div class="relatedPosts-list"><div><a href="/2023/08/22/MybatisPlus/" title="MybatisPlus"><img class="cover" src="/img/23.png" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2023-08-22</div><div class="title">MybatisPlus</div></div></a></div><div><a href="/2022/12/25/Java-the-best-langage-at-the-World/" title="Java, the world&#39;s best programming language"><img class="cover" src="/img/23.png" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2022-12-25</div><div class="title">Java, the world&#39;s best programming language</div></div></a></div><div><a href="/2023/08/19/Maven/" title="MavenåŸºç¡€"><img class="cover" src="/img/27.png" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2023-08-19</div><div class="title">MavenåŸºç¡€</div></div></a></div></div></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="is-center"><div class="avatar-img"><img src="https://safebooru.org//samples/3404/sample_2d70be5f0453c31b5e9ad641db7cf3fb90ba2c23.jpg?3541071" onerror="this.onerror=null;this.src='https://safebooru.org//samples/3404/sample_2d70be5f0453c31b5e9ad641db7cf3fb90ba2c23.jpg?3541071'" alt="avatar"/></div><div class="author-info__name">Wabi-Sabifag</div><div class="author-info__description">å½“æ®‹é£ä¸å†ï¼Œå½“çŸ³çƒ‚æµ·ç«­ï¼Œæˆ‘è¿Ÿè¿Ÿå½’åœº</div></div><div class="card-info-data site-data is-center"><a href="/archives/"><div class="headline">æ–‡ç« </div><div class="length-num">19</div></a><a href="/tags/"><div class="headline">æ ‡ç­¾</div><div class="length-num">25</div></a><a href="/categories/"><div class="headline">åˆ†ç±»</div><div class="length-num">28</div></a></div><a id="card-info-btn" target="_blank" rel="noopener external nofollow noreferrer" href="https://space.bilibili.com/364309102"><i class="fab fa-github"></i><span>æˆ‘çš„å…´è¶£éƒ½åœ¨è¿™é‡Œ</span></a><div class="card-info-social-icons is-center"><a class="social-icon" href="https://github.com/Wabi-Sabifag" target="_blank" title="Github"><i class="fab fa-github"></i></a><a class="social-icon" href="https://blog.csdn.net/qq_61109834" rel="external nofollow noreferrer" target="_blank" title="CSDN"><i class="fab fa-contao"></i></a><a class="social-icon" href="https://space.bilibili.com/364309102" rel="external nofollow noreferrer" target="_blank" title="BiliBli"><i class="fa fa-bold"></i></a><a class="social-icon" href="mailto:1109388794@qq.com" rel="external nofollow noreferrer" target="_blank" title="Email"><i class="fas fa-envelope"></i></a></div></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn fa-shake"></i><span>å…¬å‘Š</span></div><div class="announcement_content">ä¸–ç•Œä¸Šçš„äº‹æˆ‘ä¸å¯ä¸€é¥®è€Œå°½ï¼Œå”¯æ„¿è‡³æ­»ä¾ç„¶çƒ­çˆ±è€ŒçœŸåˆ‡çš„æ´»ç€ã€ç›®ç¹ç»é€”çš„åƒä¸‡ã€‚</div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>ç›®å½•</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#1-SpringBoot"><span class="toc-text">1.SpringBoot</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#1-Rest%E9%A3%8E%E6%A0%BC"><span class="toc-text">1.Resté£æ ¼</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-1Rest"><span class="toc-text">1.1Rest</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1-1-1-Rest%E7%AE%80%E4%BB%8B"><span class="toc-text">1.1.1 Restç®€ä»‹</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#1-1-2-%E5%9C%B0%E5%9D%80%E6%A0%8F%E4%BC%A0%E5%8F%82%E6%A8%A1%E5%BC%8F%E2%80%94-%E5%8F%82%E6%95%B0%E9%85%8D%E7%BD%AE"><span class="toc-text">1.1.2 åœ°å€æ ä¼ å‚æ¨¡å¼â€”-å‚æ•°é…ç½®</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#1-1-3-Rest%E5%BF%AB%E9%80%9F%E5%BC%80%E5%8F%91"><span class="toc-text">1.1.3 Restå¿«é€Ÿå¼€å‘</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-%E5%9F%BA%E7%A1%80%E9%85%8D%E7%BD%AE"><span class="toc-text">2.åŸºç¡€é…ç½®</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#2-1-%E5%B1%9E%E6%80%A7%E9%85%8D%E7%BD%AE"><span class="toc-text">2.1 å±æ€§é…ç½®</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#2-1-1-Springboot-%E5%A4%9A%E7%A7%8D%E5%B1%9E%E6%80%A7%E9%85%8D%E7%BD%AE-%E6%96%87%E4%BB%B6%E4%BC%98%E5%85%88%E7%BA%A7%E9%80%92%E5%87%8F"><span class="toc-text">2.1.1 Springboot å¤šç§å±æ€§é…ç½®(æ–‡ä»¶ä¼˜å…ˆçº§é€’å‡)</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#1-yml%E6%A0%BC%E5%BC%8F"><span class="toc-text">1.ymlæ ¼å¼</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#2-%E6%95%B0%E6%8D%AE%E8%AF%BB%E5%8F%96"><span class="toc-text">2.æ•°æ®è¯»å–</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#3-%E5%B0%81%E8%A3%85%E6%95%B0%E6%8D%AE"><span class="toc-text">3.å°è£…æ•°æ®</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-1-2-%E4%BF%AE%E6%94%B9%E6%9C%8D%E5%8A%A1%E5%99%A8%E7%AB%AF%E5%8F%A3"><span class="toc-text">2.1.2 ä¿®æ”¹æœåŠ¡å™¨ç«¯å£</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-%E7%AC%AC%E4%B8%89%E6%96%B9%E6%8A%80%E6%9C%AF%E6%95%B4%E5%90%88"><span class="toc-text">3.ç¬¬ä¸‰æ–¹æŠ€æœ¯æ•´åˆ</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-JUnit"><span class="toc-text">1.JUnit</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-MybatisPlus"><span class="toc-text">2.MybatisPlus</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-Lombok"><span class="toc-text">4.Lombok</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-Druid"><span class="toc-text">5.Druid</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-SSMP%E6%95%B4%E5%90%88%E6%A1%88%E4%BE%8B"><span class="toc-text">2.SSMPæ•´åˆæ¡ˆä¾‹</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#SMMP%E6%BA%90%E4%BB%A3%E7%A0%81"><span class="toc-text">SMMPæºä»£ç </span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-SpringBoot%E7%BB%B4%E6%8A%A4"><span class="toc-text">3.SpringBootç»´æŠ¤</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-%E5%B7%A5%E7%A8%8B%E8%BF%90%E8%A1%8C"><span class="toc-text">1.å·¥ç¨‹è¿è¡Œ</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1-Windows-jar-%E5%8C%85%E6%89%A7%E8%A1%8C"><span class="toc-text">1.Windows jar åŒ…æ‰§è¡Œ</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-Linux-jar-%E5%8C%85%E6%89%A7%E8%A1%8C"><span class="toc-text">2.Linux jar åŒ…æ‰§è¡Œ</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-%E4%B8%B4%E6%97%B6%E5%B1%9E%E6%80%A7%E9%85%8D%E7%BD%AE"><span class="toc-text">3.ä¸´æ—¶å±æ€§é…ç½®</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4-%E5%A4%9A%E7%8E%AF%E5%A2%83%E5%BC%80%E5%8F%91"><span class="toc-text">4.å¤šç¯å¢ƒå¼€å‘</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#1-YAML"><span class="toc-text">1. YAML</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link" href="#YAML-%E5%BC%8A%E7%AB%AF"><span class="toc-text">YAML å¼Šç«¯</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#YAML-%E4%BC%98%E5%8C%96"><span class="toc-text">YAML ä¼˜åŒ–</span></a></li></ol></li><li class="toc-item toc-level-5"><a class="toc-link" href="#2-properties"><span class="toc-text">2. properties</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#3-%E7%8B%AC%E7%AB%8B%E7%9A%84%E5%8A%9F%E8%83%BD%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6"><span class="toc-text">3. ç‹¬ç«‹çš„åŠŸèƒ½é…ç½®æ–‡ä»¶</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link" href="#%E4%BC%98%E5%8C%96-include-%E6%97%A0%E6%B3%95%E5%8A%A8%E6%80%81%E6%9B%B4%E6%94%B9%E9%97%AE%E9%A2%98"><span class="toc-text">ä¼˜åŒ– include æ— æ³•åŠ¨æ€æ›´æ”¹é—®é¢˜</span></a></li></ol></li><li class="toc-item toc-level-5"><a class="toc-link" href="#4-%E5%A4%9A%E7%8E%AF%E5%A2%83%E5%BC%80%E5%8F%91%E6%8E%A7%E5%88%B6-Maven"><span class="toc-text">4. å¤šç¯å¢ƒå¼€å‘æ§åˆ¶(Maven)</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#5-%E6%97%A5%E5%BF%97"><span class="toc-text">5. æ—¥å¿—</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#1-%E6%97%A5%E5%BF%97%E8%AE%BE%E7%BD%AE"><span class="toc-text">1. æ—¥å¿—è®¾ç½®</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#2-%E6%97%A5%E5%BF%97%E5%B7%A5%E5%85%B7-%E5%8A%A8%E6%80%81%E5%92%8C%E7%BB%A7%E6%89%BF"><span class="toc-text">2. æ—¥å¿—å·¥å…· (åŠ¨æ€å’Œç»§æ‰¿)</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#3-%E6%97%A5%E5%BF%97%E8%BE%93%E5%87%BA%E6%A0%BC%E5%BC%8F"><span class="toc-text">3. æ—¥å¿—è¾“å‡ºæ ¼å¼</span></a></li></ol></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4-SpringBoot%E5%BA%94%E7%94%A8%E5%BC%80%E5%8F%91"><span class="toc-text">4.SpringBootåº”ç”¨å¼€å‘</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-%E7%83%AD%E9%83%A8%E7%BD%B2"><span class="toc-text">1. çƒ­éƒ¨ç½²</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1-%E7%83%AD%E9%83%A8%E7%BD%B2%E4%BE%9D%E8%B5%96"><span class="toc-text">1. çƒ­éƒ¨ç½²ä¾èµ–</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-%E7%83%AD%E9%83%A8%E7%BD%B2%E8%8C%83%E5%9B%B4"><span class="toc-text">2. çƒ­éƒ¨ç½²èŒƒå›´</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-%E5%85%B3%E9%97%AD%E7%83%AD%E9%83%A8%E7%BD%B2"><span class="toc-text">3. å…³é—­çƒ­éƒ¨ç½²</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#1-%E8%AE%BE%E7%BD%AE%E6%96%87%E4%BB%B6%E5%B1%82%E7%BA%A7%E6%8E%A7%E5%88%B6"><span class="toc-text">1.è®¾ç½®æ–‡ä»¶å±‚çº§æ§åˆ¶</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#2-%E7%B3%BB%E7%BB%9F%E5%B1%82%E7%BA%A7%E8%A6%86%E7%9B%96%E6%8E%A7%E5%88%B6"><span class="toc-text">2. ç³»ç»Ÿå±‚çº§è¦†ç›–æ§åˆ¶</span></a></li></ol></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-Swagger%E7%94%9F%E6%88%90WebAPI%E6%96%87%E6%A1%A3"><span class="toc-text">2. Swaggerç”ŸæˆWebAPIæ–‡æ¡£</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1-%E9%83%A8%E7%BD%B2%E5%BA%94%E7%94%A8Swagger"><span class="toc-text">1.éƒ¨ç½²åº”ç”¨Swagger</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-%E7%AC%AC%E4%B8%89%E6%96%B9Bean-%E5%B1%9E%E6%80%A7%E7%BB%91%E5%AE%9A-configuration"><span class="toc-text">2. ç¬¬ä¸‰æ–¹Bean å±æ€§ç»‘å®š(configuration)</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1-Bean-%E5%B1%9E%E6%80%A7%E7%BB%91%E5%AE%9A"><span class="toc-text">1. Bean å±æ€§ç»‘å®š</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-%E5%AE%BD%E6%9D%BE%E7%BB%91%E5%AE%9A"><span class="toc-text">2. å®½æ¾ç»‘å®š</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-%E5%B8%B8%E9%87%8F%E8%AE%A1%E9%87%8F%E5%8D%95%E4%BD%8D%E5%BA%94%E7%94%A8-jdk%E7%89%88%E6%9C%AC-8"><span class="toc-text">3. å¸¸é‡è®¡é‡å•ä½åº”ç”¨(jdkç‰ˆæœ¬:8)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-%E6%95%B0%E6%8D%AE%E6%A0%A1%E9%AA%8C"><span class="toc-text">4. æ•°æ®æ ¡éªŒ</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-%E8%BF%9B%E5%88%B6%E6%95%B0%E6%8D%AE%E8%BD%AC%E6%8D%A2"><span class="toc-text">5. è¿›åˆ¶æ•°æ®è½¬æ¢</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6-%E6%B5%8B%E8%AF%95"><span class="toc-text">6. æµ‹è¯•</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1-%E5%8A%A0%E8%BD%BD%E6%B5%8B%E8%AF%95%E4%B8%93%E7%94%A8%E5%B1%9E%E6%80%A7"><span class="toc-text">1. åŠ è½½æµ‹è¯•ä¸“ç”¨å±æ€§</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#1-%E5%B1%80%E9%83%A8%E9%85%8D%E7%BD%AE%E5%AF%BC%E5%85%A5"><span class="toc-text">1. å±€éƒ¨é…ç½®å¯¼å…¥</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-Web-%E7%8E%AF%E5%A2%83%E6%A8%A1%E6%8B%9F%E6%B5%8B%E8%AF%95"><span class="toc-text">2. Web ç¯å¢ƒæ¨¡æ‹Ÿæµ‹è¯•</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-%E4%B8%9A%E5%8A%A1%E5%B1%82%E6%95%B0%E6%8D%AE%E6%B5%8B%E8%AF%95%E4%BA%8B%E7%89%A9%E5%9B%9E%E6%BB%9A"><span class="toc-text">3. ä¸šåŠ¡å±‚æ•°æ®æµ‹è¯•äº‹ç‰©å›æ»š</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4-%E6%B5%8B%E8%AF%95%E7%94%A8%E4%BE%8B%E6%95%B0%E6%8D%AE%E8%AE%BE%E5%AE%9A"><span class="toc-text">4. æµ‹è¯•ç”¨ä¾‹æ•°æ®è®¾å®š</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#1-%E6%B5%8B%E8%AF%95%E7%94%A8%E4%BE%8B%E8%AE%BE%E5%AE%9A%E9%9A%8F%E6%9C%BA%E6%95%B0%E6%8D%AE"><span class="toc-text">1.  æµ‹è¯•ç”¨ä¾‹è®¾å®šéšæœºæ•°æ®</span></a></li></ol></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#7-%E6%95%B0%E6%8D%AE%E5%B1%82%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88"><span class="toc-text">7. æ•°æ®å±‚è§£å†³æ–¹æ¡ˆ</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1-SQL"><span class="toc-text">1. SQL</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#1-%E6%95%B0%E6%8D%AE%E6%BA%90%E9%85%8D%E7%BD%AE-DruidDataSource"><span class="toc-text">1. æ•°æ®æºé…ç½®(DruidDataSource)</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#2-%E6%95%B0%E6%8D%AE%E6%8C%81%E4%B9%85%E5%8C%96-jdbcTemplate"><span class="toc-text">2. æ•°æ®æŒä¹…åŒ–(jdbcTemplate)</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link" href="#1-JDBCTemplate-%E9%85%8D%E7%BD%AE"><span class="toc-text">1. JDBCTemplate é…ç½®</span></a></li></ol></li><li class="toc-item toc-level-5"><a class="toc-link" href="#3-%E6%95%B0%E6%8D%AE%E5%BA%93-MySQL"><span class="toc-text">3. æ•°æ®åº“(MySQL)</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link" href="#1-%E8%AE%BF%E9%97%AEH2-%E6%95%B0%E6%8D%AE%E5%BA%93%E6%9C%8D%E5%8A%A1%E9%A1%B5%E9%9D%A2"><span class="toc-text">1. è®¿é—®H2 æ•°æ®åº“æœåŠ¡é¡µé¢</span></a></li></ol></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-NoSQL"><span class="toc-text">2. NoSQL</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#1-Redis"><span class="toc-text">1. Redis</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link" href="#1-Redis%E5%9F%BA%E7%A1%80%E6%93%8D%E4%BD%9C"><span class="toc-text">1. RedisåŸºç¡€æ“ä½œ</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#2-Redis%E6%95%B4%E5%90%88"><span class="toc-text">2. Redisæ•´åˆ</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#3-jedis-%E5%AE%A2%E6%88%B7%E7%AB%AF%E5%AE%9E%E7%8E%B0%E6%8A%80%E6%9C%AF%E5%88%87%E6%8D%A2"><span class="toc-text">3. jedis å®¢æˆ·ç«¯å®ç°æŠ€æœ¯åˆ‡æ¢</span></a></li></ol></li><li class="toc-item toc-level-5"><a class="toc-link" href="#2-Mongo"><span class="toc-text">2. Mongo</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link" href="#1-MongoDB-%E7%89%B9%E6%80%A7"><span class="toc-text">1. MongoDB ç‰¹æ€§</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#2-Mysql-Redis-%E5%BC%8A%E7%AB%AF"><span class="toc-text">2. Mysql Redis å¼Šç«¯</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#3-%E6%95%B0%E6%8D%AE%E5%88%86%E6%9E%90"><span class="toc-text">3. æ•°æ®åˆ†æ</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#4-Mongo-%E8%BF%90%E8%A1%8C"><span class="toc-text">4. Mongo è¿è¡Œ</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#5-Mongo-%E6%95%B4%E5%90%88"><span class="toc-text">5. Mongo æ•´åˆ</span></a></li></ol></li><li class="toc-item toc-level-5"><a class="toc-link" href="#3-ES"><span class="toc-text">3. ES</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link" href="#1-%E7%B4%A2%E5%BC%95%E6%93%8D%E4%BD%9C"><span class="toc-text">1. ç´¢å¼•æ“ä½œ</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#2-%E6%96%87%E6%A1%A3%E6%93%8D%E4%BD%9C"><span class="toc-text">2. æ–‡æ¡£æ“ä½œ</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#3-Elasticsearch-%E6%95%B4%E5%90%88"><span class="toc-text">3. Elasticsearch æ•´åˆ</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#4-%E5%88%86%E8%AF%8D%E5%99%A8-%E5%92%8C-%E5%88%9B%E5%BB%BA%E7%B4%A2%E5%BC%95%E5%B1%9E%E6%80%A7"><span class="toc-text">4. åˆ†è¯å™¨ å’Œ åˆ›å»ºç´¢å¼•å±æ€§</span></a></li></ol></li></ol></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#8-%E6%95%B4%E5%90%88%E7%AC%AC%E4%B8%89%E6%96%B9%E6%8A%80%E6%9C%AF"><span class="toc-text">8. æ•´åˆç¬¬ä¸‰æ–¹æŠ€æœ¯</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1-%E7%BC%93%E5%AD%98-%E9%83%A8%E5%88%86%E8%BF%87%E6%97%B6%EF%BC%8C%E4%BB%A5%E6%9C%80%E6%96%B0%E4%B8%BA%E4%B8%BB%EF%BC%8C%E8%87%AA%E8%A1%8C%E7%90%86%E8%A7%A3"><span class="toc-text">1. ç¼“å­˜ (éƒ¨åˆ†è¿‡æ—¶ï¼Œä»¥æœ€æ–°ä¸ºä¸»ï¼Œè‡ªè¡Œç†è§£)</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#1-%E6%A8%A1%E6%8B%9F%E7%BC%93%E5%AD%98"><span class="toc-text">1. æ¨¡æ‹Ÿç¼“å­˜</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#2-%E6%A8%A1%E6%8B%9F%E9%AA%8C%E8%AF%81"><span class="toc-text">2. æ¨¡æ‹ŸéªŒè¯</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#3-SpringBoot-%E7%BC%93%E5%AD%98"><span class="toc-text">3. SpringBoot ç¼“å­˜</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#4-%E6%A8%A1%E6%8B%9F%E7%9F%AD%E4%BF%A1%E9%AA%8C%E8%AF%81-Simple"><span class="toc-text">4. æ¨¡æ‹ŸçŸ­ä¿¡éªŒè¯(Simple)</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#5-Ehcache-Redis-memcached-%E7%BC%93%E5%AD%98%E7%BB%9F%E4%B8%80%E6%8E%A5%E5%8F%A3%E9%85%8D%E7%BD%AE"><span class="toc-text">5. Ehcache Redis memcached ç¼“å­˜ç»Ÿä¸€æ¥å£é…ç½®</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link" href="#1-Ehcache-Redis"><span class="toc-text">1. Ehcache Redis</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#2-memcached-%E7%BC%93%E5%AD%98%E6%95%B4%E5%90%88"><span class="toc-text">2. memcached ç¼“å­˜æ•´åˆ</span></a></li></ol></li><li class="toc-item toc-level-5"><a class="toc-link" href="#6-jetCache"><span class="toc-text">6. jetCache</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link" href="#1-jetCache-%E7%89%B9%E6%80%A7"><span class="toc-text">1. jetCache ç‰¹æ€§</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#2-%E6%95%B4%E4%BD%93%E9%83%A8%E7%BD%B2-%E5%9F%BA%E7%A1%80"><span class="toc-text">2. æ•´ä½“éƒ¨ç½²(åŸºç¡€)</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#3-jetCache-%E6%96%B9%E6%B3%95%E7%BC%93%E5%AD%98-%E6%94%B9%E5%8A%A8%E5%9F%BA%E7%A1%80"><span class="toc-text">3. jetCache æ–¹æ³•ç¼“å­˜(æ”¹åŠ¨åŸºç¡€)</span></a></li></ol></li><li class="toc-item toc-level-5"><a class="toc-link" href="#7-j2cache"><span class="toc-text">7. j2cache</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link" href="#1-j2cache-%E7%89%B9%E6%80%A7"><span class="toc-text">1. j2cache ç‰¹æ€§</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#2-j2cache-%E4%B8%BB%E8%A6%81%E6%95%B4%E5%90%88-Redis-Ehcache"><span class="toc-text">2. j2cache (ä¸»è¦æ•´åˆ Redis Ehcache)</span></a></li></ol></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-%E4%BB%BB%E5%8A%A1"><span class="toc-text">2. ä»»åŠ¡</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#1-SpringBoot-%E6%95%B4%E5%90%88-Quartz"><span class="toc-text">1. SpringBoot æ•´åˆ Quartz</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link" href="#1-%E6%A6%82%E5%BF%B5"><span class="toc-text">1. æ¦‚å¿µ</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#2-Quartz"><span class="toc-text">2. Quartz</span></a></li></ol></li><li class="toc-item toc-level-5"><a class="toc-link" href="#2-Spring-Task"><span class="toc-text">2. Spring Task</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#3-SpringBoot-%E6%95%B4%E5%90%88-JavaMail"><span class="toc-text">3. SpringBoot æ•´åˆ JavaMail</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link" href="#1-JavaMail-%E5%9F%BA%E7%A1%80"><span class="toc-text">1. JavaMail(åŸºç¡€)</span></a></li></ol></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-%E6%B6%88%E6%81%AF"><span class="toc-text">3. æ¶ˆæ¯</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#1-%E5%90%8C%E6%AD%A5%E6%B6%88%E6%81%AF"><span class="toc-text">1. åŒæ­¥æ¶ˆæ¯</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#2-%E5%BC%82%E6%AD%A5%E6%B6%88%E6%81%AF"><span class="toc-text">2. å¼‚æ­¥æ¶ˆæ¯</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link" href="#1-JMS"><span class="toc-text">1. JMS</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#2-AMQP"><span class="toc-text">2. AMQP</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#3-MQTT"><span class="toc-text">3. MQTT</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#4-Kafka"><span class="toc-text">4. Kafka</span></a></li></ol></li><li class="toc-item toc-level-5"><a class="toc-link" href="#3-%E6%B6%88%E6%81%AF%E6%A1%88%E4%BE%8B-%E2%80%94-%E6%A8%A1%E6%8B%9F%E8%AE%A2%E5%8D%95%E7%9F%AD%E4%BF%A1%E9%80%9A%E7%9F%A5"><span class="toc-text">3. æ¶ˆæ¯æ¡ˆä¾‹ â€” æ¨¡æ‹Ÿè®¢å•çŸ­ä¿¡é€šçŸ¥</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link" href="#1-ActiveMQ"><span class="toc-text">1. ActiveMQ</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#2-RabbitMQ"><span class="toc-text">2. RabbitMQ</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#3-RocketMQ"><span class="toc-text">3. RocketMQ</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#4-Kafka-1"><span class="toc-text">4. Kafka</span></a></li></ol></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4-%E7%9B%91%E6%8E%A7"><span class="toc-text">4. ç›‘æ§</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#1-%E7%9B%91%E6%8E%A7%E7%9A%84%E6%84%8F%E4%B9%89"><span class="toc-text">1. ç›‘æ§çš„æ„ä¹‰</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link" href="#1-%E7%9B%91%E6%8E%A7%E7%9A%84%E5%AE%9E%E6%96%BD%E6%96%B9%E5%BC%8F"><span class="toc-text">1. ç›‘æ§çš„å®æ–½æ–¹å¼</span></a></li></ol></li><li class="toc-item toc-level-5"><a class="toc-link" href="#2-%E5%8F%AF%E8%A7%86%E5%8C%96%E7%9B%91%E6%8E%A7%E5%B9%B3%E5%8F%B0"><span class="toc-text">2. å¯è§†åŒ–ç›‘æ§å¹³å°</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link" href="#1-SpringBoot-Admin"><span class="toc-text">1. SpringBoot Admin</span></a></li></ol></li><li class="toc-item toc-level-5"><a class="toc-link" href="#3-%E7%9B%91%E6%8E%A7%E5%8E%9F%E7%90%86"><span class="toc-text">3. ç›‘æ§åŸç†</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#4-%E8%87%AA%E5%AE%9A%E4%B9%89%E7%9B%91%E6%8E%A7%E6%8C%87%E6%A0%87"><span class="toc-text">4. è‡ªå®šä¹‰ç›‘æ§æŒ‡æ ‡</span></a></li></ol></li></ol></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#2-Docker"><span class="toc-text">2. Docker</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#1-%E4%BC%A0%E7%BB%9F-Linux-%E5%AE%89%E8%A3%85-MySQL-%E6%95%B0%E6%8D%AE%E5%BA%93"><span class="toc-text">1. ä¼ ç»Ÿ Linux å®‰è£… MySQL æ•°æ®åº“</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-%E5%87%86%E5%A4%87%E5%B7%A5%E4%BD%9C"><span class="toc-text">1. å‡†å¤‡å·¥ä½œ</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1-%E6%9F%A5%E7%9C%8B%E7%B3%BB%E7%BB%9F%E7%8E%AF%E5%A2%83"><span class="toc-text">1. æŸ¥çœ‹ç³»ç»Ÿç¯å¢ƒ</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-%E4%B8%8B%E8%BD%BDMySQL-%E5%AE%89%E8%A3%85%E5%8C%85"><span class="toc-text">2. ä¸‹è½½MySQL å®‰è£…åŒ…</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-%E5%AE%89%E8%A3%85"><span class="toc-text">2. å®‰è£…</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1-%E5%8D%B8%E8%BD%BD%E9%BB%98%E8%AE%A4%E6%95%B0%E6%8D%AE%E5%BA%93-MariaDB"><span class="toc-text">1. å¸è½½é»˜è®¤æ•°æ®åº“ MariaDB</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-Docke-%E5%AE%89%E8%A3%85"><span class="toc-text">2.Docke å®‰è£…</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-%E9%85%8D%E7%BD%AEDocker-%E7%9A%84-yum-%E5%BA%93"><span class="toc-text">1. é…ç½®Docker çš„ yum åº“</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-%E5%AE%89%E8%A3%85-Docker"><span class="toc-text">2. å®‰è£… Docker</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-%E9%85%8D%E7%BD%AE%E9%95%9C%E5%83%8F%E5%8A%A0%E9%80%9F"><span class="toc-text">3. é…ç½®é•œåƒåŠ é€Ÿ</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-Docker-%E4%B8%80%E9%94%AE%E9%83%A8%E7%BD%B2MySQL"><span class="toc-text">4. Docker ä¸€é”®éƒ¨ç½²MySQL</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-%E5%B8%B8%E8%A7%81%E5%91%BD%E4%BB%A4"><span class="toc-text">3. å¸¸è§å‘½ä»¤</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4-%E6%9F%A5%E7%9C%8BDockerHub%EF%BC%8C%E6%8B%89%E5%8F%96nginx-%E9%95%9C%E5%83%8F%EF%BC%8C%E5%88%9B%E5%BB%BA%E8%BF%90%E8%A1%8CNginx%E5%AE%B9%E5%99%A8"><span class="toc-text">4. æŸ¥çœ‹DockerHubï¼Œæ‹‰å–nginx é•œåƒï¼Œåˆ›å»ºè¿è¡ŒNginxå®¹å™¨</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#5-%E5%91%BD%E4%BB%A4%E5%88%AB%E5%90%8D"><span class="toc-text">5. å‘½ä»¤åˆ«å</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#6-%E6%95%B0%E6%8D%AE%E5%8D%B7"><span class="toc-text">6.æ•°æ®å·</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-%E6%95%B0%E6%8D%AE%E5%8D%B7%E6%8C%82%E8%BD%BD"><span class="toc-text">1. æ•°æ®å·æŒ‚è½½</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-mysql%E5%AE%B9%E5%99%A8%E7%9A%84%E6%95%B0%E6%8D%AE%E6%8C%82%E8%BD%BD"><span class="toc-text">2. mysqlå®¹å™¨çš„æ•°æ®æŒ‚è½½</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#7-%E8%87%AA%E5%AE%9A%E4%B9%89%E9%95%9C%E5%83%8F"><span class="toc-text">7. è‡ªå®šä¹‰é•œåƒ</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-%E9%95%9C%E5%83%8F%E7%BB%93%E6%9E%84"><span class="toc-text">1. é•œåƒç»“æ„</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#Dockerfile"><span class="toc-text">Dockerfile</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#8-%E7%BD%91%E7%BB%9C"><span class="toc-text">8. ç½‘ç»œ</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-%E5%AE%B9%E5%99%A8%E4%BA%92%E8%81%94"><span class="toc-text">1. å®¹å™¨äº’è”</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#9-DockerCompose"><span class="toc-text">9. DockerCompose</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-docker-compose-%E5%91%BD%E4%BB%A4%E6%A0%BC%E5%BC%8F"><span class="toc-text">1. docker compose å‘½ä»¤æ ¼å¼</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-docker-compose-yml%E4%B8%80%E9%94%AE%E9%83%A8%E7%BD%B2"><span class="toc-text">2. docker-compose.ymlä¸€é”®éƒ¨ç½²</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#3-Redis"><span class="toc-text">3.Redis</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#1-Redis-%E5%9F%BA%E7%A1%80"><span class="toc-text">1.Redis åŸºç¡€</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-%E5%88%9D%E8%AF%86Redis"><span class="toc-text">1.åˆè¯†Redis</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1-%E8%AE%A4%E8%AF%86NoSQL"><span class="toc-text">1.è®¤è¯†NoSQL</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-%E8%AE%A4%E8%AF%86Redis"><span class="toc-text">2.è®¤è¯†Redis</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-%E5%AE%89%E8%A3%85Redis"><span class="toc-text">3.å®‰è£…Redis</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#1-Redis%E6%8C%87%E5%AE%9A%E9%85%8D%E7%BD%AE%E5%90%AF%E5%8A%A8"><span class="toc-text">1.RedisæŒ‡å®šé…ç½®å¯åŠ¨</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#2-%E5%BC%80%E6%9C%BA%E8%87%AA%E5%90%AF"><span class="toc-text">2.å¼€æœºè‡ªå¯</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#3-Redis%E5%AE%A2%E6%9C%8D%E7%AB%AF"><span class="toc-text">3.Rediså®¢æœç«¯</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link" href="#1-%E5%91%BD%E4%BB%A4%E8%A1%8C%E5%AE%A2%E6%88%B7%E7%AB%AF"><span class="toc-text">1.å‘½ä»¤è¡Œå®¢æˆ·ç«¯</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#2-%E5%9B%BE%E5%BD%A2%E5%8C%96%E6%A1%8C%E9%9D%A2%E5%AE%A2%E6%88%B7%E7%AB%AF"><span class="toc-text">2.å›¾å½¢åŒ–æ¡Œé¢å®¢æˆ·ç«¯</span></a></li></ol></li></ol></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-Redis%E5%B8%B8%E8%A7%81%E5%91%BD%E4%BB%A4"><span class="toc-text">2.Rediså¸¸è§å‘½ä»¤</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1-5%E7%A7%8D%E5%B8%B8%E8%A7%81%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84"><span class="toc-text">1.5ç§å¸¸è§æ•°æ®ç»“æ„</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#1-Redis%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84"><span class="toc-text">1.Redisæ•°æ®ç»“æ„</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#2-Redis%E9%80%9A%E7%94%A8%E5%91%BD%E4%BB%A4-Keys"><span class="toc-text">2.Redisé€šç”¨å‘½ä»¤(Keys)</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#3-String%E7%B1%BB%E5%9E%8B"><span class="toc-text">3.Stringç±»å‹</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link" href="#1-String%E7%9A%84%E5%B8%B8%E8%A7%81%E5%91%BD%E4%BB%A4%E6%9C%89%EF%BC%9A"><span class="toc-text">1.Stringçš„å¸¸è§å‘½ä»¤æœ‰ï¼š</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#2-key%E7%9A%84%E7%BB%93%E6%9E%84"><span class="toc-text">2.keyçš„ç»“æ„</span></a></li></ol></li><li class="toc-item toc-level-5"><a class="toc-link" href="#4-Hash%E7%B1%BB%E5%9E%8B"><span class="toc-text">4.Hashç±»å‹</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link" href="#1-Hash%E7%9A%84%E5%B8%B8%E8%A7%81%E5%91%BD%E4%BB%A4%E6%9C%89%EF%BC%9A"><span class="toc-text">1.Hashçš„å¸¸è§å‘½ä»¤æœ‰ï¼š</span></a></li></ol></li><li class="toc-item toc-level-5"><a class="toc-link" href="#5-List%E7%B1%BB%E5%9E%8B"><span class="toc-text">5.Listç±»å‹</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link" href="#1-List%E7%89%B9%E5%BE%81"><span class="toc-text">1.Listç‰¹å¾</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#2-List%E7%9A%84%E5%B8%B8%E8%A7%81%E5%91%BD%E4%BB%A4"><span class="toc-text">2.Listçš„å¸¸è§å‘½ä»¤</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#3-%E6%A8%A1%E6%8B%9F-%E6%A0%88-%E5%8A%9F%E8%83%BD"><span class="toc-text">3.æ¨¡æ‹Ÿ æ ˆ åŠŸèƒ½</span></a></li></ol></li><li class="toc-item toc-level-5"><a class="toc-link" href="#6-Set%E7%B1%BB%E5%9E%8B"><span class="toc-text">6.Setç±»å‹</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link" href="#1-Set%E7%9A%84%E5%B8%B8%E8%A7%81%E5%91%BD%E4%BB%A4"><span class="toc-text">1.Setçš„å¸¸è§å‘½ä»¤</span></a></li></ol></li><li class="toc-item toc-level-5"><a class="toc-link" href="#7-SortedSet%E7%B1%BB%E5%9E%8B"><span class="toc-text">7.SortedSetç±»å‹</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link" href="#1-SortedSet%E7%89%B9%E6%80%A7"><span class="toc-text">1.SortedSetç‰¹æ€§</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#2-SortedSet%E7%9A%84%E5%B8%B8%E8%A7%81%E5%91%BD%E4%BB%A4"><span class="toc-text">2.SortedSetçš„å¸¸è§å‘½ä»¤</span></a></li></ol></li></ol></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-Redis%E7%9A%84Java%E5%AE%A2%E6%88%B7%E7%AB%AF"><span class="toc-text">3.Redisçš„Javaå®¢æˆ·ç«¯</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1-Jedis%E5%AE%A2%E6%88%B7%E7%AB%AF"><span class="toc-text">1.Jediså®¢æˆ·ç«¯</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#1-Springboot%E6%95%B4%E5%90%88Jedis"><span class="toc-text">1.Springbootæ•´åˆJedis</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-SpringDataRedis-%E5%AE%A2%E6%88%B7%E7%AB%AF"><span class="toc-text">2.SpringDataRedis å®¢æˆ·ç«¯</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#1-RedisTemplate%E5%B7%A5%E5%85%B7%E7%B1%BB"><span class="toc-text">1.RedisTemplateå·¥å…·ç±»</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link" href="#1-SpringBoot-%E9%85%8D%E7%BD%AE%E5%BA%8F%E5%88%97%E5%8C%96%E7%B1%BB"><span class="toc-text">1.SpringBoot é…ç½®åºåˆ—åŒ–ç±»</span></a></li></ol></li><li class="toc-item toc-level-5"><a class="toc-link" href="#2-SpringDataRedis%E6%95%B4%E5%90%88"><span class="toc-text">2.SpringDataRedisæ•´åˆ</span></a></li></ol></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4-Axios"><span class="toc-text">4.Axios</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-Axios%E7%89%B9%E6%80%A7"><span class="toc-text">1.Axiosç‰¹æ€§</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#5-redis%E8%AF%BE%E7%A8%8B%E7%AC%94%E8%AE%B0"><span class="toc-text">5.redisè¯¾ç¨‹ç¬”è®°</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#2-Axios-%E4%BD%BF%E7%94%A8"><span class="toc-text">2.Axios ä½¿ç”¨</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1-%E5%AE%89%E8%A3%85vue-axios"><span class="toc-text">1.å®‰è£…vue axios</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#1-%E4%B8%8B%E8%BD%BD-vue-axios"><span class="toc-text">1.ä¸‹è½½ vue-axios</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#2-%E5%9C%A8main-js-%E5%BC%95%E5%85%A5"><span class="toc-text">2.åœ¨main.js å¼•å…¥</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#3-%E5%8F%91%E9%80%81axios%E8%AF%B7%E6%B1%82"><span class="toc-text">3.å‘é€axiosè¯·æ±‚</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#4-SpringMVC-%E8%A7%A3%E5%86%B3%E8%B7%A8%E5%9F%9F%E9%97%AE%E9%A2%98"><span class="toc-text">4.SpringMVC è§£å†³è·¨åŸŸé—®é¢˜</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link" href="#1-%E8%A7%A3%E5%86%B3axios%E6%97%A0%E6%B3%95%E4%BC%A0%E9%80%92data%E4%B8%AD%E7%9A%84%E5%8F%82%E6%95%B0%E9%97%AE%E9%A2%98"><span class="toc-text">1.è§£å†³axiosæ— æ³•ä¼ é€’dataä¸­çš„å‚æ•°é—®é¢˜</span></a></li></ol></li></ol></li></ol></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#9-MyBatis%E5%85%A5%E9%97%A8"><span class="toc-text">9.MyBatiså…¥é—¨</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#1-%E6%95%B0%E6%8D%AE%E6%8C%81%E4%B9%85%E5%B1%82%E6%A1%86%E6%9E%B6"><span class="toc-text">1.æ•°æ®æŒä¹…å±‚æ¡†æ¶</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-%E6%95%B0%E6%8D%AE%E6%8C%81%E4%B9%85%E5%B1%82"><span class="toc-text">1.æ•°æ®æŒä¹…å±‚</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-ORM"><span class="toc-text">2.ORM</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-Mybatis%E6%A1%86%E6%9E%B6"><span class="toc-text">2.Mybatisæ¡†æ¶</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#MyBatis%E7%89%B9%E7%82%B9"><span class="toc-text">MyBatisç‰¹ç‚¹</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1-%E7%AE%80%E5%8D%95%E6%98%93%E5%AD%A6"><span class="toc-text">1.ç®€å•æ˜“å­¦</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-%E7%81%B5%E6%B4%BB"><span class="toc-text">2.çµæ´»</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-%E6%8F%90%E4%BE%9B%E6%98%A0%E5%B0%84%E6%A0%87%E7%AD%BE"><span class="toc-text">3.æä¾›æ˜ å°„æ ‡ç­¾</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-MyBatis%E5%B7%A5%E4%BD%9C%E5%8E%9F%E7%90%86"><span class="toc-text">3.MyBatiså·¥ä½œåŸç†</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-MyBatis%E6%A0%B8%E5%BF%83%E7%B1%BB"><span class="toc-text">1.MyBatisæ ¸å¿ƒç±»</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1-Configuration"><span class="toc-text">1.Configuration</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-SqlSessionFactory"><span class="toc-text">2.SqlSessionFactory</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-SqlSession"><span class="toc-text">3.SqlSession</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#SqlSession%E7%9A%84%E5%AE%9E%E7%8E%B0%E7%B1%BB"><span class="toc-text">SqlSessionçš„å®ç°ç±»</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link" href="#1-DefaultSqlSession"><span class="toc-text">1.DefaultSqlSession</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#2-SqlSessionManager"><span class="toc-text">2.SqlSessionManager</span></a></li></ol></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4-Executor"><span class="toc-text">4.Executor</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#5-MappedStatement"><span class="toc-text">5.MappedStatement</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-MyBatis%E5%B7%A5%E4%BD%9C%E6%B5%81%E7%A8%8B"><span class="toc-text">2.MyBatiså·¥ä½œæµç¨‹</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4"><span class="toc-text">4.Mybatiså…¥é—¨</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-SQL-1"><span class="toc-text">1.SQL</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-cn-edu-example-mybatis-mapper"><span class="toc-text">2.cn.edu.example.mybatis.mapper</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-cn-edu-example-mybatis-po"><span class="toc-text">3.cn.edu.example.mybatis.po</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-cn-edu-example-mybatis-test"><span class="toc-text">3.cn.edu.example.mybatis.test</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-mybatis-config-xml"><span class="toc-text">4.mybatis-config.xml</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-%E8%BE%93%E5%87%BA"><span class="toc-text">5.è¾“å‡º</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#10-Mybatis%E9%85%8D%E7%BD%AE"><span class="toc-text">10 Mybatisé…ç½®</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#1-1-%E5%B1%9E%E6%80%A7-properties"><span class="toc-text">1.1 å±æ€§(properties)</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#1-2-%E8%AE%BE%E7%BD%AE-settings"><span class="toc-text">1.2 è®¾ç½®(settings)</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-%E7%B1%BB%E5%9E%8B%E5%88%AB%E5%90%8D-typeAiases"><span class="toc-text">3.ç±»å‹åˆ«å(typeAiases)</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4-%E7%8E%AF%E5%A2%83%E9%85%8D%E7%BD%AE-environments"><span class="toc-text">4.ç¯å¢ƒé…ç½®(environments)</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-%E5%85%83%E7%B4%A0%E5%AE%9A%E4%B9%89%E9%85%8D%E7%BD%AE%E7%8E%AF%E5%A2%83"><span class="toc-text">1.å…ƒç´ å®šä¹‰é…ç½®ç¯å¢ƒ</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1-%E4%BA%8B%E5%8A%A1%E7%AE%A1%E7%90%86%E5%99%A8%E5%92%8C%E6%95%B0%E6%8D%AE%E6%BA%90-%E4%BB%8B%E7%BB%8D"><span class="toc-text">1.äº‹åŠ¡ç®¡ç†å™¨å’Œæ•°æ®æº ä»‹ç»</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#1%E4%BA%8B%E5%8A%A1%E7%AE%A1%E7%90%86%E5%99%A8-type-x3D-%E2%80%9D-JDBC-x2F-MANAGED-%E2%80%9C"><span class="toc-text">1äº‹åŠ¡ç®¡ç†å™¨ type&#x3D;â€ [JDBC &#x2F; MANAGED] â€œ</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#2-%E6%95%B0%E6%8D%AE%E6%BA%90-type-x3D-%E2%80%9C-UNPOOLED-x2F-POOLED-x2F-JND-%E2%80%9C"><span class="toc-text">2.æ•°æ®æº type&#x3D; â€œ [UNPOOLED &#x2F; POOLED &#x2F; JND ] â€œ</span></a></li></ol></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#5-%E6%98%A0%E5%B0%84%E5%99%A8-mappers"><span class="toc-text">5.æ˜ å°„å™¨(mappers)</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#6-mapper-xml-%E5%B8%B8%E7%94%A8SQL%E6%A0%87%E7%AD%BE"><span class="toc-text">6. mapper.xml å¸¸ç”¨SQLæ ‡ç­¾</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1-%E9%9C%80%E8%A6%81%E9%85%8D%E7%BD%AE%E7%9A%84%E5%B1%9E%E6%80%A7"><span class="toc-text">1.éœ€è¦é…ç½®çš„å±æ€§</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-if-%E5%92%8C-where-%E6%A0%87%E7%AD%BE"><span class="toc-text">1.if å’Œ where æ ‡ç­¾</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-set-%E6%A0%87%E7%AD%BE"><span class="toc-text">2.set æ ‡ç­¾</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-trim-%E6%A0%87%E7%AD%BE"><span class="toc-text">3.trim æ ‡ç­¾</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-chooseWhenOtherwise-%E6%A0%87%E7%AD%BE"><span class="toc-text">4.chooseWhenOtherwise æ ‡ç­¾</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-foreach-%E6%A0%87%E7%AD%BE"><span class="toc-text">5.foreach æ ‡ç­¾</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6-bind-%E6%A0%87%E7%AD%BE"><span class="toc-text">6.bind æ ‡ç­¾</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#7-sql-%E7%89%87%E6%AE%B5%E6%A0%87%E7%AD%BE"><span class="toc-text">7.sql ç‰‡æ®µæ ‡ç­¾</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#7-Mybatis-%E5%A4%9A%E8%A1%A8%E6%9F%A5%E8%AF%A2"><span class="toc-text">7. Mybatis å¤šè¡¨æŸ¥è¯¢</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-%E4%B8%80%E5%AF%B9%E4%B8%80"><span class="toc-text">1. ä¸€å¯¹ä¸€</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-%E4%B8%80%E5%AF%B9%E5%A4%9A"><span class="toc-text">2. ä¸€å¯¹å¤š</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-%E5%A4%9A%E5%AF%B9%E5%A4%9A"><span class="toc-text">3. å¤šå¯¹å¤š</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E9%9D%A2%E8%AF%95%E9%A2%98"><span class="toc-text">é¢è¯•é¢˜</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#Mybatis"><span class="toc-text">Mybatis</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Spring-%E2%80%94%E9%BB%91%E9%A9%AC%E7%A8%8B%E5%BA%8F%E5%91%98"><span class="toc-text">Spring â€”é»‘é©¬ç¨‹åºå‘˜</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#Spring"><span class="toc-text">Spring</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%9F%BA%E4%BA%8Exml%E7%9A%84Spring%E5%BA%94%E7%94%A8"><span class="toc-text">åŸºäºxmlçš„Springåº”ç”¨</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#SpringBean-%E7%9A%84%E9%85%8D%E7%BD%AE%E8%AF%A6%E8%A7%A3"><span class="toc-text">SpringBean çš„é…ç½®è¯¦è§£</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#SpringBean%E9%85%8D%E7%BD%AE"><span class="toc-text">SpringBeané…ç½®</span></a></li></ol></li></ol></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>æœ€æ–°æ–‡ç« </span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/2024/03/15/Sqlite/" title="SqliteåŸºç¡€è¯­æ³•"><img src="/img/19.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="SqliteåŸºç¡€è¯­æ³•"/></a><div class="content"><a class="title" href="/2024/03/15/Sqlite/" title="SqliteåŸºç¡€è¯­æ³•">SqliteåŸºç¡€è¯­æ³•</a><time datetime="2024-03-14T23:40:46.000Z" title="å‘è¡¨äº 2024-03-15 07:40:46">2024-03-15</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2023/10/10/ErrorReport/" title="ErrorReport"><img src="/img/18.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="ErrorReport"/></a><div class="content"><a class="title" href="/2023/10/10/ErrorReport/" title="ErrorReport">ErrorReport</a><time datetime="2023-10-10T11:00:22.000Z" title="å‘è¡¨äº 2023-10-10 19:00:22">2023-10-10</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2023/08/23/RequirementSpecification/" title="RequirementSpecification"><img src="/img/13.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="RequirementSpecification"/></a><div class="content"><a class="title" href="/2023/08/23/RequirementSpecification/" title="RequirementSpecification">RequirementSpecification</a><time datetime="2023-08-23T04:55:04.000Z" title="å‘è¡¨äº 2023-08-23 12:55:04">2023-08-23</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2023/08/22/MybatisPlus/" title="MybatisPlus"><img src="/img/23.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="MybatisPlus"/></a><div class="content"><a class="title" href="/2023/08/22/MybatisPlus/" title="MybatisPlus">MybatisPlus</a><time datetime="2023-08-22T13:35:35.000Z" title="å‘è¡¨äº 2023-08-22 21:35:35">2023-08-22</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2023/08/19/Maven/" title="MavenåŸºç¡€"><img src="/img/27.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="MavenåŸºç¡€"/></a><div class="content"><a class="title" href="/2023/08/19/Maven/" title="MavenåŸºç¡€">MavenåŸºç¡€</a><time datetime="2023-08-19T13:49:08.000Z" title="å‘è¡¨äº 2023-08-19 21:49:08">2023-08-19</time></div></div></div></div></div></div></main><footer id="footer"><div id="footer-wrap"><div class="copyright">&copy;2022 - 2024 By Wabi-Sabifag</div><div class="framework-info"><span>æ¡†æ¶ </span><a target="_blank" rel="noopener external nofollow noreferrer" href="https://hexo.io">Hexo</a><span class="footer-separator">|</span><span>ä¸»é¢˜ </span><a href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a></div><div class="footer_custom_text"><div><a onclick="window.open('https://bilibili.com')"><img src=''>æ¹–å…¬ç½‘å®‰å¤‡ </a></div> <div>å½“å†…å¿ƒä¸€ç‰‡è™šæ— çš„æ—¶åˆ»ï¼Œæˆ‘å°†å¿ƒè„åŸ‹å…¥è¿™æ— å°½çš„åœŸå£¤</div>  <div>ç†æƒ³ä¸»ä¹‰ ç°å®ä¸»ä¹‰ å®ç”¨ä¸»ä¹‰</div></div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="é˜…è¯»æ¨¡å¼"><i class="fas fa-book-open"></i></button><button id="darkmode" type="button" title="æµ…è‰²å’Œæ·±è‰²æ¨¡å¼è½¬æ¢"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="å•æ å’ŒåŒæ åˆ‡æ¢"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside_config" type="button" title="è®¾ç½®"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="ç›®å½•"><i class="fas fa-list-ul"></i></button><button id="chat_btn" type="button" title="èŠå¤©"><i class="fas fa-sms"></i></button><button id="go-up" type="button" title="å›åˆ°é¡¶éƒ¨"><i class="fas fa-arrow-up"></i></button></div></div><div id="local-search"><div class="search-dialog"><nav class="search-nav"><span class="search-dialog-title">æœç´¢</span><span id="loading-status"></span><button class="search-close-button"><i class="fas fa-times"></i></button></nav><div class="is-center" id="loading-database"><i class="fas fa-spinner fa-pulse"></i><span>  æ•°æ®åº“åŠ è½½ä¸­</span></div><div class="search-wrap"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="æœç´¢æ–‡ç« " type="text"/></div></div><hr/><div id="local-search-results"></div></div></div><div id="search-mask"></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox.umd.min.js"></script><script src="https://cdn.jsdelivr.net/npm/instant.page/instantpage.min.js" type="module"></script><script>function panguFn () {
  if (typeof pangu === 'object') pangu.autoSpacingPage()
  else {
    getScript('https://cdn.jsdelivr.net/npm/pangu/dist/browser/pangu.min.js')
      .then(() => {
        pangu.autoSpacingPage()
      })
  }
}

function panguInit () {
  if (false){
    GLOBAL_CONFIG_SITE.isPost && panguFn()
  } else {
    panguFn()
  }
}

document.addEventListener('DOMContentLoaded', panguInit)</script><script src="/js/search/local-search.js"></script><div class="js-pjax"></div><div class="aplayer no-destroy" data-id="60198" data-server="netease" date-type="playlist" data-fixed="true" data-autoplay="true"></div><link rel="stylesheet" href="css/style.css"><canvas class="fireworks" mobile="false"></canvas><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/dist/fireworks.min.js"></script><script defer="defer" id="fluttering_ribbon" mobile="true" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/dist/canvas-fluttering-ribbon.min.js"></script><script id="canvas_nest" defer="defer" color="0,0,255" opacity="0.7" zIndex="-1" count="99" mobile="false" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/dist/canvas-nest.min.js"></script><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/dist/activate-power-mode.min.js"></script><script>POWERMODE.colorful = true;
POWERMODE.shake = true;
POWERMODE.mobile = false;
document.body.addEventListener('input', POWERMODE);
</script><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/aplayer/dist/APlayer.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/aplayer/dist/APlayer.min.js"></script><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/metingjs/dist/Meting.min.js"></script><script src="https://cdn.jsdelivr.net/npm/pjax/pjax.min.js"></script><script>let pjaxSelectors = ["head > title","#config-diff","#body-wrap","#rightside-config-hide","#rightside-config-show",".js-pjax"]

var pjax = new Pjax({
  elements: 'a:not([target="_blank"])',
  selectors: pjaxSelectors,
  cacheBust: false,
  analytics: false,
  scrollRestoration: false
})

document.addEventListener('pjax:send', function () {

  // removeEventListener scroll 
  window.tocScrollFn && window.removeEventListener('scroll', window.tocScrollFn)
  window.scrollCollect && window.removeEventListener('scroll', scrollCollect)

  document.getElementById('rightside').style.cssText = "opacity: ''; transform: ''"
  
  if (window.aplayers) {
    for (let i = 0; i < window.aplayers.length; i++) {
      if (!window.aplayers[i].options.fixed) {
        window.aplayers[i].destroy()
      }
    }
  }

  typeof typed === 'object' && typed.destroy()

  //reset readmode
  const $bodyClassList = document.body.classList
  $bodyClassList.contains('read-mode') && $bodyClassList.remove('read-mode')

  typeof disqusjs === 'object' && disqusjs.destroy()
})

document.addEventListener('pjax:complete', function () {
  window.refreshFn()

  document.querySelectorAll('script[data-pjax]').forEach(item => {
    const newScript = document.createElement('script')
    const content = item.text || item.textContent || item.innerHTML || ""
    Array.from(item.attributes).forEach(attr => newScript.setAttribute(attr.name, attr.value))
    newScript.appendChild(document.createTextNode(content))
    item.parentNode.replaceChild(newScript, item)
  })

  GLOBAL_CONFIG.islazyload && window.lazyLoadInstance.update()

  typeof chatBtnFn === 'function' && chatBtnFn()
  typeof panguInit === 'function' && panguInit()

  // google analytics
  typeof gtag === 'function' && gtag('config', '', {'page_path': window.location.pathname});

  // baidu analytics
  typeof _hmt === 'object' && _hmt.push(['_trackPageview',window.location.pathname]);

  typeof loadMeting === 'function' && document.getElementsByClassName('aplayer').length && loadMeting()

  // prismjs
  typeof Prism === 'object' && Prism.highlightAll()
})

document.addEventListener('pjax:error', (e) => {
  if (e.request.status === 404) {
    pjax.loadUrl('/404.html')
  }
})</script></div></body></html>